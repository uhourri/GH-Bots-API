[
    {
        "id": "32897721580",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 8647634,
            "login": "Juanadelacuesta",
            "display_login": "Juanadelacuesta",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Juanadelacuesta",
            "avatar_url": "https://avatars.githubusercontent.com/u/8647634?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374464127",
                "pull_request_review_id": 1701608348,
                "id": 1374464127,
                "node_id": "PRRC_kwDOAi9Jds5R7Kh_",
                "diff_hunk": "@@ -71,7 +71,7 @@ type Config struct {\n \t// LogIncludeLocation dictates whether the logger includes file and line\n \t// information on each log line. This is useful for Nomad development and\n \t// debugging.\n-\tLogIncludeLocation bool `hcl:\"log_include_location\"`\n+\tLogIncludeLocation *bool `hcl:\"log_include_location\"`",
                "path": "command/agent/config.go",
                "commit_id": "272621785d1b92df0336dde9ba26ebea52d4a8a2",
                "original_commit_id": "272621785d1b92df0336dde9ba26ebea52d4a8a2",
                "user": {
                    "login": "Juanadelacuesta",
                    "id": 8647634,
                    "node_id": "MDQ6VXNlcjg2NDc2MzQ=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/8647634?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Juanadelacuesta",
                    "html_url": "https://github.com/Juanadelacuesta",
                    "followers_url": "https://api.github.com/users/Juanadelacuesta/followers",
                    "following_url": "https://api.github.com/users/Juanadelacuesta/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Juanadelacuesta/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Juanadelacuesta/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Juanadelacuesta/subscriptions",
                    "organizations_url": "https://api.github.com/users/Juanadelacuesta/orgs",
                    "repos_url": "https://api.github.com/users/Juanadelacuesta/repos",
                    "events_url": "https://api.github.com/users/Juanadelacuesta/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Juanadelacuesta/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Why did you change it to a pointer?",
                "created_at": "2023-10-27T11:54:06Z",
                "updated_at": "2023-10-27T11:54:07Z",
                "html_url": "https://github.com/hashicorp/nomad/pull/18874#discussion_r1374464127",
                "pull_request_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18874",
                "author_association": "MEMBER",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374464127"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18874#discussion_r1374464127"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18874"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374464127/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": null,
                "original_start_line": null,
                "start_side": null,
                "line": 74,
                "original_line": 74,
                "side": "RIGHT",
                "original_position": 5,
                "position": 5,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18874",
                "id": 1574661944,
                "node_id": "PR_kwDOAi9Jds5d2284",
                "html_url": "https://github.com/hashicorp/nomad/pull/18874",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18874.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18874.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18874",
                "number": 18874,
                "state": "open",
                "locked": false,
                "title": "agent: enable location logs by default in dev mode.",
                "user": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "created_at": "2023-10-26T11:44:46Z",
                "updated_at": "2023-10-27T11:54:07Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "a60b4ec410edcd2ac5b1fb7e34339403eccca783",
                "assignee": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "jrasell",
                        "id": 2980562,
                        "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/jrasell",
                        "html_url": "https://github.com/jrasell",
                        "followers_url": "https://api.github.com/users/jrasell/followers",
                        "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                        "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                        "organizations_url": "https://api.github.com/users/jrasell/orgs",
                        "repos_url": "https://api.github.com/users/jrasell/repos",
                        "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/jrasell/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [
                    {
                        "login": "angrycub",
                        "id": 464492,
                        "node_id": "MDQ6VXNlcjQ2NDQ5Mg==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/464492?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/angrycub",
                        "html_url": "https://github.com/angrycub",
                        "followers_url": "https://api.github.com/users/angrycub/followers",
                        "following_url": "https://api.github.com/users/angrycub/following{/other_user}",
                        "gists_url": "https://api.github.com/users/angrycub/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/angrycub/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/angrycub/subscriptions",
                        "organizations_url": "https://api.github.com/users/angrycub/orgs",
                        "repos_url": "https://api.github.com/users/angrycub/repos",
                        "events_url": "https://api.github.com/users/angrycub/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/angrycub/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    {
                        "login": "pkazmierczak",
                        "id": 470696,
                        "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/pkazmierczak",
                        "html_url": "https://github.com/pkazmierczak",
                        "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                        "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                        "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                        "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                        "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                        "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 5723588925,
                        "node_id": "LA_kwDOAi9Jds8AAAABVScJPQ",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.6.x",
                        "name": "backport/1.6.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.6.x release line"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18874/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18874/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18874/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/272621785d1b92df0336dde9ba26ebea52d4a8a2",
                "head": {
                    "label": "hashicorp:f-enable-location-logs-default-dev-mode",
                    "ref": "f-enable-location-logs-default-dev-mode",
                    "sha": "272621785d1b92df0336dde9ba26ebea52d4a8a2",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T08:56:46Z",
                        "pushed_at": "2023-10-27T11:14:40Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14045,
                        "watchers_count": 14045,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1877,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1590,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1877,
                        "open_issues": 1590,
                        "watchers": 14045,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "7f62dec473d7a51210d57cdd8b531311c04b35c0",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T08:56:46Z",
                        "pushed_at": "2023-10-27T11:14:40Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14045,
                        "watchers_count": 14045,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1877,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1590,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1877,
                        "open_issues": 1590,
                        "watchers": 14045,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18874"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18874"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18874"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18874/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18874/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18874/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/272621785d1b92df0336dde9ba26ebea52d4a8a2"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T11:54:06Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32897721523",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 8647634,
            "login": "Juanadelacuesta",
            "display_login": "Juanadelacuesta",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Juanadelacuesta",
            "avatar_url": "https://avatars.githubusercontent.com/u/8647634?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1701608348,
                "node_id": "PRR_kwDOAi9Jds5lbHuc",
                "user": {
                    "login": "Juanadelacuesta",
                    "id": 8647634,
                    "node_id": "MDQ6VXNlcjg2NDc2MzQ=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/8647634?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Juanadelacuesta",
                    "html_url": "https://github.com/Juanadelacuesta",
                    "followers_url": "https://api.github.com/users/Juanadelacuesta/followers",
                    "following_url": "https://api.github.com/users/Juanadelacuesta/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Juanadelacuesta/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Juanadelacuesta/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Juanadelacuesta/subscriptions",
                    "organizations_url": "https://api.github.com/users/Juanadelacuesta/orgs",
                    "repos_url": "https://api.github.com/users/Juanadelacuesta/repos",
                    "events_url": "https://api.github.com/users/Juanadelacuesta/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Juanadelacuesta/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "commit_id": "272621785d1b92df0336dde9ba26ebea52d4a8a2",
                "submitted_at": "2023-10-27T11:54:06Z",
                "state": "commented",
                "html_url": "https://github.com/hashicorp/nomad/pull/18874#pullrequestreview-1701608348",
                "pull_request_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18874",
                "author_association": "MEMBER",
                "_links": {
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18874#pullrequestreview-1701608348"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18874"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18874",
                "id": 1574661944,
                "node_id": "PR_kwDOAi9Jds5d2284",
                "html_url": "https://github.com/hashicorp/nomad/pull/18874",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18874.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18874.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18874",
                "number": 18874,
                "state": "open",
                "locked": false,
                "title": "agent: enable location logs by default in dev mode.",
                "user": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "created_at": "2023-10-26T11:44:46Z",
                "updated_at": "2023-10-27T11:54:07Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "a60b4ec410edcd2ac5b1fb7e34339403eccca783",
                "assignee": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "jrasell",
                        "id": 2980562,
                        "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/jrasell",
                        "html_url": "https://github.com/jrasell",
                        "followers_url": "https://api.github.com/users/jrasell/followers",
                        "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                        "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                        "organizations_url": "https://api.github.com/users/jrasell/orgs",
                        "repos_url": "https://api.github.com/users/jrasell/repos",
                        "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/jrasell/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [
                    {
                        "login": "angrycub",
                        "id": 464492,
                        "node_id": "MDQ6VXNlcjQ2NDQ5Mg==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/464492?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/angrycub",
                        "html_url": "https://github.com/angrycub",
                        "followers_url": "https://api.github.com/users/angrycub/followers",
                        "following_url": "https://api.github.com/users/angrycub/following{/other_user}",
                        "gists_url": "https://api.github.com/users/angrycub/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/angrycub/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/angrycub/subscriptions",
                        "organizations_url": "https://api.github.com/users/angrycub/orgs",
                        "repos_url": "https://api.github.com/users/angrycub/repos",
                        "events_url": "https://api.github.com/users/angrycub/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/angrycub/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    {
                        "login": "pkazmierczak",
                        "id": 470696,
                        "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/pkazmierczak",
                        "html_url": "https://github.com/pkazmierczak",
                        "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                        "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                        "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                        "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                        "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                        "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 5723588925,
                        "node_id": "LA_kwDOAi9Jds8AAAABVScJPQ",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.6.x",
                        "name": "backport/1.6.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.6.x release line"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18874/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18874/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18874/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/272621785d1b92df0336dde9ba26ebea52d4a8a2",
                "head": {
                    "label": "hashicorp:f-enable-location-logs-default-dev-mode",
                    "ref": "f-enable-location-logs-default-dev-mode",
                    "sha": "272621785d1b92df0336dde9ba26ebea52d4a8a2",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T08:56:46Z",
                        "pushed_at": "2023-10-27T11:14:40Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14045,
                        "watchers_count": 14045,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1877,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1590,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1877,
                        "open_issues": 1590,
                        "watchers": 14045,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "7f62dec473d7a51210d57cdd8b531311c04b35c0",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T08:56:46Z",
                        "pushed_at": "2023-10-27T11:14:40Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14045,
                        "watchers_count": 14045,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1877,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1590,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1877,
                        "open_issues": 1590,
                        "watchers": 14045,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18874"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18874"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18874"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18874/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18874/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18874/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/272621785d1b92df0336dde9ba26ebea52d4a8a2"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T11:54:07Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32896783123",
        "type": "DeleteEvent",
        "actor": {
            "id": 8647634,
            "login": "Juanadelacuesta",
            "display_login": "Juanadelacuesta",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Juanadelacuesta",
            "avatar_url": "https://avatars.githubusercontent.com/u/8647634?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "ref": "b-gh-16515",
            "ref_type": "branch",
            "pusher_type": "user"
        },
        "public": true,
        "created_at": "2023-10-27T11:14:45Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32896781760",
        "type": "IssuesEvent",
        "actor": {
            "id": 8647634,
            "login": "Juanadelacuesta",
            "display_login": "Juanadelacuesta",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Juanadelacuesta",
            "avatar_url": "https://avatars.githubusercontent.com/u/8647634?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "closed",
            "issue": {
                "url": "https://api.github.com/repos/hashicorp/nomad/issues/16515",
                "repository_url": "https://api.github.com/repos/hashicorp/nomad",
                "labels_url": "https://api.github.com/repos/hashicorp/nomad/issues/16515/labels{/name}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/16515/comments",
                "events_url": "https://api.github.com/repos/hashicorp/nomad/issues/16515/events",
                "html_url": "https://github.com/hashicorp/nomad/issues/16515",
                "id": 1626731333,
                "node_id": "I_kwDOAi9Jds5g9fNF",
                "number": 16515,
                "title": "Max_client_disconnect ignores no-reschedule policy.",
                "user": {
                    "login": "stswidwinski",
                    "id": 17051700,
                    "node_id": "MDQ6VXNlcjE3MDUxNzAw",
                    "avatar_url": "https://avatars.githubusercontent.com/u/17051700?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/stswidwinski",
                    "html_url": "https://github.com/stswidwinski",
                    "followers_url": "https://api.github.com/users/stswidwinski/followers",
                    "following_url": "https://api.github.com/users/stswidwinski/following{/other_user}",
                    "gists_url": "https://api.github.com/users/stswidwinski/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/stswidwinski/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/stswidwinski/subscriptions",
                    "organizations_url": "https://api.github.com/users/stswidwinski/orgs",
                    "repos_url": "https://api.github.com/users/stswidwinski/repos",
                    "events_url": "https://api.github.com/users/stswidwinski/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/stswidwinski/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 218895783,
                        "node_id": "MDU6TGFiZWwyMTg4OTU3ODM=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/type/bug",
                        "name": "type/bug",
                        "color": "f7c6c7",
                        "default": false,
                        "description": ""
                    },
                    {
                        "id": 273201424,
                        "node_id": "MDU6TGFiZWwyNzMyMDE0MjQ=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/scheduling",
                        "name": "theme/scheduling",
                        "color": "B722E4",
                        "default": false,
                        "description": ""
                    },
                    {
                        "id": 2297653847,
                        "node_id": "MDU6TGFiZWwyMjk3NjUzODQ3",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/stage/accepted",
                        "name": "stage/accepted",
                        "color": "c2e0c6",
                        "default": false,
                        "description": "Confirmed, and intend to work on. No timeline committment though."
                    },
                    {
                        "id": 2498499834,
                        "node_id": "MDU6TGFiZWwyNDk4NDk5ODM0",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/hcc/cst",
                        "name": "hcc/cst",
                        "color": "bfd4f2",
                        "default": false,
                        "description": "Admin - internal"
                    },
                    {
                        "id": 3663040235,
                        "node_id": "LA_kwDOAi9Jds7aVY7r",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/edge",
                        "name": "theme/edge",
                        "color": "D7416D",
                        "default": false,
                        "description": ""
                    }
                ],
                "state": "closed",
                "locked": false,
                "assignee": {
                    "login": "Juanadelacuesta",
                    "id": 8647634,
                    "node_id": "MDQ6VXNlcjg2NDc2MzQ=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/8647634?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Juanadelacuesta",
                    "html_url": "https://github.com/Juanadelacuesta",
                    "followers_url": "https://api.github.com/users/Juanadelacuesta/followers",
                    "following_url": "https://api.github.com/users/Juanadelacuesta/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Juanadelacuesta/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Juanadelacuesta/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Juanadelacuesta/subscriptions",
                    "organizations_url": "https://api.github.com/users/Juanadelacuesta/orgs",
                    "repos_url": "https://api.github.com/users/Juanadelacuesta/repos",
                    "events_url": "https://api.github.com/users/Juanadelacuesta/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Juanadelacuesta/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "Juanadelacuesta",
                        "id": 8647634,
                        "node_id": "MDQ6VXNlcjg2NDc2MzQ=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/8647634?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/Juanadelacuesta",
                        "html_url": "https://github.com/Juanadelacuesta",
                        "followers_url": "https://api.github.com/users/Juanadelacuesta/followers",
                        "following_url": "https://api.github.com/users/Juanadelacuesta/following{/other_user}",
                        "gists_url": "https://api.github.com/users/Juanadelacuesta/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/Juanadelacuesta/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/Juanadelacuesta/subscriptions",
                        "organizations_url": "https://api.github.com/users/Juanadelacuesta/orgs",
                        "repos_url": "https://api.github.com/users/Juanadelacuesta/repos",
                        "events_url": "https://api.github.com/users/Juanadelacuesta/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/Juanadelacuesta/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "milestone": null,
                "comments": 4,
                "created_at": "2023-03-16T05:10:46Z",
                "updated_at": "2023-10-27T11:14:41Z",
                "closed_at": "2023-10-27T11:14:41Z",
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "body": "## Advertised contract.\r\n\r\nThe advertised contract is as follows:\r\n\r\n> These allocations may continue to run on the disconnected client. Replacement allocations will be scheduled according to the allocations' reschedule policy until the disconnected client reconnects. Once a disconnected client reconnects, Nomad will compare the \"unknown\" allocations with their replacements and keep the one with the best node score. If the\u00a0max_client_disconnect\u00a0duration expires before the client reconnects, the allocations will be marked \"lost\". Clients that contain \"unknown\" allocations will transition to \"disconnected\" rather than \"down\" until the last\u00a0max_client_disconnect\u00a0duration has expired.\r\n\r\nAs described here: https://developer.hashicorp.com/nomad/docs/job-specification/group#max-client-disconnect.\r\n\r\nHowever, we have observed that this contract is simply not obeyed and workloads are restarted immediately at the time of node becoming unavailable. This is due to the fact that the logic which handles evaluations for `node-updated` will cause placement of allocations which are *not* related to those which are \"lost\" (for the disconnected node).\r\n\r\n## Root cause.\r\n\r\nOn node state update (which occurs when the node transitions from ready\u00a0 to disconnected ):\r\n\r\nhttps://github.com/hashicorp/nomad/blob/v1.5.1/nomad/node_endpoint.go#L479\r\n\r\nNomad will issue an evaluation:\r\n\r\nhttps://github.com/hashicorp/nomad/blob/v1.5.1/nomad/node_endpoint.go#L577-L587\r\n\r\nhttps://github.com/hashicorp/nomad/blob/v1.5.1/nomad/node_endpoint.go#L661-L667\r\n\r\nThis evaluation will add evaluations per-job as described here:\r\n\r\nhttps://github.com/hashicorp/nomad/blob/v1.5.1/nomad/node_endpoint.go#L1593-L1595\r\n\r\nNow, the evaluation computation is where the bug lives. The computation will go through the regular allocation reconciler here:\r\n\r\nhttps://github.com/hashicorp/nomad/blob/v1.5.1/scheduler/generic_sched.go#L385\r\n\r\nAnd eventually to computing the allocations for placement within computeDeploymentComplete\u00a0 and computeGroup:\r\n\r\nhttps://github.com/hashicorp/nomad/blob/v1.5.1/scheduler/reconcile.go#L434-L436\r\n\r\nWhen we filter for disconnecting nodes we ignore the returned values of untainted . This is the crux of the bug since later on when we compute the placement of allocations we will get the following variables within:\r\n\r\nhttps://github.com/hashicorp/nomad/blob/v1.5.1/scheduler/reconcile.go#L502\r\n\r\n```\r\n(dlv) print untainted\r\ngithub.com/hashicorp/nomad/scheduler.allocSet []\r\n(dlv) print migrate\r\ngithub.com/hashicorp/nomad/scheduler.allocSet []\r\n(dlv) print reschedule\r\ngithub.com/hashicorp/nomad/scheduler.allocSet []\r\n(dlv) print lost\r\ngithub.com/hashicorp/nomad/scheduler.allocSet []\r\n(dlv) print reconnecting\r\ngithub.com/hashicorp/nomad/scheduler.allocSet []\r\n```\r\n\r\nThis will lead to the following code adding allocations to ensure that we have at least Group.count\u00a0 number of allocations:\r\n\r\nhttps://github.com/hashicorp/nomad/blob/v1.5.1/scheduler/reconcile.go#L752-L760\r\n\r\nSo this is what\u00a0adds allocations when there should be no allocations added. Humorously, much later we actually also schedule an evaluation for later to handle the disconnecting\u00a0 state in relationship with the disconnected\u00a0 clients:\r\n\r\nhttps://github.com/hashicorp/nomad/blob/v1.5.1/scheduler/generic_sched.go#L314-L324\r\n\r\n## Repro.\r\n\r\nWe start up a cluster with 1 server and 2 clients:\r\n```\r\n# Show server config\r\n$ cat ./server.conf\r\ndata_dir = \"/tmp/nomad/server\"\r\n\r\nadvertise {\r\n  http = \"127.0.0.1\"\r\n  rpc = \"127.0.0.1\"\r\n  serf = \"127.0.0.1\"\r\n}\r\n\r\nserver {\r\n  enabled = true\r\n  bootstrap_expect = 1\r\n}\r\n\r\n# Start server\r\n./nomad agent -config server.conf\r\n\r\n\r\n# Show first client config\r\n$ cat ./client-1.conf \r\ndata_dir = \"/tmp/nomad/client-1\"\r\nlog_level = \"debug\"\r\n\r\nadvertise {\r\n  http = \"127.0.0.1\"\r\n  rpc = \"127.0.0.1\"\r\n  serf = \"127.0.0.1\"\r\n}\r\n\r\nports {\r\n  http = \"9876\"\r\n  rpc = \"9875\"\r\n  serf = \"9874\"\r\n}\r\n\r\nclient {\r\n  enabled = true\r\n  servers = [\"127.0.0.1\"]\r\n  gc_max_allocs = 1\r\n}\r\n\r\nplugin \"raw_exec\" {\r\n  config {\r\n    enabled = true\r\n  }\r\n}\r\n\r\n# Start first client \r\n$ ./nomad agent -config client-1.conf\r\n\r\n\r\n# Show second client config\r\n$ cat ./client-2.conf \r\ndata_dir = \"/tmp/nomad/client-2\"\r\nlog_level = \"debug\"\r\n\r\nadvertise {\r\n  http = \"127.0.0.1\"\r\n  rpc = \"127.0.0.1\"\r\n  serf = \"127.0.0.1\"\r\n}\r\n\r\nports {\r\n  http = \"8876\"\r\n  rpc = \"8875\"\r\n  serf = \"8874\"\r\n}\r\n\r\nclient {\r\n  enabled = true\r\n  servers = [\"127.0.0.1\"]\r\n  gc_max_allocs = 1\r\n}\r\n\r\nplugin \"raw_exec\" {\r\n  config {\r\n    enabled = true\r\n  }\r\n}\r\n\r\n$ Start second client\r\n$ ./nomad agent -config client-2.conf\r\n```\r\n\r\nWe submit a job with max_client_disconnect\u00a0 set and the reschedule policy being such that:\r\n\r\n1. The delay on restart is huge\r\n2. We should not allow any reschedules in the first place\r\n\r\n```\r\n# Show the job spec\r\n$ cat job.hcl \r\njob \"example\" {\r\n  datacenters = [\"dc1\"]\r\n  type = \"batch\"\r\n\r\n  group \"test-group\" {\r\n    task \"test-task\" {\r\n      driver = \"raw_exec\"\r\n\r\n      config {\r\n\tcommand = \"/usr/bin/sleep\"\r\n        args = [ \"inf\" ]\r\n      }\r\n    }\r\n\r\n    reschedule {\r\n      attempts  = 0\r\n      unlimited = false\r\n      delay = \"24h\"\r\n    }\r\n\r\n    max_client_disconnect = \"24h\"\r\n  }\r\n}\r\n\r\n# Submit the job spec \r\n$ ./nomad job run job.hcl\r\n==> 2023-03-15T22:14:20-04:00: Monitoring evaluation \"d8b6f482\"\r\n    2023-03-15T22:14:20-04:00: Evaluation triggered by job \"example\"\r\n    2023-03-15T22:14:21-04:00: Allocation \"f06d1eef\" created: node \"10986d2d\", group \"test-group\"\r\n    2023-03-15T22:14:21-04:00: Evaluation status changed: \"pending\" -> \"complete\"\r\n==> 2023-03-15T22:14:21-04:00: Evaluation \"d8b6f482\" finished with status \"complete\"\r\n\r\n# Inspect the status\r\n$ ./nomad job status example\r\nID            = example\r\nName          = example\r\nSubmit Date   = 2023-03-15T22:14:20-04:00\r\nType          = batch\r\nPriority      = 50\r\nDatacenters   = dc1\r\nNamespace     = default\r\nStatus        = running\r\nPeriodic      = false\r\nParameterized = false\r\n\r\nSummary\r\nTask Group  Queued  Starting  Running  Failed  Complete  Lost  Unknown\r\ntest-group  0       0         1        0       0         0     0\r\n\r\nAllocations\r\nID        Node ID   Task Group  Version  Desired  Status   Created  Modified\r\nf06d1eef  10986d2d  test-group  0        run      running  7s ago   7s ago\r\n```\r\n\r\nKill the client which the allocation is running on. It does not matter whether the shutdown is triggered gracefully via SIGINT, SIGTERM or if the shutdown is triggered forcefully via SIGKILL. Then wait for the heartbeat timeouts to expire. Inspect the job and evaluations:\r\n\r\n```\r\n# Kill first client...\r\n\r\n# Wait for some time for the scheduler to see the changes in state.\r\n#\r\n# NOTE: We get 1 running allocation which is on a new node. We also get 1 allocation that is unknown\r\n$ ./nomad job status example\r\nID            = example                          \r\nName          = example                          \r\nSubmit Date   = 2023-03-15T22:14:20-04:00       \r\nType          = batch                                                                                                                              \r\nPriority      = 50                                            \r\nDatacenters   = dc1                                   \r\nNamespace     = default                         \r\nStatus        = running                                                 \r\nPeriodic      = false                  \r\nParameterized = false                       \r\n                                                                         \r\nSummary                                                         \r\nTask Group  Queued  Starting  Running  Failed  Complete  Lost  Unknown\r\ntest-group  0       0         1        0       0         0     1\r\n                                                                         \r\nAllocations                                         \r\nID        Node ID   Task Group  Version  Desired  Status   Created    Modified\r\n2554d770  96696c3a  test-group  0        run      running  16s ago    16s ago\r\nf06d1eef  10986d2d  test-group  0        run      unknown  1m45s ago  16s ago\r\n \r\n# Inspect the evaluations that have happened.\r\n$ ./nomad eval list\r\nID        Priority  Triggered By            Job ID   Namespace  Node ID   Status    Placement Failures\r\n572f76df  50        max-disconnect-timeout  example  default    <none>    pending   false\r\n1d132b1d  50        node-update             example  default    10986d2d  complete  false\r\nd8b6f482  50        job-register            example  default    <none>    complete  false\r\n\r\n$ ./nomad eval status 572f76df\r\nID                 = 572f76df\r\nCreate Time        = 41s ago\r\nModify Time        = 41s ago\r\nStatus             = pending\r\nStatus Description = created for delayed disconnect timeout\r\nType               = batch\r\nTriggeredBy        = max-disconnect-timeout\r\nJob ID             = example\r\nNamespace          = default\r\nPriority           = 50\r\nPlacement Failures = false\r\nWait Until         = 2023-03-16T23:15:08-04:00\r\n\r\n$ ./nomad eval status 1d132b1d\r\nID                 = 1d132b1d\r\nCreate Time        = 46s ago\r\nModify Time        = 46s ago\r\nStatus             = complete\r\nStatus Description = complete\r\nType               = batch\r\nTriggeredBy        = node-update\r\nJob ID             = example\r\nNamespace          = default\r\nNode ID            = 10986d2d-29fd-1051-1af1-9d39cd078695\r\nPriority           = 50\r\nPlacement Failures = false\r\n ```\r\n\r\nSo there are two separate evaluations. One evaluation which correctly waits for max_client_disconnect\u00a0 and one which ignores it entirely. The latter causes a new allocation to be run defeating the purpose of reschedule stanza in combination with max_client_wait . This also is a direct contradiction with the contract as stated. The logs of Nomad that are relevant:\r\n\r\n```\r\n    2023-03-15T22:15:49.712-0400 [DEBUG] worker: dequeued evaluation: worker_id=dfecb445-132d-5d9b-6f4d-9a8fb128a0f7 eval_id=1d132b1d-b46c-f1da-f07e-35fab54be842 type=batch namespace=default job_id=example node_id=10986d2d-29fd-1051-1af1-9d39cd078695 triggered_by=node-update                   \r\n    2023-03-15T22:15:49.713-0400 [DEBUG] worker.batch_sched: reconciled current state with desired state: eval_id=1d132b1d-b46c-f1da-f07e-35fab54be842 job_id=example namespace=default worker_id=dfecb445-132d-5d9b-6f4d-9a8fb128a0f7                                                                \r\n  results=                                                                                                                                                                                                                                                                                            \r\n  | Total changes: (place 1) (destructive 0) (inplace 0) (stop 0) (disconnect 1) (reconnect 0)                                                                                                                                                                                                        \r\n  | Desired Changes for \"test-group\": (place 1) (inplace 0) (destructive 0) (stop 0) (migrate 0) (ignore 0) (canary 0)                                                                                                                                                                                \r\n                                                                                                                                                                                                                                                                                                      \r\n    2023-03-15T22:15:49.714-0400 [DEBUG] worker: created evaluation: worker_id=dfecb445-132d-5d9b-6f4d-9a8fb128a0f7 eval=\"<Eval \\\"572f76df-4777-da86-4980-8415eb6d5f06\\\" JobID: \\\"example\\\" Namespace: \\\"default\\\">\"                                                                                  \r\n    2023-03-15T22:15:49.714-0400 [DEBUG] worker.batch_sched: codefound reschedulable allocs, followup eval created: eval_id=1d132b1d-b46c-f1da-f07e-35fab54be842 job_id=example namespace=default worker_id=dfecb445-132d-5d9b-6f4d-9a8fb128a0f7 followup_eval_id=572f76df-4777-da86-4980-8415eb6d5f06    \r\n    2023-03-15T22:15:49.715-0400 [DEBUG] worker: submitted plan for evaluation: worker_id=dfecb445-132d-5d9b-6f4d-9a8fb128a0f7 eval_id=1d132b1d-b46c-f1da-f07e-35fab54be842                                                                                                                           \r\n    2023-03-15T22:15:49.715-0400 [DEBUG] worker.batch_sched: setting eval status: eval_id=1d132b1d-b46c-f1da-f07e-35fab54be842 job_id=example namespace=default worker_id=dfecb445-132d-5d9b-6f4d-9a8fb128a0f7 status=complete                                                                        \r\n    2023-03-15T22:15:49.716-0400 [DEBUG] worker: updated evaluation: worker_id=dfecb445-132d-5d9b-6f4d-9a8fb128a0f7 eval=\"<Eval \\\"1d132b1d-b46c-f1da-f07e-35fab54be842\\\" JobID: \\\"example\\\" Namespace: \\\"default\\\">\"                                                                                  \r\n    2023-03-15T22:15:49.716-0400 [DEBUG] worker: ack evaluation: worker_id=dfecb445-132d-5d9b-6f4d-9a8fb128a0f7 eval_id=1d132b1d-b46c-f1da-f07e-35fab54be842 type=batch namespace=default job_id=example node_id=10986d2d-29fd-1051-1af1-9d39cd078695 triggered_by=node-update \r\n```",
                "reactions": {
                    "url": "https://api.github.com/repos/hashicorp/nomad/issues/16515/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/hashicorp/nomad/issues/16515/timeline",
                "performed_via_github_app": null,
                "state_reason": "completed"
            }
        },
        "public": true,
        "created_at": "2023-10-27T11:14:42Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32896781757",
        "type": "PushEvent",
        "actor": {
            "id": 8647634,
            "login": "Juanadelacuesta",
            "display_login": "Juanadelacuesta",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Juanadelacuesta",
            "avatar_url": "https://avatars.githubusercontent.com/u/8647634?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "repository_id": 36653430,
            "push_id": 15590802891,
            "size": 1,
            "distinct_size": 1,
            "ref": "refs/heads/main",
            "head": "e8efe2d251bf3628f13c7eb3ce2422eb7e5b85f6",
            "before": "23665a56850f335d81dc976acdaac014aacb088a",
            "commits": [
                {
                    "sha": "e8efe2d251bf3628f13c7eb3ce2422eb7e5b85f6",
                    "author": {
                        "email": "juanita.delacuestamorales@hashicorp.com",
                        "name": "Juana De La Cuesta"
                    },
                    "message": "fix: handling non reschedule disconnecting and reconnecting allocs (#18701)\n\nThis PR fixes a long lived bug, where disconnecting allocations where never rescheduled by their policy but because the group count was short. The default reschedule time for services and batches is 30 and 5 seconds respectively, in order to properly reschedule disconnected allocs, they need to be able to be rescheduled for later, a path that was not handled before. This PR introduces a way to handle such allocations.",
                    "distinct": true,
                    "url": "https://api.github.com/repos/hashicorp/nomad/commits/e8efe2d251bf3628f13c7eb3ce2422eb7e5b85f6"
                }
            ]
        },
        "public": true,
        "created_at": "2023-10-27T11:14:42Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32896781377",
        "type": "PullRequestEvent",
        "actor": {
            "id": 8647634,
            "login": "Juanadelacuesta",
            "display_login": "Juanadelacuesta",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Juanadelacuesta",
            "avatar_url": "https://avatars.githubusercontent.com/u/8647634?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "closed",
            "number": 18701,
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18701",
                "id": 1547654772,
                "node_id": "PR_kwDOAi9Jds5cP1Z0",
                "html_url": "https://github.com/hashicorp/nomad/pull/18701",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18701.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18701.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18701",
                "number": 18701,
                "state": "closed",
                "locked": false,
                "title": "fix: handling non reschedule disconnecting and reconnecting allocs",
                "user": {
                    "login": "Juanadelacuesta",
                    "id": 8647634,
                    "node_id": "MDQ6VXNlcjg2NDc2MzQ=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/8647634?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Juanadelacuesta",
                    "html_url": "https://github.com/Juanadelacuesta",
                    "followers_url": "https://api.github.com/users/Juanadelacuesta/followers",
                    "following_url": "https://api.github.com/users/Juanadelacuesta/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Juanadelacuesta/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Juanadelacuesta/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Juanadelacuesta/subscriptions",
                    "organizations_url": "https://api.github.com/users/Juanadelacuesta/orgs",
                    "repos_url": "https://api.github.com/users/Juanadelacuesta/repos",
                    "events_url": "https://api.github.com/users/Juanadelacuesta/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Juanadelacuesta/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "This PR fixes  [Max_client_disconnect ignores no-reschedule policy](https://github.com/hashicorp/nomad/issues/16515)\r\n\r\n The bug had 2 root causes:\r\n\r\n- The code was written under the assumption that disconnecting allocs should always be rescheduled:\r\nhttps://github.com/hashicorp/nomad/blob/cecd9b04729e63839428cfa67fdc983ed2182481/scheduler/reconcile.go#L461\r\n\r\nAny disconnecting allocation that should not be rescheduled now, was ignored for the rest of the reconcile process and would always end up on a new placement, because it was not taken into consideration for the deployment final count.  \r\n\r\n- The logic to define if an allocation should be reschedule didn't take into account disconnecting allocations, they were \r\nnever set to be explicitly replaced, because according to the [`shouldFilter`](https://github.com/hashicorp/nomad/blob/cecd9b04729e63839428cfa67fdc983ed2182481/scheduler/reconcile_util.go#L428) logic, they are `untainted` and are ignored on line 396, and never make it to the `elegibleNow` selection.\r\n ```\r\n           isUntainted, ignore := shouldFilter(alloc, isBatch)\r\n\t\tif isUntainted && !isDisconnecting {\r\n\t\t\tuntainted[alloc.ID] = alloc\r\n\t\t}\r\n\t\tif isUntainted || ignore {\r\n\t\t\tcontinue\r\n\t\t}\r\n\r\n\t\t// Only failed allocs with desired state run get to this point\r\n\t\t// If the failed alloc is not eligible for rescheduling now we\r\n\t\t// add it to the untainted set. Disconnecting delay evals are\r\n\t\t// handled by allocReconciler.createTimeoutLaterEvals\r\n\t\teligibleNow, eligibleLater, rescheduleTime = updateByReschedulable(alloc, now, evalID, deployment, isDisconnecting)\r\n\t\tif !isDisconnecting && !eligibleNow {\r\n```\r\n[L396](https://github.com/hashicorp/nomad/blob/cecd9b04729e63839428cfa67fdc983ed2182481/scheduler/reconcile_util.go#L396)\r\nAlso on the `updateByReschedulable`, disonnecting allocs where never set to reschedule now:\r\n```\r\n\tif eligible && (alloc.FollowupEvalID == evalID || rescheduleTime.Sub(now) <= rescheduleWindowSize) {\r\n\t\trescheduleNow = true\r\n\t\treturn\r\n\t}\r\n```\r\n\r\n\r\nThis allocations would once again end up being replaced because the deployment count would be one short, not because it should be replaced and most definitely not taking into account its reschedule policy. \r\n\r\nOnce the previous problem was fixed and the correct reschedule policy was being taken into account, a new bug was visible: The `disconnecting` allocations don't have a fail time, so to calculate the next reschedule time, the alloc reconciler `now`  was used. The minimun delay for batch jobs is 5 sec and 30 sec for services, following the logic in the code, the next reschedule time ends up always being at least 5 sec from now, and the disconnecting allocations were always set  to `rescheduleLater`, but for disconnecting allocations, the `rescheduleLater` group was ignored, as shown previously on line 461 of the rescheduler.\r\n\r\nThe function `filterByRescheduleable` was modified to correctly process disconnecting allocation and the disconnecting untainted  and reconnect later allocations were added to the result to avoid unnecessary placement and correctly replace the `disconnecting` allocs using the reschedule policy.\r\n\r\nOnce the previous change was done, new evaluations were created with the new reschedule time to replace the `disconnecting` allocs, but by the time the evaluation was executed, the allocs don't qualify as disconnecting anymore  so a new restriction needed to be added in the `updateByReschedule` function for alloc that were not disconnecting and had not failed yet, the `unknown` allocs.\r\nIn order to avoid adding replacements for this allocs every time the reconciler run, a validation using the `followupEvalID` was added. \r\nWhen taking into account the reschedule policy, every `disconnecting` alloc generates 2 new evaluations: one for the next reschedule time, in order to place a replacement and a second one to set the alloc as lost once the `max_client_disconnect` times out. \r\nThe way the code is written, the disconnecting alloc would get updated with the evaluation ID of the second generated evaluation, making the `nextEvalID` useless to verify if the `unknown` alloc being rescheduled was in fact a replacement for an old one. A change to overwrite the  `nextEvalID` with the ID of the evaluation corresponding to the replacement was set in place. This change also made finding if an alloc was a replacement of an older one or not on reconnecting a lot easier. ",
                "created_at": "2023-10-09T11:18:40Z",
                "updated_at": "2023-10-27T11:14:40Z",
                "closed_at": "2023-10-27T11:14:39Z",
                "merged_at": "2023-10-27T11:14:39Z",
                "merge_commit_sha": "e8efe2d251bf3628f13c7eb3ce2422eb7e5b85f6",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [
                    {
                        "login": "schmichael",
                        "id": 113362,
                        "node_id": "MDQ6VXNlcjExMzM2Mg==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/113362?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/schmichael",
                        "html_url": "https://github.com/schmichael",
                        "followers_url": "https://api.github.com/users/schmichael/followers",
                        "following_url": "https://api.github.com/users/schmichael/following{/other_user}",
                        "gists_url": "https://api.github.com/users/schmichael/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/schmichael/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/schmichael/subscriptions",
                        "organizations_url": "https://api.github.com/users/schmichael/orgs",
                        "repos_url": "https://api.github.com/users/schmichael/repos",
                        "events_url": "https://api.github.com/users/schmichael/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/schmichael/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    {
                        "login": "lgfa29",
                        "id": 775380,
                        "node_id": "MDQ6VXNlcjc3NTM4MA==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/775380?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/lgfa29",
                        "html_url": "https://github.com/lgfa29",
                        "followers_url": "https://api.github.com/users/lgfa29/followers",
                        "following_url": "https://api.github.com/users/lgfa29/following{/other_user}",
                        "gists_url": "https://api.github.com/users/lgfa29/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/lgfa29/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/lgfa29/subscriptions",
                        "organizations_url": "https://api.github.com/users/lgfa29/orgs",
                        "repos_url": "https://api.github.com/users/lgfa29/repos",
                        "events_url": "https://api.github.com/users/lgfa29/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/lgfa29/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    {
                        "login": "jrasell",
                        "id": 2980562,
                        "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/jrasell",
                        "html_url": "https://github.com/jrasell",
                        "followers_url": "https://api.github.com/users/jrasell/followers",
                        "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                        "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                        "organizations_url": "https://api.github.com/users/jrasell/orgs",
                        "repos_url": "https://api.github.com/users/jrasell/repos",
                        "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/jrasell/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18701/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18701/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18701/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/67d9033b4d28967c5093235fd84fa6cef552c326",
                "head": {
                    "label": "hashicorp:b-gh-16515",
                    "ref": "b-gh-16515",
                    "sha": "67d9033b4d28967c5093235fd84fa6cef552c326",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T08:56:46Z",
                        "pushed_at": "2023-10-27T11:14:39Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14045,
                        "watchers_count": 14045,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1591,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1591,
                        "watchers": 14045,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "7f62dec473d7a51210d57cdd8b531311c04b35c0",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T08:56:46Z",
                        "pushed_at": "2023-10-27T11:14:39Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14045,
                        "watchers_count": 14045,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1591,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1591,
                        "watchers": 14045,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18701"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18701"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18701"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18701/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18701/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18701/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/67d9033b4d28967c5093235fd84fa6cef552c326"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null,
                "merged": true,
                "mergeable": null,
                "rebaseable": null,
                "mergeable_state": "unknown",
                "merged_by": {
                    "login": "Juanadelacuesta",
                    "id": 8647634,
                    "node_id": "MDQ6VXNlcjg2NDc2MzQ=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/8647634?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Juanadelacuesta",
                    "html_url": "https://github.com/Juanadelacuesta",
                    "followers_url": "https://api.github.com/users/Juanadelacuesta/followers",
                    "following_url": "https://api.github.com/users/Juanadelacuesta/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Juanadelacuesta/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Juanadelacuesta/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Juanadelacuesta/subscriptions",
                    "organizations_url": "https://api.github.com/users/Juanadelacuesta/orgs",
                    "repos_url": "https://api.github.com/users/Juanadelacuesta/repos",
                    "events_url": "https://api.github.com/users/Juanadelacuesta/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Juanadelacuesta/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "comments": 0,
                "review_comments": 1,
                "maintainer_can_modify": false,
                "commits": 27,
                "additions": 536,
                "deletions": 236,
                "changed_files": 7
            }
        },
        "public": true,
        "created_at": "2023-10-27T11:14:41Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32893762707",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 470696,
            "login": "pkazmierczak",
            "display_login": "pkazmierczak",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pkazmierczak",
            "avatar_url": "https://avatars.githubusercontent.com/u/470696?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374299874",
                "pull_request_review_id": 1701348453,
                "id": 1374299874,
                "node_id": "PRRC_kwDOAi9Jds5R6ibi",
                "diff_hunk": "@@ -0,0 +1,449 @@\n+// Copyright (c) HashiCorp, Inc.\n+// SPDX-License-Identifier: BUSL-1.1\n+\n+package command\n+\n+import (\n+\t_ \"embed\"\n+\t\"encoding/json\"\n+\t\"fmt\"\n+\t\"strings\"\n+\t\"time\"\n+\n+\t\"github.com/hashicorp/consul/api\"\n+\t\"github.com/mitchellh/cli\"\n+\t\"github.com/posener/complete\"\n+)\n+\n+// Ensure SetupConsulCommand satisfies the cli.Command interface.\n+var _ cli.Command = &SetupConsulCommand{}\n+\n+//go:embed asset/consul-wi-default-auth-method-config.json\n+var authConfigBody []byte\n+\n+//go:embed asset/consul-wi-default-policy.hcl\n+var policyBody []byte\n+\n+const (\n+\tauthMethodServices = \"nomad-services\"\n+\tauthMethodTasks    = \"nomad-tasks\"\n+\troleTasks          = \"role-nomad-tasks\"\n+\tpolicyName         = \"policy-nomad-tasks\"\n+\tdefaultTTL         = 8 * time.Hour\n+\taud                = \"consul.io\"\n+)\n+\n+type SetupConsulCommand struct {\n+\tMeta\n+\n+\t// client is the Consul API client shared by all functions in the command to\n+\t// reuse the same connection.\n+\tclient *api.Client\n+\n+\tjwksURL string\n+\n+\t// if set, answers \"Yes\" to all the interactive questions\n+\tautoYes bool\n+}\n+\n+// Help satisfies the cli.Command Help function.\n+func (s *SetupConsulCommand) Help() string {\n+\thelpText := `\n+Usage: nomad setup consul [options]\n+\n+  This command sets up Consul for allowing Nomad workloads to authenticate\n+  themselves using Workload Identity.\n+\n+  Setup Consul for Nomad:\n+\n+\t$ nomad setup consul -y -jwks=\"http://nomad.example/.well-known/jwks.json\"\n+`\n+\treturn strings.TrimSpace(helpText)\n+}\n+\n+func (s *SetupConsulCommand) AutocompleteFlags() complete.Flags {\n+\treturn mergeAutocompleteFlags(s.Meta.AutocompleteFlags(FlagSetClient),\n+\t\tcomplete.Flags{\n+\t\t\t\"-jwks-url\": complete.PredictAnything,\n+\t\t\t\"-y\":        complete.PredictSet(\"true\", \"false\"),\n+\t\t})\n+}\n+\n+func (s *SetupConsulCommand) AutocompleteArgs() complete.Predictor {\n+\treturn complete.PredictNothing\n+}\n+\n+// Synopsis satisfies the cli.Command Synopsis function.\n+func (s *SetupConsulCommand) Synopsis() string { return \"Interact with setup helpers\" }\n+\n+// Name returns the name of this command.\n+func (s *SetupConsulCommand) Name() string { return \"setup\" }\n+\n+// Run satisfies the cli.Command Run function.\n+func (s *SetupConsulCommand) Run(args []string) int {\n+\n+\tflags := s.Meta.FlagSet(s.Name(), FlagSetClient)\n+\tflags.Usage = func() { s.Ui.Output(s.Help()) }\n+\tflags.BoolVar(&s.autoYes, \"y\", false, \"\")\n+\tflags.StringVar(&s.jwksURL, \"jwks\", \"http://localhost:4646/.well-known/jwks.json\", \"\")\n+\tif err := flags.Parse(args); err != nil {\n+\t\treturn 1\n+\t}\n+\n+\t// Check that we got no arguments.\n+\tif len(flags.Args()) != 0 {\n+\t\ts.Ui.Error(\"This command takes no arguments\")\n+\t\ts.Ui.Error(commandErrorText(s))\n+\t\treturn 1\n+\t}\n+\n+\tvar err error\n+\n+\t// Get the Consul client.\n+\tcfg := api.DefaultConfig()\n+\ts.client, err = api.NewClient(cfg)\n+\tif err != nil {\n+\t\ts.Ui.Error(fmt.Sprintf(\"Error initializing Consul client: %s\", err))\n+\t\treturn 1\n+\t}\n+\n+\ts.Ui.Output(`\n+This command will walk you through configuring all the components required for \n+Nomad workloads to authenticate themselves against Consul ACL using their \n+respective Workload Identities. \n+\n+First we need to create a JWT auth method for Nomad services. Here is the auth\n+method configuration we will create:\n+`)\n+\n+\tauthMethodConf, err := s.renderAuthMethodConf(authMethodServices)\n+\tif err != nil {\n+\t\ts.Ui.Error(err.Error())\n+\t\treturn 1\n+\t}\n+\n+\tjsConf, _ := json.MarshalIndent(authMethodConf, \"\", \"\\t\")\n+\ts.Ui.Output(string(jsConf))\n+\n+\tvar createAuthMethod bool\n+\tif !s.autoYes {\n+\t\tcreateAuthMethod = s.askQuestion(\n+\t\t\tfmt.Sprintf(\n+\t\t\t\t\"Should we create the %s auth method in your Consul cluster? [Y/n]\",\n+\t\t\t\tauthMethodServices,\n+\t\t\t))\n+\t} else {\n+\t\tcreateAuthMethod = true\n+\t}\n+\n+\tif createAuthMethod {\n+\t\terr = s.createAuthMethod(authMethodServices, authMethodConf)\n+\t\tif err != nil {\n+\t\t\ts.Ui.Error(err.Error())\n+\t\t\treturn 1\n+\t\t}\n+\t}\n+\n+\ts.Ui.Output(`\n+In order to map claims between Nomad's JWTs and Consul ACL, we need to create\n+the following binding rule:\n+{\n+\t\"Description\": \"binding rule for Nomad workload identities (WI)\",\n+\t\"AuthMethod\": \"nomad-services\",\n+\t\"BindType\": \"service\",\n+\t\"BindName\": \"${value.nomad_namespace}-${value.nomad_service}\"\n+}\n+`)\n+\n+\tvar createBindingRule bool\n+\tif !s.autoYes {\n+\t\tcreateBindingRule = s.askQuestion(\n+\t\t\t\"Should we create the above binding rule in your Consul cluster? [Y/n]\",\n+\t\t)\n+\t} else {\n+\t\tcreateBindingRule = true\n+\t}\n+\n+\tif createBindingRule {\n+\t\terr = s.createBindingRules(&api.ACLBindingRule{\n+\t\t\tDescription: \"binding rule for Nomad workload identities (WI)\",\n+\t\t\tAuthMethod:  authMethodServices,\n+\t\t\tBindType:    \"service\",\n+\t\t\tBindName:    \"${value.nomad_namespace}-${value.nomad_service}\",\n+\t\t})\n+\t\tif err != nil {\n+\t\t\ts.Ui.Error(err.Error())\n+\t\t\treturn 1\n+\t\t}\n+\t}\n+\n+\ts.Ui.Output(`\n+We now need to create a JWT auth method for Nomad tasks. Here is the auth\n+method configuration we will create:\n+`)\n+\n+\tauthMethodConf, err = s.renderAuthMethodConf(authMethodTasks)\n+\tif err != nil {\n+\t\ts.Ui.Error(err.Error())\n+\t\treturn 1\n+\t}\n+\n+\tjsConf, _ = json.MarshalIndent(authMethodConf, \"\", \"\\t\")\n+\ts.Ui.Output(string(jsConf))\n+\n+\tif !s.autoYes {\n+\t\tcreateAuthMethod = s.askQuestion(\n+\t\t\tfmt.Sprintf(\n+\t\t\t\t\"Should we create the %s auth method in your Consul cluster? [Y/n]\",\n+\t\t\t\tauthMethodTasks,\n+\t\t\t))\n+\t} else {\n+\t\tcreateAuthMethod = true\n+\t}\n+\n+\tif createAuthMethod {\n+\t\terr = s.createAuthMethod(authMethodTasks, authMethodConf)\n+\t\tif err != nil {\n+\t\t\ts.Ui.Error(err.Error())\n+\t\t\treturn 1\n+\t\t}\n+\t}\n+\n+\ts.Ui.Output(`\n+In order to map claims between Nomad's JWTs and Consul ACL, we need to create\n+the following binding rule:\n+{\n+\t\"Description\": \"binding rule for Nomad templates w/ (WI)\",\n+\t\"AuthMethod\": \"nomad-tasks\",\n+\t\"BindType\": \"role\",\n+\t\"BindName\": \"nomad-${value.nomad_namespace}-templates\"\n+}\n+`)\n+\n+\tif !s.autoYes {\n+\t\tcreateBindingRule = s.askQuestion(\n+\t\t\t\"Should we create the above binding rule in your Consul cluster? [Y/n]\",\n+\t\t)\n+\t} else {\n+\t\tcreateBindingRule = true\n+\t}\n+\n+\tif createBindingRule {\n+\t\terr = s.createBindingRules(&api.ACLBindingRule{\n+\t\t\tDescription: \"binding rule for Nomad templates w/ (WI)\",\n+\t\t\tAuthMethod:  authMethodTasks,\n+\t\t\tBindType:    \"role\",\n+\t\t\tBindName:    \"nomad-${value.nomad_namespace}-templates\",\n+\t\t})\n+\t\tif err != nil {\n+\t\t\ts.Ui.Error(err.Error())\n+\t\t\treturn 1\n+\t\t}\n+\t}\n+\n+\ts.Ui.Output(`\n+Nomad tasks require a Consul ACL policy and Role. Below is the body of the policy\n+we need to create:\n+`)\n+\ts.Ui.Output(string(policyBody))\n+\n+\tvar createPolicy bool\n+\tif !s.autoYes {\n+\t\tcreatePolicy = s.askQuestion(\n+\t\t\t\"Should we create the above policy in your Consul cluster? [Y/n]\",\n+\t\t)\n+\t} else {\n+\t\tcreatePolicy = true\n+\t}\n+\n+\tif createPolicy {\n+\t\terr = s.createPolicy()\n+\t\tif err != nil {\n+\t\t\ts.Ui.Error(err.Error())\n+\t\t\treturn 1\n+\t\t}\n+\t}\n+\n+\ts.Ui.Output(`\n+Finally, we need to create a role role-nomad-tasks associated with the policy\n+above.`)\n+\n+\tvar createRole bool\n+\tif !s.autoYes {\n+\t\tcreateRole = s.askQuestion(\n+\t\t\t\"Should we create the above role in your Consul cluster? [Y/n]\",\n+\t\t)\n+\t} else {\n+\t\tcreateRole = true\n+\t}\n+\n+\tif createRole {\n+\t\terr = s.createRoleForTemplate()\n+\t\tif err != nil {\n+\t\t\ts.Ui.Error(err.Error())\n+\t\t\treturn 1\n+\t\t}\n+\t}\n+\n+\ts.Ui.Output(`\n+Congratulations, your Consul cluster is now setup and ready to accept Nomad\n+workloads with Workload Identity!\n+\n+You need to adjust your Nomad client configuration in the following way:\n+\n+consul {\n+  enabled = true\n+  address = \"<Consul address>\"\n+\n+  # Nomad agents still need a Consul token in order to register themselves\n+  # for automated clustering. It is recommended to set the token using the\n+  # CONSUL_HTTP_TOKEN environment variable instead of writing it in the\n+  # configuration file.\n+\n+  # Consul mTLS configuration.\n+  # ssl       = true\n+  # ca_file   = \"/var/ssl/bundle/ca.bundle\"\n+  # cert_file = \"/etc/ssl/consul.crt\"\n+  # key_file  = \"/etc/ssl/consul.key\"",
                "path": "command/setup_consul.go",
                "commit_id": "b407f023e93ea6c721b9977506f8dd3820c8c125",
                "original_commit_id": "2f2dd8444cefe12a06235f388006afeb12cd5033",
                "user": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "I think it's ok to omit the mTLS config for this helper. ",
                "created_at": "2023-10-27T09:16:31Z",
                "updated_at": "2023-10-27T09:16:31Z",
                "html_url": "https://github.com/hashicorp/nomad/pull/18820#discussion_r1374299874",
                "pull_request_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374299874"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18820#discussion_r1374299874"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374299874/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": 296,
                "original_start_line": 296,
                "start_side": "RIGHT",
                "line": 307,
                "original_line": 307,
                "side": "RIGHT",
                "in_reply_to_id": 1373858598,
                "original_position": 307,
                "position": 307,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820",
                "id": 1567084277,
                "node_id": "PR_kwDOAi9Jds5dZ871",
                "html_url": "https://github.com/hashicorp/nomad/pull/18820",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18820.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18820.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18820",
                "number": 18820,
                "state": "open",
                "locked": false,
                "title": "cli: consul setup command",
                "user": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "An interactive setup helper for configuring Consul to accept Nomad WI-enabled workloads. ",
                "created_at": "2023-10-20T17:10:14Z",
                "updated_at": "2023-10-27T09:16:31Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "82f0fa59f02f05537ed6bafeeff1638faeea4b23",
                "assignee": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "pkazmierczak",
                        "id": 470696,
                        "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/pkazmierczak",
                        "html_url": "https://github.com/pkazmierczak",
                        "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                        "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                        "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                        "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                        "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                        "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [
                    {
                        "login": "mikenomitch",
                        "id": 2732204,
                        "node_id": "MDQ6VXNlcjI3MzIyMDQ=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2732204?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mikenomitch",
                        "html_url": "https://github.com/mikenomitch",
                        "followers_url": "https://api.github.com/users/mikenomitch/followers",
                        "following_url": "https://api.github.com/users/mikenomitch/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mikenomitch/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mikenomitch/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mikenomitch/subscriptions",
                        "organizations_url": "https://api.github.com/users/mikenomitch/orgs",
                        "repos_url": "https://api.github.com/users/mikenomitch/repos",
                        "events_url": "https://api.github.com/users/mikenomitch/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mikenomitch/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 273199146,
                        "node_id": "MDU6TGFiZWwyNzMxOTkxNDY=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/cli",
                        "name": "theme/cli",
                        "color": "009800",
                        "default": false,
                        "description": ""
                    },
                    {
                        "id": 603156098,
                        "node_id": "MDU6TGFiZWw2MDMxNTYwOTg=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/consul",
                        "name": "theme/consul",
                        "color": "5319e7",
                        "default": false,
                        "description": ""
                    },
                    {
                        "id": 5306946477,
                        "node_id": "LA_kwDOAi9Jds8AAAABPFGTrQ",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/workload-identity",
                        "name": "theme/workload-identity",
                        "color": "c2e0c6",
                        "default": false,
                        "description": ""
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18820/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/b407f023e93ea6c721b9977506f8dd3820c8c125",
                "head": {
                    "label": "hashicorp:f-wi-consul-setup-consul-cmd",
                    "ref": "f-wi-consul-setup-consul-cmd",
                    "sha": "b407f023e93ea6c721b9977506f8dd3820c8c125",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T08:56:46Z",
                        "pushed_at": "2023-10-27T08:49:19Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14045,
                        "watchers_count": 14045,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14045,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "de28760928124b877d3db70342db804900cdbfd9",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T08:56:46Z",
                        "pushed_at": "2023-10-27T08:49:19Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14045,
                        "watchers_count": 14045,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14045,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18820"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18820"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18820/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/b407f023e93ea6c721b9977506f8dd3820c8c125"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T09:16:31Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32893762600",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 470696,
            "login": "pkazmierczak",
            "display_login": "pkazmierczak",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pkazmierczak",
            "avatar_url": "https://avatars.githubusercontent.com/u/470696?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1701348453,
                "node_id": "PRR_kwDOAi9Jds5laIRl",
                "user": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "commit_id": "2f2dd8444cefe12a06235f388006afeb12cd5033",
                "submitted_at": "2023-10-27T09:16:31Z",
                "state": "commented",
                "html_url": "https://github.com/hashicorp/nomad/pull/18820#pullrequestreview-1701348453",
                "pull_request_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18820#pullrequestreview-1701348453"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820",
                "id": 1567084277,
                "node_id": "PR_kwDOAi9Jds5dZ871",
                "html_url": "https://github.com/hashicorp/nomad/pull/18820",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18820.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18820.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18820",
                "number": 18820,
                "state": "open",
                "locked": false,
                "title": "cli: consul setup command",
                "user": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "An interactive setup helper for configuring Consul to accept Nomad WI-enabled workloads. ",
                "created_at": "2023-10-20T17:10:14Z",
                "updated_at": "2023-10-27T09:16:31Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "82f0fa59f02f05537ed6bafeeff1638faeea4b23",
                "assignee": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "pkazmierczak",
                        "id": 470696,
                        "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/pkazmierczak",
                        "html_url": "https://github.com/pkazmierczak",
                        "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                        "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                        "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                        "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                        "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                        "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [
                    {
                        "login": "mikenomitch",
                        "id": 2732204,
                        "node_id": "MDQ6VXNlcjI3MzIyMDQ=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2732204?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mikenomitch",
                        "html_url": "https://github.com/mikenomitch",
                        "followers_url": "https://api.github.com/users/mikenomitch/followers",
                        "following_url": "https://api.github.com/users/mikenomitch/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mikenomitch/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mikenomitch/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mikenomitch/subscriptions",
                        "organizations_url": "https://api.github.com/users/mikenomitch/orgs",
                        "repos_url": "https://api.github.com/users/mikenomitch/repos",
                        "events_url": "https://api.github.com/users/mikenomitch/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mikenomitch/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 273199146,
                        "node_id": "MDU6TGFiZWwyNzMxOTkxNDY=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/cli",
                        "name": "theme/cli",
                        "color": "009800",
                        "default": false,
                        "description": ""
                    },
                    {
                        "id": 603156098,
                        "node_id": "MDU6TGFiZWw2MDMxNTYwOTg=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/consul",
                        "name": "theme/consul",
                        "color": "5319e7",
                        "default": false,
                        "description": ""
                    },
                    {
                        "id": 5306946477,
                        "node_id": "LA_kwDOAi9Jds8AAAABPFGTrQ",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/workload-identity",
                        "name": "theme/workload-identity",
                        "color": "c2e0c6",
                        "default": false,
                        "description": ""
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18820/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/b407f023e93ea6c721b9977506f8dd3820c8c125",
                "head": {
                    "label": "hashicorp:f-wi-consul-setup-consul-cmd",
                    "ref": "f-wi-consul-setup-consul-cmd",
                    "sha": "b407f023e93ea6c721b9977506f8dd3820c8c125",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T08:56:46Z",
                        "pushed_at": "2023-10-27T08:49:19Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14045,
                        "watchers_count": 14045,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14045,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "de28760928124b877d3db70342db804900cdbfd9",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T08:56:46Z",
                        "pushed_at": "2023-10-27T08:49:19Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14045,
                        "watchers_count": 14045,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14045,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18820"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18820"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18820/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/b407f023e93ea6c721b9977506f8dd3820c8c125"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T09:16:31Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32893233867",
        "type": "WatchEvent",
        "actor": {
            "id": 13034668,
            "login": "qyihua",
            "display_login": "qyihua",
            "gravatar_id": "",
            "url": "https://api.github.com/users/qyihua",
            "avatar_url": "https://avatars.githubusercontent.com/u/13034668?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T08:56:46Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32893145456",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 1317617,
            "login": "darkgeek",
            "display_login": "darkgeek",
            "gravatar_id": "",
            "url": "https://api.github.com/users/darkgeek",
            "avatar_url": "https://avatars.githubusercontent.com/u/1317617?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/hashicorp/nomad/issues/18562",
                "repository_url": "https://api.github.com/repos/hashicorp/nomad",
                "labels_url": "https://api.github.com/repos/hashicorp/nomad/issues/18562/labels{/name}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18562/comments",
                "events_url": "https://api.github.com/repos/hashicorp/nomad/issues/18562/events",
                "html_url": "https://github.com/hashicorp/nomad/pull/18562",
                "id": 1909791721,
                "node_id": "PR_kwDOAi9Jds5bCYw-",
                "number": 18562,
                "title": "Add support for NetBSD",
                "user": {
                    "login": "darkgeek",
                    "id": 1317617,
                    "node_id": "MDQ6VXNlcjEzMTc2MTc=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/1317617?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/darkgeek",
                    "html_url": "https://github.com/darkgeek",
                    "followers_url": "https://api.github.com/users/darkgeek/followers",
                    "following_url": "https://api.github.com/users/darkgeek/following{/other_user}",
                    "gists_url": "https://api.github.com/users/darkgeek/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/darkgeek/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/darkgeek/subscriptions",
                    "organizations_url": "https://api.github.com/users/darkgeek/orgs",
                    "repos_url": "https://api.github.com/users/darkgeek/repos",
                    "events_url": "https://api.github.com/users/darkgeek/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/darkgeek/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 218895785,
                        "node_id": "MDU6TGFiZWwyMTg4OTU3ODU=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/type/enhancement",
                        "name": "type/enhancement",
                        "color": "84b6eb",
                        "default": false,
                        "description": ""
                    },
                    {
                        "id": 253825466,
                        "node_id": "MDU6TGFiZWwyNTM4MjU0NjY=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/fingerprint",
                        "name": "theme/fingerprint",
                        "color": "eb6420",
                        "default": false,
                        "description": ""
                    },
                    {
                        "id": 266756295,
                        "node_id": "MDU6TGFiZWwyNjY3NTYyOTU=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/stage/waiting-reply",
                        "name": "stage/waiting-reply",
                        "color": "d4c5f9",
                        "default": false,
                        "description": ""
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 6,
                "created_at": "2023-09-23T08:51:15Z",
                "updated_at": "2023-10-27T08:53:30Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18562",
                    "html_url": "https://github.com/hashicorp/nomad/pull/18562",
                    "diff_url": "https://github.com/hashicorp/nomad/pull/18562.diff",
                    "patch_url": "https://github.com/hashicorp/nomad/pull/18562.patch",
                    "merged_at": null
                },
                "body": "Hi,\r\n\r\nI want to add some code to make `Nomad` build and run on `NetBSD`. \r\n\r\nIn this PR, `allocdir/fs_netbsd.go` and `host/netbsd.go`  are used for `NetBSD` only, while the df part in `host/unix.go` is reworked, which might affect other Linux/Unix: instead of leveraging on the frozen `syscall` package, where `Statfs` is not available on `NetBSD`, it might be better to switch to  `gopsutil`, which supports more platforms (currently it doesn't support NetBSD though, I have also sent a PR shirou/gopsutil#1530 to it). \r\n\r\nCan you check this PR to see if it's decent enough to be merged? Thanks.",
                "reactions": {
                    "url": "https://api.github.com/repos/hashicorp/nomad/issues/18562/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/hashicorp/nomad/issues/18562/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/hashicorp/nomad/issues/comments/1782546403",
                "html_url": "https://github.com/hashicorp/nomad/pull/18562#issuecomment-1782546403",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18562",
                "id": 1782546403,
                "node_id": "IC_kwDOAi9Jds5qP3_j",
                "user": {
                    "login": "darkgeek",
                    "id": 1317617,
                    "node_id": "MDQ6VXNlcjEzMTc2MTc=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/1317617?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/darkgeek",
                    "html_url": "https://github.com/darkgeek",
                    "followers_url": "https://api.github.com/users/darkgeek/followers",
                    "following_url": "https://api.github.com/users/darkgeek/following{/other_user}",
                    "gists_url": "https://api.github.com/users/darkgeek/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/darkgeek/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/darkgeek/subscriptions",
                    "organizations_url": "https://api.github.com/users/darkgeek/orgs",
                    "repos_url": "https://api.github.com/users/darkgeek/repos",
                    "events_url": "https://api.github.com/users/darkgeek/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/darkgeek/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T08:53:30Z",
                "updated_at": "2023-10-27T08:53:30Z",
                "author_association": "NONE",
                "body": "> @darkgeek you've got some merge conflicts here you'll need to resolve.\r\n\r\nResolved by doing rebase on `main`. And I also squash my previous commits to a single one.",
                "reactions": {
                    "url": "https://api.github.com/repos/hashicorp/nomad/issues/comments/1782546403/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T08:53:31Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32893043758",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 470696,
            "login": "pkazmierczak",
            "display_login": "pkazmierczak",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pkazmierczak",
            "avatar_url": "https://avatars.githubusercontent.com/u/470696?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374268086",
                "pull_request_review_id": 1701299309,
                "id": 1374268086,
                "node_id": "PRRC_kwDOAi9Jds5R6aq2",
                "diff_hunk": "@@ -0,0 +1,449 @@\n+// Copyright (c) HashiCorp, Inc.\n+// SPDX-License-Identifier: BUSL-1.1\n+\n+package command\n+\n+import (\n+\t_ \"embed\"\n+\t\"encoding/json\"\n+\t\"fmt\"\n+\t\"strings\"\n+\t\"time\"\n+\n+\t\"github.com/hashicorp/consul/api\"\n+\t\"github.com/mitchellh/cli\"\n+\t\"github.com/posener/complete\"\n+)\n+\n+// Ensure SetupConsulCommand satisfies the cli.Command interface.\n+var _ cli.Command = &SetupConsulCommand{}\n+\n+//go:embed asset/consul-wi-default-auth-method-config.json\n+var authConfigBody []byte\n+\n+//go:embed asset/consul-wi-default-policy.hcl\n+var policyBody []byte\n+\n+const (\n+\tauthMethodServices = \"nomad-services\"\n+\tauthMethodTasks    = \"nomad-tasks\"\n+\troleTasks          = \"role-nomad-tasks\"\n+\tpolicyName         = \"policy-nomad-tasks\"\n+\tdefaultTTL         = 8 * time.Hour\n+\taud                = \"consul.io\"\n+)\n+\n+type SetupConsulCommand struct {\n+\tMeta\n+\n+\t// client is the Consul API client shared by all functions in the command to\n+\t// reuse the same connection.\n+\tclient *api.Client\n+\n+\tjwksURL string\n+\n+\t// if set, answers \"Yes\" to all the interactive questions\n+\tautoYes bool\n+}\n+\n+// Help satisfies the cli.Command Help function.\n+func (s *SetupConsulCommand) Help() string {\n+\thelpText := `\n+Usage: nomad setup consul [options]\n+\n+  This command sets up Consul for allowing Nomad workloads to authenticate\n+  themselves using Workload Identity.\n+\n+  Setup Consul for Nomad:\n+\n+\t$ nomad setup consul -y -jwks=\"http://nomad.example/.well-known/jwks.json\"\n+`\n+\treturn strings.TrimSpace(helpText)\n+}\n+\n+func (s *SetupConsulCommand) AutocompleteFlags() complete.Flags {\n+\treturn mergeAutocompleteFlags(s.Meta.AutocompleteFlags(FlagSetClient),\n+\t\tcomplete.Flags{\n+\t\t\t\"-jwks-url\": complete.PredictAnything,\n+\t\t\t\"-y\":        complete.PredictSet(\"true\", \"false\"),\n+\t\t})\n+}\n+\n+func (s *SetupConsulCommand) AutocompleteArgs() complete.Predictor {\n+\treturn complete.PredictNothing\n+}\n+\n+// Synopsis satisfies the cli.Command Synopsis function.\n+func (s *SetupConsulCommand) Synopsis() string { return \"Interact with setup helpers\" }\n+\n+// Name returns the name of this command.\n+func (s *SetupConsulCommand) Name() string { return \"setup\" }\n+\n+// Run satisfies the cli.Command Run function.\n+func (s *SetupConsulCommand) Run(args []string) int {\n+\n+\tflags := s.Meta.FlagSet(s.Name(), FlagSetClient)\n+\tflags.Usage = func() { s.Ui.Output(s.Help()) }\n+\tflags.BoolVar(&s.autoYes, \"y\", false, \"\")\n+\tflags.StringVar(&s.jwksURL, \"jwks\", \"http://localhost:4646/.well-known/jwks.json\", \"\")\n+\tif err := flags.Parse(args); err != nil {\n+\t\treturn 1\n+\t}\n+\n+\t// Check that we got no arguments.\n+\tif len(flags.Args()) != 0 {\n+\t\ts.Ui.Error(\"This command takes no arguments\")\n+\t\ts.Ui.Error(commandErrorText(s))\n+\t\treturn 1\n+\t}\n+\n+\tvar err error\n+\n+\t// Get the Consul client.\n+\tcfg := api.DefaultConfig()\n+\ts.client, err = api.NewClient(cfg)\n+\tif err != nil {\n+\t\ts.Ui.Error(fmt.Sprintf(\"Error initializing Consul client: %s\", err))\n+\t\treturn 1\n+\t}\n+\n+\ts.Ui.Output(`\n+This command will walk you through configuring all the components required for \n+Nomad workloads to authenticate themselves against Consul ACL using their \n+respective Workload Identities. \n+\n+First we need to create a JWT auth method for Nomad services. Here is the auth\n+method configuration we will create:\n+`)\n+\n+\tauthMethodConf, err := s.renderAuthMethodConf(authMethodServices)\n+\tif err != nil {\n+\t\ts.Ui.Error(err.Error())\n+\t\treturn 1\n+\t}\n+\n+\tjsConf, _ := json.MarshalIndent(authMethodConf, \"\", \"\\t\")\n+\ts.Ui.Output(string(jsConf))\n+\n+\tvar createAuthMethod bool\n+\tif !s.autoYes {\n+\t\tcreateAuthMethod = s.askQuestion(\n+\t\t\tfmt.Sprintf(\n+\t\t\t\t\"Should we create the %s auth method in your Consul cluster? [Y/n]\",\n+\t\t\t\tauthMethodServices,\n+\t\t\t))\n+\t} else {\n+\t\tcreateAuthMethod = true\n+\t}\n+\n+\tif createAuthMethod {\n+\t\terr = s.createAuthMethod(authMethodServices, authMethodConf)\n+\t\tif err != nil {\n+\t\t\ts.Ui.Error(err.Error())\n+\t\t\treturn 1\n+\t\t}\n+\t}\n+\n+\ts.Ui.Output(`\n+In order to map claims between Nomad's JWTs and Consul ACL, we need to create\n+the following binding rule:\n+{\n+\t\"Description\": \"binding rule for Nomad workload identities (WI)\",\n+\t\"AuthMethod\": \"nomad-services\",\n+\t\"BindType\": \"service\",\n+\t\"BindName\": \"${value.nomad_namespace}-${value.nomad_service}\"\n+}\n+`)\n+\n+\tvar createBindingRule bool\n+\tif !s.autoYes {\n+\t\tcreateBindingRule = s.askQuestion(\n+\t\t\t\"Should we create the above binding rule in your Consul cluster? [Y/n]\",\n+\t\t)\n+\t} else {\n+\t\tcreateBindingRule = true\n+\t}\n+\n+\tif createBindingRule {\n+\t\terr = s.createBindingRules(&api.ACLBindingRule{\n+\t\t\tDescription: \"binding rule for Nomad workload identities (WI)\",\n+\t\t\tAuthMethod:  authMethodServices,\n+\t\t\tBindType:    \"service\",\n+\t\t\tBindName:    \"${value.nomad_namespace}-${value.nomad_service}\",\n+\t\t})\n+\t\tif err != nil {\n+\t\t\ts.Ui.Error(err.Error())\n+\t\t\treturn 1\n+\t\t}\n+\t}\n+\n+\ts.Ui.Output(`\n+We now need to create a JWT auth method for Nomad tasks. Here is the auth\n+method configuration we will create:\n+`)\n+\n+\tauthMethodConf, err = s.renderAuthMethodConf(authMethodTasks)\n+\tif err != nil {\n+\t\ts.Ui.Error(err.Error())\n+\t\treturn 1\n+\t}\n+\n+\tjsConf, _ = json.MarshalIndent(authMethodConf, \"\", \"\\t\")\n+\ts.Ui.Output(string(jsConf))\n+\n+\tif !s.autoYes {\n+\t\tcreateAuthMethod = s.askQuestion(\n+\t\t\tfmt.Sprintf(\n+\t\t\t\t\"Should we create the %s auth method in your Consul cluster? [Y/n]\",\n+\t\t\t\tauthMethodTasks,\n+\t\t\t))\n+\t} else {\n+\t\tcreateAuthMethod = true\n+\t}\n+\n+\tif createAuthMethod {\n+\t\terr = s.createAuthMethod(authMethodTasks, authMethodConf)\n+\t\tif err != nil {\n+\t\t\ts.Ui.Error(err.Error())\n+\t\t\treturn 1\n+\t\t}\n+\t}\n+\n+\ts.Ui.Output(`\n+In order to map claims between Nomad's JWTs and Consul ACL, we need to create\n+the following binding rule:\n+{\n+\t\"Description\": \"binding rule for Nomad templates w/ (WI)\",\n+\t\"AuthMethod\": \"nomad-tasks\",\n+\t\"BindType\": \"role\",\n+\t\"BindName\": \"nomad-${value.nomad_namespace}-templates\"\n+}\n+`)\n+\n+\tif !s.autoYes {\n+\t\tcreateBindingRule = s.askQuestion(\n+\t\t\t\"Should we create the above binding rule in your Consul cluster? [Y/n]\",\n+\t\t)\n+\t} else {\n+\t\tcreateBindingRule = true\n+\t}\n+\n+\tif createBindingRule {\n+\t\terr = s.createBindingRules(&api.ACLBindingRule{\n+\t\t\tDescription: \"binding rule for Nomad templates w/ (WI)\",\n+\t\t\tAuthMethod:  authMethodTasks,\n+\t\t\tBindType:    \"role\",\n+\t\t\tBindName:    \"nomad-${value.nomad_namespace}-templates\",\n+\t\t})\n+\t\tif err != nil {\n+\t\t\ts.Ui.Error(err.Error())\n+\t\t\treturn 1\n+\t\t}\n+\t}\n+\n+\ts.Ui.Output(`\n+Nomad tasks require a Consul ACL policy and Role. Below is the body of the policy\n+we need to create:\n+`)\n+\ts.Ui.Output(string(policyBody))\n+\n+\tvar createPolicy bool\n+\tif !s.autoYes {\n+\t\tcreatePolicy = s.askQuestion(\n+\t\t\t\"Should we create the above policy in your Consul cluster? [Y/n]\",\n+\t\t)\n+\t} else {\n+\t\tcreatePolicy = true\n+\t}\n+\n+\tif createPolicy {\n+\t\terr = s.createPolicy()\n+\t\tif err != nil {\n+\t\t\ts.Ui.Error(err.Error())\n+\t\t\treturn 1\n+\t\t}\n+\t}\n+\n+\ts.Ui.Output(`\n+Finally, we need to create a role role-nomad-tasks associated with the policy\n+above.`)\n+\n+\tvar createRole bool\n+\tif !s.autoYes {\n+\t\tcreateRole = s.askQuestion(\n+\t\t\t\"Should we create the above role in your Consul cluster? [Y/n]\",\n+\t\t)\n+\t} else {\n+\t\tcreateRole = true\n+\t}\n+\n+\tif createRole {\n+\t\terr = s.createRoleForTemplate()\n+\t\tif err != nil {\n+\t\t\ts.Ui.Error(err.Error())\n+\t\t\treturn 1\n+\t\t}\n+\t}\n+\n+\ts.Ui.Output(`\n+Congratulations, your Consul cluster is now setup and ready to accept Nomad\n+workloads with Workload Identity!\n+\n+You need to adjust your Nomad client configuration in the following way:\n+\n+consul {\n+  enabled = true\n+  address = \"<Consul address>\"\n+\n+  # Nomad agents still need a Consul token in order to register themselves\n+  # for automated clustering. It is recommended to set the token using the\n+  # CONSUL_HTTP_TOKEN environment variable instead of writing it in the\n+  # configuration file.\n+\n+  # Consul mTLS configuration.\n+  # ssl       = true\n+  # ca_file   = \"/var/ssl/bundle/ca.bundle\"\n+  # cert_file = \"/etc/ssl/consul.crt\"\n+  # key_file  = \"/etc/ssl/consul.key\"\n+\n+  service_auth_method = \"nomad-services\"\n+  task_auth_method    = \"nomad-tasks\"\n+}\n+\n+and the configuration of your Nomad servers as follows:\n+\n+consul {\n+  enabled = true\n+  address = \"<Consul address>\"\n+\n+  # Nomad agents still need a Consul token in order to register themselves\n+  # for automated clustering. It is recommended to set the token using the\n+  # CONSUL_HTTP_TOKEN environment variable instead of writing it in the\n+  # configuration file.\n+\n+  # Consul mTLS configuration.\n+  # ssl       = true\n+  # ca_file   = \"/var/ssl/bundle/ca.bundle\"\n+  # cert_file = \"/etc/ssl/consul.crt\"\n+  # key_file  = \"/etc/ssl/consul.key\"\n+\n+  service_identity {\n+    aud = [\"consul.io\"]\n+    ttl = \"1h\"\n+  }\n+\n+  task_identity {\n+    aud = [\"consul.io\"]\n+    ttl = \"1h\"\n+  }\n+}\n+\n+`)\n+\n+\treturn 0\n+}\n+\n+func (s *SetupConsulCommand) renderAuthMethodConf(authMethodName string) (map[string]any, error) {\n+\tauthConfig := map[string]any{}\n+\terr := json.Unmarshal(authConfigBody, &authConfig)\n+\tif err != nil {\n+\t\treturn authConfig, fmt.Errorf(\"default auth config text could not be deserialized: %v\", err)\n+\t}\n+\n+\tauthConfig[\"JWKSURL\"] = s.jwksURL\n+\tauthConfig[\"BoundAudiences\"] = []string{aud}\n+\tauthConfig[\"JWTSupportedAlgs\"] = []string{\"RS256\"}\n+\n+\treturn authConfig, nil\n+}\n+\n+func (s *SetupConsulCommand) createAuthMethod(authMethodName string, authMethodConf map[string]any) error {\n+\t_, _, err := s.client.ACL().AuthMethodCreate(&api.ACLAuthMethod{\n+\t\tName:          authMethodName,\n+\t\tType:          \"jwt\",\n+\t\tDisplayName:   authMethodName,\n+\t\tDescription:   \"login method for Nomad workload identities (WI)\",\n+\t\tMaxTokenTTL:   defaultTTL,\n+\t\tTokenLocality: \"local\",\n+\t\tConfig:        authMethodConf,\n+\t\tNamespaceRules: []*api.ACLAuthMethodNamespaceRule{{\n+\t\t\tSelector:      \"\",\n+\t\t\tBindNamespace: \"${value.nomad_namespace}\",\n+\t\t}},\n+\t}, nil)\n+\n+\tif err != nil {\n+\t\treturn fmt.Errorf(\"[\u2718] could not create Consul auth method: %w\", err)\n+\t}\n+\n+\ts.Ui.Info(fmt.Sprintf(\"[\u2714] Created auth method %s\", authMethodName))\n+\treturn nil\n+}\n+\n+func (s *SetupConsulCommand) createBindingRules(rule *api.ACLBindingRule) error {\n+\t_, _, err := s.client.ACL().BindingRuleCreate(rule, nil)\n+\tif err != nil {\n+\t\treturn fmt.Errorf(\"[\u2718] could not create Consul binding rule: %w\", err)\n+\t}\n+\n+\ts.Ui.Info(fmt.Sprintf(\"[\u2714] Created binding rule for auth method %s\", rule.AuthMethod))\n+\treturn nil\n+}\n+\n+func (s *SetupConsulCommand) createRoleForTemplate() error {\n+\t_, _, err := s.client.ACL().RoleCreate(&api.ACLRole{\n+\t\tName:        roleTasks,\n+\t\tDescription: \"role for Nomad templates w/ workload identities (WI)\",\n+\t\tPolicies:    []*api.ACLLink{{Name: policyName}},\n+\t}, nil)\n+\tif err != nil {\n+\t\tif strings.Contains(err.Error(), \"already exists\") {\n+\t\t\ts.Ui.Warn(fmt.Sprintf(\"[ ] role %s already exists\", roleTasks))\n+\t\t\treturn nil\n+\t\t}\n+\t\treturn fmt.Errorf(\"[\u2718] could not create Consul role: %w\", err)\n+\t}\n+\n+\ts.Ui.Info(fmt.Sprintf(\"[\u2714] Created role %s\\n\", roleTasks))\n+\treturn nil\n+}\n+\n+func (s *SetupConsulCommand) createPolicy() error {\n+\t_, _, err := s.client.ACL().PolicyCreate(&api.ACLPolicy{\n+\t\tName:  policyName,\n+\t\tRules: string(policyBody),\n+\t}, nil)\n+\tif err != nil {\n+\t\tif strings.Contains(err.Error(), \"already exists\") {\n+\t\t\ts.Ui.Warn(fmt.Sprintf(\"[ ] policy %s already exists\", policyName))\n+\t\t}\n+\t\treturn fmt.Errorf(\"[\u2718] could not create Consul policy: %w\", err)\n+\t}\n+\n+\ts.Ui.Info(fmt.Sprintf(\"[\u2714] Created policy %s\", policyName))\n+\n+\treturn nil\n+}\n+\n+// askQuestion asks question to user until they provide a valid response.\n+func (s *SetupConsulCommand) askQuestion(question string) bool {\n+\tfor {\n+\t\tanswer, err := s.Ui.Ask(s.Colorize().Color(fmt.Sprintf(\"[?] %s\", question)))\n+\t\tif err != nil {\n+\t\t\tif err.Error() != \"interrupted\" {\n+\t\t\t\ts.Ui.Output(err.Error())\n+\t\t\t}\n+\t\t\treturn false\n+\t\t}\n+\n+\t\tswitch strings.TrimSpace(strings.ToLower(answer)) {\n+\t\tcase \"\", \"n\", \"no\":\n+\t\t\treturn false\n+\t\tcase \"y\", \"yes\":\n+\t\t\treturn true",
                "path": "command/setup_consul.go",
                "commit_id": "b407f023e93ea6c721b9977506f8dd3820c8c125",
                "original_commit_id": "2f2dd8444cefe12a06235f388006afeb12cd5033",
                "user": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "ah, this is copy pasta from another command, my bad. ",
                "created_at": "2023-10-27T08:49:41Z",
                "updated_at": "2023-10-27T08:49:42Z",
                "html_url": "https://github.com/hashicorp/nomad/pull/18820#discussion_r1374268086",
                "pull_request_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374268086"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18820#discussion_r1374268086"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374268086/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": 438,
                "original_start_line": 440,
                "start_side": "RIGHT",
                "line": 441,
                "original_line": 443,
                "side": "RIGHT",
                "in_reply_to_id": 1373866640,
                "original_position": 443,
                "position": 441,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820",
                "id": 1567084277,
                "node_id": "PR_kwDOAi9Jds5dZ871",
                "html_url": "https://github.com/hashicorp/nomad/pull/18820",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18820.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18820.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18820",
                "number": 18820,
                "state": "open",
                "locked": false,
                "title": "cli: consul setup command",
                "user": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "An interactive setup helper for configuring Consul to accept Nomad WI-enabled workloads. ",
                "created_at": "2023-10-20T17:10:14Z",
                "updated_at": "2023-10-27T08:49:42Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "82f0fa59f02f05537ed6bafeeff1638faeea4b23",
                "assignee": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "pkazmierczak",
                        "id": 470696,
                        "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/pkazmierczak",
                        "html_url": "https://github.com/pkazmierczak",
                        "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                        "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                        "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                        "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                        "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                        "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [
                    {
                        "login": "mikenomitch",
                        "id": 2732204,
                        "node_id": "MDQ6VXNlcjI3MzIyMDQ=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2732204?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mikenomitch",
                        "html_url": "https://github.com/mikenomitch",
                        "followers_url": "https://api.github.com/users/mikenomitch/followers",
                        "following_url": "https://api.github.com/users/mikenomitch/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mikenomitch/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mikenomitch/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mikenomitch/subscriptions",
                        "organizations_url": "https://api.github.com/users/mikenomitch/orgs",
                        "repos_url": "https://api.github.com/users/mikenomitch/repos",
                        "events_url": "https://api.github.com/users/mikenomitch/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mikenomitch/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 273199146,
                        "node_id": "MDU6TGFiZWwyNzMxOTkxNDY=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/cli",
                        "name": "theme/cli",
                        "color": "009800",
                        "default": false,
                        "description": ""
                    },
                    {
                        "id": 603156098,
                        "node_id": "MDU6TGFiZWw2MDMxNTYwOTg=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/consul",
                        "name": "theme/consul",
                        "color": "5319e7",
                        "default": false,
                        "description": ""
                    },
                    {
                        "id": 5306946477,
                        "node_id": "LA_kwDOAi9Jds8AAAABPFGTrQ",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/workload-identity",
                        "name": "theme/workload-identity",
                        "color": "c2e0c6",
                        "default": false,
                        "description": ""
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18820/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/b407f023e93ea6c721b9977506f8dd3820c8c125",
                "head": {
                    "label": "hashicorp:f-wi-consul-setup-consul-cmd",
                    "ref": "f-wi-consul-setup-consul-cmd",
                    "sha": "b407f023e93ea6c721b9977506f8dd3820c8c125",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T08:49:19Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "de28760928124b877d3db70342db804900cdbfd9",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T08:49:19Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18820"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18820"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18820/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/b407f023e93ea6c721b9977506f8dd3820c8c125"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T08:49:41Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32893043678",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 470696,
            "login": "pkazmierczak",
            "display_login": "pkazmierczak",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pkazmierczak",
            "avatar_url": "https://avatars.githubusercontent.com/u/470696?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1701299309,
                "node_id": "PRR_kwDOAi9Jds5lZ8Rt",
                "user": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "commit_id": "2f2dd8444cefe12a06235f388006afeb12cd5033",
                "submitted_at": "2023-10-27T08:49:42Z",
                "state": "commented",
                "html_url": "https://github.com/hashicorp/nomad/pull/18820#pullrequestreview-1701299309",
                "pull_request_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18820#pullrequestreview-1701299309"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820",
                "id": 1567084277,
                "node_id": "PR_kwDOAi9Jds5dZ871",
                "html_url": "https://github.com/hashicorp/nomad/pull/18820",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18820.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18820.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18820",
                "number": 18820,
                "state": "open",
                "locked": false,
                "title": "cli: consul setup command",
                "user": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "An interactive setup helper for configuring Consul to accept Nomad WI-enabled workloads. ",
                "created_at": "2023-10-20T17:10:14Z",
                "updated_at": "2023-10-27T08:49:42Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "82f0fa59f02f05537ed6bafeeff1638faeea4b23",
                "assignee": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "pkazmierczak",
                        "id": 470696,
                        "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/pkazmierczak",
                        "html_url": "https://github.com/pkazmierczak",
                        "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                        "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                        "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                        "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                        "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                        "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [
                    {
                        "login": "mikenomitch",
                        "id": 2732204,
                        "node_id": "MDQ6VXNlcjI3MzIyMDQ=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2732204?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mikenomitch",
                        "html_url": "https://github.com/mikenomitch",
                        "followers_url": "https://api.github.com/users/mikenomitch/followers",
                        "following_url": "https://api.github.com/users/mikenomitch/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mikenomitch/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mikenomitch/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mikenomitch/subscriptions",
                        "organizations_url": "https://api.github.com/users/mikenomitch/orgs",
                        "repos_url": "https://api.github.com/users/mikenomitch/repos",
                        "events_url": "https://api.github.com/users/mikenomitch/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mikenomitch/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 273199146,
                        "node_id": "MDU6TGFiZWwyNzMxOTkxNDY=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/cli",
                        "name": "theme/cli",
                        "color": "009800",
                        "default": false,
                        "description": ""
                    },
                    {
                        "id": 603156098,
                        "node_id": "MDU6TGFiZWw2MDMxNTYwOTg=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/consul",
                        "name": "theme/consul",
                        "color": "5319e7",
                        "default": false,
                        "description": ""
                    },
                    {
                        "id": 5306946477,
                        "node_id": "LA_kwDOAi9Jds8AAAABPFGTrQ",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/workload-identity",
                        "name": "theme/workload-identity",
                        "color": "c2e0c6",
                        "default": false,
                        "description": ""
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18820/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/b407f023e93ea6c721b9977506f8dd3820c8c125",
                "head": {
                    "label": "hashicorp:f-wi-consul-setup-consul-cmd",
                    "ref": "f-wi-consul-setup-consul-cmd",
                    "sha": "b407f023e93ea6c721b9977506f8dd3820c8c125",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T08:49:19Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "de28760928124b877d3db70342db804900cdbfd9",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T08:49:19Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18820"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18820"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18820/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/b407f023e93ea6c721b9977506f8dd3820c8c125"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T08:49:42Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32892999948",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 470696,
            "login": "pkazmierczak",
            "display_login": "pkazmierczak",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pkazmierczak",
            "avatar_url": "https://avatars.githubusercontent.com/u/470696?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374266246",
                "pull_request_review_id": 1701296211,
                "id": 1374266246,
                "node_id": "PRRC_kwDOAi9Jds5R6aOG",
                "diff_hunk": "@@ -0,0 +1,449 @@\n+// Copyright (c) HashiCorp, Inc.\n+// SPDX-License-Identifier: BUSL-1.1\n+\n+package command\n+\n+import (\n+\t_ \"embed\"\n+\t\"encoding/json\"\n+\t\"fmt\"\n+\t\"strings\"\n+\t\"time\"\n+\n+\t\"github.com/hashicorp/consul/api\"\n+\t\"github.com/mitchellh/cli\"\n+\t\"github.com/posener/complete\"\n+)\n+\n+// Ensure SetupConsulCommand satisfies the cli.Command interface.\n+var _ cli.Command = &SetupConsulCommand{}\n+\n+//go:embed asset/consul-wi-default-auth-method-config.json\n+var authConfigBody []byte\n+\n+//go:embed asset/consul-wi-default-policy.hcl\n+var policyBody []byte\n+\n+const (\n+\tauthMethodServices = \"nomad-services\"\n+\tauthMethodTasks    = \"nomad-tasks\"\n+\troleTasks          = \"role-nomad-tasks\"\n+\tpolicyName         = \"policy-nomad-tasks\"\n+\tdefaultTTL         = 8 * time.Hour\n+\taud                = \"consul.io\"\n+)\n+\n+type SetupConsulCommand struct {\n+\tMeta\n+\n+\t// client is the Consul API client shared by all functions in the command to\n+\t// reuse the same connection.\n+\tclient *api.Client\n+\n+\tjwksURL string\n+\n+\t// if set, answers \"Yes\" to all the interactive questions\n+\tautoYes bool\n+}\n+\n+// Help satisfies the cli.Command Help function.\n+func (s *SetupConsulCommand) Help() string {\n+\thelpText := `\n+Usage: nomad setup consul [options]\n+\n+  This command sets up Consul for allowing Nomad workloads to authenticate\n+  themselves using Workload Identity.\n+\n+  Setup Consul for Nomad:\n+\n+\t$ nomad setup consul -y -jwks=\"http://nomad.example/.well-known/jwks.json\"\n+`\n+\treturn strings.TrimSpace(helpText)\n+}\n+\n+func (s *SetupConsulCommand) AutocompleteFlags() complete.Flags {\n+\treturn mergeAutocompleteFlags(s.Meta.AutocompleteFlags(FlagSetClient),\n+\t\tcomplete.Flags{\n+\t\t\t\"-jwks-url\": complete.PredictAnything,\n+\t\t\t\"-y\":        complete.PredictSet(\"true\", \"false\"),\n+\t\t})\n+}\n+\n+func (s *SetupConsulCommand) AutocompleteArgs() complete.Predictor {\n+\treturn complete.PredictNothing\n+}\n+\n+// Synopsis satisfies the cli.Command Synopsis function.\n+func (s *SetupConsulCommand) Synopsis() string { return \"Interact with setup helpers\" }\n+\n+// Name returns the name of this command.\n+func (s *SetupConsulCommand) Name() string { return \"setup\" }\n+\n+// Run satisfies the cli.Command Run function.\n+func (s *SetupConsulCommand) Run(args []string) int {\n+\n+\tflags := s.Meta.FlagSet(s.Name(), FlagSetClient)\n+\tflags.Usage = func() { s.Ui.Output(s.Help()) }\n+\tflags.BoolVar(&s.autoYes, \"y\", false, \"\")\n+\tflags.StringVar(&s.jwksURL, \"jwks\", \"http://localhost:4646/.well-known/jwks.json\", \"\")\n+\tif err := flags.Parse(args); err != nil {\n+\t\treturn 1\n+\t}\n+\n+\t// Check that we got no arguments.\n+\tif len(flags.Args()) != 0 {\n+\t\ts.Ui.Error(\"This command takes no arguments\")\n+\t\ts.Ui.Error(commandErrorText(s))\n+\t\treturn 1\n+\t}\n+\n+\tvar err error\n+\n+\t// Get the Consul client.\n+\tcfg := api.DefaultConfig()\n+\ts.client, err = api.NewClient(cfg)\n+\tif err != nil {\n+\t\ts.Ui.Error(fmt.Sprintf(\"Error initializing Consul client: %s\", err))\n+\t\treturn 1\n+\t}\n+\n+\ts.Ui.Output(`\n+This command will walk you through configuring all the components required for \n+Nomad workloads to authenticate themselves against Consul ACL using their \n+respective Workload Identities. \n+\n+First we need to create a JWT auth method for Nomad services. Here is the auth\n+method configuration we will create:\n+`)\n+\n+\tauthMethodConf, err := s.renderAuthMethodConf(authMethodServices)\n+\tif err != nil {\n+\t\ts.Ui.Error(err.Error())\n+\t\treturn 1\n+\t}\n+\n+\tjsConf, _ := json.MarshalIndent(authMethodConf, \"\", \"\\t\")\n+\ts.Ui.Output(string(jsConf))\n+\n+\tvar createAuthMethod bool\n+\tif !s.autoYes {\n+\t\tcreateAuthMethod = s.askQuestion(\n+\t\t\tfmt.Sprintf(\n+\t\t\t\t\"Should we create the %s auth method in your Consul cluster? [Y/n]\",\n+\t\t\t\tauthMethodServices,\n+\t\t\t))\n+\t} else {\n+\t\tcreateAuthMethod = true\n+\t}\n+\n+\tif createAuthMethod {\n+\t\terr = s.createAuthMethod(authMethodServices, authMethodConf)\n+\t\tif err != nil {\n+\t\t\ts.Ui.Error(err.Error())\n+\t\t\treturn 1\n+\t\t}\n+\t}",
                "path": "command/setup_consul.go",
                "commit_id": "b407f023e93ea6c721b9977506f8dd3820c8c125",
                "original_commit_id": "2f2dd8444cefe12a06235f388006afeb12cd5033",
                "user": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "My reasoning was: if users reply `n` this indicates they either set some parts up themselves or prefer to set them up themselves. I think otherwise it makes no sense to have the interactive helper at all. ",
                "created_at": "2023-10-27T08:48:00Z",
                "updated_at": "2023-10-27T08:48:00Z",
                "html_url": "https://github.com/hashicorp/nomad/pull/18820#discussion_r1374266246",
                "pull_request_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374266246"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18820#discussion_r1374266246"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374266246/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": null,
                "original_start_line": null,
                "start_side": null,
                "line": 144,
                "original_line": 145,
                "side": "RIGHT",
                "in_reply_to_id": 1373855282,
                "original_position": 145,
                "position": 144,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820",
                "id": 1567084277,
                "node_id": "PR_kwDOAi9Jds5dZ871",
                "html_url": "https://github.com/hashicorp/nomad/pull/18820",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18820.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18820.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18820",
                "number": 18820,
                "state": "open",
                "locked": false,
                "title": "cli: consul setup command",
                "user": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "An interactive setup helper for configuring Consul to accept Nomad WI-enabled workloads. ",
                "created_at": "2023-10-20T17:10:14Z",
                "updated_at": "2023-10-27T08:48:00Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "82f0fa59f02f05537ed6bafeeff1638faeea4b23",
                "assignee": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "pkazmierczak",
                        "id": 470696,
                        "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/pkazmierczak",
                        "html_url": "https://github.com/pkazmierczak",
                        "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                        "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                        "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                        "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                        "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                        "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [
                    {
                        "login": "mikenomitch",
                        "id": 2732204,
                        "node_id": "MDQ6VXNlcjI3MzIyMDQ=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2732204?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mikenomitch",
                        "html_url": "https://github.com/mikenomitch",
                        "followers_url": "https://api.github.com/users/mikenomitch/followers",
                        "following_url": "https://api.github.com/users/mikenomitch/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mikenomitch/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mikenomitch/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mikenomitch/subscriptions",
                        "organizations_url": "https://api.github.com/users/mikenomitch/orgs",
                        "repos_url": "https://api.github.com/users/mikenomitch/repos",
                        "events_url": "https://api.github.com/users/mikenomitch/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mikenomitch/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 273199146,
                        "node_id": "MDU6TGFiZWwyNzMxOTkxNDY=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/cli",
                        "name": "theme/cli",
                        "color": "009800",
                        "default": false,
                        "description": ""
                    },
                    {
                        "id": 603156098,
                        "node_id": "MDU6TGFiZWw2MDMxNTYwOTg=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/consul",
                        "name": "theme/consul",
                        "color": "5319e7",
                        "default": false,
                        "description": ""
                    },
                    {
                        "id": 5306946477,
                        "node_id": "LA_kwDOAi9Jds8AAAABPFGTrQ",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/workload-identity",
                        "name": "theme/workload-identity",
                        "color": "c2e0c6",
                        "default": false,
                        "description": ""
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18820/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/b407f023e93ea6c721b9977506f8dd3820c8c125",
                "head": {
                    "label": "hashicorp:f-wi-consul-setup-consul-cmd",
                    "ref": "f-wi-consul-setup-consul-cmd",
                    "sha": "b407f023e93ea6c721b9977506f8dd3820c8c125",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "de28760928124b877d3db70342db804900cdbfd9",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18820"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18820"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18820/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/b407f023e93ea6c721b9977506f8dd3820c8c125"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T08:48:00Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32892999890",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 470696,
            "login": "pkazmierczak",
            "display_login": "pkazmierczak",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pkazmierczak",
            "avatar_url": "https://avatars.githubusercontent.com/u/470696?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1701296211,
                "node_id": "PRR_kwDOAi9Jds5lZ7hT",
                "user": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "commit_id": "2f2dd8444cefe12a06235f388006afeb12cd5033",
                "submitted_at": "2023-10-27T08:48:00Z",
                "state": "commented",
                "html_url": "https://github.com/hashicorp/nomad/pull/18820#pullrequestreview-1701296211",
                "pull_request_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18820#pullrequestreview-1701296211"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820",
                "id": 1567084277,
                "node_id": "PR_kwDOAi9Jds5dZ871",
                "html_url": "https://github.com/hashicorp/nomad/pull/18820",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18820.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18820.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18820",
                "number": 18820,
                "state": "open",
                "locked": false,
                "title": "cli: consul setup command",
                "user": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "An interactive setup helper for configuring Consul to accept Nomad WI-enabled workloads. ",
                "created_at": "2023-10-20T17:10:14Z",
                "updated_at": "2023-10-27T08:48:00Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "82f0fa59f02f05537ed6bafeeff1638faeea4b23",
                "assignee": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "pkazmierczak",
                        "id": 470696,
                        "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/pkazmierczak",
                        "html_url": "https://github.com/pkazmierczak",
                        "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                        "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                        "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                        "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                        "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                        "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [
                    {
                        "login": "mikenomitch",
                        "id": 2732204,
                        "node_id": "MDQ6VXNlcjI3MzIyMDQ=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2732204?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mikenomitch",
                        "html_url": "https://github.com/mikenomitch",
                        "followers_url": "https://api.github.com/users/mikenomitch/followers",
                        "following_url": "https://api.github.com/users/mikenomitch/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mikenomitch/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mikenomitch/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mikenomitch/subscriptions",
                        "organizations_url": "https://api.github.com/users/mikenomitch/orgs",
                        "repos_url": "https://api.github.com/users/mikenomitch/repos",
                        "events_url": "https://api.github.com/users/mikenomitch/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mikenomitch/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 273199146,
                        "node_id": "MDU6TGFiZWwyNzMxOTkxNDY=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/cli",
                        "name": "theme/cli",
                        "color": "009800",
                        "default": false,
                        "description": ""
                    },
                    {
                        "id": 603156098,
                        "node_id": "MDU6TGFiZWw2MDMxNTYwOTg=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/consul",
                        "name": "theme/consul",
                        "color": "5319e7",
                        "default": false,
                        "description": ""
                    },
                    {
                        "id": 5306946477,
                        "node_id": "LA_kwDOAi9Jds8AAAABPFGTrQ",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/workload-identity",
                        "name": "theme/workload-identity",
                        "color": "c2e0c6",
                        "default": false,
                        "description": ""
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18820/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/b407f023e93ea6c721b9977506f8dd3820c8c125",
                "head": {
                    "label": "hashicorp:f-wi-consul-setup-consul-cmd",
                    "ref": "f-wi-consul-setup-consul-cmd",
                    "sha": "b407f023e93ea6c721b9977506f8dd3820c8c125",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "de28760928124b877d3db70342db804900cdbfd9",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18820"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18820"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18820/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/b407f023e93ea6c721b9977506f8dd3820c8c125"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T08:48:01Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32892897948",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 2980562,
            "login": "jrasell",
            "display_login": "jrasell",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jrasell",
            "avatar_url": "https://avatars.githubusercontent.com/u/2980562?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374261881",
                "pull_request_review_id": 1701289314,
                "id": 1374261881,
                "node_id": "PRRC_kwDOAi9Jds5R6ZJ5",
                "diff_hunk": "@@ -635,11 +648,25 @@ func bitmapFrom(input allocSet, minSize uint) structs.Bitmap {\n \t\tpanic(err)\n \t}\n \n+\t// Initialize our duplicates mapping, allowing us to store a non-nil map\n+\t// at the cost of 48 bytes.\n+\tduplicates := make(map[uint]int)\n+\n+\t// Iterate through the allocSet input and hydrate the bitmap. We check that\n+\t// the bitmap does not contain the index first, so we can track duplicate\n+\t// entries.\n \tfor _, a := range input {\n-\t\tbitmap.Set(a.Index())\n+\n+\t\tallocIndex := a.Index()\n+\n+\t\tif bitmap.Check(allocIndex) {\n+\t\t\tduplicates[allocIndex]++\n+\t\t} else {\n+\t\t\tbitmap.Set(allocIndex)\n+\t\t}",
                "path": "scheduler/reconcile_util.go",
                "commit_id": "965e9a08bcb3676bf3c810cd6f8376e66f83d7c7",
                "original_commit_id": "9fb64df1a75835ef9201cf1668f2890254c9ebcb",
                "user": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "I agree that the name index tracking could be updated to include duplicates without using a bitmap, however, I think reworking this should be done within any follow-up. This change seems fairly low risk and targeted, whereas a larger rewrite would require substantial regression testing to be included. I'll raise an issue to discuss the idea of reworking the tracking, which I could noodle on casually.",
                "created_at": "2023-10-27T08:44:03Z",
                "updated_at": "2023-10-27T08:44:03Z",
                "html_url": "https://github.com/hashicorp/nomad/pull/18873#discussion_r1374261881",
                "pull_request_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873",
                "author_association": "MEMBER",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374261881"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18873#discussion_r1374261881"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374261881/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": 658,
                "original_start_line": 660,
                "start_side": "RIGHT",
                "line": 664,
                "original_line": 666,
                "side": "RIGHT",
                "in_reply_to_id": 1373502528,
                "original_position": 70,
                "position": 61,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873",
                "id": 1574570052,
                "node_id": "PR_kwDOAi9Jds5d2ghE",
                "html_url": "https://github.com/hashicorp/nomad/pull/18873",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18873.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18873.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18873",
                "number": 18873,
                "state": "open",
                "locked": false,
                "title": "scheduler: ensure dup alloc names are fixed before plan submit.",
                "user": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "This change fixes a bug within the generic scheduler which meant duplicate alloc indexes (names) could be submitted to the plan applier and written to state. The bug originates from the placements calculation notion that names of allocations being replaced are blindly copied to their replacement. This is not correct in all cases, particularly when dealing with canaries.\r\n\r\nThe fix updates the alloc name index tracker to include minor duplicate tracking. This can be used when computing placements to ensure duplicate are found, and a new name picked before the plan is submitted. The name index tracking is now passed from the reconciler to the generic scheduler via the results, so this does not have to be regenerated, or another data structure used.\r\n\r\ncloses #10727 \r\n\r\n### Reviewer Notes\r\nThe new test `TestServiceSched_JobModify_ProposedDuplicateAllocIndex` mimics the reproduction behaviour and can be used to see how the code change has fixed the bug.\r\n\r\n[This reproduction](https://github.com/jrasell/dev-mess/tree/main/nomad/development/gh10727) can be used to test the code change in a manual way. The reproduction (in my testing) worked 100% of the time. ",
                "created_at": "2023-10-26T10:54:46Z",
                "updated_at": "2023-10-27T08:44:03Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "cca78fdf44aa2d84cc619bdfa1accb0e79b1519d",
                "assignee": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "jrasell",
                        "id": 2980562,
                        "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/jrasell",
                        "html_url": "https://github.com/jrasell",
                        "followers_url": "https://api.github.com/users/jrasell/followers",
                        "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                        "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                        "organizations_url": "https://api.github.com/users/jrasell/orgs",
                        "repos_url": "https://api.github.com/users/jrasell/repos",
                        "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/jrasell/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 4584836759,
                        "node_id": "LA_kwDOAi9Jds8AAAABEUcOlw",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.4.x",
                        "name": "backport/1.4.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.4.x release line"
                    },
                    {
                        "id": 5211929297,
                        "node_id": "LA_kwDOAi9Jds8AAAABNqe60Q",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.5.x",
                        "name": "backport/1.5.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.5.x release line"
                    },
                    {
                        "id": 5723588925,
                        "node_id": "LA_kwDOAi9Jds8AAAABVScJPQ",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.6.x",
                        "name": "backport/1.6.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.6.x release line"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18873/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/965e9a08bcb3676bf3c810cd6f8376e66f83d7c7",
                "head": {
                    "label": "hashicorp:gh-10727-sched-fix-method",
                    "ref": "gh-10727-sched-fix-method",
                    "sha": "965e9a08bcb3676bf3c810cd6f8376e66f83d7c7",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "7f62dec473d7a51210d57cdd8b531311c04b35c0",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18873"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18873"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18873/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/965e9a08bcb3676bf3c810cd6f8376e66f83d7c7"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T08:44:03Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32892897907",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 2980562,
            "login": "jrasell",
            "display_login": "jrasell",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jrasell",
            "avatar_url": "https://avatars.githubusercontent.com/u/2980562?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1701289314,
                "node_id": "PRR_kwDOAi9Jds5lZ51i",
                "user": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "commit_id": "9fb64df1a75835ef9201cf1668f2890254c9ebcb",
                "submitted_at": "2023-10-27T08:44:03Z",
                "state": "commented",
                "html_url": "https://github.com/hashicorp/nomad/pull/18873#pullrequestreview-1701289314",
                "pull_request_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873",
                "author_association": "MEMBER",
                "_links": {
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18873#pullrequestreview-1701289314"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873",
                "id": 1574570052,
                "node_id": "PR_kwDOAi9Jds5d2ghE",
                "html_url": "https://github.com/hashicorp/nomad/pull/18873",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18873.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18873.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18873",
                "number": 18873,
                "state": "open",
                "locked": false,
                "title": "scheduler: ensure dup alloc names are fixed before plan submit.",
                "user": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "This change fixes a bug within the generic scheduler which meant duplicate alloc indexes (names) could be submitted to the plan applier and written to state. The bug originates from the placements calculation notion that names of allocations being replaced are blindly copied to their replacement. This is not correct in all cases, particularly when dealing with canaries.\r\n\r\nThe fix updates the alloc name index tracker to include minor duplicate tracking. This can be used when computing placements to ensure duplicate are found, and a new name picked before the plan is submitted. The name index tracking is now passed from the reconciler to the generic scheduler via the results, so this does not have to be regenerated, or another data structure used.\r\n\r\ncloses #10727 \r\n\r\n### Reviewer Notes\r\nThe new test `TestServiceSched_JobModify_ProposedDuplicateAllocIndex` mimics the reproduction behaviour and can be used to see how the code change has fixed the bug.\r\n\r\n[This reproduction](https://github.com/jrasell/dev-mess/tree/main/nomad/development/gh10727) can be used to test the code change in a manual way. The reproduction (in my testing) worked 100% of the time. ",
                "created_at": "2023-10-26T10:54:46Z",
                "updated_at": "2023-10-27T08:44:03Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "cca78fdf44aa2d84cc619bdfa1accb0e79b1519d",
                "assignee": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "jrasell",
                        "id": 2980562,
                        "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/jrasell",
                        "html_url": "https://github.com/jrasell",
                        "followers_url": "https://api.github.com/users/jrasell/followers",
                        "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                        "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                        "organizations_url": "https://api.github.com/users/jrasell/orgs",
                        "repos_url": "https://api.github.com/users/jrasell/repos",
                        "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/jrasell/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 4584836759,
                        "node_id": "LA_kwDOAi9Jds8AAAABEUcOlw",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.4.x",
                        "name": "backport/1.4.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.4.x release line"
                    },
                    {
                        "id": 5211929297,
                        "node_id": "LA_kwDOAi9Jds8AAAABNqe60Q",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.5.x",
                        "name": "backport/1.5.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.5.x release line"
                    },
                    {
                        "id": 5723588925,
                        "node_id": "LA_kwDOAi9Jds8AAAABVScJPQ",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.6.x",
                        "name": "backport/1.6.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.6.x release line"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18873/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/965e9a08bcb3676bf3c810cd6f8376e66f83d7c7",
                "head": {
                    "label": "hashicorp:gh-10727-sched-fix-method",
                    "ref": "gh-10727-sched-fix-method",
                    "sha": "965e9a08bcb3676bf3c810cd6f8376e66f83d7c7",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "7f62dec473d7a51210d57cdd8b531311c04b35c0",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18873"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18873"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18873/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/965e9a08bcb3676bf3c810cd6f8376e66f83d7c7"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T08:44:04Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32892850312",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 470696,
            "login": "pkazmierczak",
            "display_login": "pkazmierczak",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pkazmierczak",
            "avatar_url": "https://avatars.githubusercontent.com/u/470696?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374259856",
                "pull_request_review_id": 1701286101,
                "id": 1374259856,
                "node_id": "PRRC_kwDOAi9Jds5R6YqQ",
                "diff_hunk": "@@ -0,0 +1,449 @@\n+// Copyright (c) HashiCorp, Inc.\n+// SPDX-License-Identifier: BUSL-1.1\n+\n+package command\n+\n+import (\n+\t_ \"embed\"\n+\t\"encoding/json\"\n+\t\"fmt\"\n+\t\"strings\"\n+\t\"time\"\n+\n+\t\"github.com/hashicorp/consul/api\"\n+\t\"github.com/mitchellh/cli\"\n+\t\"github.com/posener/complete\"\n+)\n+\n+// Ensure SetupConsulCommand satisfies the cli.Command interface.\n+var _ cli.Command = &SetupConsulCommand{}\n+\n+//go:embed asset/consul-wi-default-auth-method-config.json\n+var authConfigBody []byte\n+\n+//go:embed asset/consul-wi-default-policy.hcl\n+var policyBody []byte\n+\n+const (\n+\tauthMethodServices = \"nomad-services\"\n+\tauthMethodTasks    = \"nomad-tasks\"",
                "path": "command/setup_consul.go",
                "commit_id": "b407f023e93ea6c721b9977506f8dd3820c8c125",
                "original_commit_id": "2f2dd8444cefe12a06235f388006afeb12cd5033",
                "user": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "\ud83d\ude2c yeah...",
                "created_at": "2023-10-27T08:42:11Z",
                "updated_at": "2023-10-27T08:42:12Z",
                "html_url": "https://github.com/hashicorp/nomad/pull/18820#discussion_r1374259856",
                "pull_request_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374259856"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18820#discussion_r1374259856"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374259856/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": 28,
                "original_start_line": 28,
                "start_side": "RIGHT",
                "line": 29,
                "original_line": 29,
                "side": "RIGHT",
                "in_reply_to_id": 1373831180,
                "original_position": 29,
                "position": 29,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820",
                "id": 1567084277,
                "node_id": "PR_kwDOAi9Jds5dZ871",
                "html_url": "https://github.com/hashicorp/nomad/pull/18820",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18820.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18820.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18820",
                "number": 18820,
                "state": "open",
                "locked": false,
                "title": "cli: consul setup command",
                "user": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "An interactive setup helper for configuring Consul to accept Nomad WI-enabled workloads. ",
                "created_at": "2023-10-20T17:10:14Z",
                "updated_at": "2023-10-27T08:42:12Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "82f0fa59f02f05537ed6bafeeff1638faeea4b23",
                "assignee": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "pkazmierczak",
                        "id": 470696,
                        "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/pkazmierczak",
                        "html_url": "https://github.com/pkazmierczak",
                        "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                        "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                        "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                        "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                        "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                        "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [
                    {
                        "login": "mikenomitch",
                        "id": 2732204,
                        "node_id": "MDQ6VXNlcjI3MzIyMDQ=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2732204?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mikenomitch",
                        "html_url": "https://github.com/mikenomitch",
                        "followers_url": "https://api.github.com/users/mikenomitch/followers",
                        "following_url": "https://api.github.com/users/mikenomitch/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mikenomitch/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mikenomitch/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mikenomitch/subscriptions",
                        "organizations_url": "https://api.github.com/users/mikenomitch/orgs",
                        "repos_url": "https://api.github.com/users/mikenomitch/repos",
                        "events_url": "https://api.github.com/users/mikenomitch/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mikenomitch/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 273199146,
                        "node_id": "MDU6TGFiZWwyNzMxOTkxNDY=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/cli",
                        "name": "theme/cli",
                        "color": "009800",
                        "default": false,
                        "description": ""
                    },
                    {
                        "id": 603156098,
                        "node_id": "MDU6TGFiZWw2MDMxNTYwOTg=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/consul",
                        "name": "theme/consul",
                        "color": "5319e7",
                        "default": false,
                        "description": ""
                    },
                    {
                        "id": 5306946477,
                        "node_id": "LA_kwDOAi9Jds8AAAABPFGTrQ",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/workload-identity",
                        "name": "theme/workload-identity",
                        "color": "c2e0c6",
                        "default": false,
                        "description": ""
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18820/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/b407f023e93ea6c721b9977506f8dd3820c8c125",
                "head": {
                    "label": "hashicorp:f-wi-consul-setup-consul-cmd",
                    "ref": "f-wi-consul-setup-consul-cmd",
                    "sha": "b407f023e93ea6c721b9977506f8dd3820c8c125",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "de28760928124b877d3db70342db804900cdbfd9",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18820"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18820"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18820/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/b407f023e93ea6c721b9977506f8dd3820c8c125"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T08:42:11Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32892850167",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 470696,
            "login": "pkazmierczak",
            "display_login": "pkazmierczak",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pkazmierczak",
            "avatar_url": "https://avatars.githubusercontent.com/u/470696?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1701286101,
                "node_id": "PRR_kwDOAi9Jds5lZ5DV",
                "user": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "",
                "commit_id": "b407f023e93ea6c721b9977506f8dd3820c8c125",
                "submitted_at": "2023-10-27T08:42:12Z",
                "state": "commented",
                "html_url": "https://github.com/hashicorp/nomad/pull/18820#pullrequestreview-1701286101",
                "pull_request_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18820#pullrequestreview-1701286101"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820",
                "id": 1567084277,
                "node_id": "PR_kwDOAi9Jds5dZ871",
                "html_url": "https://github.com/hashicorp/nomad/pull/18820",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18820.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18820.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18820",
                "number": 18820,
                "state": "open",
                "locked": false,
                "title": "cli: consul setup command",
                "user": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "An interactive setup helper for configuring Consul to accept Nomad WI-enabled workloads. ",
                "created_at": "2023-10-20T17:10:14Z",
                "updated_at": "2023-10-27T08:42:12Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "82f0fa59f02f05537ed6bafeeff1638faeea4b23",
                "assignee": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "pkazmierczak",
                        "id": 470696,
                        "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/pkazmierczak",
                        "html_url": "https://github.com/pkazmierczak",
                        "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                        "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                        "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                        "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                        "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                        "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [
                    {
                        "login": "mikenomitch",
                        "id": 2732204,
                        "node_id": "MDQ6VXNlcjI3MzIyMDQ=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2732204?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mikenomitch",
                        "html_url": "https://github.com/mikenomitch",
                        "followers_url": "https://api.github.com/users/mikenomitch/followers",
                        "following_url": "https://api.github.com/users/mikenomitch/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mikenomitch/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mikenomitch/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mikenomitch/subscriptions",
                        "organizations_url": "https://api.github.com/users/mikenomitch/orgs",
                        "repos_url": "https://api.github.com/users/mikenomitch/repos",
                        "events_url": "https://api.github.com/users/mikenomitch/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mikenomitch/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 273199146,
                        "node_id": "MDU6TGFiZWwyNzMxOTkxNDY=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/cli",
                        "name": "theme/cli",
                        "color": "009800",
                        "default": false,
                        "description": ""
                    },
                    {
                        "id": 603156098,
                        "node_id": "MDU6TGFiZWw2MDMxNTYwOTg=",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/consul",
                        "name": "theme/consul",
                        "color": "5319e7",
                        "default": false,
                        "description": ""
                    },
                    {
                        "id": 5306946477,
                        "node_id": "LA_kwDOAi9Jds8AAAABPFGTrQ",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/theme/workload-identity",
                        "name": "theme/workload-identity",
                        "color": "c2e0c6",
                        "default": false,
                        "description": ""
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18820/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/b407f023e93ea6c721b9977506f8dd3820c8c125",
                "head": {
                    "label": "hashicorp:f-wi-consul-setup-consul-cmd",
                    "ref": "f-wi-consul-setup-consul-cmd",
                    "sha": "b407f023e93ea6c721b9977506f8dd3820c8c125",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "de28760928124b877d3db70342db804900cdbfd9",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 443002,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18820"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18820"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18820/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18820/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/b407f023e93ea6c721b9977506f8dd3820c8c125"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T08:42:13Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32891911745",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 470696,
            "login": "pkazmierczak",
            "display_login": "pkazmierczak",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pkazmierczak",
            "avatar_url": "https://avatars.githubusercontent.com/u/470696?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1701216266,
                "node_id": "PRR_kwDOAi9Jds5lZoAK",
                "user": {
                    "login": "pkazmierczak",
                    "id": 470696,
                    "node_id": "MDQ6VXNlcjQ3MDY5Ng==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/470696?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pkazmierczak",
                    "html_url": "https://github.com/pkazmierczak",
                    "followers_url": "https://api.github.com/users/pkazmierczak/followers",
                    "following_url": "https://api.github.com/users/pkazmierczak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pkazmierczak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pkazmierczak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pkazmierczak/subscriptions",
                    "organizations_url": "https://api.github.com/users/pkazmierczak/orgs",
                    "repos_url": "https://api.github.com/users/pkazmierczak/repos",
                    "events_url": "https://api.github.com/users/pkazmierczak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pkazmierczak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "LGTM!",
                "commit_id": "8921b9f389ab455f4acce4653ba02ec3c5c96f9b",
                "submitted_at": "2023-10-27T08:05:40Z",
                "state": "approved",
                "html_url": "https://github.com/hashicorp/nomad/pull/18881#pullrequestreview-1701216266",
                "pull_request_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18881",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18881#pullrequestreview-1701216266"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18881"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18881",
                "id": 1575653144,
                "node_id": "PR_kwDOAi9Jds5d6o8Y",
                "html_url": "https://github.com/hashicorp/nomad/pull/18881",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18881.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18881.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18881",
                "number": 18881,
                "state": "open",
                "locked": false,
                "title": "cli: deprecate -vault-token flag",
                "user": {
                    "login": "lgfa29",
                    "id": 775380,
                    "node_id": "MDQ6VXNlcjc3NTM4MA==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/775380?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/lgfa29",
                    "html_url": "https://github.com/lgfa29",
                    "followers_url": "https://api.github.com/users/lgfa29/followers",
                    "following_url": "https://api.github.com/users/lgfa29/following{/other_user}",
                    "gists_url": "https://api.github.com/users/lgfa29/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/lgfa29/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/lgfa29/subscriptions",
                    "organizations_url": "https://api.github.com/users/lgfa29/orgs",
                    "repos_url": "https://api.github.com/users/lgfa29/repos",
                    "events_url": "https://api.github.com/users/lgfa29/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/lgfa29/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Apply the same deprecation notice from #18863 to the `nomad job plan` command.",
                "created_at": "2023-10-26T22:17:37Z",
                "updated_at": "2023-10-27T08:05:40Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "ec3a17f6d14ff040dcb319749902a88b499d51e5",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [
                    {
                        "login": "tgross",
                        "id": 1409219,
                        "node_id": "MDQ6VXNlcjE0MDkyMTk=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/1409219?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/tgross",
                        "html_url": "https://github.com/tgross",
                        "followers_url": "https://api.github.com/users/tgross/followers",
                        "following_url": "https://api.github.com/users/tgross/following{/other_user}",
                        "gists_url": "https://api.github.com/users/tgross/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/tgross/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/tgross/subscriptions",
                        "organizations_url": "https://api.github.com/users/tgross/orgs",
                        "repos_url": "https://api.github.com/users/tgross/repos",
                        "events_url": "https://api.github.com/users/tgross/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/tgross/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_teams": [],
                "labels": [],
                "milestone": {
                    "url": "https://api.github.com/repos/hashicorp/nomad/milestones/65",
                    "html_url": "https://github.com/hashicorp/nomad/milestone/65",
                    "labels_url": "https://api.github.com/repos/hashicorp/nomad/milestones/65/labels",
                    "id": 9577421,
                    "node_id": "MI_kwDOAi9Jds4AkiPN",
                    "number": 65,
                    "title": "1.7.0",
                    "description": "",
                    "creator": {
                        "login": "tgross",
                        "id": 1409219,
                        "node_id": "MDQ6VXNlcjE0MDkyMTk=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/1409219?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/tgross",
                        "html_url": "https://github.com/tgross",
                        "followers_url": "https://api.github.com/users/tgross/followers",
                        "following_url": "https://api.github.com/users/tgross/following{/other_user}",
                        "gists_url": "https://api.github.com/users/tgross/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/tgross/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/tgross/subscriptions",
                        "organizations_url": "https://api.github.com/users/tgross/orgs",
                        "repos_url": "https://api.github.com/users/tgross/repos",
                        "events_url": "https://api.github.com/users/tgross/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/tgross/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "open_issues": 17,
                    "closed_issues": 81,
                    "state": "open",
                    "created_at": "2023-06-23T19:15:54Z",
                    "updated_at": "2023-10-27T03:43:04Z",
                    "due_on": null,
                    "closed_at": null
                },
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18881/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18881/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18881/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/8921b9f389ab455f4acce4653ba02ec3c5c96f9b",
                "head": {
                    "label": "hashicorp:cli-job-plan-deprecate-vault-token",
                    "ref": "cli-job-plan-deprecate-vault-token",
                    "sha": "8921b9f389ab455f4acce4653ba02ec3c5c96f9b",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 442955,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "23665a56850f335d81dc976acdaac014aacb088a",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 442955,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18881"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18881"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18881"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18881/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18881/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18881/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/8921b9f389ab455f4acce4653ba02ec3c5c96f9b"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T08:05:41Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32891368230",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 2980562,
            "login": "jrasell",
            "display_login": "jrasell",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jrasell",
            "avatar_url": "https://avatars.githubusercontent.com/u/2980562?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374191163",
                "pull_request_review_id": 1701178588,
                "id": 1374191163,
                "node_id": "PRRC_kwDOAi9Jds5R6H47",
                "diff_hunk": "@@ -1970,6 +1970,215 @@ func TestServiceSched_JobModify(t *testing.T) {\n \th.AssertEvalStatus(t, structs.EvalStatusComplete)\n }\n \n+func TestServiceSched_JobModify_ExistingDuplicateAllocIndex(t *testing.T) {\n+\tci.Parallel(t)\n+\n+\ttestHarness := NewHarness(t)\n+\n+\t// Create some nodes\n+\tvar nodes []*structs.Node\n+\tfor i := 0; i < 10; i++ {\n+\t\tnode := mock.Node()\n+\t\tnodes = append(nodes, node)\n+\t\tmust.NoError(t, testHarness.State.UpsertNode(structs.MsgTypeTestSetup, testHarness.NextIndex(), node))\n+\t}\n+\n+\t// Generate a fake job with allocations\n+\tmockJob := mock.Job()\n+\tmust.NoError(t, testHarness.State.UpsertJob(structs.MsgTypeTestSetup, testHarness.NextIndex(), nil, mockJob))\n+\n+\t// Generate some allocations which will represent our pre-existing\n+\t// allocations. These have aggressive duplicate names.\n+\tvar allocs []*structs.Allocation\n+\tfor i := 0; i < 10; i++ {\n+\t\talloc := mock.Alloc()\n+\t\talloc.Job = mockJob\n+\t\talloc.JobID = mockJob.ID\n+\t\talloc.NodeID = nodes[i].ID\n+\n+\t\talloc.Name = fmt.Sprintf(\"my-job.web[%d]\", i)\n+\n+\t\tif i%2 == 0 {\n+\t\t\talloc.Name = \"my-job.web[0]\"\n+\t\t}\n+\t\tallocs = append(allocs, alloc)\n+\t}\n+\tmust.NoError(t, testHarness.State.UpsertAllocs(structs.MsgTypeTestSetup, testHarness.NextIndex(), allocs))\n+\n+\t// Generate a job modification which will force a destructive update.\n+\tmockJob2 := mock.Job()\n+\tmockJob2.ID = mockJob.ID\n+\tmockJob2.TaskGroups[0].Tasks[0].Config[\"command\"] = \"/bin/other\"\n+\tmust.NoError(t, testHarness.State.UpsertJob(structs.MsgTypeTestSetup, testHarness.NextIndex(), nil, mockJob2))",
                "path": "scheduler/generic_sched_test.go",
                "commit_id": "965e9a08bcb3676bf3c810cd6f8376e66f83d7c7",
                "original_commit_id": "9fb64df1a75835ef9201cf1668f2890254c9ebcb",
                "user": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Resolved within commit https://github.com/hashicorp/nomad/pull/18873/commits/9fb64df1a75835ef9201cf1668f2890254c9ebcb",
                "created_at": "2023-10-27T07:43:15Z",
                "updated_at": "2023-10-27T07:43:15Z",
                "html_url": "https://github.com/hashicorp/nomad/pull/18873#discussion_r1374191163",
                "pull_request_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873",
                "author_association": "MEMBER",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374191163"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18873#discussion_r1374191163"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374191163/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": 2008,
                "original_start_line": 2008,
                "start_side": "RIGHT",
                "line": 2012,
                "original_line": 2012,
                "side": "RIGHT",
                "in_reply_to_id": 1373262967,
                "original_position": 43,
                "position": 43,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873",
                "id": 1574570052,
                "node_id": "PR_kwDOAi9Jds5d2ghE",
                "html_url": "https://github.com/hashicorp/nomad/pull/18873",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18873.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18873.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18873",
                "number": 18873,
                "state": "open",
                "locked": false,
                "title": "scheduler: ensure dup alloc names are fixed before plan submit.",
                "user": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "This change fixes a bug within the generic scheduler which meant duplicate alloc indexes (names) could be submitted to the plan applier and written to state. The bug originates from the placements calculation notion that names of allocations being replaced are blindly copied to their replacement. This is not correct in all cases, particularly when dealing with canaries.\r\n\r\nThe fix updates the alloc name index tracker to include minor duplicate tracking. This can be used when computing placements to ensure duplicate are found, and a new name picked before the plan is submitted. The name index tracking is now passed from the reconciler to the generic scheduler via the results, so this does not have to be regenerated, or another data structure used.\r\n\r\ncloses #10727 \r\n\r\n### Reviewer Notes\r\nThe new test `TestServiceSched_JobModify_ProposedDuplicateAllocIndex` mimics the reproduction behaviour and can be used to see how the code change has fixed the bug.\r\n\r\n[This reproduction](https://github.com/jrasell/dev-mess/tree/main/nomad/development/gh10727) can be used to test the code change in a manual way. The reproduction (in my testing) worked 100% of the time. ",
                "created_at": "2023-10-26T10:54:46Z",
                "updated_at": "2023-10-27T07:43:15Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "cca78fdf44aa2d84cc619bdfa1accb0e79b1519d",
                "assignee": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "jrasell",
                        "id": 2980562,
                        "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/jrasell",
                        "html_url": "https://github.com/jrasell",
                        "followers_url": "https://api.github.com/users/jrasell/followers",
                        "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                        "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                        "organizations_url": "https://api.github.com/users/jrasell/orgs",
                        "repos_url": "https://api.github.com/users/jrasell/repos",
                        "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/jrasell/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 4584836759,
                        "node_id": "LA_kwDOAi9Jds8AAAABEUcOlw",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.4.x",
                        "name": "backport/1.4.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.4.x release line"
                    },
                    {
                        "id": 5211929297,
                        "node_id": "LA_kwDOAi9Jds8AAAABNqe60Q",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.5.x",
                        "name": "backport/1.5.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.5.x release line"
                    },
                    {
                        "id": 5723588925,
                        "node_id": "LA_kwDOAi9Jds8AAAABVScJPQ",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.6.x",
                        "name": "backport/1.6.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.6.x release line"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18873/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/965e9a08bcb3676bf3c810cd6f8376e66f83d7c7",
                "head": {
                    "label": "hashicorp:gh-10727-sched-fix-method",
                    "ref": "gh-10727-sched-fix-method",
                    "sha": "965e9a08bcb3676bf3c810cd6f8376e66f83d7c7",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 442955,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "7f62dec473d7a51210d57cdd8b531311c04b35c0",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 442955,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18873"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18873"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18873/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/965e9a08bcb3676bf3c810cd6f8376e66f83d7c7"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T07:43:15Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32891368175",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 2980562,
            "login": "jrasell",
            "display_login": "jrasell",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jrasell",
            "avatar_url": "https://avatars.githubusercontent.com/u/2980562?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1701178588,
                "node_id": "PRR_kwDOAi9Jds5lZezc",
                "user": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "commit_id": "9fb64df1a75835ef9201cf1668f2890254c9ebcb",
                "submitted_at": "2023-10-27T07:43:15Z",
                "state": "commented",
                "html_url": "https://github.com/hashicorp/nomad/pull/18873#pullrequestreview-1701178588",
                "pull_request_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873",
                "author_association": "MEMBER",
                "_links": {
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18873#pullrequestreview-1701178588"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873",
                "id": 1574570052,
                "node_id": "PR_kwDOAi9Jds5d2ghE",
                "html_url": "https://github.com/hashicorp/nomad/pull/18873",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18873.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18873.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18873",
                "number": 18873,
                "state": "open",
                "locked": false,
                "title": "scheduler: ensure dup alloc names are fixed before plan submit.",
                "user": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "This change fixes a bug within the generic scheduler which meant duplicate alloc indexes (names) could be submitted to the plan applier and written to state. The bug originates from the placements calculation notion that names of allocations being replaced are blindly copied to their replacement. This is not correct in all cases, particularly when dealing with canaries.\r\n\r\nThe fix updates the alloc name index tracker to include minor duplicate tracking. This can be used when computing placements to ensure duplicate are found, and a new name picked before the plan is submitted. The name index tracking is now passed from the reconciler to the generic scheduler via the results, so this does not have to be regenerated, or another data structure used.\r\n\r\ncloses #10727 \r\n\r\n### Reviewer Notes\r\nThe new test `TestServiceSched_JobModify_ProposedDuplicateAllocIndex` mimics the reproduction behaviour and can be used to see how the code change has fixed the bug.\r\n\r\n[This reproduction](https://github.com/jrasell/dev-mess/tree/main/nomad/development/gh10727) can be used to test the code change in a manual way. The reproduction (in my testing) worked 100% of the time. ",
                "created_at": "2023-10-26T10:54:46Z",
                "updated_at": "2023-10-27T07:43:15Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "cca78fdf44aa2d84cc619bdfa1accb0e79b1519d",
                "assignee": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "jrasell",
                        "id": 2980562,
                        "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/jrasell",
                        "html_url": "https://github.com/jrasell",
                        "followers_url": "https://api.github.com/users/jrasell/followers",
                        "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                        "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                        "organizations_url": "https://api.github.com/users/jrasell/orgs",
                        "repos_url": "https://api.github.com/users/jrasell/repos",
                        "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/jrasell/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 4584836759,
                        "node_id": "LA_kwDOAi9Jds8AAAABEUcOlw",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.4.x",
                        "name": "backport/1.4.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.4.x release line"
                    },
                    {
                        "id": 5211929297,
                        "node_id": "LA_kwDOAi9Jds8AAAABNqe60Q",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.5.x",
                        "name": "backport/1.5.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.5.x release line"
                    },
                    {
                        "id": 5723588925,
                        "node_id": "LA_kwDOAi9Jds8AAAABVScJPQ",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.6.x",
                        "name": "backport/1.6.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.6.x release line"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18873/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/965e9a08bcb3676bf3c810cd6f8376e66f83d7c7",
                "head": {
                    "label": "hashicorp:gh-10727-sched-fix-method",
                    "ref": "gh-10727-sched-fix-method",
                    "sha": "965e9a08bcb3676bf3c810cd6f8376e66f83d7c7",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 442955,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "7f62dec473d7a51210d57cdd8b531311c04b35c0",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 442955,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18873"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18873"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18873/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/965e9a08bcb3676bf3c810cd6f8376e66f83d7c7"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T07:43:16Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32891364093",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 2980562,
            "login": "jrasell",
            "display_login": "jrasell",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jrasell",
            "avatar_url": "https://avatars.githubusercontent.com/u/2980562?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374190996",
                "pull_request_review_id": 1701178338,
                "id": 1374190996,
                "node_id": "PRRC_kwDOAi9Jds5R6H2U",
                "diff_hunk": "@@ -583,24 +584,36 @@ type allocNameIndex struct {\n \tjob, taskGroup string\n \tcount          int\n \tb              structs.Bitmap\n+\n+\t// duplicates is used to store duplicate allocation indexes which are\n+\t// currently present within the index tracking. The map key is the index,\n+\t// and the current count of duplicates. While the map is only accessed\n+\t// within a single routine, lock is used for access to provide future-proof\n+\t// safety at a very small overhead.",
                "path": "scheduler/reconcile_util.go",
                "commit_id": "965e9a08bcb3676bf3c810cd6f8376e66f83d7c7",
                "original_commit_id": "9fb64df1a75835ef9201cf1668f2890254c9ebcb",
                "user": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Resolved within commit https://github.com/hashicorp/nomad/pull/18873/commits/9fb64df1a75835ef9201cf1668f2890254c9ebcb",
                "created_at": "2023-10-27T07:43:04Z",
                "updated_at": "2023-10-27T07:43:05Z",
                "html_url": "https://github.com/hashicorp/nomad/pull/18873#discussion_r1374190996",
                "pull_request_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873",
                "author_association": "MEMBER",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374190996"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18873#discussion_r1374190996"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374190996/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": null,
                "original_start_line": 591,
                "start_side": "RIGHT",
                "line": null,
                "original_line": 592,
                "side": "RIGHT",
                "in_reply_to_id": 1373238068,
                "original_position": 17,
                "position": null,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873",
                "id": 1574570052,
                "node_id": "PR_kwDOAi9Jds5d2ghE",
                "html_url": "https://github.com/hashicorp/nomad/pull/18873",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18873.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18873.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18873",
                "number": 18873,
                "state": "open",
                "locked": false,
                "title": "scheduler: ensure dup alloc names are fixed before plan submit.",
                "user": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "This change fixes a bug within the generic scheduler which meant duplicate alloc indexes (names) could be submitted to the plan applier and written to state. The bug originates from the placements calculation notion that names of allocations being replaced are blindly copied to their replacement. This is not correct in all cases, particularly when dealing with canaries.\r\n\r\nThe fix updates the alloc name index tracker to include minor duplicate tracking. This can be used when computing placements to ensure duplicate are found, and a new name picked before the plan is submitted. The name index tracking is now passed from the reconciler to the generic scheduler via the results, so this does not have to be regenerated, or another data structure used.\r\n\r\ncloses #10727 \r\n\r\n### Reviewer Notes\r\nThe new test `TestServiceSched_JobModify_ProposedDuplicateAllocIndex` mimics the reproduction behaviour and can be used to see how the code change has fixed the bug.\r\n\r\n[This reproduction](https://github.com/jrasell/dev-mess/tree/main/nomad/development/gh10727) can be used to test the code change in a manual way. The reproduction (in my testing) worked 100% of the time. ",
                "created_at": "2023-10-26T10:54:46Z",
                "updated_at": "2023-10-27T07:43:05Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "cca78fdf44aa2d84cc619bdfa1accb0e79b1519d",
                "assignee": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "jrasell",
                        "id": 2980562,
                        "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/jrasell",
                        "html_url": "https://github.com/jrasell",
                        "followers_url": "https://api.github.com/users/jrasell/followers",
                        "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                        "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                        "organizations_url": "https://api.github.com/users/jrasell/orgs",
                        "repos_url": "https://api.github.com/users/jrasell/repos",
                        "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/jrasell/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 4584836759,
                        "node_id": "LA_kwDOAi9Jds8AAAABEUcOlw",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.4.x",
                        "name": "backport/1.4.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.4.x release line"
                    },
                    {
                        "id": 5211929297,
                        "node_id": "LA_kwDOAi9Jds8AAAABNqe60Q",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.5.x",
                        "name": "backport/1.5.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.5.x release line"
                    },
                    {
                        "id": 5723588925,
                        "node_id": "LA_kwDOAi9Jds8AAAABVScJPQ",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.6.x",
                        "name": "backport/1.6.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.6.x release line"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18873/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/965e9a08bcb3676bf3c810cd6f8376e66f83d7c7",
                "head": {
                    "label": "hashicorp:gh-10727-sched-fix-method",
                    "ref": "gh-10727-sched-fix-method",
                    "sha": "965e9a08bcb3676bf3c810cd6f8376e66f83d7c7",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 442955,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "7f62dec473d7a51210d57cdd8b531311c04b35c0",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 442955,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18873"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18873"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18873/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/965e9a08bcb3676bf3c810cd6f8376e66f83d7c7"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T07:43:04Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32891363970",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 2980562,
            "login": "jrasell",
            "display_login": "jrasell",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jrasell",
            "avatar_url": "https://avatars.githubusercontent.com/u/2980562?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1701178338,
                "node_id": "PRR_kwDOAi9Jds5lZevi",
                "user": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "commit_id": "9fb64df1a75835ef9201cf1668f2890254c9ebcb",
                "submitted_at": "2023-10-27T07:43:05Z",
                "state": "commented",
                "html_url": "https://github.com/hashicorp/nomad/pull/18873#pullrequestreview-1701178338",
                "pull_request_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873",
                "author_association": "MEMBER",
                "_links": {
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18873#pullrequestreview-1701178338"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873",
                "id": 1574570052,
                "node_id": "PR_kwDOAi9Jds5d2ghE",
                "html_url": "https://github.com/hashicorp/nomad/pull/18873",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18873.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18873.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18873",
                "number": 18873,
                "state": "open",
                "locked": false,
                "title": "scheduler: ensure dup alloc names are fixed before plan submit.",
                "user": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "This change fixes a bug within the generic scheduler which meant duplicate alloc indexes (names) could be submitted to the plan applier and written to state. The bug originates from the placements calculation notion that names of allocations being replaced are blindly copied to their replacement. This is not correct in all cases, particularly when dealing with canaries.\r\n\r\nThe fix updates the alloc name index tracker to include minor duplicate tracking. This can be used when computing placements to ensure duplicate are found, and a new name picked before the plan is submitted. The name index tracking is now passed from the reconciler to the generic scheduler via the results, so this does not have to be regenerated, or another data structure used.\r\n\r\ncloses #10727 \r\n\r\n### Reviewer Notes\r\nThe new test `TestServiceSched_JobModify_ProposedDuplicateAllocIndex` mimics the reproduction behaviour and can be used to see how the code change has fixed the bug.\r\n\r\n[This reproduction](https://github.com/jrasell/dev-mess/tree/main/nomad/development/gh10727) can be used to test the code change in a manual way. The reproduction (in my testing) worked 100% of the time. ",
                "created_at": "2023-10-26T10:54:46Z",
                "updated_at": "2023-10-27T07:43:05Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "cca78fdf44aa2d84cc619bdfa1accb0e79b1519d",
                "assignee": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "jrasell",
                        "id": 2980562,
                        "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/jrasell",
                        "html_url": "https://github.com/jrasell",
                        "followers_url": "https://api.github.com/users/jrasell/followers",
                        "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                        "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                        "organizations_url": "https://api.github.com/users/jrasell/orgs",
                        "repos_url": "https://api.github.com/users/jrasell/repos",
                        "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/jrasell/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 4584836759,
                        "node_id": "LA_kwDOAi9Jds8AAAABEUcOlw",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.4.x",
                        "name": "backport/1.4.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.4.x release line"
                    },
                    {
                        "id": 5211929297,
                        "node_id": "LA_kwDOAi9Jds8AAAABNqe60Q",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.5.x",
                        "name": "backport/1.5.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.5.x release line"
                    },
                    {
                        "id": 5723588925,
                        "node_id": "LA_kwDOAi9Jds8AAAABVScJPQ",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.6.x",
                        "name": "backport/1.6.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.6.x release line"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18873/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/965e9a08bcb3676bf3c810cd6f8376e66f83d7c7",
                "head": {
                    "label": "hashicorp:gh-10727-sched-fix-method",
                    "ref": "gh-10727-sched-fix-method",
                    "sha": "965e9a08bcb3676bf3c810cd6f8376e66f83d7c7",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 442955,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "7f62dec473d7a51210d57cdd8b531311c04b35c0",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T07:34:01Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 442955,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18873"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18873"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18873/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/965e9a08bcb3676bf3c810cd6f8376e66f83d7c7"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T07:43:05Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32891147671",
        "type": "PushEvent",
        "actor": {
            "id": 2980562,
            "login": "jrasell",
            "display_login": "jrasell",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jrasell",
            "avatar_url": "https://avatars.githubusercontent.com/u/2980562?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "repository_id": 36653430,
            "push_id": 15588051776,
            "size": 1,
            "distinct_size": 1,
            "ref": "refs/heads/gh-10727-sched-fix-method",
            "head": "965e9a08bcb3676bf3c810cd6f8376e66f83d7c7",
            "before": "9fb64df1a75835ef9201cf1668f2890254c9ebcb",
            "commits": [
                {
                    "sha": "965e9a08bcb3676bf3c810cd6f8376e66f83d7c7",
                    "author": {
                        "email": "jrasell@hashicorp.com",
                        "name": "James Rasell"
                    },
                    "message": "review: updates based on feedback.",
                    "distinct": true,
                    "url": "https://api.github.com/repos/hashicorp/nomad/commits/965e9a08bcb3676bf3c810cd6f8376e66f83d7c7"
                }
            ]
        },
        "public": true,
        "created_at": "2023-10-27T07:33:59Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32890878698",
        "type": "PushEvent",
        "actor": {
            "id": 470696,
            "login": "pkazmierczak",
            "display_login": "pkazmierczak",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pkazmierczak",
            "avatar_url": "https://avatars.githubusercontent.com/u/470696?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "repository_id": 36653430,
            "push_id": 15587922848,
            "size": 1,
            "distinct_size": 1,
            "ref": "refs/heads/f-wi-consul-setup-consul-cmd",
            "head": "b407f023e93ea6c721b9977506f8dd3820c8c125",
            "before": "93d83c63683b8b91b100435cf3458bad1c0d348f",
            "commits": [
                {
                    "sha": "b407f023e93ea6c721b9977506f8dd3820c8c125",
                    "author": {
                        "email": "470696+pkazmierczak@users.noreply.github.com",
                        "name": "Piotr Kazmierczak"
                    },
                    "message": "Apply suggestions from code review\n\nCo-authored-by: Luiz Aoqui <luiz@hashicorp.com>",
                    "distinct": true,
                    "url": "https://api.github.com/repos/hashicorp/nomad/commits/b407f023e93ea6c721b9977506f8dd3820c8c125"
                }
            ]
        },
        "public": true,
        "created_at": "2023-10-27T07:22:34Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32890794747",
        "type": "PushEvent",
        "actor": {
            "id": 470696,
            "login": "pkazmierczak",
            "display_login": "pkazmierczak",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pkazmierczak",
            "avatar_url": "https://avatars.githubusercontent.com/u/470696?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "repository_id": 36653430,
            "push_id": 15587881933,
            "size": 1,
            "distinct_size": 1,
            "ref": "refs/heads/f-wi-consul-setup-consul-cmd",
            "head": "93d83c63683b8b91b100435cf3458bad1c0d348f",
            "before": "5faaa9da577f0259a63d430e9b2e3e0626e8c4a8",
            "commits": [
                {
                    "sha": "93d83c63683b8b91b100435cf3458bad1c0d348f",
                    "author": {
                        "email": "470696+pkazmierczak@users.noreply.github.com",
                        "name": "Piotr Kazmierczak"
                    },
                    "message": "Update command/setup.go\n\nCo-authored-by: Luiz Aoqui <luiz@hashicorp.com>",
                    "distinct": true,
                    "url": "https://api.github.com/repos/hashicorp/nomad/commits/93d83c63683b8b91b100435cf3458bad1c0d348f"
                }
            ]
        },
        "public": true,
        "created_at": "2023-10-27T07:18:53Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32890788620",
        "type": "PushEvent",
        "actor": {
            "id": 470696,
            "login": "pkazmierczak",
            "display_login": "pkazmierczak",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pkazmierczak",
            "avatar_url": "https://avatars.githubusercontent.com/u/470696?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "repository_id": 36653430,
            "push_id": 15587878850,
            "size": 1,
            "distinct_size": 1,
            "ref": "refs/heads/f-wi-consul-setup-consul-cmd",
            "head": "5faaa9da577f0259a63d430e9b2e3e0626e8c4a8",
            "before": "2f2dd8444cefe12a06235f388006afeb12cd5033",
            "commits": [
                {
                    "sha": "5faaa9da577f0259a63d430e9b2e3e0626e8c4a8",
                    "author": {
                        "email": "470696+pkazmierczak@users.noreply.github.com",
                        "name": "Piotr Kazmierczak"
                    },
                    "message": "Update command/setup_consul.go\n\nCo-authored-by: Tim Gross <tgross@hashicorp.com>",
                    "distinct": true,
                    "url": "https://api.github.com/repos/hashicorp/nomad/commits/5faaa9da577f0259a63d430e9b2e3e0626e8c4a8"
                }
            ]
        },
        "public": true,
        "created_at": "2023-10-27T07:18:36Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32890490100",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 2980562,
            "login": "jrasell",
            "display_login": "jrasell",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jrasell",
            "avatar_url": "https://avatars.githubusercontent.com/u/2980562?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374154166",
                "pull_request_review_id": 1701120534,
                "id": 1374154166,
                "node_id": "PRRC_kwDOAi9Jds5R5-22",
                "diff_hunk": "@@ -968,7 +977,16 @@ func (a *allocReconciler) computeStop(group *structs.TaskGroup, nameIndex *alloc\n \t\tuntainted = untainted.difference(canaries)\n \t}\n \n-\t// Hot path the nothing to do case\n+\t// Hot path the nothing to do case.\n+\t//\n+\t// Duplicate allocation indexes can be caused due to the way this piece of\n+\t// code works. The reproduction involved canaries, and performing both a",
                "path": "scheduler/reconcile.go",
                "commit_id": "9fb64df1a75835ef9201cf1668f2890254c9ebcb",
                "original_commit_id": "9fb64df1a75835ef9201cf1668f2890254c9ebcb",
                "user": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "The comment has been clarified, hopefully that makes things clearer? I spent a while looking to see if I could fix the problem at the source, but I wasn't able to figure out a way.",
                "created_at": "2023-10-27T07:05:05Z",
                "updated_at": "2023-10-27T07:05:06Z",
                "html_url": "https://github.com/hashicorp/nomad/pull/18873#discussion_r1374154166",
                "pull_request_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873",
                "author_association": "MEMBER",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374154166"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18873#discussion_r1374154166"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments/1374154166/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": 982,
                "original_start_line": 982,
                "start_side": "RIGHT",
                "line": 983,
                "original_line": 983,
                "side": "RIGHT",
                "in_reply_to_id": 1373590015,
                "original_position": 48,
                "position": 48,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873",
                "id": 1574570052,
                "node_id": "PR_kwDOAi9Jds5d2ghE",
                "html_url": "https://github.com/hashicorp/nomad/pull/18873",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18873.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18873.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18873",
                "number": 18873,
                "state": "open",
                "locked": false,
                "title": "scheduler: ensure dup alloc names are fixed before plan submit.",
                "user": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "This change fixes a bug within the generic scheduler which meant duplicate alloc indexes (names) could be submitted to the plan applier and written to state. The bug originates from the placements calculation notion that names of allocations being replaced are blindly copied to their replacement. This is not correct in all cases, particularly when dealing with canaries.\r\n\r\nThe fix updates the alloc name index tracker to include minor duplicate tracking. This can be used when computing placements to ensure duplicate are found, and a new name picked before the plan is submitted. The name index tracking is now passed from the reconciler to the generic scheduler via the results, so this does not have to be regenerated, or another data structure used.\r\n\r\ncloses #10727 \r\n\r\n### Reviewer Notes\r\nThe new test `TestServiceSched_JobModify_ProposedDuplicateAllocIndex` mimics the reproduction behaviour and can be used to see how the code change has fixed the bug.\r\n\r\n[This reproduction](https://github.com/jrasell/dev-mess/tree/main/nomad/development/gh10727) can be used to test the code change in a manual way. The reproduction (in my testing) worked 100% of the time. ",
                "created_at": "2023-10-26T10:54:46Z",
                "updated_at": "2023-10-27T07:05:06Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "a0237b4af88acbe8672eab6fd08830ddcd300a39",
                "assignee": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "jrasell",
                        "id": 2980562,
                        "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/jrasell",
                        "html_url": "https://github.com/jrasell",
                        "followers_url": "https://api.github.com/users/jrasell/followers",
                        "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                        "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                        "organizations_url": "https://api.github.com/users/jrasell/orgs",
                        "repos_url": "https://api.github.com/users/jrasell/repos",
                        "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/jrasell/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 4584836759,
                        "node_id": "LA_kwDOAi9Jds8AAAABEUcOlw",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.4.x",
                        "name": "backport/1.4.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.4.x release line"
                    },
                    {
                        "id": 5211929297,
                        "node_id": "LA_kwDOAi9Jds8AAAABNqe60Q",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.5.x",
                        "name": "backport/1.5.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.5.x release line"
                    },
                    {
                        "id": 5723588925,
                        "node_id": "LA_kwDOAi9Jds8AAAABVScJPQ",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.6.x",
                        "name": "backport/1.6.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.6.x release line"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18873/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/9fb64df1a75835ef9201cf1668f2890254c9ebcb",
                "head": {
                    "label": "hashicorp:gh-10727-sched-fix-method",
                    "ref": "gh-10727-sched-fix-method",
                    "sha": "9fb64df1a75835ef9201cf1668f2890254c9ebcb",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T05:45:57Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 442955,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "7f62dec473d7a51210d57cdd8b531311c04b35c0",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T05:45:57Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 442955,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18873"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18873"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18873/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/9fb64df1a75835ef9201cf1668f2890254c9ebcb"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T07:05:05Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32890489977",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 2980562,
            "login": "jrasell",
            "display_login": "jrasell",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jrasell",
            "avatar_url": "https://avatars.githubusercontent.com/u/2980562?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1701120534,
                "node_id": "PRR_kwDOAi9Jds5lZQoW",
                "user": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "commit_id": "9fb64df1a75835ef9201cf1668f2890254c9ebcb",
                "submitted_at": "2023-10-27T07:05:06Z",
                "state": "commented",
                "html_url": "https://github.com/hashicorp/nomad/pull/18873#pullrequestreview-1701120534",
                "pull_request_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873",
                "author_association": "MEMBER",
                "_links": {
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18873#pullrequestreview-1701120534"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873",
                "id": 1574570052,
                "node_id": "PR_kwDOAi9Jds5d2ghE",
                "html_url": "https://github.com/hashicorp/nomad/pull/18873",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18873.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18873.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18873",
                "number": 18873,
                "state": "open",
                "locked": false,
                "title": "scheduler: ensure dup alloc names are fixed before plan submit.",
                "user": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "This change fixes a bug within the generic scheduler which meant duplicate alloc indexes (names) could be submitted to the plan applier and written to state. The bug originates from the placements calculation notion that names of allocations being replaced are blindly copied to their replacement. This is not correct in all cases, particularly when dealing with canaries.\r\n\r\nThe fix updates the alloc name index tracker to include minor duplicate tracking. This can be used when computing placements to ensure duplicate are found, and a new name picked before the plan is submitted. The name index tracking is now passed from the reconciler to the generic scheduler via the results, so this does not have to be regenerated, or another data structure used.\r\n\r\ncloses #10727 \r\n\r\n### Reviewer Notes\r\nThe new test `TestServiceSched_JobModify_ProposedDuplicateAllocIndex` mimics the reproduction behaviour and can be used to see how the code change has fixed the bug.\r\n\r\n[This reproduction](https://github.com/jrasell/dev-mess/tree/main/nomad/development/gh10727) can be used to test the code change in a manual way. The reproduction (in my testing) worked 100% of the time. ",
                "created_at": "2023-10-26T10:54:46Z",
                "updated_at": "2023-10-27T07:05:06Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "a0237b4af88acbe8672eab6fd08830ddcd300a39",
                "assignee": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "jrasell",
                        "id": 2980562,
                        "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/jrasell",
                        "html_url": "https://github.com/jrasell",
                        "followers_url": "https://api.github.com/users/jrasell/followers",
                        "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                        "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                        "organizations_url": "https://api.github.com/users/jrasell/orgs",
                        "repos_url": "https://api.github.com/users/jrasell/repos",
                        "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/jrasell/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 4584836759,
                        "node_id": "LA_kwDOAi9Jds8AAAABEUcOlw",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.4.x",
                        "name": "backport/1.4.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.4.x release line"
                    },
                    {
                        "id": 5211929297,
                        "node_id": "LA_kwDOAi9Jds8AAAABNqe60Q",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.5.x",
                        "name": "backport/1.5.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.5.x release line"
                    },
                    {
                        "id": 5723588925,
                        "node_id": "LA_kwDOAi9Jds8AAAABVScJPQ",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.6.x",
                        "name": "backport/1.6.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.6.x release line"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18873/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/9fb64df1a75835ef9201cf1668f2890254c9ebcb",
                "head": {
                    "label": "hashicorp:gh-10727-sched-fix-method",
                    "ref": "gh-10727-sched-fix-method",
                    "sha": "9fb64df1a75835ef9201cf1668f2890254c9ebcb",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T05:45:57Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 442955,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "7f62dec473d7a51210d57cdd8b531311c04b35c0",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T05:45:57Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 442955,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18873"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18873"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18873/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/9fb64df1a75835ef9201cf1668f2890254c9ebcb"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T07:05:06Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    },
    {
        "id": "32890468722",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 2980562,
            "login": "jrasell",
            "display_login": "jrasell",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jrasell",
            "avatar_url": "https://avatars.githubusercontent.com/u/2980562?"
        },
        "repo": {
            "id": 36653430,
            "name": "hashicorp/nomad",
            "url": "https://api.github.com/repos/hashicorp/nomad"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1701119170,
                "node_id": "PRR_kwDOAi9Jds5lZQTC",
                "user": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "commit_id": "9fb64df1a75835ef9201cf1668f2890254c9ebcb",
                "submitted_at": "2023-10-27T07:04:08Z",
                "state": "commented",
                "html_url": "https://github.com/hashicorp/nomad/pull/18873#pullrequestreview-1701119170",
                "pull_request_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873",
                "author_association": "MEMBER",
                "_links": {
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18873#pullrequestreview-1701119170"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873",
                "id": 1574570052,
                "node_id": "PR_kwDOAi9Jds5d2ghE",
                "html_url": "https://github.com/hashicorp/nomad/pull/18873",
                "diff_url": "https://github.com/hashicorp/nomad/pull/18873.diff",
                "patch_url": "https://github.com/hashicorp/nomad/pull/18873.patch",
                "issue_url": "https://api.github.com/repos/hashicorp/nomad/issues/18873",
                "number": 18873,
                "state": "open",
                "locked": false,
                "title": "scheduler: ensure dup alloc names are fixed before plan submit.",
                "user": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "This change fixes a bug within the generic scheduler which meant duplicate alloc indexes (names) could be submitted to the plan applier and written to state. The bug originates from the placements calculation notion that names of allocations being replaced are blindly copied to their replacement. This is not correct in all cases, particularly when dealing with canaries.\r\n\r\nThe fix updates the alloc name index tracker to include minor duplicate tracking. This can be used when computing placements to ensure duplicate are found, and a new name picked before the plan is submitted. The name index tracking is now passed from the reconciler to the generic scheduler via the results, so this does not have to be regenerated, or another data structure used.\r\n\r\ncloses #10727 \r\n\r\n### Reviewer Notes\r\nThe new test `TestServiceSched_JobModify_ProposedDuplicateAllocIndex` mimics the reproduction behaviour and can be used to see how the code change has fixed the bug.\r\n\r\n[This reproduction](https://github.com/jrasell/dev-mess/tree/main/nomad/development/gh10727) can be used to test the code change in a manual way. The reproduction (in my testing) worked 100% of the time. ",
                "created_at": "2023-10-26T10:54:46Z",
                "updated_at": "2023-10-27T07:04:08Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "a0237b4af88acbe8672eab6fd08830ddcd300a39",
                "assignee": {
                    "login": "jrasell",
                    "id": 2980562,
                    "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jrasell",
                    "html_url": "https://github.com/jrasell",
                    "followers_url": "https://api.github.com/users/jrasell/followers",
                    "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                    "organizations_url": "https://api.github.com/users/jrasell/orgs",
                    "repos_url": "https://api.github.com/users/jrasell/repos",
                    "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jrasell/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "jrasell",
                        "id": 2980562,
                        "node_id": "MDQ6VXNlcjI5ODA1NjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2980562?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/jrasell",
                        "html_url": "https://github.com/jrasell",
                        "followers_url": "https://api.github.com/users/jrasell/followers",
                        "following_url": "https://api.github.com/users/jrasell/following{/other_user}",
                        "gists_url": "https://api.github.com/users/jrasell/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/jrasell/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/jrasell/subscriptions",
                        "organizations_url": "https://api.github.com/users/jrasell/orgs",
                        "repos_url": "https://api.github.com/users/jrasell/repos",
                        "events_url": "https://api.github.com/users/jrasell/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/jrasell/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 4584836759,
                        "node_id": "LA_kwDOAi9Jds8AAAABEUcOlw",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.4.x",
                        "name": "backport/1.4.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.4.x release line"
                    },
                    {
                        "id": 5211929297,
                        "node_id": "LA_kwDOAi9Jds8AAAABNqe60Q",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.5.x",
                        "name": "backport/1.5.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.5.x release line"
                    },
                    {
                        "id": 5723588925,
                        "node_id": "LA_kwDOAi9Jds8AAAABVScJPQ",
                        "url": "https://api.github.com/repos/hashicorp/nomad/labels/backport/1.6.x",
                        "name": "backport/1.6.x",
                        "color": "0e8a16",
                        "default": false,
                        "description": "backport to 1.6.x release line"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/commits",
                "review_comments_url": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/comments",
                "review_comment_url": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/hashicorp/nomad/issues/18873/comments",
                "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/9fb64df1a75835ef9201cf1668f2890254c9ebcb",
                "head": {
                    "label": "hashicorp:gh-10727-sched-fix-method",
                    "ref": "gh-10727-sched-fix-method",
                    "sha": "9fb64df1a75835ef9201cf1668f2890254c9ebcb",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T05:45:57Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 442955,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "hashicorp:main",
                    "ref": "main",
                    "sha": "7f62dec473d7a51210d57cdd8b531311c04b35c0",
                    "user": {
                        "login": "hashicorp",
                        "id": 761456,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/hashicorp",
                        "html_url": "https://github.com/hashicorp",
                        "followers_url": "https://api.github.com/users/hashicorp/followers",
                        "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                        "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                        "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                        "repos_url": "https://api.github.com/users/hashicorp/repos",
                        "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 36653430,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNjY1MzQzMA==",
                        "name": "nomad",
                        "full_name": "hashicorp/nomad",
                        "private": false,
                        "owner": {
                            "login": "hashicorp",
                            "id": 761456,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjc2MTQ1Ng==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/761456?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/hashicorp",
                            "html_url": "https://github.com/hashicorp",
                            "followers_url": "https://api.github.com/users/hashicorp/followers",
                            "following_url": "https://api.github.com/users/hashicorp/following{/other_user}",
                            "gists_url": "https://api.github.com/users/hashicorp/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/hashicorp/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/hashicorp/subscriptions",
                            "organizations_url": "https://api.github.com/users/hashicorp/orgs",
                            "repos_url": "https://api.github.com/users/hashicorp/repos",
                            "events_url": "https://api.github.com/users/hashicorp/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/hashicorp/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/hashicorp/nomad",
                        "description": "Nomad is an easy-to-use, flexible, and performant workload orchestrator that can deploy a mix of microservice, batch, containerized, and non-containerized applications. Nomad is easy to operate and scale and has native Consul and Vault integrations.",
                        "fork": false,
                        "url": "https://api.github.com/repos/hashicorp/nomad",
                        "forks_url": "https://api.github.com/repos/hashicorp/nomad/forks",
                        "keys_url": "https://api.github.com/repos/hashicorp/nomad/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/hashicorp/nomad/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/hashicorp/nomad/teams",
                        "hooks_url": "https://api.github.com/repos/hashicorp/nomad/hooks",
                        "issue_events_url": "https://api.github.com/repos/hashicorp/nomad/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/hashicorp/nomad/events",
                        "assignees_url": "https://api.github.com/repos/hashicorp/nomad/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/hashicorp/nomad/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/hashicorp/nomad/tags",
                        "blobs_url": "https://api.github.com/repos/hashicorp/nomad/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/hashicorp/nomad/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/hashicorp/nomad/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/hashicorp/nomad/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/hashicorp/nomad/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/hashicorp/nomad/languages",
                        "stargazers_url": "https://api.github.com/repos/hashicorp/nomad/stargazers",
                        "contributors_url": "https://api.github.com/repos/hashicorp/nomad/contributors",
                        "subscribers_url": "https://api.github.com/repos/hashicorp/nomad/subscribers",
                        "subscription_url": "https://api.github.com/repos/hashicorp/nomad/subscription",
                        "commits_url": "https://api.github.com/repos/hashicorp/nomad/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/hashicorp/nomad/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/hashicorp/nomad/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/hashicorp/nomad/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/hashicorp/nomad/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/hashicorp/nomad/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/hashicorp/nomad/merges",
                        "archive_url": "https://api.github.com/repos/hashicorp/nomad/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/hashicorp/nomad/downloads",
                        "issues_url": "https://api.github.com/repos/hashicorp/nomad/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/hashicorp/nomad/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/hashicorp/nomad/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/hashicorp/nomad/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/hashicorp/nomad/labels{/name}",
                        "releases_url": "https://api.github.com/repos/hashicorp/nomad/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/hashicorp/nomad/deployments",
                        "created_at": "2015-06-01T10:21:00Z",
                        "updated_at": "2023-10-27T06:43:18Z",
                        "pushed_at": "2023-10-27T05:45:57Z",
                        "git_url": "git://github.com/hashicorp/nomad.git",
                        "ssh_url": "git@github.com:hashicorp/nomad.git",
                        "clone_url": "https://github.com/hashicorp/nomad.git",
                        "svn_url": "https://github.com/hashicorp/nomad",
                        "homepage": "https://www.nomadproject.io/",
                        "size": 442955,
                        "stargazers_count": 14044,
                        "watchers_count": 14044,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1876,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1592,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1876,
                        "open_issues": 1592,
                        "watchers": 14044,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873"
                    },
                    "html": {
                        "href": "https://github.com/hashicorp/nomad/pull/18873"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18873"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/issues/18873/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/pulls/18873/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/hashicorp/nomad/statuses/9fb64df1a75835ef9201cf1668f2890254c9ebcb"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T07:04:09Z",
        "org": {
            "id": 761456,
            "login": "hashicorp",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/hashicorp",
            "avatar_url": "https://avatars.githubusercontent.com/u/761456?"
        }
    }
]