[
    {
        "id": "32897518841",
        "type": "ForkEvent",
        "actor": {
            "id": 77932547,
            "login": "Blackerberg",
            "display_login": "Blackerberg",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Blackerberg",
            "avatar_url": "https://avatars.githubusercontent.com/u/77932547?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "forkee": {
                "id": 710764517,
                "node_id": "R_kgDOKl1n5Q",
                "name": "zod",
                "full_name": "Blackerberg/zod",
                "private": false,
                "owner": {
                    "login": "Blackerberg",
                    "id": 77932547,
                    "node_id": "MDQ6VXNlcjc3OTMyNTQ3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/77932547?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Blackerberg",
                    "html_url": "https://github.com/Blackerberg",
                    "followers_url": "https://api.github.com/users/Blackerberg/followers",
                    "following_url": "https://api.github.com/users/Blackerberg/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Blackerberg/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Blackerberg/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Blackerberg/subscriptions",
                    "organizations_url": "https://api.github.com/users/Blackerberg/orgs",
                    "repos_url": "https://api.github.com/users/Blackerberg/repos",
                    "events_url": "https://api.github.com/users/Blackerberg/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Blackerberg/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "html_url": "https://github.com/Blackerberg/zod",
                "description": "TypeScript-first schema validation with static type inference",
                "fork": true,
                "url": "https://api.github.com/repos/Blackerberg/zod",
                "forks_url": "https://api.github.com/repos/Blackerberg/zod/forks",
                "keys_url": "https://api.github.com/repos/Blackerberg/zod/keys{/key_id}",
                "collaborators_url": "https://api.github.com/repos/Blackerberg/zod/collaborators{/collaborator}",
                "teams_url": "https://api.github.com/repos/Blackerberg/zod/teams",
                "hooks_url": "https://api.github.com/repos/Blackerberg/zod/hooks",
                "issue_events_url": "https://api.github.com/repos/Blackerberg/zod/issues/events{/number}",
                "events_url": "https://api.github.com/repos/Blackerberg/zod/events",
                "assignees_url": "https://api.github.com/repos/Blackerberg/zod/assignees{/user}",
                "branches_url": "https://api.github.com/repos/Blackerberg/zod/branches{/branch}",
                "tags_url": "https://api.github.com/repos/Blackerberg/zod/tags",
                "blobs_url": "https://api.github.com/repos/Blackerberg/zod/git/blobs{/sha}",
                "git_tags_url": "https://api.github.com/repos/Blackerberg/zod/git/tags{/sha}",
                "git_refs_url": "https://api.github.com/repos/Blackerberg/zod/git/refs{/sha}",
                "trees_url": "https://api.github.com/repos/Blackerberg/zod/git/trees{/sha}",
                "statuses_url": "https://api.github.com/repos/Blackerberg/zod/statuses/{sha}",
                "languages_url": "https://api.github.com/repos/Blackerberg/zod/languages",
                "stargazers_url": "https://api.github.com/repos/Blackerberg/zod/stargazers",
                "contributors_url": "https://api.github.com/repos/Blackerberg/zod/contributors",
                "subscribers_url": "https://api.github.com/repos/Blackerberg/zod/subscribers",
                "subscription_url": "https://api.github.com/repos/Blackerberg/zod/subscription",
                "commits_url": "https://api.github.com/repos/Blackerberg/zod/commits{/sha}",
                "git_commits_url": "https://api.github.com/repos/Blackerberg/zod/git/commits{/sha}",
                "comments_url": "https://api.github.com/repos/Blackerberg/zod/comments{/number}",
                "issue_comment_url": "https://api.github.com/repos/Blackerberg/zod/issues/comments{/number}",
                "contents_url": "https://api.github.com/repos/Blackerberg/zod/contents/{+path}",
                "compare_url": "https://api.github.com/repos/Blackerberg/zod/compare/{base}...{head}",
                "merges_url": "https://api.github.com/repos/Blackerberg/zod/merges",
                "archive_url": "https://api.github.com/repos/Blackerberg/zod/{archive_format}{/ref}",
                "downloads_url": "https://api.github.com/repos/Blackerberg/zod/downloads",
                "issues_url": "https://api.github.com/repos/Blackerberg/zod/issues{/number}",
                "pulls_url": "https://api.github.com/repos/Blackerberg/zod/pulls{/number}",
                "milestones_url": "https://api.github.com/repos/Blackerberg/zod/milestones{/number}",
                "notifications_url": "https://api.github.com/repos/Blackerberg/zod/notifications{?since,all,participating}",
                "labels_url": "https://api.github.com/repos/Blackerberg/zod/labels{/name}",
                "releases_url": "https://api.github.com/repos/Blackerberg/zod/releases{/id}",
                "deployments_url": "https://api.github.com/repos/Blackerberg/zod/deployments",
                "created_at": "2023-10-27T11:45:39Z",
                "updated_at": "2023-10-27T11:45:39Z",
                "pushed_at": "2023-10-24T02:27:21Z",
                "git_url": "git://github.com/Blackerberg/zod.git",
                "ssh_url": "git@github.com:Blackerberg/zod.git",
                "clone_url": "https://github.com/Blackerberg/zod.git",
                "svn_url": "https://github.com/Blackerberg/zod",
                "homepage": "https://zod.dev",
                "size": 4949,
                "stargazers_count": 0,
                "watchers_count": 0,
                "language": null,
                "has_issues": false,
                "has_projects": true,
                "has_downloads": true,
                "has_wiki": true,
                "has_pages": false,
                "has_discussions": false,
                "forks_count": 0,
                "mirror_url": null,
                "archived": false,
                "disabled": false,
                "open_issues_count": 0,
                "license": null,
                "allow_forking": true,
                "is_template": false,
                "web_commit_signoff_required": false,
                "topics": [],
                "visibility": "public",
                "forks": 0,
                "open_issues": 0,
                "watchers": 0,
                "default_branch": "main",
                "public": true
            }
        },
        "public": true,
        "created_at": "2023-10-27T11:45:40Z"
    },
    {
        "id": "32897033341",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 32353679,
            "login": "LarsOlt",
            "display_login": "LarsOlt",
            "gravatar_id": "",
            "url": "https://api.github.com/users/LarsOlt",
            "avatar_url": "https://avatars.githubusercontent.com/u/32353679?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/colinhacks/zod/issues/1630",
                "repository_url": "https://api.github.com/repos/colinhacks/zod",
                "labels_url": "https://api.github.com/repos/colinhacks/zod/issues/1630/labels{/name}",
                "comments_url": "https://api.github.com/repos/colinhacks/zod/issues/1630/comments",
                "events_url": "https://api.github.com/repos/colinhacks/zod/issues/1630/events",
                "html_url": "https://github.com/colinhacks/zod/issues/1630",
                "id": 1474879296,
                "node_id": "I_kwDODqUnoM5X6N9A",
                "number": 1630,
                "title": "[Suggestion] Stricter boolean coerce option",
                "user": {
                    "login": "pheuter",
                    "id": 92698,
                    "node_id": "MDQ6VXNlcjkyNjk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/92698?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/pheuter",
                    "html_url": "https://github.com/pheuter",
                    "followers_url": "https://api.github.com/users/pheuter/followers",
                    "following_url": "https://api.github.com/users/pheuter/following{/other_user}",
                    "gists_url": "https://api.github.com/users/pheuter/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/pheuter/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/pheuter/subscriptions",
                    "organizations_url": "https://api.github.com/users/pheuter/orgs",
                    "repos_url": "https://api.github.com/users/pheuter/repos",
                    "events_url": "https://api.github.com/users/pheuter/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/pheuter/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 1894622839,
                        "node_id": "MDU6TGFiZWwxODk0NjIyODM5",
                        "url": "https://api.github.com/repos/colinhacks/zod/labels/enhancement",
                        "name": "enhancement",
                        "color": "a2eeef",
                        "default": true,
                        "description": "New feature or request"
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 26,
                "created_at": "2022-12-04T14:41:45Z",
                "updated_at": "2023-10-27T11:25:05Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "Since we're currently using Svelte Kit with form actions that make heavy use of the [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData) browser api, the new Zod 3.20 release is a very much welcome improvement, specifically the new coercion functionality (since all form post values are serialized as strings over the wire).\r\n\r\nOne suggestion/request I have is to allow boolean coerce to take a `strict` option that would check for explicit boolean strings:\r\n\r\n_Current:_\r\n\r\n```js\r\nconst schema = z.coerce.boolean();\r\nschema.parse(\"true\"); // => true\r\nschema.parse(\"false\"); // => true\r\n```\r\n\r\n_Suggestion:_\r\n\r\n```js\r\nconst schema = z.coerce.boolean({ strict: true });\r\nschema.parse(\"true\"); // => true\r\nschema.parse(\"false\"); // => false\r\nschema.parse(\"123\"); // => ZodError\r\n```\r\n\r\n_Update: If you're using SvelteKit like me, then worth taking a look at [sveltekit-superforms](https://github.com/ciscoheat/sveltekit-superforms). We're using it now and haven't looked back._",
                "reactions": {
                    "url": "https://api.github.com/repos/colinhacks/zod/issues/1630/reactions",
                    "total_count": 66,
                    "+1": 61,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 5
                },
                "timeline_url": "https://api.github.com/repos/colinhacks/zod/issues/1630/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/colinhacks/zod/issues/comments/1782748241",
                "html_url": "https://github.com/colinhacks/zod/issues/1630#issuecomment-1782748241",
                "issue_url": "https://api.github.com/repos/colinhacks/zod/issues/1630",
                "id": 1782748241,
                "node_id": "IC_kwDODqUnoM5qQpRR",
                "user": {
                    "login": "LarsOlt",
                    "id": 32353679,
                    "node_id": "MDQ6VXNlcjMyMzUzNjc5",
                    "avatar_url": "https://avatars.githubusercontent.com/u/32353679?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/LarsOlt",
                    "html_url": "https://github.com/LarsOlt",
                    "followers_url": "https://api.github.com/users/LarsOlt/followers",
                    "following_url": "https://api.github.com/users/LarsOlt/following{/other_user}",
                    "gists_url": "https://api.github.com/users/LarsOlt/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/LarsOlt/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/LarsOlt/subscriptions",
                    "organizations_url": "https://api.github.com/users/LarsOlt/orgs",
                    "repos_url": "https://api.github.com/users/LarsOlt/repos",
                    "events_url": "https://api.github.com/users/LarsOlt/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/LarsOlt/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T11:25:05Z",
                "updated_at": "2023-10-27T11:25:05Z",
                "author_association": "NONE",
                "body": "```ts\r\nfunction envBoolean(params: { optional: boolean; defaultValue: boolean }) {\r\n    type BoolEnum = ['true', 'false'];\r\n    let variable: z.ZodCatch<z.ZodEnum<BoolEnum>> | z.ZodEnum<BoolEnum>;\r\n\r\n    if (params.optional) {\r\n        // if undefined assign the defaultValue\r\n        variable = z.enum(['true', 'false']).catch(params.defaultValue ? 'true' : 'false');\r\n    } else {\r\n        // not optional so \"true\" or \"false\" is enforced\r\n        variable = z.enum(['true', 'false']);\r\n    }\r\n\r\n    // convert string to bool\r\n    return variable.transform((v) => v === 'true');\r\n}\r\n```\r\n\r\nThis works for me. I am using this to parse .env\r\n\r\n```ts\r\nconst envSchema= z.object({\r\n  IS_COOL: envBoolean({ optional: true, defaultValue: true })\r\n})\r\n\r\nexport const env = envSchema.parse(process.env);\r\n\r\n```\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/colinhacks/zod/issues/comments/1782748241/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T11:25:06Z"
    },
    {
        "id": "32894990540",
        "type": "WatchEvent",
        "actor": {
            "id": 95979529,
            "login": "aakashvani",
            "display_login": "aakashvani",
            "gravatar_id": "",
            "url": "https://api.github.com/users/aakashvani",
            "avatar_url": "https://avatars.githubusercontent.com/u/95979529?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T10:02:56Z"
    },
    {
        "id": "32894856109",
        "type": "WatchEvent",
        "actor": {
            "id": 127335511,
            "login": "aquaqamelob",
            "display_login": "aquaqamelob",
            "gravatar_id": "",
            "url": "https://api.github.com/users/aquaqamelob",
            "avatar_url": "https://avatars.githubusercontent.com/u/127335511?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T09:57:55Z"
    },
    {
        "id": "32892135989",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 59548833,
            "login": "ArianHamdi",
            "display_login": "ArianHamdi",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ArianHamdi",
            "avatar_url": "https://avatars.githubusercontent.com/u/59548833?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/colinhacks/zod/issues/2903",
                "repository_url": "https://api.github.com/repos/colinhacks/zod",
                "labels_url": "https://api.github.com/repos/colinhacks/zod/issues/2903/labels{/name}",
                "comments_url": "https://api.github.com/repos/colinhacks/zod/issues/2903/comments",
                "events_url": "https://api.github.com/repos/colinhacks/zod/issues/2903/events",
                "html_url": "https://github.com/colinhacks/zod/issues/2903",
                "id": 1962933364,
                "node_id": "I_kwDODqUnoM50__x0",
                "number": 2903,
                "title": "How to keep a TypeScript interface in sync with a Zod schema?",
                "user": {
                    "login": "w1am",
                    "id": 33353798,
                    "node_id": "MDQ6VXNlcjMzMzUzNzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/33353798?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/w1am",
                    "html_url": "https://github.com/w1am",
                    "followers_url": "https://api.github.com/users/w1am/followers",
                    "following_url": "https://api.github.com/users/w1am/following{/other_user}",
                    "gists_url": "https://api.github.com/users/w1am/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/w1am/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/w1am/subscriptions",
                    "organizations_url": "https://api.github.com/users/w1am/orgs",
                    "repos_url": "https://api.github.com/users/w1am/repos",
                    "events_url": "https://api.github.com/users/w1am/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/w1am/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 4,
                "created_at": "2023-10-26T07:56:54Z",
                "updated_at": "2023-10-27T08:14:31Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "I have an existing project primarily written in TypeScript where we originally had no runtime validations for our data. As we're expanding our API and also have JavaScript users, I've decided to introduce Zod to validate our data at runtime.\r\n\r\n**Example**\r\n```ts\r\nimport { z } from 'zod';\r\n\r\ninterface MyData {\r\n  name: string;\r\n  age: number;\r\n  isStudent?: boolean;\r\n}\r\n\r\nconst MyDataSchema = z.object({\r\n  name: z.string(),\r\n  age: z.number(),\r\n  isStudent: z.boolean().optional()\r\n});\r\n```\r\n\r\nThe challenge I'm facing is keeping the `MyData` interface and the `MyDataSchema` in sync. Every time I update the TypeScript interface, I have to manually update the Zod schema. This manual process is error-prone and can lead to inconsistencies.\r\n\r\nI tried using `satisfies z.ZodType<MyTypescriptType>` (example below), but it doesn't handle optional types well.\r\n\r\n```ts\r\nconst MyDataSchema = z.object({\r\n  name: z.string(),\r\n  age: z.number(),\r\n  isStudent: z.boolean().optional()\r\n}) satisfies z.ZodType<MyTypescriptType>;\r\n```\r\n\r\nIs there an efficient way to enforce synchronization between a TypeScript interface and a Zod schema? Ideally, I'd like an approach where updating the interface would either automatically update the schema or at least throw an error if they're out of sync.",
                "reactions": {
                    "url": "https://api.github.com/repos/colinhacks/zod/issues/2903/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/colinhacks/zod/issues/2903/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/colinhacks/zod/issues/comments/1782492816",
                "html_url": "https://github.com/colinhacks/zod/issues/2903#issuecomment-1782492816",
                "issue_url": "https://api.github.com/repos/colinhacks/zod/issues/2903",
                "id": 1782492816,
                "node_id": "IC_kwDODqUnoM5qPq6Q",
                "user": {
                    "login": "ArianHamdi",
                    "id": 59548833,
                    "node_id": "MDQ6VXNlcjU5NTQ4ODMz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/59548833?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/ArianHamdi",
                    "html_url": "https://github.com/ArianHamdi",
                    "followers_url": "https://api.github.com/users/ArianHamdi/followers",
                    "following_url": "https://api.github.com/users/ArianHamdi/following{/other_user}",
                    "gists_url": "https://api.github.com/users/ArianHamdi/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/ArianHamdi/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/ArianHamdi/subscriptions",
                    "organizations_url": "https://api.github.com/users/ArianHamdi/orgs",
                    "repos_url": "https://api.github.com/users/ArianHamdi/repos",
                    "events_url": "https://api.github.com/users/ArianHamdi/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/ArianHamdi/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T08:14:31Z",
                "updated_at": "2023-10-27T08:14:31Z",
                "author_association": "NONE",
                "body": "Maybe helpful : https://github.com/fabien0102/ts-to-zod",
                "reactions": {
                    "url": "https://api.github.com/repos/colinhacks/zod/issues/comments/1782492816/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T08:14:32Z"
    },
    {
        "id": "32890363716",
        "type": "WatchEvent",
        "actor": {
            "id": 89337955,
            "login": "ndnv819",
            "display_login": "ndnv819",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ndnv819",
            "avatar_url": "https://avatars.githubusercontent.com/u/89337955?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T06:59:19Z"
    },
    {
        "id": "32887466610",
        "type": "ForkEvent",
        "actor": {
            "id": 15664607,
            "login": "kinggoesgaming",
            "display_login": "kinggoesgaming",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kinggoesgaming",
            "avatar_url": "https://avatars.githubusercontent.com/u/15664607?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "forkee": {
                "id": 710606715,
                "node_id": "R_kgDOKlr_ew",
                "name": "zod",
                "full_name": "kinggoesgaming/zod",
                "private": false,
                "owner": {
                    "login": "kinggoesgaming",
                    "id": 15664607,
                    "node_id": "MDQ6VXNlcjE1NjY0NjA3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/15664607?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/kinggoesgaming",
                    "html_url": "https://github.com/kinggoesgaming",
                    "followers_url": "https://api.github.com/users/kinggoesgaming/followers",
                    "following_url": "https://api.github.com/users/kinggoesgaming/following{/other_user}",
                    "gists_url": "https://api.github.com/users/kinggoesgaming/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/kinggoesgaming/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/kinggoesgaming/subscriptions",
                    "organizations_url": "https://api.github.com/users/kinggoesgaming/orgs",
                    "repos_url": "https://api.github.com/users/kinggoesgaming/repos",
                    "events_url": "https://api.github.com/users/kinggoesgaming/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/kinggoesgaming/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "html_url": "https://github.com/kinggoesgaming/zod",
                "description": "TypeScript-first schema validation with static type inference",
                "fork": true,
                "url": "https://api.github.com/repos/kinggoesgaming/zod",
                "forks_url": "https://api.github.com/repos/kinggoesgaming/zod/forks",
                "keys_url": "https://api.github.com/repos/kinggoesgaming/zod/keys{/key_id}",
                "collaborators_url": "https://api.github.com/repos/kinggoesgaming/zod/collaborators{/collaborator}",
                "teams_url": "https://api.github.com/repos/kinggoesgaming/zod/teams",
                "hooks_url": "https://api.github.com/repos/kinggoesgaming/zod/hooks",
                "issue_events_url": "https://api.github.com/repos/kinggoesgaming/zod/issues/events{/number}",
                "events_url": "https://api.github.com/repos/kinggoesgaming/zod/events",
                "assignees_url": "https://api.github.com/repos/kinggoesgaming/zod/assignees{/user}",
                "branches_url": "https://api.github.com/repos/kinggoesgaming/zod/branches{/branch}",
                "tags_url": "https://api.github.com/repos/kinggoesgaming/zod/tags",
                "blobs_url": "https://api.github.com/repos/kinggoesgaming/zod/git/blobs{/sha}",
                "git_tags_url": "https://api.github.com/repos/kinggoesgaming/zod/git/tags{/sha}",
                "git_refs_url": "https://api.github.com/repos/kinggoesgaming/zod/git/refs{/sha}",
                "trees_url": "https://api.github.com/repos/kinggoesgaming/zod/git/trees{/sha}",
                "statuses_url": "https://api.github.com/repos/kinggoesgaming/zod/statuses/{sha}",
                "languages_url": "https://api.github.com/repos/kinggoesgaming/zod/languages",
                "stargazers_url": "https://api.github.com/repos/kinggoesgaming/zod/stargazers",
                "contributors_url": "https://api.github.com/repos/kinggoesgaming/zod/contributors",
                "subscribers_url": "https://api.github.com/repos/kinggoesgaming/zod/subscribers",
                "subscription_url": "https://api.github.com/repos/kinggoesgaming/zod/subscription",
                "commits_url": "https://api.github.com/repos/kinggoesgaming/zod/commits{/sha}",
                "git_commits_url": "https://api.github.com/repos/kinggoesgaming/zod/git/commits{/sha}",
                "comments_url": "https://api.github.com/repos/kinggoesgaming/zod/comments{/number}",
                "issue_comment_url": "https://api.github.com/repos/kinggoesgaming/zod/issues/comments{/number}",
                "contents_url": "https://api.github.com/repos/kinggoesgaming/zod/contents/{+path}",
                "compare_url": "https://api.github.com/repos/kinggoesgaming/zod/compare/{base}...{head}",
                "merges_url": "https://api.github.com/repos/kinggoesgaming/zod/merges",
                "archive_url": "https://api.github.com/repos/kinggoesgaming/zod/{archive_format}{/ref}",
                "downloads_url": "https://api.github.com/repos/kinggoesgaming/zod/downloads",
                "issues_url": "https://api.github.com/repos/kinggoesgaming/zod/issues{/number}",
                "pulls_url": "https://api.github.com/repos/kinggoesgaming/zod/pulls{/number}",
                "milestones_url": "https://api.github.com/repos/kinggoesgaming/zod/milestones{/number}",
                "notifications_url": "https://api.github.com/repos/kinggoesgaming/zod/notifications{?since,all,participating}",
                "labels_url": "https://api.github.com/repos/kinggoesgaming/zod/labels{/name}",
                "releases_url": "https://api.github.com/repos/kinggoesgaming/zod/releases{/id}",
                "deployments_url": "https://api.github.com/repos/kinggoesgaming/zod/deployments",
                "created_at": "2023-10-27T03:49:35Z",
                "updated_at": "2023-10-27T03:49:35Z",
                "pushed_at": "2023-10-24T02:27:21Z",
                "git_url": "git://github.com/kinggoesgaming/zod.git",
                "ssh_url": "git@github.com:kinggoesgaming/zod.git",
                "clone_url": "https://github.com/kinggoesgaming/zod.git",
                "svn_url": "https://github.com/kinggoesgaming/zod",
                "homepage": "https://zod.dev",
                "size": 4949,
                "stargazers_count": 0,
                "watchers_count": 0,
                "language": null,
                "has_issues": false,
                "has_projects": true,
                "has_downloads": true,
                "has_wiki": true,
                "has_pages": false,
                "has_discussions": false,
                "forks_count": 0,
                "mirror_url": null,
                "archived": false,
                "disabled": false,
                "open_issues_count": 0,
                "license": null,
                "allow_forking": true,
                "is_template": false,
                "web_commit_signoff_required": false,
                "topics": [],
                "visibility": "public",
                "forks": 0,
                "open_issues": 0,
                "watchers": 0,
                "default_branch": "main",
                "public": true
            }
        },
        "public": true,
        "created_at": "2023-10-27T03:49:36Z"
    },
    {
        "id": "32886173391",
        "type": "WatchEvent",
        "actor": {
            "id": 83126532,
            "login": "JohnsonHuang4396",
            "display_login": "JohnsonHuang4396",
            "gravatar_id": "",
            "url": "https://api.github.com/users/JohnsonHuang4396",
            "avatar_url": "https://avatars.githubusercontent.com/u/83126532?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T02:04:59Z"
    },
    {
        "id": "32886097920",
        "type": "WatchEvent",
        "actor": {
            "id": 111666694,
            "login": "hightowerbuilds",
            "display_login": "hightowerbuilds",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hightowerbuilds",
            "avatar_url": "https://avatars.githubusercontent.com/u/111666694?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T01:59:17Z"
    },
    {
        "id": "32885663812",
        "type": "IssuesEvent",
        "actor": {
            "id": 109049958,
            "login": "SamCB-CT",
            "display_login": "SamCB-CT",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SamCB-CT",
            "avatar_url": "https://avatars.githubusercontent.com/u/109049958?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "opened",
            "issue": {
                "url": "https://api.github.com/repos/colinhacks/zod/issues/2909",
                "repository_url": "https://api.github.com/repos/colinhacks/zod",
                "labels_url": "https://api.github.com/repos/colinhacks/zod/issues/2909/labels{/name}",
                "comments_url": "https://api.github.com/repos/colinhacks/zod/issues/2909/comments",
                "events_url": "https://api.github.com/repos/colinhacks/zod/issues/2909/events",
                "html_url": "https://github.com/colinhacks/zod/issues/2909",
                "id": 1964606303,
                "node_id": "I_kwDODqUnoM51GYNf",
                "number": 2909,
                "title": "Extend within generic function doesn't infer type as expected",
                "user": {
                    "login": "SamCB-CT",
                    "id": 109049958,
                    "node_id": "U_kgDOBn_4Zg",
                    "avatar_url": "https://avatars.githubusercontent.com/u/109049958?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/SamCB-CT",
                    "html_url": "https://github.com/SamCB-CT",
                    "followers_url": "https://api.github.com/users/SamCB-CT/followers",
                    "following_url": "https://api.github.com/users/SamCB-CT/following{/other_user}",
                    "gists_url": "https://api.github.com/users/SamCB-CT/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/SamCB-CT/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/SamCB-CT/subscriptions",
                    "organizations_url": "https://api.github.com/users/SamCB-CT/orgs",
                    "repos_url": "https://api.github.com/users/SamCB-CT/repos",
                    "events_url": "https://api.github.com/users/SamCB-CT/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/SamCB-CT/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 0,
                "created_at": "2023-10-27T01:26:51Z",
                "updated_at": "2023-10-27T01:26:51Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "I was using the suggested means of typing generic functions [as covered in the documentation](https://zod.dev/?id=writing-generic-function). My goal was to write a method that would `extend` any provided zod object with another hardcoded zod object.\r\n\r\nUsing\r\n\r\n```ts\r\nconst extender = <T extends z.AnyZodObject>(p: T) => p.extend({ foo: z.boolean() });\r\n```\r\n\r\nResults in the incorrect type being inferred.\r\n\r\n```ts\r\nconst schema = extender(z.object({ bar: z.number() }}));\r\nz.infer<typeof schema> // === { [x: string]: any; [x: number]: any; [x: symbol]: any; foo?: boolean | undefined; }\r\n```\r\n\r\nRegardless of the object submitted as `p`.\r\n\r\nThe example below covers the cases I'd tested and a workaround I found that used `z.ZodRawShape` instead.\r\n\r\n```ts\r\nimport { z } from \"zod\";\r\n\r\nconst schema = z.object({ bar: z.number() }).extend({ foo: z.boolean() });\r\n\r\nconst brokenExtender = <T extends z.AnyZodObject>(p: T) => p.extend({ foo: z.boolean() });\r\nconst schema2 = brokenExtender(z.object({ bar: z.number() }));\r\n\r\nconst workingExtender = <T extends z.ZodRawShape>(p: z.ZodObject<T>) => p.extend({ foo: z.boolean() }) ;\r\nconst schema3 = workingExtender(z.object({ bar: z.number() }));\r\n\r\n/* As expected: type s1 = { bar: number; foo: boolean; } */\r\ntype s1 = z.infer<typeof schema>;\r\n/* Not expected: type s2 = { [x: string]: any; [x: number]: any; [x: symbol]: any; foo?: boolean | undefined; } */\r\ntype s2 = z.infer<typeof schema2>;\r\n/* As expected: type s3 = { bar: number; foo: boolean; } */\r\ntype s3 = z.infer<typeof schema3>;\r\n```\r\n[codesandbox](https://codesandbox.io/p/sandbox/agitated-https-s79s3p?file=%2Fsrc%2Findex.ts%3A7%2C35)",
                "reactions": {
                    "url": "https://api.github.com/repos/colinhacks/zod/issues/2909/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/colinhacks/zod/issues/2909/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T01:26:53Z"
    },
    {
        "id": "32885167645",
        "type": "WatchEvent",
        "actor": {
            "id": 3392695,
            "login": "joshuawjulian",
            "display_login": "joshuawjulian",
            "gravatar_id": "",
            "url": "https://api.github.com/users/joshuawjulian",
            "avatar_url": "https://avatars.githubusercontent.com/u/3392695?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T00:47:10Z"
    },
    {
        "id": "32884039325",
        "type": "WatchEvent",
        "actor": {
            "id": 29476690,
            "login": "leonlogli",
            "display_login": "leonlogli",
            "gravatar_id": "",
            "url": "https://api.github.com/users/leonlogli",
            "avatar_url": "https://avatars.githubusercontent.com/u/29476690?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-26T23:16:36Z"
    },
    {
        "id": "32882916646",
        "type": "WatchEvent",
        "actor": {
            "id": 56062595,
            "login": "bumengi94",
            "display_login": "bumengi94",
            "gravatar_id": "",
            "url": "https://api.github.com/users/bumengi94",
            "avatar_url": "https://avatars.githubusercontent.com/u/56062595?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-26T22:02:32Z"
    },
    {
        "id": "32882181628",
        "type": "WatchEvent",
        "actor": {
            "id": 76838159,
            "login": "wolflu05",
            "display_login": "wolflu05",
            "gravatar_id": "",
            "url": "https://api.github.com/users/wolflu05",
            "avatar_url": "https://avatars.githubusercontent.com/u/76838159?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-26T21:20:25Z"
    },
    {
        "id": "32881046922",
        "type": "WatchEvent",
        "actor": {
            "id": 1277674,
            "login": "michailpanagiotis",
            "display_login": "michailpanagiotis",
            "gravatar_id": "",
            "url": "https://api.github.com/users/michailpanagiotis",
            "avatar_url": "https://avatars.githubusercontent.com/u/1277674?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-26T20:25:48Z"
    },
    {
        "id": "32880193624",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 7269141,
            "login": "cjlawson02",
            "display_login": "cjlawson02",
            "gravatar_id": "",
            "url": "https://api.github.com/users/cjlawson02",
            "avatar_url": "https://avatars.githubusercontent.com/u/7269141?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/colinhacks/zod/issues/2893",
                "repository_url": "https://api.github.com/repos/colinhacks/zod",
                "labels_url": "https://api.github.com/repos/colinhacks/zod/issues/2893/labels{/name}",
                "comments_url": "https://api.github.com/repos/colinhacks/zod/issues/2893/comments",
                "events_url": "https://api.github.com/repos/colinhacks/zod/issues/2893/events",
                "html_url": "https://github.com/colinhacks/zod/issues/2893",
                "id": 1955254078,
                "node_id": "I_kwDODqUnoM50is8-",
                "number": 2893,
                "title": "Making all fields of an object \"nullable\"",
                "user": {
                    "login": "AslanTaheri",
                    "id": 123320141,
                    "node_id": "U_kgDOB1m3TQ",
                    "avatar_url": "https://avatars.githubusercontent.com/u/123320141?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/AslanTaheri",
                    "html_url": "https://github.com/AslanTaheri",
                    "followers_url": "https://api.github.com/users/AslanTaheri/followers",
                    "following_url": "https://api.github.com/users/AslanTaheri/following{/other_user}",
                    "gists_url": "https://api.github.com/users/AslanTaheri/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/AslanTaheri/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/AslanTaheri/subscriptions",
                    "organizations_url": "https://api.github.com/users/AslanTaheri/orgs",
                    "repos_url": "https://api.github.com/users/AslanTaheri/repos",
                    "events_url": "https://api.github.com/users/AslanTaheri/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/AslanTaheri/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 1,
                "created_at": "2023-10-21T02:58:15Z",
                "updated_at": "2023-10-26T19:47:45Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "Currently, it is possible to make an object's properties optional by using `.Partial`. However, this does **NOT** make the object properties nullable, so there would be a repetitive task of adding `nullable()` to every field as seen below. Could we have an option to make all fields all nullable?\r\n\r\n```\r\nconst MyObjectSchema = z\r\n  .object({\r\n    p1: z.string().nullable(),\r\n    p2: z.number().nullable(),\r\n    p3: z.boolean().nullable(),\r\n    p4: z.date().nullable(),\r\n    p5: z.symbol().nullable(),\r\n  })\r\n  .partial();\r\n```",
                "reactions": {
                    "url": "https://api.github.com/repos/colinhacks/zod/issues/2893/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/colinhacks/zod/issues/2893/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/colinhacks/zod/issues/comments/1781798359",
                "html_url": "https://github.com/colinhacks/zod/issues/2893#issuecomment-1781798359",
                "issue_url": "https://api.github.com/repos/colinhacks/zod/issues/2893",
                "id": 1781798359,
                "node_id": "IC_kwDODqUnoM5qNBXX",
                "user": {
                    "login": "cjlawson02",
                    "id": 7269141,
                    "node_id": "MDQ6VXNlcjcyNjkxNDE=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/7269141?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/cjlawson02",
                    "html_url": "https://github.com/cjlawson02",
                    "followers_url": "https://api.github.com/users/cjlawson02/followers",
                    "following_url": "https://api.github.com/users/cjlawson02/following{/other_user}",
                    "gists_url": "https://api.github.com/users/cjlawson02/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/cjlawson02/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/cjlawson02/subscriptions",
                    "organizations_url": "https://api.github.com/users/cjlawson02/orgs",
                    "repos_url": "https://api.github.com/users/cjlawson02/repos",
                    "events_url": "https://api.github.com/users/cjlawson02/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/cjlawson02/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-26T19:47:44Z",
                "updated_at": "2023-10-26T19:47:44Z",
                "author_association": "NONE",
                "body": "+1, a nullish partial would be a great feature",
                "reactions": {
                    "url": "https://api.github.com/repos/colinhacks/zod/issues/comments/1781798359/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-26T19:47:45Z"
    },
    {
        "id": "32879185070",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 167160,
            "login": "khusmann",
            "display_login": "khusmann",
            "gravatar_id": "",
            "url": "https://api.github.com/users/khusmann",
            "avatar_url": "https://avatars.githubusercontent.com/u/167160?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/colinhacks/zod/issues/2203",
                "repository_url": "https://api.github.com/repos/colinhacks/zod",
                "labels_url": "https://api.github.com/repos/colinhacks/zod/issues/2203/labels{/name}",
                "comments_url": "https://api.github.com/repos/colinhacks/zod/issues/2203/comments",
                "events_url": "https://api.github.com/repos/colinhacks/zod/issues/2203/events",
                "html_url": "https://github.com/colinhacks/zod/issues/2203",
                "id": 1627774384,
                "node_id": "I_kwDODqUnoM5hBd2w",
                "number": 2203,
                "title": "Regression in type inference for a union of array types inside an object type",
                "user": {
                    "login": "daitay4",
                    "id": 30401970,
                    "node_id": "MDQ6VXNlcjMwNDAxOTcw",
                    "avatar_url": "https://avatars.githubusercontent.com/u/30401970?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/daitay4",
                    "html_url": "https://github.com/daitay4",
                    "followers_url": "https://api.github.com/users/daitay4/followers",
                    "following_url": "https://api.github.com/users/daitay4/following{/other_user}",
                    "gists_url": "https://api.github.com/users/daitay4/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/daitay4/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/daitay4/subscriptions",
                    "organizations_url": "https://api.github.com/users/daitay4/orgs",
                    "repos_url": "https://api.github.com/users/daitay4/repos",
                    "events_url": "https://api.github.com/users/daitay4/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/daitay4/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 11,
                "created_at": "2023-03-16T15:44:33Z",
                "updated_at": "2023-10-26T19:03:11Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "I have some schema like the following:\r\n```\r\nz.object({\r\n    arrayProp: z.union([z.string().array(), z.number().array()]),\r\n}),\r\n```\r\n\r\nthis used to produce the following type for the `arrayProp` key:  `string[] | number[]`.\r\n\r\nsince version 3.21.2 this produces the following type: \r\n`string[] | (string[] & number[]) | (string[] & undefined) | (number[] & string[]) | number[] | (number[] & undefined)`\r\n\r\nthis in turn causes many problems when trying to work with `arrayProp`, for example if I try to use an array predicate like `map`, I'm getting the following error: \r\n```\r\nTS2349: This expression is not callable. \u00a0\u00a0Each member of the union type '(<U>(callbackfn: (value: string, index: number, array: string[]) => U, thisArg?: any) => U[]) | (<U>(callbackfn: (value: number, index: number, array: number[]) => U, thisArg?: any) => U[]) | ((<U>(callbackfn: (value: string, index: number, array: string[]) => U, thisArg?: any) => U[]) & (<U>(callbackfn: (value: num...' has signatures, but none of those signatures are compatible with each other.\r\n```\r\n\r\nHowever, if I remove the wrapper `z.object` and use the following schema: `z.union([z.string().array(), z.number().array()])` then I'm getting the correct type inference of `string[] | number[]`\r\n\r\nLooking at the code for the 3.21.2 PR (https://github.com/colinhacks/zod/commit/4d016b772b79d566bfa2a0c2fc5bfbd92b776982#diff-a5a27c41f819170124f4fd4cf24b1d71b8ab2966a4bde235a7f8db53dc8ef486) suggests that this has to do with changes made to the internal`DeepPartial` type.\r\n\r\nFor now we're sticking with 3.21.1 version, but I would be happy to see that fixed as we use this pattern on multiple occasions across our project.",
                "reactions": {
                    "url": "https://api.github.com/repos/colinhacks/zod/issues/2203/reactions",
                    "total_count": 8,
                    "+1": 8,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/colinhacks/zod/issues/2203/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/colinhacks/zod/issues/comments/1781737030",
                "html_url": "https://github.com/colinhacks/zod/issues/2203#issuecomment-1781737030",
                "issue_url": "https://api.github.com/repos/colinhacks/zod/issues/2203",
                "id": 1781737030,
                "node_id": "IC_kwDODqUnoM5qMyZG",
                "user": {
                    "login": "khusmann",
                    "id": 167160,
                    "node_id": "MDQ6VXNlcjE2NzE2MA==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/167160?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/khusmann",
                    "html_url": "https://github.com/khusmann",
                    "followers_url": "https://api.github.com/users/khusmann/followers",
                    "following_url": "https://api.github.com/users/khusmann/following{/other_user}",
                    "gists_url": "https://api.github.com/users/khusmann/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/khusmann/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/khusmann/subscriptions",
                    "organizations_url": "https://api.github.com/users/khusmann/orgs",
                    "repos_url": "https://api.github.com/users/khusmann/repos",
                    "events_url": "https://api.github.com/users/khusmann/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/khusmann/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-26T19:03:10Z",
                "updated_at": "2023-10-26T19:03:10Z",
                "author_association": "NONE",
                "body": "It also happens with tuples as well:\r\n\r\n```\r\nconst foo = z.tuple([z.number(), z.number()]).or(z.number());\r\n\r\ntype Foo = z.infer<typeof foo>;\r\n// [number, number] | number\r\n\r\nconst bar = z.object({ foo });\r\n\r\ntype Bar = z.infer<typeof bar>;\r\n// { foo: (number | [number, number]) & (number | [number, number]) | undefined } ??\r\n```",
                "reactions": {
                    "url": "https://api.github.com/repos/colinhacks/zod/issues/comments/1781737030/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-26T19:03:11Z"
    },
    {
        "id": "32877287778",
        "type": "WatchEvent",
        "actor": {
            "id": 17636634,
            "login": "nxmxgoldxx",
            "display_login": "nxmxgoldxx",
            "gravatar_id": "",
            "url": "https://api.github.com/users/nxmxgoldxx",
            "avatar_url": "https://avatars.githubusercontent.com/u/17636634?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-26T17:45:20Z"
    },
    {
        "id": "32876386084",
        "type": "WatchEvent",
        "actor": {
            "id": 1439558,
            "login": "corford",
            "display_login": "corford",
            "gravatar_id": "",
            "url": "https://api.github.com/users/corford",
            "avatar_url": "https://avatars.githubusercontent.com/u/1439558?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-26T17:09:05Z"
    },
    {
        "id": "32876361814",
        "type": "WatchEvent",
        "actor": {
            "id": 570048,
            "login": "nguyenlamzx",
            "display_login": "nguyenlamzx",
            "gravatar_id": "",
            "url": "https://api.github.com/users/nguyenlamzx",
            "avatar_url": "https://avatars.githubusercontent.com/u/570048?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-26T17:08:07Z"
    },
    {
        "id": "32875912365",
        "type": "WatchEvent",
        "actor": {
            "id": 35196214,
            "login": "Piscarocarlos",
            "display_login": "Piscarocarlos",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Piscarocarlos",
            "avatar_url": "https://avatars.githubusercontent.com/u/35196214?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-26T16:50:21Z"
    },
    {
        "id": "32875578369",
        "type": "WatchEvent",
        "actor": {
            "id": 84589845,
            "login": "agent-swyth",
            "display_login": "agent-swyth",
            "gravatar_id": "",
            "url": "https://api.github.com/users/agent-swyth",
            "avatar_url": "https://avatars.githubusercontent.com/u/84589845?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-26T16:37:18Z"
    },
    {
        "id": "32875011952",
        "type": "WatchEvent",
        "actor": {
            "id": 460273,
            "login": "rafael-neri",
            "display_login": "rafael-neri",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rafael-neri",
            "avatar_url": "https://avatars.githubusercontent.com/u/460273?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-26T16:15:56Z"
    },
    {
        "id": "32874801660",
        "type": "WatchEvent",
        "actor": {
            "id": 41365655,
            "login": "yafkari",
            "display_login": "yafkari",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yafkari",
            "avatar_url": "https://avatars.githubusercontent.com/u/41365655?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-26T16:08:18Z"
    },
    {
        "id": "32873755886",
        "type": "WatchEvent",
        "actor": {
            "id": 143862758,
            "login": "cvs0",
            "display_login": "cvs0",
            "gravatar_id": "",
            "url": "https://api.github.com/users/cvs0",
            "avatar_url": "https://avatars.githubusercontent.com/u/143862758?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-26T15:32:36Z"
    },
    {
        "id": "32873588104",
        "type": "WatchEvent",
        "actor": {
            "id": 4674003,
            "login": "JarekToro",
            "display_login": "JarekToro",
            "gravatar_id": "",
            "url": "https://api.github.com/users/JarekToro",
            "avatar_url": "https://avatars.githubusercontent.com/u/4674003?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-26T15:27:08Z"
    },
    {
        "id": "32873208411",
        "type": "IssuesEvent",
        "actor": {
            "id": 31667350,
            "login": "JacobWeisenburger",
            "display_login": "JacobWeisenburger",
            "gravatar_id": "",
            "url": "https://api.github.com/users/JacobWeisenburger",
            "avatar_url": "https://avatars.githubusercontent.com/u/31667350?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "opened",
            "issue": {
                "url": "https://api.github.com/repos/colinhacks/zod/issues/2907",
                "repository_url": "https://api.github.com/repos/colinhacks/zod",
                "labels_url": "https://api.github.com/repos/colinhacks/zod/issues/2907/labels{/name}",
                "comments_url": "https://api.github.com/repos/colinhacks/zod/issues/2907/comments",
                "events_url": "https://api.github.com/repos/colinhacks/zod/issues/2907/events",
                "html_url": "https://github.com/colinhacks/zod/issues/2907",
                "id": 1963803667,
                "node_id": "I_kwDODqUnoM51DUQT",
                "number": 2907,
                "title": "Zod error message for union is misleading",
                "user": {
                    "login": "JacobWeisenburger",
                    "id": 31667350,
                    "node_id": "MDQ6VXNlcjMxNjY3MzUw",
                    "avatar_url": "https://avatars.githubusercontent.com/u/31667350?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/JacobWeisenburger",
                    "html_url": "https://github.com/JacobWeisenburger",
                    "followers_url": "https://api.github.com/users/JacobWeisenburger/followers",
                    "following_url": "https://api.github.com/users/JacobWeisenburger/following{/other_user}",
                    "gists_url": "https://api.github.com/users/JacobWeisenburger/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/JacobWeisenburger/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/JacobWeisenburger/subscriptions",
                    "organizations_url": "https://api.github.com/users/JacobWeisenburger/orgs",
                    "repos_url": "https://api.github.com/users/JacobWeisenburger/repos",
                    "events_url": "https://api.github.com/users/JacobWeisenburger/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/JacobWeisenburger/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 4972524263,
                        "node_id": "LA_kwDODqUnoM8AAAABKGKy5w",
                        "url": "https://api.github.com/repos/colinhacks/zod/labels/not-intuitive-behavior",
                        "name": "not-intuitive-behavior",
                        "color": "D93F0B",
                        "default": false,
                        "description": ""
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 0,
                "created_at": "2023-10-26T15:15:01Z",
                "updated_at": "2023-10-26T15:15:01Z",
                "closed_at": null,
                "author_association": "COLLABORATOR",
                "active_lock_reason": null,
                "body": "### Discussed in https://github.com/colinhacks/zod/discussions/2867\r\n\r\n<div type='discussions-op-text'>\r\n\r\n<sup>Originally posted by **bajewole** October 13, 2023</sup>\r\nIssue: Zod error message for unions is misleading\r\n\r\n```ts\r\nconst SuccessCode = z.number().min(1000).max(1999);\r\nconst ClientErrorCode = z.number().min(2000).max(2999);\r\nconst ServerErrorCode = z.number().min(3000).max(3999);\r\n\r\nconst StatusCode = z.union([\r\n  SuccessCode,\r\n  ClientErrorCode,\r\n  ServerErrorCode,\r\n]);\r\n```\r\n\r\nZod error I got is \r\n\r\n```ts\r\nconst input = 4000;\r\n    expect(() => StatusCode.parse(input)).toThrowErrorMatchingInlineSnapshot(`\r\n    \"[\r\n      {\r\n        \\\\\"code\\\\\": \\\\\"too_big\\\\\",\r\n        \\\\\"maximum\\\\\": 1999,\r\n        \\\\\"type\\\\\": \\\\\"number\\\\\",\r\n        \\\\\"inclusive\\\\\": true,\r\n        \\\\\"exact\\\\\": false,\r\n        \\\\\"message\\\\\": \\\\\"Number must be less than or equal to 1999\\\\\",\r\n        \\\\\"path\\\\\": []\r\n      }\r\n    ]\"`);\r\n```\r\n\r\nThe valid error object should be this instead\r\n\r\n```ts\r\nconst input = 4000;\r\n    expect(() => StatusCode.parse(input)).toThrowErrorMatchingInlineSnapshot(`\r\n    \"[\r\n      {\r\n        \\\\\"code\\\\\": \\\\\"too_big\\\\\",\r\n        \\\\\"maximum\\\\\": 3999,\r\n        \\\\\"type\\\\\": \\\\\"number\\\\\",\r\n        \\\\\"inclusive\\\\\": true,\r\n        \\\\\"exact\\\\\": false,\r\n        \\\\\"message\\\\\": \\\\\"Number must be less than or equal to 3999\\\\\",\r\n        \\\\\"path\\\\\": []\r\n      }\r\n    ]\"`);\r\n```\r\n\r\nThe validation works but the error is misleading. \r\n\r\nI tried creating a custom error by using `errorMap` but it still returned the above error\r\n\r\n```ts\r\nconst StatusCode = z.union([\r\n  SuccessCode,\r\n  ClientErrorCode,\r\n  ServerErrorCode,\r\n],\r\n  {\r\n    errorMap: () => {\r\n      return {\r\n        message: \"StatusCode must be between 1000 and 3999\",\r\n      };\r\n    },\r\n  });\r\n```</div>",
                "reactions": {
                    "url": "https://api.github.com/repos/colinhacks/zod/issues/2907/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/colinhacks/zod/issues/2907/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-26T15:15:03Z"
    },
    {
        "id": "32873197227",
        "type": "WatchEvent",
        "actor": {
            "id": 800417,
            "login": "diaswrd",
            "display_login": "diaswrd",
            "gravatar_id": "",
            "url": "https://api.github.com/users/diaswrd",
            "avatar_url": "https://avatars.githubusercontent.com/u/800417?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-26T15:14:43Z"
    },
    {
        "id": "32872429636",
        "type": "WatchEvent",
        "actor": {
            "id": 33533047,
            "login": "ethancanne",
            "display_login": "ethancanne",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ethancanne",
            "avatar_url": "https://avatars.githubusercontent.com/u/33533047?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-26T14:51:31Z"
    },
    {
        "id": "32870731682",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 95388414,
            "login": "Austin-Love",
            "display_login": "Austin-Love",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Austin-Love",
            "avatar_url": "https://avatars.githubusercontent.com/u/95388414?"
        },
        "repo": {
            "id": 245704608,
            "name": "colinhacks/zod",
            "url": "https://api.github.com/repos/colinhacks/zod"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/colinhacks/zod/issues/2904",
                "repository_url": "https://api.github.com/repos/colinhacks/zod",
                "labels_url": "https://api.github.com/repos/colinhacks/zod/issues/2904/labels{/name}",
                "comments_url": "https://api.github.com/repos/colinhacks/zod/issues/2904/comments",
                "events_url": "https://api.github.com/repos/colinhacks/zod/issues/2904/events",
                "html_url": "https://github.com/colinhacks/zod/issues/2904",
                "id": 1962935536,
                "node_id": "I_kwDODqUnoM51AATw",
                "number": 2904,
                "title": "Zod preprocess does not generate error",
                "user": {
                    "login": "stackline",
                    "id": 7194645,
                    "node_id": "MDQ6VXNlcjcxOTQ2NDU=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/7194645?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/stackline",
                    "html_url": "https://github.com/stackline",
                    "followers_url": "https://api.github.com/users/stackline/followers",
                    "following_url": "https://api.github.com/users/stackline/following{/other_user}",
                    "gists_url": "https://api.github.com/users/stackline/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/stackline/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/stackline/subscriptions",
                    "organizations_url": "https://api.github.com/users/stackline/orgs",
                    "repos_url": "https://api.github.com/users/stackline/repos",
                    "events_url": "https://api.github.com/users/stackline/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/stackline/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 1,
                "created_at": "2023-10-26T07:58:08Z",
                "updated_at": "2023-10-26T14:01:59Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "I have been using zod as a validation library with react-hook-form. When I set up validation using preprocess in zod, I noticed that errors were not being detected as expected.\r\n\r\n#### Similar issue\r\n\r\nI have confirmed that this issue has been reported on the react-hook-form/resolver repository.\r\n\r\n* https://github.com/react-hook-form/resolvers/issues/635\r\n\r\n#### What I confirmed about this issue\r\n\r\nRegarding this issue, I downgraded the zod version from 3.22.4 to 3.21.4 and confirmed that errors were detected as expected. I also tried several versions and found that the issue occurs starting from 3.22.0.\r\n\r\n#### How to reproduce\r\n\r\nAlthough this is a quote from the issue on the react-hook-form/resolver repository, here is a codesandbox that reproduces the phenomenon of errors not being detected (with zod version 3.22.4):\r\n\r\n* https://codesandbox.io/s/react-hook-form-zod-preprocess-mn8sy4?file=/src/index.js\r\n\r\nAdditionally, here is a codesandbox with zod version 3.21.4, where errors are detected:\r\n\r\n* https://codesandbox.io/s/react-hook-form-zod-preprocess-forked-cqm66q",
                "reactions": {
                    "url": "https://api.github.com/repos/colinhacks/zod/issues/2904/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/colinhacks/zod/issues/2904/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/colinhacks/zod/issues/comments/1781194871",
                "html_url": "https://github.com/colinhacks/zod/issues/2904#issuecomment-1781194871",
                "issue_url": "https://api.github.com/repos/colinhacks/zod/issues/2904",
                "id": 1781194871,
                "node_id": "IC_kwDODqUnoM5qKuB3",
                "user": {
                    "login": "Austin-Love",
                    "id": 95388414,
                    "node_id": "U_kgDOBa-C_g",
                    "avatar_url": "https://avatars.githubusercontent.com/u/95388414?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Austin-Love",
                    "html_url": "https://github.com/Austin-Love",
                    "followers_url": "https://api.github.com/users/Austin-Love/followers",
                    "following_url": "https://api.github.com/users/Austin-Love/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Austin-Love/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Austin-Love/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Austin-Love/subscriptions",
                    "organizations_url": "https://api.github.com/users/Austin-Love/orgs",
                    "repos_url": "https://api.github.com/users/Austin-Love/repos",
                    "events_url": "https://api.github.com/users/Austin-Love/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Austin-Love/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-26T14:01:59Z",
                "updated_at": "2023-10-26T14:01:59Z",
                "author_association": "NONE",
                "body": "I have noticed the same behavior, but it's actually a little more nuanced than that. I opened the same issue yesterday (https://github.com/colinhacks/zod/issues/2900)\r\n\r\nTurns out preprocessers are canceled if a field declared before them in the schema without a preprocessor fails validation. \r\n\r\nMy team found a temporary fix by replacing nested preprocessors with transforms and then piping them into a validator. We've only made this change to form resolvers because we are concerned about the side effects.",
                "reactions": {
                    "url": "https://api.github.com/repos/colinhacks/zod/issues/comments/1781194871/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-26T14:02:00Z"
    }
]