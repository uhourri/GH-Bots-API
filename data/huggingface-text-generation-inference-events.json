[
    {
        "id": "32895818891",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 23298448,
            "login": "OlivierDehaene",
            "display_login": "OlivierDehaene",
            "gravatar_id": "",
            "url": "https://api.github.com/users/OlivierDehaene",
            "avatar_url": "https://avatars.githubusercontent.com/u/23298448?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1204",
                "repository_url": "https://api.github.com/repos/huggingface/text-generation-inference",
                "labels_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1204/labels{/name}",
                "comments_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1204/comments",
                "events_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1204/events",
                "html_url": "https://github.com/huggingface/text-generation-inference/issues/1204",
                "id": 1965022710,
                "node_id": "I_kwDOIKbbpM51H932",
                "number": 1204,
                "title": "Sharding Error: Not Enough CUDA Devices",
                "user": {
                    "login": "ongmk",
                    "id": 23038332,
                    "node_id": "MDQ6VXNlcjIzMDM4MzMy",
                    "avatar_url": "https://avatars.githubusercontent.com/u/23038332?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/ongmk",
                    "html_url": "https://github.com/ongmk",
                    "followers_url": "https://api.github.com/users/ongmk/followers",
                    "following_url": "https://api.github.com/users/ongmk/following{/other_user}",
                    "gists_url": "https://api.github.com/users/ongmk/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/ongmk/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/ongmk/subscriptions",
                    "organizations_url": "https://api.github.com/users/ongmk/orgs",
                    "repos_url": "https://api.github.com/users/ongmk/repos",
                    "events_url": "https://api.github.com/users/ongmk/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/ongmk/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 1,
                "created_at": "2023-10-27T08:25:07Z",
                "updated_at": "2023-10-27T10:34:33Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "**Problem Description:** I'm encountering an error upon running a docker container for TGI with sharding enabled to utilize my two GPUs. Even though my container setup is correct and GPU enablement is confirmed (as per PyTorch and nvidia-smi insights from within the container), I'm still receiving the error: `Error: NotEnoughCUDADevices(\"``sharded`` is true but only found 1 CUDA devices\")`\r\n![image](https://github.com/huggingface/text-generation-inference/assets/23038332/7d4a0636-b2e1-4b3a-a3e9-699e6450bcd4)\r\n\r\n**Environment:**\r\nOS: Windows\r\nGPUs: 2 * NVIDIA GeForce GTX 1080 Ti\r\nDocker image: ghcr.io/huggingface/text-generation-inference:1.1.1\r\n\r\nTo illustrate, here's the output of PyTorch and nvidia-smi within the container, showing two GPUs.\r\n**PyTorch Output**\r\n![image](https://github.com/huggingface/text-generation-inference/assets/23038332/992ce80e-98a7-4846-870e-8f6c6af2cdae)\r\n\r\n**nvidia-smi Output**\r\n![image](https://github.com/huggingface/text-generation-inference/assets/23038332/01c8579e-4917-4462-8b62-45ca895cbd12)\r\n\r\nI'd appreciate any guidance on troubleshooting this issue.",
                "reactions": {
                    "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1204/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1204/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/comments/1782685486",
                "html_url": "https://github.com/huggingface/text-generation-inference/issues/1204#issuecomment-1782685486",
                "issue_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1204",
                "id": 1782685486,
                "node_id": "IC_kwDOIKbbpM5qQZ8u",
                "user": {
                    "login": "OlivierDehaene",
                    "id": 23298448,
                    "node_id": "MDQ6VXNlcjIzMjk4NDQ4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/23298448?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/OlivierDehaene",
                    "html_url": "https://github.com/OlivierDehaene",
                    "followers_url": "https://api.github.com/users/OlivierDehaene/followers",
                    "following_url": "https://api.github.com/users/OlivierDehaene/following{/other_user}",
                    "gists_url": "https://api.github.com/users/OlivierDehaene/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/OlivierDehaene/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/OlivierDehaene/subscriptions",
                    "organizations_url": "https://api.github.com/users/OlivierDehaene/orgs",
                    "repos_url": "https://api.github.com/users/OlivierDehaene/repos",
                    "events_url": "https://api.github.com/users/OlivierDehaene/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/OlivierDehaene/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T10:34:32Z",
                "updated_at": "2023-10-27T10:34:32Z",
                "author_association": "MEMBER",
                "body": "Can you try setting the number of shards explicitely? \r\n\r\n```shell\r\npodman run -it --device nvidia.com/gpu=all --shm-size 1g -p 8080:80 -v ./data:/data text-generation-inference:1.1-1 --num-shard 2\r\n```",
                "reactions": {
                    "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/comments/1782685486/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T10:34:33Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32895304785",
        "type": "WatchEvent",
        "actor": {
            "id": 65102625,
            "login": "dubuqiangu",
            "display_login": "dubuqiangu",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dubuqiangu",
            "avatar_url": "https://avatars.githubusercontent.com/u/65102625?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T10:15:07Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32894658933",
        "type": "ForkEvent",
        "actor": {
            "id": 6553693,
            "login": "okalldal",
            "display_login": "okalldal",
            "gravatar_id": "",
            "url": "https://api.github.com/users/okalldal",
            "avatar_url": "https://avatars.githubusercontent.com/u/6553693?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "forkee": {
                "id": 710722933,
                "node_id": "R_kgDOKlzFdQ",
                "name": "text-generation-inference",
                "full_name": "okalldal/text-generation-inference",
                "private": false,
                "owner": {
                    "login": "okalldal",
                    "id": 6553693,
                    "node_id": "MDQ6VXNlcjY1NTM2OTM=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/6553693?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/okalldal",
                    "html_url": "https://github.com/okalldal",
                    "followers_url": "https://api.github.com/users/okalldal/followers",
                    "following_url": "https://api.github.com/users/okalldal/following{/other_user}",
                    "gists_url": "https://api.github.com/users/okalldal/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/okalldal/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/okalldal/subscriptions",
                    "organizations_url": "https://api.github.com/users/okalldal/orgs",
                    "repos_url": "https://api.github.com/users/okalldal/repos",
                    "events_url": "https://api.github.com/users/okalldal/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/okalldal/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "html_url": "https://github.com/okalldal/text-generation-inference",
                "description": "Large Language Model Text Generation Inference",
                "fork": true,
                "url": "https://api.github.com/repos/okalldal/text-generation-inference",
                "forks_url": "https://api.github.com/repos/okalldal/text-generation-inference/forks",
                "keys_url": "https://api.github.com/repos/okalldal/text-generation-inference/keys{/key_id}",
                "collaborators_url": "https://api.github.com/repos/okalldal/text-generation-inference/collaborators{/collaborator}",
                "teams_url": "https://api.github.com/repos/okalldal/text-generation-inference/teams",
                "hooks_url": "https://api.github.com/repos/okalldal/text-generation-inference/hooks",
                "issue_events_url": "https://api.github.com/repos/okalldal/text-generation-inference/issues/events{/number}",
                "events_url": "https://api.github.com/repos/okalldal/text-generation-inference/events",
                "assignees_url": "https://api.github.com/repos/okalldal/text-generation-inference/assignees{/user}",
                "branches_url": "https://api.github.com/repos/okalldal/text-generation-inference/branches{/branch}",
                "tags_url": "https://api.github.com/repos/okalldal/text-generation-inference/tags",
                "blobs_url": "https://api.github.com/repos/okalldal/text-generation-inference/git/blobs{/sha}",
                "git_tags_url": "https://api.github.com/repos/okalldal/text-generation-inference/git/tags{/sha}",
                "git_refs_url": "https://api.github.com/repos/okalldal/text-generation-inference/git/refs{/sha}",
                "trees_url": "https://api.github.com/repos/okalldal/text-generation-inference/git/trees{/sha}",
                "statuses_url": "https://api.github.com/repos/okalldal/text-generation-inference/statuses/{sha}",
                "languages_url": "https://api.github.com/repos/okalldal/text-generation-inference/languages",
                "stargazers_url": "https://api.github.com/repos/okalldal/text-generation-inference/stargazers",
                "contributors_url": "https://api.github.com/repos/okalldal/text-generation-inference/contributors",
                "subscribers_url": "https://api.github.com/repos/okalldal/text-generation-inference/subscribers",
                "subscription_url": "https://api.github.com/repos/okalldal/text-generation-inference/subscription",
                "commits_url": "https://api.github.com/repos/okalldal/text-generation-inference/commits{/sha}",
                "git_commits_url": "https://api.github.com/repos/okalldal/text-generation-inference/git/commits{/sha}",
                "comments_url": "https://api.github.com/repos/okalldal/text-generation-inference/comments{/number}",
                "issue_comment_url": "https://api.github.com/repos/okalldal/text-generation-inference/issues/comments{/number}",
                "contents_url": "https://api.github.com/repos/okalldal/text-generation-inference/contents/{+path}",
                "compare_url": "https://api.github.com/repos/okalldal/text-generation-inference/compare/{base}...{head}",
                "merges_url": "https://api.github.com/repos/okalldal/text-generation-inference/merges",
                "archive_url": "https://api.github.com/repos/okalldal/text-generation-inference/{archive_format}{/ref}",
                "downloads_url": "https://api.github.com/repos/okalldal/text-generation-inference/downloads",
                "issues_url": "https://api.github.com/repos/okalldal/text-generation-inference/issues{/number}",
                "pulls_url": "https://api.github.com/repos/okalldal/text-generation-inference/pulls{/number}",
                "milestones_url": "https://api.github.com/repos/okalldal/text-generation-inference/milestones{/number}",
                "notifications_url": "https://api.github.com/repos/okalldal/text-generation-inference/notifications{?since,all,participating}",
                "labels_url": "https://api.github.com/repos/okalldal/text-generation-inference/labels{/name}",
                "releases_url": "https://api.github.com/repos/okalldal/text-generation-inference/releases{/id}",
                "deployments_url": "https://api.github.com/repos/okalldal/text-generation-inference/deployments",
                "created_at": "2023-10-27T09:50:25Z",
                "updated_at": "2023-10-27T09:50:25Z",
                "pushed_at": "2023-10-27T06:41:36Z",
                "git_url": "git://github.com/okalldal/text-generation-inference.git",
                "ssh_url": "git@github.com:okalldal/text-generation-inference.git",
                "clone_url": "https://github.com/okalldal/text-generation-inference.git",
                "svn_url": "https://github.com/okalldal/text-generation-inference",
                "homepage": "http://hf.co/docs/text-generation-inference",
                "size": 2664,
                "stargazers_count": 0,
                "watchers_count": 0,
                "language": null,
                "has_issues": false,
                "has_projects": true,
                "has_downloads": true,
                "has_wiki": false,
                "has_pages": false,
                "has_discussions": false,
                "forks_count": 0,
                "mirror_url": null,
                "archived": false,
                "disabled": false,
                "open_issues_count": 0,
                "license": null,
                "allow_forking": true,
                "is_template": false,
                "web_commit_signoff_required": false,
                "topics": [],
                "visibility": "public",
                "forks": 0,
                "open_issues": 0,
                "watchers": 0,
                "default_branch": "main",
                "public": true
            }
        },
        "public": true,
        "created_at": "2023-10-27T09:50:26Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32894034222",
        "type": "WatchEvent",
        "actor": {
            "id": 13455991,
            "login": "manikantanr",
            "display_login": "manikantanr",
            "gravatar_id": "",
            "url": "https://api.github.com/users/manikantanr",
            "avatar_url": "https://avatars.githubusercontent.com/u/13455991?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T09:26:49Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32892410715",
        "type": "IssuesEvent",
        "actor": {
            "id": 23038332,
            "login": "ongmk",
            "display_login": "ongmk",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ongmk",
            "avatar_url": "https://avatars.githubusercontent.com/u/23038332?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "opened",
            "issue": {
                "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1204",
                "repository_url": "https://api.github.com/repos/huggingface/text-generation-inference",
                "labels_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1204/labels{/name}",
                "comments_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1204/comments",
                "events_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1204/events",
                "html_url": "https://github.com/huggingface/text-generation-inference/issues/1204",
                "id": 1965022710,
                "node_id": "I_kwDOIKbbpM51H932",
                "number": 1204,
                "title": "Sharding Error: Not Enough CUDA Devices",
                "user": {
                    "login": "ongmk",
                    "id": 23038332,
                    "node_id": "MDQ6VXNlcjIzMDM4MzMy",
                    "avatar_url": "https://avatars.githubusercontent.com/u/23038332?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/ongmk",
                    "html_url": "https://github.com/ongmk",
                    "followers_url": "https://api.github.com/users/ongmk/followers",
                    "following_url": "https://api.github.com/users/ongmk/following{/other_user}",
                    "gists_url": "https://api.github.com/users/ongmk/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/ongmk/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/ongmk/subscriptions",
                    "organizations_url": "https://api.github.com/users/ongmk/orgs",
                    "repos_url": "https://api.github.com/users/ongmk/repos",
                    "events_url": "https://api.github.com/users/ongmk/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/ongmk/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 0,
                "created_at": "2023-10-27T08:25:07Z",
                "updated_at": "2023-10-27T08:25:07Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "**Problem Description:** I'm encountering an error upon running a docker container for TGI with sharding enabled to utilize my two GPUs. Even though my container setup is correct and GPU enablement is confirmed (as per PyTorch and nvidia-smi insights from within the container), I'm still receiving the error: `Error: NotEnoughCUDADevices(\"``sharded`` is true but only found 1 CUDA devices\")`\r\n![image](https://github.com/huggingface/text-generation-inference/assets/23038332/7d4a0636-b2e1-4b3a-a3e9-699e6450bcd4)\r\n\r\n**Environment:**\r\nOS: Windows\r\nGPUs: 2 * NVIDIA GeForce GTX 1080 Ti\r\nDocker image: ghcr.io/huggingface/text-generation-inference:1.1.1\r\n\r\nTo illustrate, here's the output of PyTorch and nvidia-smi within the container.\r\n**PyTorch Output**\r\n![image](https://github.com/huggingface/text-generation-inference/assets/23038332/992ce80e-98a7-4846-870e-8f6c6af2cdae)\r\n\r\n**nvidia-smi Output**\r\n![image](https://github.com/huggingface/text-generation-inference/assets/23038332/01c8579e-4917-4462-8b62-45ca895cbd12)\r\n\r\nI'd appreciate any guidance on troubleshooting this issue.",
                "reactions": {
                    "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1204/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1204/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T08:25:09Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32891719499",
        "type": "ForkEvent",
        "actor": {
            "id": 58823673,
            "login": "btrcm00",
            "display_login": "btrcm00",
            "gravatar_id": "",
            "url": "https://api.github.com/users/btrcm00",
            "avatar_url": "https://avatars.githubusercontent.com/u/58823673?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "forkee": {
                "id": 710680320,
                "node_id": "R_kgDOKlwfAA",
                "name": "text-generation-inference",
                "full_name": "btrcm00/text-generation-inference",
                "private": false,
                "owner": {
                    "login": "btrcm00",
                    "id": 58823673,
                    "node_id": "MDQ6VXNlcjU4ODIzNjcz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/58823673?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/btrcm00",
                    "html_url": "https://github.com/btrcm00",
                    "followers_url": "https://api.github.com/users/btrcm00/followers",
                    "following_url": "https://api.github.com/users/btrcm00/following{/other_user}",
                    "gists_url": "https://api.github.com/users/btrcm00/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/btrcm00/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/btrcm00/subscriptions",
                    "organizations_url": "https://api.github.com/users/btrcm00/orgs",
                    "repos_url": "https://api.github.com/users/btrcm00/repos",
                    "events_url": "https://api.github.com/users/btrcm00/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/btrcm00/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "html_url": "https://github.com/btrcm00/text-generation-inference",
                "description": "Large Language Model Text Generation Inference",
                "fork": true,
                "url": "https://api.github.com/repos/btrcm00/text-generation-inference",
                "forks_url": "https://api.github.com/repos/btrcm00/text-generation-inference/forks",
                "keys_url": "https://api.github.com/repos/btrcm00/text-generation-inference/keys{/key_id}",
                "collaborators_url": "https://api.github.com/repos/btrcm00/text-generation-inference/collaborators{/collaborator}",
                "teams_url": "https://api.github.com/repos/btrcm00/text-generation-inference/teams",
                "hooks_url": "https://api.github.com/repos/btrcm00/text-generation-inference/hooks",
                "issue_events_url": "https://api.github.com/repos/btrcm00/text-generation-inference/issues/events{/number}",
                "events_url": "https://api.github.com/repos/btrcm00/text-generation-inference/events",
                "assignees_url": "https://api.github.com/repos/btrcm00/text-generation-inference/assignees{/user}",
                "branches_url": "https://api.github.com/repos/btrcm00/text-generation-inference/branches{/branch}",
                "tags_url": "https://api.github.com/repos/btrcm00/text-generation-inference/tags",
                "blobs_url": "https://api.github.com/repos/btrcm00/text-generation-inference/git/blobs{/sha}",
                "git_tags_url": "https://api.github.com/repos/btrcm00/text-generation-inference/git/tags{/sha}",
                "git_refs_url": "https://api.github.com/repos/btrcm00/text-generation-inference/git/refs{/sha}",
                "trees_url": "https://api.github.com/repos/btrcm00/text-generation-inference/git/trees{/sha}",
                "statuses_url": "https://api.github.com/repos/btrcm00/text-generation-inference/statuses/{sha}",
                "languages_url": "https://api.github.com/repos/btrcm00/text-generation-inference/languages",
                "stargazers_url": "https://api.github.com/repos/btrcm00/text-generation-inference/stargazers",
                "contributors_url": "https://api.github.com/repos/btrcm00/text-generation-inference/contributors",
                "subscribers_url": "https://api.github.com/repos/btrcm00/text-generation-inference/subscribers",
                "subscription_url": "https://api.github.com/repos/btrcm00/text-generation-inference/subscription",
                "commits_url": "https://api.github.com/repos/btrcm00/text-generation-inference/commits{/sha}",
                "git_commits_url": "https://api.github.com/repos/btrcm00/text-generation-inference/git/commits{/sha}",
                "comments_url": "https://api.github.com/repos/btrcm00/text-generation-inference/comments{/number}",
                "issue_comment_url": "https://api.github.com/repos/btrcm00/text-generation-inference/issues/comments{/number}",
                "contents_url": "https://api.github.com/repos/btrcm00/text-generation-inference/contents/{+path}",
                "compare_url": "https://api.github.com/repos/btrcm00/text-generation-inference/compare/{base}...{head}",
                "merges_url": "https://api.github.com/repos/btrcm00/text-generation-inference/merges",
                "archive_url": "https://api.github.com/repos/btrcm00/text-generation-inference/{archive_format}{/ref}",
                "downloads_url": "https://api.github.com/repos/btrcm00/text-generation-inference/downloads",
                "issues_url": "https://api.github.com/repos/btrcm00/text-generation-inference/issues{/number}",
                "pulls_url": "https://api.github.com/repos/btrcm00/text-generation-inference/pulls{/number}",
                "milestones_url": "https://api.github.com/repos/btrcm00/text-generation-inference/milestones{/number}",
                "notifications_url": "https://api.github.com/repos/btrcm00/text-generation-inference/notifications{?since,all,participating}",
                "labels_url": "https://api.github.com/repos/btrcm00/text-generation-inference/labels{/name}",
                "releases_url": "https://api.github.com/repos/btrcm00/text-generation-inference/releases{/id}",
                "deployments_url": "https://api.github.com/repos/btrcm00/text-generation-inference/deployments",
                "created_at": "2023-10-27T07:57:53Z",
                "updated_at": "2023-10-27T07:57:54Z",
                "pushed_at": "2023-10-27T06:41:36Z",
                "git_url": "git://github.com/btrcm00/text-generation-inference.git",
                "ssh_url": "git@github.com:btrcm00/text-generation-inference.git",
                "clone_url": "https://github.com/btrcm00/text-generation-inference.git",
                "svn_url": "https://github.com/btrcm00/text-generation-inference",
                "homepage": "http://hf.co/docs/text-generation-inference",
                "size": 2664,
                "stargazers_count": 0,
                "watchers_count": 0,
                "language": null,
                "has_issues": false,
                "has_projects": true,
                "has_downloads": true,
                "has_wiki": false,
                "has_pages": false,
                "has_discussions": false,
                "forks_count": 0,
                "mirror_url": null,
                "archived": false,
                "disabled": false,
                "open_issues_count": 0,
                "license": null,
                "allow_forking": true,
                "is_template": false,
                "web_commit_signoff_required": false,
                "topics": [],
                "visibility": "public",
                "forks": 0,
                "open_issues": 0,
                "watchers": 0,
                "default_branch": "main",
                "public": true
            }
        },
        "public": true,
        "created_at": "2023-10-27T07:57:54Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32891647426",
        "type": "WatchEvent",
        "actor": {
            "id": 1209592,
            "login": "reterVision",
            "display_login": "reterVision",
            "gravatar_id": "",
            "url": "https://api.github.com/users/reterVision",
            "avatar_url": "https://avatars.githubusercontent.com/u/1209592?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T07:54:55Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32891630708",
        "type": "WatchEvent",
        "actor": {
            "id": 7990795,
            "login": "AimTune",
            "display_login": "AimTune",
            "gravatar_id": "",
            "url": "https://api.github.com/users/AimTune",
            "avatar_url": "https://avatars.githubusercontent.com/u/7990795?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T07:54:13Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32890719265",
        "type": "WatchEvent",
        "actor": {
            "id": 13198813,
            "login": "ston1x",
            "display_login": "ston1x",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ston1x",
            "avatar_url": "https://avatars.githubusercontent.com/u/13198813?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T07:15:33Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32890376301",
        "type": "IssuesEvent",
        "actor": {
            "id": 1381387,
            "login": "MSavameri",
            "display_login": "MSavameri",
            "gravatar_id": "",
            "url": "https://api.github.com/users/MSavameri",
            "avatar_url": "https://avatars.githubusercontent.com/u/1381387?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "closed",
            "issue": {
                "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1196",
                "repository_url": "https://api.github.com/repos/huggingface/text-generation-inference",
                "labels_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1196/labels{/name}",
                "comments_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1196/comments",
                "events_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1196/events",
                "html_url": "https://github.com/huggingface/text-generation-inference/issues/1196",
                "id": 1960893709,
                "node_id": "I_kwDOIKbbpM504N0N",
                "number": 1196,
                "title": "Too long response from docker",
                "user": {
                    "login": "MSavameri",
                    "id": 1381387,
                    "node_id": "MDQ6VXNlcjEzODEzODc=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/1381387?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/MSavameri",
                    "html_url": "https://github.com/MSavameri",
                    "followers_url": "https://api.github.com/users/MSavameri/followers",
                    "following_url": "https://api.github.com/users/MSavameri/following{/other_user}",
                    "gists_url": "https://api.github.com/users/MSavameri/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/MSavameri/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/MSavameri/subscriptions",
                    "organizations_url": "https://api.github.com/users/MSavameri/orgs",
                    "repos_url": "https://api.github.com/users/MSavameri/repos",
                    "events_url": "https://api.github.com/users/MSavameri/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/MSavameri/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "closed",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 0,
                "created_at": "2023-10-25T08:57:01Z",
                "updated_at": "2023-10-27T06:59:54Z",
                "closed_at": "2023-10-27T06:59:54Z",
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "### System Info\r\n\r\nWindows 10\r\nDocker version 24.0.5\r\nModel: OpenAssistant/oasst-sft-4-pythia-12b-epoch-3.5\r\n\r\n\r\n### Information\r\n\r\n- [X] Docker\r\n- [ ] The CLI directly\r\n\r\n### Tasks\r\n\r\n- [ ] An officially supported command\r\n- [ ] My own modifications\r\n\r\n### Reproduction\r\n\r\n\r\nI have successfully run the Model inside a docker container  without gpu:\r\n` docker run --shm-size 1g --name my-model -p 8080:80 -v D:\\docker\\data:/data ghcr.io/huggingface/text-generation-inference:1.1.0 --model-id OpenAssistant/oasst-sft-4-pythia-12b-epoch-3.5  --disable-custom-kernels`\r\nand tested with `curl` and postman is not successful and take a long time without response:\r\n`curl 127.0.0.1:8080/generate -X POST -d '{\"inputs\":\"Is 7 greater than 5?\",\"parameters\":{\"max_new_tokens\":60}}' -H 'Content-Type: application/json'`\r\n\r\n\r\nAny idea?\r\n\r\n### Expected behavior\r\n\r\n*A working endpoint*",
                "reactions": {
                    "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1196/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1196/timeline",
                "performed_via_github_app": null,
                "state_reason": "completed"
            }
        },
        "public": true,
        "created_at": "2023-10-27T06:59:55Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32890008158",
        "type": "PushEvent",
        "actor": {
            "id": 15084233,
            "login": "graniet",
            "display_login": "graniet",
            "gravatar_id": "",
            "url": "https://api.github.com/users/graniet",
            "avatar_url": "https://avatars.githubusercontent.com/u/15084233?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "repository_id": 547806116,
            "push_id": 15587490404,
            "size": 1,
            "distinct_size": 1,
            "ref": "refs/heads/xnxtzlekhm",
            "head": "aafb42f743afa11a17c912ae8b77526fbc988e48",
            "before": "17837b1e51cb641f03b4634ce6dc44d31fea7964",
            "commits": [
                {
                    "sha": "aafb42f743afa11a17c912ae8b77526fbc988e48",
                    "author": {
                        "email": "graniet@users.noreply.github.com",
                        "name": "Graniet 75"
                    },
                    "message": "Test Commit",
                    "distinct": true,
                    "url": "https://api.github.com/repos/huggingface/text-generation-inference/commits/aafb42f743afa11a17c912ae8b77526fbc988e48"
                }
            ]
        },
        "public": true,
        "created_at": "2023-10-27T06:41:36Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32890008496",
        "type": "DeleteEvent",
        "actor": {
            "id": 15084233,
            "login": "graniet",
            "display_login": "graniet",
            "gravatar_id": "",
            "url": "https://api.github.com/users/graniet",
            "avatar_url": "https://avatars.githubusercontent.com/u/15084233?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "ref": "xnxtzlekhm",
            "ref_type": "branch",
            "pusher_type": "user"
        },
        "public": true,
        "created_at": "2023-10-27T06:41:37Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32890008463",
        "type": "CreateEvent",
        "actor": {
            "id": 15084233,
            "login": "graniet",
            "display_login": "graniet",
            "gravatar_id": "",
            "url": "https://api.github.com/users/graniet",
            "avatar_url": "https://avatars.githubusercontent.com/u/15084233?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "ref": "xnxtzlekhm",
            "ref_type": "branch",
            "master_branch": "main",
            "description": "Large Language Model Text Generation Inference",
            "pusher_type": "user"
        },
        "public": true,
        "created_at": "2023-10-27T06:41:37Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32889956161",
        "type": "WatchEvent",
        "actor": {
            "id": 68761626,
            "login": "hua0x522",
            "display_login": "hua0x522",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hua0x522",
            "avatar_url": "https://avatars.githubusercontent.com/u/68761626?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T06:39:08Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32889446581",
        "type": "ForkEvent",
        "actor": {
            "id": 103241132,
            "login": "autra-weiliu",
            "display_login": "autra-weiliu",
            "gravatar_id": "",
            "url": "https://api.github.com/users/autra-weiliu",
            "avatar_url": "https://avatars.githubusercontent.com/u/103241132?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "forkee": {
                "id": 710643168,
                "node_id": "R_kgDOKluN4A",
                "name": "text-generation-inference",
                "full_name": "autra-weiliu/text-generation-inference",
                "private": false,
                "owner": {
                    "login": "autra-weiliu",
                    "id": 103241132,
                    "node_id": "U_kgDOBidVrA",
                    "avatar_url": "https://avatars.githubusercontent.com/u/103241132?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/autra-weiliu",
                    "html_url": "https://github.com/autra-weiliu",
                    "followers_url": "https://api.github.com/users/autra-weiliu/followers",
                    "following_url": "https://api.github.com/users/autra-weiliu/following{/other_user}",
                    "gists_url": "https://api.github.com/users/autra-weiliu/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/autra-weiliu/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/autra-weiliu/subscriptions",
                    "organizations_url": "https://api.github.com/users/autra-weiliu/orgs",
                    "repos_url": "https://api.github.com/users/autra-weiliu/repos",
                    "events_url": "https://api.github.com/users/autra-weiliu/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/autra-weiliu/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "html_url": "https://github.com/autra-weiliu/text-generation-inference",
                "description": "Large Language Model Text Generation Inference",
                "fork": true,
                "url": "https://api.github.com/repos/autra-weiliu/text-generation-inference",
                "forks_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/forks",
                "keys_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/keys{/key_id}",
                "collaborators_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/collaborators{/collaborator}",
                "teams_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/teams",
                "hooks_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/hooks",
                "issue_events_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/issues/events{/number}",
                "events_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/events",
                "assignees_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/assignees{/user}",
                "branches_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/branches{/branch}",
                "tags_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/tags",
                "blobs_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/git/blobs{/sha}",
                "git_tags_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/git/tags{/sha}",
                "git_refs_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/git/refs{/sha}",
                "trees_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/git/trees{/sha}",
                "statuses_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/statuses/{sha}",
                "languages_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/languages",
                "stargazers_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/stargazers",
                "contributors_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/contributors",
                "subscribers_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/subscribers",
                "subscription_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/subscription",
                "commits_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/commits{/sha}",
                "git_commits_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/git/commits{/sha}",
                "comments_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/comments{/number}",
                "issue_comment_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/issues/comments{/number}",
                "contents_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/contents/{+path}",
                "compare_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/compare/{base}...{head}",
                "merges_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/merges",
                "archive_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/{archive_format}{/ref}",
                "downloads_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/downloads",
                "issues_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/issues{/number}",
                "pulls_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/pulls{/number}",
                "milestones_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/milestones{/number}",
                "notifications_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/notifications{?since,all,participating}",
                "labels_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/labels{/name}",
                "releases_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/releases{/id}",
                "deployments_url": "https://api.github.com/repos/autra-weiliu/text-generation-inference/deployments",
                "created_at": "2023-10-27T06:11:33Z",
                "updated_at": "2023-10-27T06:11:33Z",
                "pushed_at": "2023-10-26T21:42:57Z",
                "git_url": "git://github.com/autra-weiliu/text-generation-inference.git",
                "ssh_url": "git@github.com:autra-weiliu/text-generation-inference.git",
                "clone_url": "https://github.com/autra-weiliu/text-generation-inference.git",
                "svn_url": "https://github.com/autra-weiliu/text-generation-inference",
                "homepage": "http://hf.co/docs/text-generation-inference",
                "size": 2590,
                "stargazers_count": 0,
                "watchers_count": 0,
                "language": null,
                "has_issues": false,
                "has_projects": true,
                "has_downloads": true,
                "has_wiki": false,
                "has_pages": false,
                "has_discussions": false,
                "forks_count": 0,
                "mirror_url": null,
                "archived": false,
                "disabled": false,
                "open_issues_count": 0,
                "license": null,
                "allow_forking": true,
                "is_template": false,
                "web_commit_signoff_required": false,
                "topics": [],
                "visibility": "public",
                "forks": 0,
                "open_issues": 0,
                "watchers": 0,
                "default_branch": "main",
                "public": true
            }
        },
        "public": true,
        "created_at": "2023-10-27T06:11:33Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32888870596",
        "type": "WatchEvent",
        "actor": {
            "id": 61774146,
            "login": "yengogo",
            "display_login": "yengogo",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yengogo",
            "avatar_url": "https://avatars.githubusercontent.com/u/61774146?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T05:34:48Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32888805014",
        "type": "WatchEvent",
        "actor": {
            "id": 93968213,
            "login": "codeSkyX",
            "display_login": "codeSkyX",
            "gravatar_id": "",
            "url": "https://api.github.com/users/codeSkyX",
            "avatar_url": "https://avatars.githubusercontent.com/u/93968213?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T05:30:10Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32887239319",
        "type": "WatchEvent",
        "actor": {
            "id": 81176735,
            "login": "angantakpe",
            "display_login": "angantakpe",
            "gravatar_id": "",
            "url": "https://api.github.com/users/angantakpe",
            "avatar_url": "https://avatars.githubusercontent.com/u/81176735?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T03:30:06Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32886793822",
        "type": "ForkEvent",
        "actor": {
            "id": 82736059,
            "login": "codehornets",
            "display_login": "codehornets",
            "gravatar_id": "",
            "url": "https://api.github.com/users/codehornets",
            "avatar_url": "https://avatars.githubusercontent.com/u/82736059?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "forkee": {
                "id": 710593106,
                "node_id": "R_kgDOKlrKUg",
                "name": "text-generation-inference",
                "full_name": "codehornets/text-generation-inference",
                "private": false,
                "owner": {
                    "login": "codehornets",
                    "id": 82736059,
                    "node_id": "MDEyOk9yZ2FuaXphdGlvbjgyNzM2MDU5",
                    "avatar_url": "https://avatars.githubusercontent.com/u/82736059?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/codehornets",
                    "html_url": "https://github.com/codehornets",
                    "followers_url": "https://api.github.com/users/codehornets/followers",
                    "following_url": "https://api.github.com/users/codehornets/following{/other_user}",
                    "gists_url": "https://api.github.com/users/codehornets/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/codehornets/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/codehornets/subscriptions",
                    "organizations_url": "https://api.github.com/users/codehornets/orgs",
                    "repos_url": "https://api.github.com/users/codehornets/repos",
                    "events_url": "https://api.github.com/users/codehornets/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/codehornets/received_events",
                    "type": "Organization",
                    "site_admin": false
                },
                "html_url": "https://github.com/codehornets/text-generation-inference",
                "description": "Large Language Model Text Generation Inference",
                "fork": true,
                "url": "https://api.github.com/repos/codehornets/text-generation-inference",
                "forks_url": "https://api.github.com/repos/codehornets/text-generation-inference/forks",
                "keys_url": "https://api.github.com/repos/codehornets/text-generation-inference/keys{/key_id}",
                "collaborators_url": "https://api.github.com/repos/codehornets/text-generation-inference/collaborators{/collaborator}",
                "teams_url": "https://api.github.com/repos/codehornets/text-generation-inference/teams",
                "hooks_url": "https://api.github.com/repos/codehornets/text-generation-inference/hooks",
                "issue_events_url": "https://api.github.com/repos/codehornets/text-generation-inference/issues/events{/number}",
                "events_url": "https://api.github.com/repos/codehornets/text-generation-inference/events",
                "assignees_url": "https://api.github.com/repos/codehornets/text-generation-inference/assignees{/user}",
                "branches_url": "https://api.github.com/repos/codehornets/text-generation-inference/branches{/branch}",
                "tags_url": "https://api.github.com/repos/codehornets/text-generation-inference/tags",
                "blobs_url": "https://api.github.com/repos/codehornets/text-generation-inference/git/blobs{/sha}",
                "git_tags_url": "https://api.github.com/repos/codehornets/text-generation-inference/git/tags{/sha}",
                "git_refs_url": "https://api.github.com/repos/codehornets/text-generation-inference/git/refs{/sha}",
                "trees_url": "https://api.github.com/repos/codehornets/text-generation-inference/git/trees{/sha}",
                "statuses_url": "https://api.github.com/repos/codehornets/text-generation-inference/statuses/{sha}",
                "languages_url": "https://api.github.com/repos/codehornets/text-generation-inference/languages",
                "stargazers_url": "https://api.github.com/repos/codehornets/text-generation-inference/stargazers",
                "contributors_url": "https://api.github.com/repos/codehornets/text-generation-inference/contributors",
                "subscribers_url": "https://api.github.com/repos/codehornets/text-generation-inference/subscribers",
                "subscription_url": "https://api.github.com/repos/codehornets/text-generation-inference/subscription",
                "commits_url": "https://api.github.com/repos/codehornets/text-generation-inference/commits{/sha}",
                "git_commits_url": "https://api.github.com/repos/codehornets/text-generation-inference/git/commits{/sha}",
                "comments_url": "https://api.github.com/repos/codehornets/text-generation-inference/comments{/number}",
                "issue_comment_url": "https://api.github.com/repos/codehornets/text-generation-inference/issues/comments{/number}",
                "contents_url": "https://api.github.com/repos/codehornets/text-generation-inference/contents/{+path}",
                "compare_url": "https://api.github.com/repos/codehornets/text-generation-inference/compare/{base}...{head}",
                "merges_url": "https://api.github.com/repos/codehornets/text-generation-inference/merges",
                "archive_url": "https://api.github.com/repos/codehornets/text-generation-inference/{archive_format}{/ref}",
                "downloads_url": "https://api.github.com/repos/codehornets/text-generation-inference/downloads",
                "issues_url": "https://api.github.com/repos/codehornets/text-generation-inference/issues{/number}",
                "pulls_url": "https://api.github.com/repos/codehornets/text-generation-inference/pulls{/number}",
                "milestones_url": "https://api.github.com/repos/codehornets/text-generation-inference/milestones{/number}",
                "notifications_url": "https://api.github.com/repos/codehornets/text-generation-inference/notifications{?since,all,participating}",
                "labels_url": "https://api.github.com/repos/codehornets/text-generation-inference/labels{/name}",
                "releases_url": "https://api.github.com/repos/codehornets/text-generation-inference/releases{/id}",
                "deployments_url": "https://api.github.com/repos/codehornets/text-generation-inference/deployments",
                "created_at": "2023-10-27T02:54:22Z",
                "updated_at": "2023-10-27T02:54:22Z",
                "pushed_at": "2023-10-26T21:42:57Z",
                "git_url": "git://github.com/codehornets/text-generation-inference.git",
                "ssh_url": "git@github.com:codehornets/text-generation-inference.git",
                "clone_url": "https://github.com/codehornets/text-generation-inference.git",
                "svn_url": "https://github.com/codehornets/text-generation-inference",
                "homepage": "http://hf.co/docs/text-generation-inference",
                "size": 2590,
                "stargazers_count": 0,
                "watchers_count": 0,
                "language": null,
                "has_issues": false,
                "has_projects": true,
                "has_downloads": true,
                "has_wiki": false,
                "has_pages": false,
                "has_discussions": false,
                "forks_count": 0,
                "mirror_url": null,
                "archived": false,
                "disabled": false,
                "open_issues_count": 0,
                "license": null,
                "allow_forking": true,
                "is_template": false,
                "web_commit_signoff_required": false,
                "topics": [],
                "visibility": "public",
                "forks": 0,
                "open_issues": 0,
                "watchers": 0,
                "default_branch": "main",
                "public": true
            }
        },
        "public": true,
        "created_at": "2023-10-27T02:54:23Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32886243037",
        "type": "WatchEvent",
        "actor": {
            "id": 35958782,
            "login": "AndrewHYC",
            "display_login": "AndrewHYC",
            "gravatar_id": "",
            "url": "https://api.github.com/users/AndrewHYC",
            "avatar_url": "https://avatars.githubusercontent.com/u/35958782?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T02:10:32Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32885502284",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 22190579,
            "login": "wangerzi",
            "display_login": "wangerzi",
            "gravatar_id": "",
            "url": "https://api.github.com/users/wangerzi",
            "avatar_url": "https://avatars.githubusercontent.com/u/22190579?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/974",
                "repository_url": "https://api.github.com/repos/huggingface/text-generation-inference",
                "labels_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/974/labels{/name}",
                "comments_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/974/comments",
                "events_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/974/events",
                "html_url": "https://github.com/huggingface/text-generation-inference/issues/974",
                "id": 1879233393,
                "node_id": "I_kwDOIKbbpM5wAtNx",
                "number": 974,
                "title": "Memory leak and crash in long-running pod handling requests continuously",
                "user": {
                    "login": "jerryMeng100",
                    "id": 17575971,
                    "node_id": "MDQ6VXNlcjE3NTc1OTcx",
                    "avatar_url": "https://avatars.githubusercontent.com/u/17575971?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jerryMeng100",
                    "html_url": "https://github.com/jerryMeng100",
                    "followers_url": "https://api.github.com/users/jerryMeng100/followers",
                    "following_url": "https://api.github.com/users/jerryMeng100/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jerryMeng100/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jerryMeng100/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jerryMeng100/subscriptions",
                    "organizations_url": "https://api.github.com/users/jerryMeng100/orgs",
                    "repos_url": "https://api.github.com/users/jerryMeng100/repos",
                    "events_url": "https://api.github.com/users/jerryMeng100/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jerryMeng100/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 4,
                "created_at": "2023-09-03T21:04:55Z",
                "updated_at": "2023-10-27T01:13:36Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "### System Info\n\nWhen running TGI in a typical K8s enviornment, for quantized GPTQ or NF4 (only tested with both) and leaving the endpoint up for hours with requests coming in continuously throughout, it would eventually crash. The memory usage also seems to continue going up over time. \r\n\r\nFor Huggingface folks @Narsil  using this for GPTQ in production: how much pod memory is allocated? Does it do this as well?\r\n\r\nHow this is different from other issues raised:\r\nhttps://github.com/huggingface/text-generation-inference/issues/801\r\nPoints out on CUDA OOM. This is not a CUDA OOM, the CUDA max memory is set to 0.95 in my tests and it rather OOMs on the main pod RAM not GPU RAM. May be related, may be separate issue.\r\n\r\n\n\n### Information\n\n- [X] Docker\n- [ ] The CLI directly\n\n### Tasks\n\n- [X] An officially supported command\n- [ ] My own modifications\n\n### Reproduction\n\nUse a GPTQ or NF4 model, and run it for a long time with it running continuous requests at all times. \n\n### Expected behavior\n\nNot crash.",
                "reactions": {
                    "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/974/reactions",
                    "total_count": 1,
                    "+1": 1,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/974/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/comments/1782141529",
                "html_url": "https://github.com/huggingface/text-generation-inference/issues/974#issuecomment-1782141529",
                "issue_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/974",
                "id": 1782141529,
                "node_id": "IC_kwDOIKbbpM5qOVJZ",
                "user": {
                    "login": "wangerzi",
                    "id": 22190579,
                    "node_id": "MDQ6VXNlcjIyMTkwNTc5",
                    "avatar_url": "https://avatars.githubusercontent.com/u/22190579?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/wangerzi",
                    "html_url": "https://github.com/wangerzi",
                    "followers_url": "https://api.github.com/users/wangerzi/followers",
                    "following_url": "https://api.github.com/users/wangerzi/following{/other_user}",
                    "gists_url": "https://api.github.com/users/wangerzi/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/wangerzi/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/wangerzi/subscriptions",
                    "organizations_url": "https://api.github.com/users/wangerzi/orgs",
                    "repos_url": "https://api.github.com/users/wangerzi/repos",
                    "events_url": "https://api.github.com/users/wangerzi/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/wangerzi/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T01:13:35Z",
                "updated_at": "2023-10-27T01:13:35Z",
                "author_association": "NONE",
                "body": "Same problem, version ghcr.io/huggingface/text-generation-inference:1.1.0\uff0cNVIDIA A10, SynthIA-7B-AWQ\r\n![image](https://github.com/huggingface/text-generation-inference/assets/22190579/a87a2dc2-d2cc-4fb3-abeb-b29de16e2c38)\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/comments/1782141529/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T01:13:36Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32884334277",
        "type": "IssuesEvent",
        "actor": {
            "id": 119249469,
            "login": "shimizust",
            "display_login": "shimizust",
            "gravatar_id": "",
            "url": "https://api.github.com/users/shimizust",
            "avatar_url": "https://avatars.githubusercontent.com/u/119249469?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "opened",
            "issue": {
                "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1203",
                "repository_url": "https://api.github.com/repos/huggingface/text-generation-inference",
                "labels_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1203/labels{/name}",
                "comments_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1203/comments",
                "events_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1203/events",
                "html_url": "https://github.com/huggingface/text-generation-inference/issues/1203",
                "id": 1964526820,
                "node_id": "I_kwDOIKbbpM51GEzk",
                "number": 1203,
                "title": "Server error: Unsupported head size: 100",
                "user": {
                    "login": "shimizust",
                    "id": 119249469,
                    "node_id": "U_kgDOBxuaPQ",
                    "avatar_url": "https://avatars.githubusercontent.com/u/119249469?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/shimizust",
                    "html_url": "https://github.com/shimizust",
                    "followers_url": "https://api.github.com/users/shimizust/followers",
                    "following_url": "https://api.github.com/users/shimizust/following{/other_user}",
                    "gists_url": "https://api.github.com/users/shimizust/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/shimizust/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/shimizust/subscriptions",
                    "organizations_url": "https://api.github.com/users/shimizust/orgs",
                    "repos_url": "https://api.github.com/users/shimizust/repos",
                    "events_url": "https://api.github.com/users/shimizust/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/shimizust/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 0,
                "created_at": "2023-10-26T23:40:46Z",
                "updated_at": "2023-10-26T23:40:46Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "### System Info\n\n```\r\ntext-generation-launcher --env\r\n2023-10-26T23:20:39.878689Z  INFO text_generation_launcher: Runtime environment:\r\nTarget: x86_64-unknown-linux-gnu\r\nCargo version: 1.70.0\r\nCommit sha: 3af1a1140141245c20df20a787831ec71b124eae\r\nDocker label: sha-3af1a11\r\nnvidia-smi:\r\nThu Oct 26 23:20:39 2023       \r\n   +---------------------------------------------------------------------------------------+\r\n   | NVIDIA-SMI 530.30.02              Driver Version: 530.30.02    CUDA Version: 12.1     |\r\n   |-----------------------------------------+----------------------+----------------------+\r\n   | GPU  Name                  Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n   | Fan  Temp  Perf            Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n   |                                         |                      |               MIG M. |\r\n   |=========================================+======================+======================|\r\n   |   0  NVIDIA A100-SXM4-80GB           On | 00000000:45:00.0 Off |                    0 |\r\n   | N/A   28C    P0               72W / 400W|  78625MiB / 81920MiB |      0%      Default |\r\n   |                                         |                      |             Disabled |\r\n   +-----------------------------------------+----------------------+----------------------+\r\n                                                                                            \r\n   +---------------------------------------------------------------------------------------+\r\n   | Processes:                                                                            |\r\n   |  GPU   GI   CI        PID   Type   Process name                            GPU Memory |\r\n   |        ID   ID                                                             Usage      |\r\n   |=======================================================================================|\r\n   +---------------------------------------------------------------------------------------+\r\n2023-10-26T23:20:39.878861Z  INFO text_generation_launcher: Args { model_id: \"bigscience/bloom-560m\", revision: None, validation_workers: 2, sharded: None, num_shard: None, quantize: None, dtype: None, trust_remote_code: false, max_concurrent_requests: 128, max_best_of: 2, max_stop_sequences: 4, max_top_n_tokens: 5, max_input_length: 1024, max_total_tokens: 2048, waiting_served_ratio: 1.2, max_batch_prefill_tokens: 4096, max_batch_total_tokens: None, max_waiting_tokens: 20, hostname: \"tgi-d4f833b7484abdedf060fec416638cc6\", port: 80, shard_uds_path: \"/tmp/text-generation-server\", master_addr: \"localhost\", master_port: 29500, huggingface_hub_cache: Some(\"/data\"), weights_cache_override: None, disable_custom_kernels: false, cuda_memory_fraction: 1.0, rope_scaling: None, rope_factor: None, json_output: false, otlp_endpoint: None, cors_allow_origin: [], watermark_gamma: None, watermark_delta: None, ngrok: false, ngrok_authtoken: None, ngrok_edge: None, env: true }\r\n2023-10-26T23:20:39.879283Z  INFO download: text_generation_launcher: Starting download process.\r\n```\r\n\r\nCommand used: `text-generation-launcher --model-id openlm-research/open_llama_3b --port 8000`\r\n\r\nModel used: https://huggingface.co/openlm-research/open_llama_3b\r\n\r\nThis is running on Kubernetes using 1 A100 GPU with 32GB memory.\n\n### Information\n\n- [X] Docker\n- [X] The CLI directly\n\n### Tasks\n\n- [X] An officially supported command\n- [ ] My own modifications\n\n### Reproduction\n\n1. Run `text-generation-launcher --model-id openlm-research/open_llama_3b --port 8000`\r\n2. The TGI server starts up fine, but when trying to run inference I get this error:\r\n\r\n```\r\n2023-10-26T16:12:24.968797Z  WARN text_generation_router: router/src/main.rs:252: Invalid hostname, defaulting to 0.0.0.0\r\n2023-10-26T23:19:34.948183Z ERROR text_generation_launcher: Method Decode encountered an error.\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/bin/text-generation-server\", line 8, in <module>\r\n    sys.exit(app())\r\n  File \"/opt/conda/lib/python3.9/site-packages/typer/main.py\", line 311, in __call__\r\n    return get_command(self)(*args, **kwargs)\r\n  File \"/opt/conda/lib/python3.9/site-packages/click/core.py\", line 1157, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/opt/conda/lib/python3.9/site-packages/typer/core.py\", line 778, in main\r\n    return _main(\r\n  File \"/opt/conda/lib/python3.9/site-packages/typer/core.py\", line 216, in _main\r\n    rv = self.invoke(ctx)\r\n  File \"/opt/conda/lib/python3.9/site-packages/click/core.py\", line 1688, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/opt/conda/lib/python3.9/site-packages/click/core.py\", line 1434, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/opt/conda/lib/python3.9/site-packages/click/core.py\", line 783, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/opt/conda/lib/python3.9/site-packages/typer/main.py\", line 683, in wrapper\r\n    return callback(**use_params)  # type: ignore\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/cli.py\", line 83, in serve\r\n    server.serve(\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/server.py\", line 207, in serve\r\n    asyncio.run(\r\n  File \"/opt/conda/lib/python3.9/asyncio/runners.py\", line 44, in run\r\n    return loop.run_until_complete(main)\r\n  File \"/opt/conda/lib/python3.9/asyncio/base_events.py\", line 634, in run_until_complete\r\n    self.run_forever()\r\n  File \"/opt/conda/lib/python3.9/asyncio/base_events.py\", line 601, in run_forever\r\n    self._run_once()\r\n  File \"/opt/conda/lib/python3.9/asyncio/base_events.py\", line 1905, in _run_once\r\n    handle._run()\r\n  File \"/opt/conda/lib/python3.9/asyncio/events.py\", line 80, in _run\r\n    self._context.run(self._callback, *self._args)\r\n  File \"/opt/conda/lib/python3.9/site-packages/grpc_interceptor/server.py\", line 159, in invoke_intercept_method\r\n    return await self.intercept(\r\n> File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/interceptor.py\", line 21, in intercept\r\n    return await response\r\n  File \"/opt/conda/lib/python3.9/site-packages/opentelemetry/instrumentation/grpc/_aio_server.py\", line 82, in _unary_interceptor\r\n    raise error\r\n  File \"/opt/conda/lib/python3.9/site-packages/opentelemetry/instrumentation/grpc/_aio_server.py\", line 73, in _unary_interceptor\r\n    return await behavior(request_or_iterator, context)\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/server.py\", line 121, in Decode\r\n    generations, next_batch = self.model.generate_token(batch)\r\n  File \"/opt/conda/lib/python3.9/contextlib.py\", line 79, in inner\r\n    return func(*args, **kwds)\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/models/flash_causal_lm.py\", line 753, in generate_token\r\n    raise e\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/models/flash_causal_lm.py\", line 750, in generate_token\r\n    out = self.forward(batch)\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/models/flash_causal_lm.py\", line 717, in forward\r\n    return self.model.forward(\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/models/custom_modeling/flash_llama_modeling.py\", line 497, in forward\r\n    hidden_states = self.model(\r\n  File \"/opt/conda/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/models/custom_modeling/flash_llama_modeling.py\", line 456, in forward\r\n    hidden_states, residual = layer(\r\n  File \"/opt/conda/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/models/custom_modeling/flash_llama_modeling.py\", line 383, in forward\r\n    attn_output = self.self_attn(\r\n  File \"/opt/conda/lib/python3.9/site-packages/torch/nn/modules/module.py\", line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/models/custom_modeling/flash_llama_modeling.py\", line 295, in forward\r\n    vllm_attention_ops.single_query_cached_kv_attention(\r\nRuntimeError: Unsupported head size: 100\r\n\r\n2023-10-26T23:19:34.948433Z ERROR batch{batch_size=1}:decode:decode{size=1}:decode{size=1}: text_generation_client: router/client/src/lib.rs:33: Server error: Unsupported head size: 100\r\n2023-10-26T23:19:34.949081Z ERROR compat_generate{default_return_full_text=false}:generate{parameters=GenerateParameters { best_of: None, temperature: Some(0.9), repetition_penalty: None, top_k: Some(20), top_p: Some(0.9), typical_p: None, do_sample: true, max_new_tokens: Some(100), return_full_text: Some(false), stop: [], truncate: None, watermark: false, details: true, decoder_input_details: false, seed: None, top_n_tokens: None }}:generate{request=GenerateRequest { inputs: \"Product name: socks\", parameters: GenerateParameters { best_of: None, temperature: Some(0.9), repetition_penalty: None, top_k: Some(20), top_p: Some(0.9), typical_p: None, do_sample: true, max_new_tokens: Some(100), return_full_text: Some(false), stop: [], truncate: None, watermark: false, details: true, decoder_input_details: false, seed: None, top_n_tokens: None } }}:generate_stream{request=GenerateRequest { inputs: \"Product name: socks\", parameters: GenerateParameters { best_of: None, temperature: Some(0.9), repetition_penalty: None, top_k: Some(20), top_p: Some(0.9), typical_p: None, do_sample: true, max_new_tokens: Some(100), return_full_text: Some(false), stop: [], truncate: None, watermark: false, details: true, decoder_input_details: false, seed: None, top_n_tokens: None } }}:infer:send_error: text_generation_router::infer: router/src/infer.rs:589: Request failed during generation: Server error: Unsupported head size: 100\r\n```\r\n\r\nThis seems related?: https://github.com/vllm-project/vllm/issues/336\r\n\r\nNote: I was able to run this model successfully with an older version of TGI, although I don't recall which version it was.\n\n### Expected behavior\n\nI would expect open_llama_3b model can be run successfully using TGI.\r\n\r\nIn general, it would also be great if we could have a flag for the launcher to bypass any custom modeling/optimizations and just use AutoModel as a workaround to at least be able to serve models with TGI.\r\n\r\nThanks!",
                "reactions": {
                    "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1203/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1203/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-26T23:40:48Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32882756979",
        "type": "WatchEvent",
        "actor": {
            "id": 122018514,
            "login": "rikkooo",
            "display_login": "rikkooo",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rikkooo",
            "avatar_url": "https://avatars.githubusercontent.com/u/122018514?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-26T21:53:05Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32882651690",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 20651387,
            "login": "stefan-it",
            "display_login": "stefan-it",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stefan-it",
            "avatar_url": "https://avatars.githubusercontent.com/u/20651387?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1202",
                "repository_url": "https://api.github.com/repos/huggingface/text-generation-inference",
                "labels_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1202/labels{/name}",
                "comments_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1202/comments",
                "events_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1202/events",
                "html_url": "https://github.com/huggingface/text-generation-inference/pull/1202",
                "id": 1964411306,
                "node_id": "PR_kwDOIKbbpM5d6g76",
                "number": 1202,
                "title": "docs: fix links in tutorials",
                "user": {
                    "login": "stefan-it",
                    "id": 20651387,
                    "node_id": "MDQ6VXNlcjIwNjUxMzg3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/20651387?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/stefan-it",
                    "html_url": "https://github.com/stefan-it",
                    "followers_url": "https://api.github.com/users/stefan-it/followers",
                    "following_url": "https://api.github.com/users/stefan-it/following{/other_user}",
                    "gists_url": "https://api.github.com/users/stefan-it/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/stefan-it/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/stefan-it/subscriptions",
                    "organizations_url": "https://api.github.com/users/stefan-it/orgs",
                    "repos_url": "https://api.github.com/users/stefan-it/repos",
                    "events_url": "https://api.github.com/users/stefan-it/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/stefan-it/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 1,
                "created_at": "2023-10-26T21:42:57Z",
                "updated_at": "2023-10-26T21:46:44Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/huggingface/text-generation-inference/pulls/1202",
                    "html_url": "https://github.com/huggingface/text-generation-inference/pull/1202",
                    "diff_url": "https://github.com/huggingface/text-generation-inference/pull/1202.diff",
                    "patch_url": "https://github.com/huggingface/text-generation-inference/pull/1202.patch",
                    "merged_at": null
                },
                "body": "Hey,\r\n\r\nthis PR fixes some cross-reference links within the documentation.",
                "reactions": {
                    "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1202/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1202/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/comments/1781938198",
                "html_url": "https://github.com/huggingface/text-generation-inference/pull/1202#issuecomment-1781938198",
                "issue_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1202",
                "id": 1781938198,
                "node_id": "IC_kwDOIKbbpM5qNjgW",
                "user": {
                    "login": "stefan-it",
                    "id": 20651387,
                    "node_id": "MDQ6VXNlcjIwNjUxMzg3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/20651387?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/stefan-it",
                    "html_url": "https://github.com/stefan-it",
                    "followers_url": "https://api.github.com/users/stefan-it/followers",
                    "following_url": "https://api.github.com/users/stefan-it/following{/other_user}",
                    "gists_url": "https://api.github.com/users/stefan-it/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/stefan-it/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/stefan-it/subscriptions",
                    "organizations_url": "https://api.github.com/users/stefan-it/orgs",
                    "repos_url": "https://api.github.com/users/stefan-it/repos",
                    "events_url": "https://api.github.com/users/stefan-it/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/stefan-it/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-26T21:46:44Z",
                "updated_at": "2023-10-26T21:46:44Z",
                "author_association": "NONE",
                "body": "/cc @OlivierDehaene\r\n\r\nI think the @HuggingFaceDocBuilderDev bot is only running after one approval, so it would be great to see if these changes are really working :hugs: \r\n\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/comments/1781938198/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-26T21:46:44Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32882588962",
        "type": "PullRequestEvent",
        "actor": {
            "id": 20651387,
            "login": "stefan-it",
            "display_login": "stefan-it",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stefan-it",
            "avatar_url": "https://avatars.githubusercontent.com/u/20651387?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "opened",
            "number": 1202,
            "pull_request": {
                "url": "https://api.github.com/repos/huggingface/text-generation-inference/pulls/1202",
                "id": 1575620346,
                "node_id": "PR_kwDOIKbbpM5d6g76",
                "html_url": "https://github.com/huggingface/text-generation-inference/pull/1202",
                "diff_url": "https://github.com/huggingface/text-generation-inference/pull/1202.diff",
                "patch_url": "https://github.com/huggingface/text-generation-inference/pull/1202.patch",
                "issue_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1202",
                "number": 1202,
                "state": "open",
                "locked": false,
                "title": "docs: fix links in tutorials",
                "user": {
                    "login": "stefan-it",
                    "id": 20651387,
                    "node_id": "MDQ6VXNlcjIwNjUxMzg3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/20651387?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/stefan-it",
                    "html_url": "https://github.com/stefan-it",
                    "followers_url": "https://api.github.com/users/stefan-it/followers",
                    "following_url": "https://api.github.com/users/stefan-it/following{/other_user}",
                    "gists_url": "https://api.github.com/users/stefan-it/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/stefan-it/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/stefan-it/subscriptions",
                    "organizations_url": "https://api.github.com/users/stefan-it/orgs",
                    "repos_url": "https://api.github.com/users/stefan-it/repos",
                    "events_url": "https://api.github.com/users/stefan-it/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/stefan-it/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Hey,\r\n\r\nthis PR fixes some cross-reference links within the documentation.\r\n\r\nCurrently draft, to see final result from @HuggingFaceDocBuilderDev  :)",
                "created_at": "2023-10-26T21:42:57Z",
                "updated_at": "2023-10-26T21:42:57Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": null,
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/huggingface/text-generation-inference/pulls/1202/commits",
                "review_comments_url": "https://api.github.com/repos/huggingface/text-generation-inference/pulls/1202/comments",
                "review_comment_url": "https://api.github.com/repos/huggingface/text-generation-inference/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1202/comments",
                "statuses_url": "https://api.github.com/repos/huggingface/text-generation-inference/statuses/b90660ddbcb53c23d384431b8b0df304d5e56b15",
                "head": {
                    "label": "stefan-it:doc-fixes",
                    "ref": "doc-fixes",
                    "sha": "b90660ddbcb53c23d384431b8b0df304d5e56b15",
                    "user": {
                        "login": "stefan-it",
                        "id": 20651387,
                        "node_id": "MDQ6VXNlcjIwNjUxMzg3",
                        "avatar_url": "https://avatars.githubusercontent.com/u/20651387?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/stefan-it",
                        "html_url": "https://github.com/stefan-it",
                        "followers_url": "https://api.github.com/users/stefan-it/followers",
                        "following_url": "https://api.github.com/users/stefan-it/following{/other_user}",
                        "gists_url": "https://api.github.com/users/stefan-it/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/stefan-it/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/stefan-it/subscriptions",
                        "organizations_url": "https://api.github.com/users/stefan-it/orgs",
                        "repos_url": "https://api.github.com/users/stefan-it/repos",
                        "events_url": "https://api.github.com/users/stefan-it/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/stefan-it/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 710517505,
                        "node_id": "R_kgDOKlmjAQ",
                        "name": "text-generation-inference",
                        "full_name": "stefan-it/text-generation-inference",
                        "private": false,
                        "owner": {
                            "login": "stefan-it",
                            "id": 20651387,
                            "node_id": "MDQ6VXNlcjIwNjUxMzg3",
                            "avatar_url": "https://avatars.githubusercontent.com/u/20651387?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/stefan-it",
                            "html_url": "https://github.com/stefan-it",
                            "followers_url": "https://api.github.com/users/stefan-it/followers",
                            "following_url": "https://api.github.com/users/stefan-it/following{/other_user}",
                            "gists_url": "https://api.github.com/users/stefan-it/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/stefan-it/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/stefan-it/subscriptions",
                            "organizations_url": "https://api.github.com/users/stefan-it/orgs",
                            "repos_url": "https://api.github.com/users/stefan-it/repos",
                            "events_url": "https://api.github.com/users/stefan-it/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/stefan-it/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/stefan-it/text-generation-inference",
                        "description": "Large Language Model Text Generation Inference",
                        "fork": true,
                        "url": "https://api.github.com/repos/stefan-it/text-generation-inference",
                        "forks_url": "https://api.github.com/repos/stefan-it/text-generation-inference/forks",
                        "keys_url": "https://api.github.com/repos/stefan-it/text-generation-inference/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/stefan-it/text-generation-inference/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/stefan-it/text-generation-inference/teams",
                        "hooks_url": "https://api.github.com/repos/stefan-it/text-generation-inference/hooks",
                        "issue_events_url": "https://api.github.com/repos/stefan-it/text-generation-inference/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/stefan-it/text-generation-inference/events",
                        "assignees_url": "https://api.github.com/repos/stefan-it/text-generation-inference/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/stefan-it/text-generation-inference/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/stefan-it/text-generation-inference/tags",
                        "blobs_url": "https://api.github.com/repos/stefan-it/text-generation-inference/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/stefan-it/text-generation-inference/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/stefan-it/text-generation-inference/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/stefan-it/text-generation-inference/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/stefan-it/text-generation-inference/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/stefan-it/text-generation-inference/languages",
                        "stargazers_url": "https://api.github.com/repos/stefan-it/text-generation-inference/stargazers",
                        "contributors_url": "https://api.github.com/repos/stefan-it/text-generation-inference/contributors",
                        "subscribers_url": "https://api.github.com/repos/stefan-it/text-generation-inference/subscribers",
                        "subscription_url": "https://api.github.com/repos/stefan-it/text-generation-inference/subscription",
                        "commits_url": "https://api.github.com/repos/stefan-it/text-generation-inference/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/stefan-it/text-generation-inference/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/stefan-it/text-generation-inference/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/stefan-it/text-generation-inference/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/stefan-it/text-generation-inference/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/stefan-it/text-generation-inference/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/stefan-it/text-generation-inference/merges",
                        "archive_url": "https://api.github.com/repos/stefan-it/text-generation-inference/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/stefan-it/text-generation-inference/downloads",
                        "issues_url": "https://api.github.com/repos/stefan-it/text-generation-inference/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/stefan-it/text-generation-inference/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/stefan-it/text-generation-inference/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/stefan-it/text-generation-inference/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/stefan-it/text-generation-inference/labels{/name}",
                        "releases_url": "https://api.github.com/repos/stefan-it/text-generation-inference/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/stefan-it/text-generation-inference/deployments",
                        "created_at": "2023-10-26T21:27:38Z",
                        "updated_at": "2023-10-26T21:27:38Z",
                        "pushed_at": "2023-10-26T21:38:07Z",
                        "git_url": "git://github.com/stefan-it/text-generation-inference.git",
                        "ssh_url": "git@github.com:stefan-it/text-generation-inference.git",
                        "clone_url": "https://github.com/stefan-it/text-generation-inference.git",
                        "svn_url": "https://github.com/stefan-it/text-generation-inference",
                        "homepage": "http://hf.co/docs/text-generation-inference",
                        "size": 2590,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": null,
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 0,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 0,
                        "watchers": 0,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "huggingface:main",
                    "ref": "main",
                    "sha": "96a982ad8fc232479384476b1596a880697cc1d0",
                    "user": {
                        "login": "huggingface",
                        "id": 25720743,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjI1NzIwNzQz",
                        "avatar_url": "https://avatars.githubusercontent.com/u/25720743?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/huggingface",
                        "html_url": "https://github.com/huggingface",
                        "followers_url": "https://api.github.com/users/huggingface/followers",
                        "following_url": "https://api.github.com/users/huggingface/following{/other_user}",
                        "gists_url": "https://api.github.com/users/huggingface/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/huggingface/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/huggingface/subscriptions",
                        "organizations_url": "https://api.github.com/users/huggingface/orgs",
                        "repos_url": "https://api.github.com/users/huggingface/repos",
                        "events_url": "https://api.github.com/users/huggingface/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/huggingface/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 547806116,
                        "node_id": "R_kgDOIKbbpA",
                        "name": "text-generation-inference",
                        "full_name": "huggingface/text-generation-inference",
                        "private": false,
                        "owner": {
                            "login": "huggingface",
                            "id": 25720743,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjI1NzIwNzQz",
                            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/huggingface",
                            "html_url": "https://github.com/huggingface",
                            "followers_url": "https://api.github.com/users/huggingface/followers",
                            "following_url": "https://api.github.com/users/huggingface/following{/other_user}",
                            "gists_url": "https://api.github.com/users/huggingface/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/huggingface/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/huggingface/subscriptions",
                            "organizations_url": "https://api.github.com/users/huggingface/orgs",
                            "repos_url": "https://api.github.com/users/huggingface/repos",
                            "events_url": "https://api.github.com/users/huggingface/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/huggingface/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/huggingface/text-generation-inference",
                        "description": "Large Language Model Text Generation Inference",
                        "fork": false,
                        "url": "https://api.github.com/repos/huggingface/text-generation-inference",
                        "forks_url": "https://api.github.com/repos/huggingface/text-generation-inference/forks",
                        "keys_url": "https://api.github.com/repos/huggingface/text-generation-inference/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/huggingface/text-generation-inference/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/huggingface/text-generation-inference/teams",
                        "hooks_url": "https://api.github.com/repos/huggingface/text-generation-inference/hooks",
                        "issue_events_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/huggingface/text-generation-inference/events",
                        "assignees_url": "https://api.github.com/repos/huggingface/text-generation-inference/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/huggingface/text-generation-inference/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/huggingface/text-generation-inference/tags",
                        "blobs_url": "https://api.github.com/repos/huggingface/text-generation-inference/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/huggingface/text-generation-inference/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/huggingface/text-generation-inference/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/huggingface/text-generation-inference/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/huggingface/text-generation-inference/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/huggingface/text-generation-inference/languages",
                        "stargazers_url": "https://api.github.com/repos/huggingface/text-generation-inference/stargazers",
                        "contributors_url": "https://api.github.com/repos/huggingface/text-generation-inference/contributors",
                        "subscribers_url": "https://api.github.com/repos/huggingface/text-generation-inference/subscribers",
                        "subscription_url": "https://api.github.com/repos/huggingface/text-generation-inference/subscription",
                        "commits_url": "https://api.github.com/repos/huggingface/text-generation-inference/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/huggingface/text-generation-inference/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/huggingface/text-generation-inference/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/huggingface/text-generation-inference/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/huggingface/text-generation-inference/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/huggingface/text-generation-inference/merges",
                        "archive_url": "https://api.github.com/repos/huggingface/text-generation-inference/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/huggingface/text-generation-inference/downloads",
                        "issues_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/huggingface/text-generation-inference/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/huggingface/text-generation-inference/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/huggingface/text-generation-inference/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/huggingface/text-generation-inference/labels{/name}",
                        "releases_url": "https://api.github.com/repos/huggingface/text-generation-inference/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/huggingface/text-generation-inference/deployments",
                        "created_at": "2022-10-08T10:26:28Z",
                        "updated_at": "2023-10-26T15:40:10Z",
                        "pushed_at": "2023-10-26T21:42:57Z",
                        "git_url": "git://github.com/huggingface/text-generation-inference.git",
                        "ssh_url": "git@github.com:huggingface/text-generation-inference.git",
                        "clone_url": "https://github.com/huggingface/text-generation-inference.git",
                        "svn_url": "https://github.com/huggingface/text-generation-inference",
                        "homepage": "http://hf.co/docs/text-generation-inference",
                        "size": 2590,
                        "stargazers_count": 5628,
                        "watchers_count": 5628,
                        "language": "Python",
                        "has_issues": true,
                        "has_projects": false,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 594,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 202,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "bloom",
                            "deep-learning",
                            "falcon",
                            "gpt",
                            "inference",
                            "nlp",
                            "pytorch",
                            "starcoder",
                            "transformer"
                        ],
                        "visibility": "public",
                        "forks": 594,
                        "open_issues": 202,
                        "watchers": 5628,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/huggingface/text-generation-inference/pulls/1202"
                    },
                    "html": {
                        "href": "https://github.com/huggingface/text-generation-inference/pull/1202"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1202"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1202/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/huggingface/text-generation-inference/pulls/1202/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/huggingface/text-generation-inference/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/huggingface/text-generation-inference/pulls/1202/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/huggingface/text-generation-inference/statuses/b90660ddbcb53c23d384431b8b0df304d5e56b15"
                    }
                },
                "author_association": "NONE",
                "auto_merge": null,
                "active_lock_reason": null,
                "merged": false,
                "mergeable": null,
                "rebaseable": null,
                "mergeable_state": "unknown",
                "merged_by": null,
                "comments": 0,
                "review_comments": 0,
                "maintainer_can_modify": true,
                "commits": 1,
                "additions": 2,
                "deletions": 2,
                "changed_files": 2
            }
        },
        "public": true,
        "created_at": "2023-10-26T21:42:58Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32882317959",
        "type": "ForkEvent",
        "actor": {
            "id": 20651387,
            "login": "stefan-it",
            "display_login": "stefan-it",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stefan-it",
            "avatar_url": "https://avatars.githubusercontent.com/u/20651387?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "forkee": {
                "id": 710517505,
                "node_id": "R_kgDOKlmjAQ",
                "name": "text-generation-inference",
                "full_name": "stefan-it/text-generation-inference",
                "private": false,
                "owner": {
                    "login": "stefan-it",
                    "id": 20651387,
                    "node_id": "MDQ6VXNlcjIwNjUxMzg3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/20651387?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/stefan-it",
                    "html_url": "https://github.com/stefan-it",
                    "followers_url": "https://api.github.com/users/stefan-it/followers",
                    "following_url": "https://api.github.com/users/stefan-it/following{/other_user}",
                    "gists_url": "https://api.github.com/users/stefan-it/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/stefan-it/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/stefan-it/subscriptions",
                    "organizations_url": "https://api.github.com/users/stefan-it/orgs",
                    "repos_url": "https://api.github.com/users/stefan-it/repos",
                    "events_url": "https://api.github.com/users/stefan-it/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/stefan-it/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "html_url": "https://github.com/stefan-it/text-generation-inference",
                "description": "Large Language Model Text Generation Inference",
                "fork": true,
                "url": "https://api.github.com/repos/stefan-it/text-generation-inference",
                "forks_url": "https://api.github.com/repos/stefan-it/text-generation-inference/forks",
                "keys_url": "https://api.github.com/repos/stefan-it/text-generation-inference/keys{/key_id}",
                "collaborators_url": "https://api.github.com/repos/stefan-it/text-generation-inference/collaborators{/collaborator}",
                "teams_url": "https://api.github.com/repos/stefan-it/text-generation-inference/teams",
                "hooks_url": "https://api.github.com/repos/stefan-it/text-generation-inference/hooks",
                "issue_events_url": "https://api.github.com/repos/stefan-it/text-generation-inference/issues/events{/number}",
                "events_url": "https://api.github.com/repos/stefan-it/text-generation-inference/events",
                "assignees_url": "https://api.github.com/repos/stefan-it/text-generation-inference/assignees{/user}",
                "branches_url": "https://api.github.com/repos/stefan-it/text-generation-inference/branches{/branch}",
                "tags_url": "https://api.github.com/repos/stefan-it/text-generation-inference/tags",
                "blobs_url": "https://api.github.com/repos/stefan-it/text-generation-inference/git/blobs{/sha}",
                "git_tags_url": "https://api.github.com/repos/stefan-it/text-generation-inference/git/tags{/sha}",
                "git_refs_url": "https://api.github.com/repos/stefan-it/text-generation-inference/git/refs{/sha}",
                "trees_url": "https://api.github.com/repos/stefan-it/text-generation-inference/git/trees{/sha}",
                "statuses_url": "https://api.github.com/repos/stefan-it/text-generation-inference/statuses/{sha}",
                "languages_url": "https://api.github.com/repos/stefan-it/text-generation-inference/languages",
                "stargazers_url": "https://api.github.com/repos/stefan-it/text-generation-inference/stargazers",
                "contributors_url": "https://api.github.com/repos/stefan-it/text-generation-inference/contributors",
                "subscribers_url": "https://api.github.com/repos/stefan-it/text-generation-inference/subscribers",
                "subscription_url": "https://api.github.com/repos/stefan-it/text-generation-inference/subscription",
                "commits_url": "https://api.github.com/repos/stefan-it/text-generation-inference/commits{/sha}",
                "git_commits_url": "https://api.github.com/repos/stefan-it/text-generation-inference/git/commits{/sha}",
                "comments_url": "https://api.github.com/repos/stefan-it/text-generation-inference/comments{/number}",
                "issue_comment_url": "https://api.github.com/repos/stefan-it/text-generation-inference/issues/comments{/number}",
                "contents_url": "https://api.github.com/repos/stefan-it/text-generation-inference/contents/{+path}",
                "compare_url": "https://api.github.com/repos/stefan-it/text-generation-inference/compare/{base}...{head}",
                "merges_url": "https://api.github.com/repos/stefan-it/text-generation-inference/merges",
                "archive_url": "https://api.github.com/repos/stefan-it/text-generation-inference/{archive_format}{/ref}",
                "downloads_url": "https://api.github.com/repos/stefan-it/text-generation-inference/downloads",
                "issues_url": "https://api.github.com/repos/stefan-it/text-generation-inference/issues{/number}",
                "pulls_url": "https://api.github.com/repos/stefan-it/text-generation-inference/pulls{/number}",
                "milestones_url": "https://api.github.com/repos/stefan-it/text-generation-inference/milestones{/number}",
                "notifications_url": "https://api.github.com/repos/stefan-it/text-generation-inference/notifications{?since,all,participating}",
                "labels_url": "https://api.github.com/repos/stefan-it/text-generation-inference/labels{/name}",
                "releases_url": "https://api.github.com/repos/stefan-it/text-generation-inference/releases{/id}",
                "deployments_url": "https://api.github.com/repos/stefan-it/text-generation-inference/deployments",
                "created_at": "2023-10-26T21:27:38Z",
                "updated_at": "2023-10-26T21:27:38Z",
                "pushed_at": "2023-10-25T11:12:22Z",
                "git_url": "git://github.com/stefan-it/text-generation-inference.git",
                "ssh_url": "git@github.com:stefan-it/text-generation-inference.git",
                "clone_url": "https://github.com/stefan-it/text-generation-inference.git",
                "svn_url": "https://github.com/stefan-it/text-generation-inference",
                "homepage": "http://hf.co/docs/text-generation-inference",
                "size": 2590,
                "stargazers_count": 0,
                "watchers_count": 0,
                "language": null,
                "has_issues": false,
                "has_projects": true,
                "has_downloads": true,
                "has_wiki": false,
                "has_pages": false,
                "has_discussions": false,
                "forks_count": 0,
                "mirror_url": null,
                "archived": false,
                "disabled": false,
                "open_issues_count": 0,
                "license": {
                    "key": "other",
                    "name": "Other",
                    "spdx_id": "NOASSERTION",
                    "url": null,
                    "node_id": "MDc6TGljZW5zZTA="
                },
                "allow_forking": true,
                "is_template": false,
                "web_commit_signoff_required": false,
                "topics": [],
                "visibility": "public",
                "forks": 0,
                "open_issues": 0,
                "watchers": 0,
                "default_branch": "main",
                "public": true
            }
        },
        "public": true,
        "created_at": "2023-10-26T21:27:39Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32875109859",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 40002776,
            "login": "sam-ulrich1",
            "display_login": "sam-ulrich1",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sam-ulrich1",
            "avatar_url": "https://avatars.githubusercontent.com/u/40002776?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1132",
                "repository_url": "https://api.github.com/repos/huggingface/text-generation-inference",
                "labels_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1132/labels{/name}",
                "comments_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1132/comments",
                "events_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1132/events",
                "html_url": "https://github.com/huggingface/text-generation-inference/issues/1132",
                "id": 1937789171,
                "node_id": "I_kwDOIKbbpM5zgFDz",
                "number": 1132,
                "title": "Fails to load Mistral models finetuned with additional tokens",
                "user": {
                    "login": "olliestanley",
                    "id": 1496060,
                    "node_id": "MDQ6VXNlcjE0OTYwNjA=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/1496060?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/olliestanley",
                    "html_url": "https://github.com/olliestanley",
                    "followers_url": "https://api.github.com/users/olliestanley/followers",
                    "following_url": "https://api.github.com/users/olliestanley/following{/other_user}",
                    "gists_url": "https://api.github.com/users/olliestanley/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/olliestanley/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/olliestanley/subscriptions",
                    "organizations_url": "https://api.github.com/users/olliestanley/orgs",
                    "repos_url": "https://api.github.com/users/olliestanley/repos",
                    "events_url": "https://api.github.com/users/olliestanley/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/olliestanley/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 7,
                "created_at": "2023-10-11T13:30:34Z",
                "updated_at": "2023-10-26T16:19:30Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "### System Info\n\nScript to run TGI (using `latest` to avoid bug with `eetq` dependency described in #1122):\r\n\r\n```\r\nmodel=\"Open-Orca/Mistral-7B-OpenOrca\"\r\nvolume=\"$PWD/data\"\r\ndocker run --name tgi_server -d --gpus all --shm-size 1g -p 8080:80 -v $volume:/data ghcr.io/huggingface/text-generation-inference:latest --model-id $model --quantize eetq --max-total-tokens 4096 --max-input-length 2048\r\n```\r\n\r\nSame issue occurs with model `ehartford/dolphin-2.1-mistral-7b` but **not** with base Mistral or `mistralai/Mistral-7B-Instruct-v0.1`\r\n\r\nnvidia-smi\r\n\r\n```\r\n+---------------------------------------------------------------------------------------+\r\n| NVIDIA-SMI 535.104.12             Driver Version: 535.104.12   CUDA Version: 12.2     |\r\n|-----------------------------------------+----------------------+----------------------+\r\n| GPU  Name                 Persistence-M | Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp   Perf          Pwr:Usage/Cap |         Memory-Usage | GPU-Util  Compute M. |\r\n|                                         |                      |               MIG M. |\r\n|=========================================+======================+======================|\r\n|   0  NVIDIA A10G                    On  | 00000000:00:1E.0 Off |                    0 |\r\n|  0%   31C    P0              59W / 300W |  21378MiB / 23028MiB |      0%      Default |\r\n|                                         |                      |                  N/A |\r\n+-----------------------------------------+----------------------+----------------------+\r\n```\r\n\r\nUbuntu 22.04.2 LTS\n\n### Information\n\n- [X] Docker\n- [ ] The CLI directly\n\n### Tasks\n\n- [ ] An officially supported command\n- [ ] My own modifications\n\n### Reproduction\n\nError occurs on startup when executing the script shared above.\r\n\r\n```\r\n2023-10-11T11:01:03.657935Z  INFO text_generation_launcher: Args { model_id: \"Open-Orca/Mistral-7B-OpenOrca\", revision: None, validation_workers: 2, sharded: None, num_shard: None, quantize: Some(Bitsandbytes), dtype: None, trust_remote_code: false, max_concurrent_requests: 128, max_best_of: 2, max_stop_sequences: 4, max_top_n_tokens: 5, max_input_length: 4096, max_total_tokens: 6500, waiting_served_ratio: 1.2, max_batch_prefill_tokens: 4096, max_batch_total_tokens: None, max_waiting_tokens: 20, hostname: \"8965171f2861\", port: 80, shard_uds_path: \"/tmp/text-generation-server\", master_addr: \"localhost\", master_port: 29500, huggingface_hub_cache: Some(\"/data\"), weights_cache_override: None, disable_custom_kernels: false, cuda_memory_fraction: 1.0, rope_scaling: None, rope_factor: None, json_output: false, otlp_endpoint: None, cors_allow_origin: [], watermark_gamma: None, watermark_delta: None, ngrok: false, ngrok_authtoken: None, ngrok_edge: None, env: false }\r\n2023-10-11T11:01:03.658094Z  INFO download: text_generation_launcher: Starting download process.\r\n2023-10-11T11:01:06.858251Z  WARN text_generation_launcher: No safetensors weights found for model Open-Orca/Mistral-7B-OpenOrca at revision None. Downloading PyTorch weights.\r\n\r\n2023-10-11T11:01:06.957503Z  INFO text_generation_launcher: Download file: pytorch_model-00001-of-00002.bin\r\n\r\n2023-10-11T11:01:37.660297Z  INFO text_generation_launcher: Downloaded /data/models--Open-Orca--Mistral-7B-OpenOrca/snapshots/8f934b2bd2d4484b846a7faf1c53093b9d956367/pytorch_model-00001-of-00002.bin in 0:00:30.\r\n\r\n2023-10-11T11:01:37.660374Z  INFO text_generation_launcher: Download: [1/2] -- ETA: 0:00:30\r\n\r\n2023-10-11T11:01:37.660670Z  INFO text_generation_launcher: Download file: pytorch_model-00002-of-00002.bin\r\n\r\n2023-10-11T11:01:53.915066Z  INFO text_generation_launcher: Downloaded /data/models--Open-Orca--Mistral-7B-OpenOrca/snapshots/8f934b2bd2d4484b846a7faf1c53093b9d956367/pytorch_model-00002-of-00002.bin in 0:00:16.\r\n\r\n2023-10-11T11:01:53.915169Z  INFO text_generation_launcher: Download: [2/2] -- ETA: 0\r\n\r\n2023-10-11T11:01:53.915272Z  WARN text_generation_launcher: No safetensors weights found for model Open-Orca/Mistral-7B-OpenOrca at revision None. Converting PyTorch weights to safetensors.\r\n\r\n2023-10-11T11:02:59.867821Z  INFO text_generation_launcher: Convert: [1/2] -- Took: 0:01:05.534698\r\n\r\n2023-10-11T11:03:21.097468Z  INFO text_generation_launcher: Convert: [2/2] -- Took: 0:00:21.229358\r\n\r\n2023-10-11T11:03:21.678619Z  INFO download: text_generation_launcher: Successfully downloaded weights.\r\n2023-10-11T11:03:21.679276Z  INFO shard-manager: text_generation_launcher: Starting shard rank=0\r\n2023-10-11T11:03:26.841294Z ERROR text_generation_launcher: Error when initializing model\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/bin/text-generation-server\", line 8, in <module>\r\n    sys.exit(app())\r\n  File \"/opt/conda/lib/python3.9/site-packages/typer/main.py\", line 311, in __call__\r\n    return get_command(self)(*args, **kwargs)\r\n  File \"/opt/conda/lib/python3.9/site-packages/click/core.py\", line 1157, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/opt/conda/lib/python3.9/site-packages/typer/core.py\", line 778, in main\r\n    return _main(\r\n  File \"/opt/conda/lib/python3.9/site-packages/typer/core.py\", line 216, in _main\r\n    rv = self.invoke(ctx)\r\n  File \"/opt/conda/lib/python3.9/site-packages/click/core.py\", line 1688, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/opt/conda/lib/python3.9/site-packages/click/core.py\", line 1434, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/opt/conda/lib/python3.9/site-packages/click/core.py\", line 783, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/opt/conda/lib/python3.9/site-packages/typer/main.py\", line 683, in wrapper\r\n    return callback(**use_params)  # type: ignore\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/cli.py\", line 83, in serve\r\n    server.serve(\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/server.py\", line 207, in serve\r\n    asyncio.run(\r\n  File \"/opt/conda/lib/python3.9/asyncio/runners.py\", line 44, in run\r\n    return loop.run_until_complete(main)\r\n  File \"/opt/conda/lib/python3.9/asyncio/base_events.py\", line 634, in run_until_complete\r\n    self.run_forever()\r\n  File \"/opt/conda/lib/python3.9/asyncio/base_events.py\", line 601, in run_forever\r\n    self._run_once()\r\n  File \"/opt/conda/lib/python3.9/asyncio/base_events.py\", line 1905, in _run_once\r\n    handle._run()\r\n  File \"/opt/conda/lib/python3.9/asyncio/events.py\", line 80, in _run\r\n    self._context.run(self._callback, *self._args)\r\n> File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/server.py\", line 159, in serve_inner\r\n    model = get_model(\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/models/__init__.py\", line 252, in get_model\r\n    return FlashMistral(\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/models/flash_mistral.py\", line 297, in __init__\r\n    tokenizer = LlamaTokenizerFast.from_pretrained(\r\n  File \"/opt/conda/lib/python3.9/site-packages/transformers/tokenization_utils_base.py\", line 1854, in from_pretrained\r\n    return cls._from_pretrained(\r\n  File \"/opt/conda/lib/python3.9/site-packages/transformers/tokenization_utils_base.py\", line 1886, in _from_pretrained\r\n    slow_tokenizer = (cls.slow_tokenizer_class)._from_pretrained(\r\n  File \"/opt/conda/lib/python3.9/site-packages/transformers/tokenization_utils_base.py\", line 2073, in _from_pretrained\r\n    raise ValueError(\r\nValueError: Non-consecutive added token '<unk>' found. Should have index 32000 but has index 0 in saved vocabulary.\r\n\r\n2023-10-11T11:03:27.486566Z ERROR shard-manager: text_generation_launcher: Shard complete standard error output:\r\n\r\nTraceback (most recent call last):\r\n\r\n  File \"/opt/conda/bin/text-generation-server\", line 8, in <module>\r\n    sys.exit(app())\r\n\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/cli.py\", line 83, in serve\r\n    server.serve(\r\n\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/server.py\", line 207, in serve\r\n    asyncio.run(\r\n\r\n  File \"/opt/conda/lib/python3.9/asyncio/runners.py\", line 44, in run\r\n    return loop.run_until_complete(main)\r\n\r\n  File \"/opt/conda/lib/python3.9/asyncio/base_events.py\", line 647, in run_until_complete\r\n    return future.result()\r\n\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/server.py\", line 159, in serve_inner\r\n    model = get_model(\r\n\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/models/__init__.py\", line 252, in get_model\r\n    return FlashMistral(\r\n\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/models/flash_mistral.py\", line 297, in __init__\r\n    tokenizer = LlamaTokenizerFast.from_pretrained(\r\n\r\n  File \"/opt/conda/lib/python3.9/site-packages/transformers/tokenization_utils_base.py\", line 1854, in from_pretrained\r\n    return cls._from_pretrained(\r\n\r\n  File \"/opt/conda/lib/python3.9/site-packages/transformers/tokenization_utils_base.py\", line 1886, in _from_pretrained\r\n    slow_tokenizer = (cls.slow_tokenizer_class)._from_pretrained(\r\n\r\n  File \"/opt/conda/lib/python3.9/site-packages/transformers/tokenization_utils_base.py\", line 2073, in _from_pretrained\r\n    raise ValueError(\r\n\r\nValueError: Non-consecutive added token '<unk>' found. Should have index 32000 but has index 0 in saved vocabulary.\r\n rank=0\r\n2023-10-11T11:03:27.583872Z ERROR text_generation_launcher: Shard 0 failed to start\r\n```\n\n### Expected behavior\n\nModel should load as it does with base Mistral or Mistral-Instruct.",
                "reactions": {
                    "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1132/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1132/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/comments/1781441165",
                "html_url": "https://github.com/huggingface/text-generation-inference/issues/1132#issuecomment-1781441165",
                "issue_url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/1132",
                "id": 1781441165,
                "node_id": "IC_kwDOIKbbpM5qLqKN",
                "user": {
                    "login": "sam-ulrich1",
                    "id": 40002776,
                    "node_id": "MDQ6VXNlcjQwMDAyNzc2",
                    "avatar_url": "https://avatars.githubusercontent.com/u/40002776?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/sam-ulrich1",
                    "html_url": "https://github.com/sam-ulrich1",
                    "followers_url": "https://api.github.com/users/sam-ulrich1/followers",
                    "following_url": "https://api.github.com/users/sam-ulrich1/following{/other_user}",
                    "gists_url": "https://api.github.com/users/sam-ulrich1/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/sam-ulrich1/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/sam-ulrich1/subscriptions",
                    "organizations_url": "https://api.github.com/users/sam-ulrich1/orgs",
                    "repos_url": "https://api.github.com/users/sam-ulrich1/repos",
                    "events_url": "https://api.github.com/users/sam-ulrich1/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/sam-ulrich1/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-26T16:19:30Z",
                "updated_at": "2023-10-26T16:19:30Z",
                "author_association": "NONE",
                "body": "Deleting the added_tokens.json will interfere with the fine-tuning since there are special tokens (chatml format) that it has now been trained on.\r\n\r\nInstead remove the following lines form the added_tokens.json file and your model will load. This preserves the special tokens for chatml\r\n```\r\n\"</s>\": 2,\r\n\"<s>\": 1,\r\n\"<unk>\": 0,\r\n```",
                "reactions": {
                    "url": "https://api.github.com/repos/huggingface/text-generation-inference/issues/comments/1781441165/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-26T16:19:31Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32873984624",
        "type": "WatchEvent",
        "actor": {
            "id": 66553939,
            "login": "syhya",
            "display_login": "syhya",
            "gravatar_id": "",
            "url": "https://api.github.com/users/syhya",
            "avatar_url": "https://avatars.githubusercontent.com/u/66553939?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-26T15:40:10Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32872358728",
        "type": "WatchEvent",
        "actor": {
            "id": 613837,
            "login": "vishalsurana",
            "display_login": "vishalsurana",
            "gravatar_id": "",
            "url": "https://api.github.com/users/vishalsurana",
            "avatar_url": "https://avatars.githubusercontent.com/u/613837?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-26T14:49:23Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    },
    {
        "id": "32871982933",
        "type": "ForkEvent",
        "actor": {
            "id": 20197724,
            "login": "zealchen",
            "display_login": "zealchen",
            "gravatar_id": "",
            "url": "https://api.github.com/users/zealchen",
            "avatar_url": "https://avatars.githubusercontent.com/u/20197724?"
        },
        "repo": {
            "id": 547806116,
            "name": "huggingface/text-generation-inference",
            "url": "https://api.github.com/repos/huggingface/text-generation-inference"
        },
        "payload": {
            "forkee": {
                "id": 710360024,
                "node_id": "R_kgDOKlc72A",
                "name": "text-generation-inference",
                "full_name": "zealchen/text-generation-inference",
                "private": false,
                "owner": {
                    "login": "zealchen",
                    "id": 20197724,
                    "node_id": "MDQ6VXNlcjIwMTk3NzI0",
                    "avatar_url": "https://avatars.githubusercontent.com/u/20197724?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/zealchen",
                    "html_url": "https://github.com/zealchen",
                    "followers_url": "https://api.github.com/users/zealchen/followers",
                    "following_url": "https://api.github.com/users/zealchen/following{/other_user}",
                    "gists_url": "https://api.github.com/users/zealchen/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/zealchen/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/zealchen/subscriptions",
                    "organizations_url": "https://api.github.com/users/zealchen/orgs",
                    "repos_url": "https://api.github.com/users/zealchen/repos",
                    "events_url": "https://api.github.com/users/zealchen/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/zealchen/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "html_url": "https://github.com/zealchen/text-generation-inference",
                "description": "Large Language Model Text Generation Inference",
                "fork": true,
                "url": "https://api.github.com/repos/zealchen/text-generation-inference",
                "forks_url": "https://api.github.com/repos/zealchen/text-generation-inference/forks",
                "keys_url": "https://api.github.com/repos/zealchen/text-generation-inference/keys{/key_id}",
                "collaborators_url": "https://api.github.com/repos/zealchen/text-generation-inference/collaborators{/collaborator}",
                "teams_url": "https://api.github.com/repos/zealchen/text-generation-inference/teams",
                "hooks_url": "https://api.github.com/repos/zealchen/text-generation-inference/hooks",
                "issue_events_url": "https://api.github.com/repos/zealchen/text-generation-inference/issues/events{/number}",
                "events_url": "https://api.github.com/repos/zealchen/text-generation-inference/events",
                "assignees_url": "https://api.github.com/repos/zealchen/text-generation-inference/assignees{/user}",
                "branches_url": "https://api.github.com/repos/zealchen/text-generation-inference/branches{/branch}",
                "tags_url": "https://api.github.com/repos/zealchen/text-generation-inference/tags",
                "blobs_url": "https://api.github.com/repos/zealchen/text-generation-inference/git/blobs{/sha}",
                "git_tags_url": "https://api.github.com/repos/zealchen/text-generation-inference/git/tags{/sha}",
                "git_refs_url": "https://api.github.com/repos/zealchen/text-generation-inference/git/refs{/sha}",
                "trees_url": "https://api.github.com/repos/zealchen/text-generation-inference/git/trees{/sha}",
                "statuses_url": "https://api.github.com/repos/zealchen/text-generation-inference/statuses/{sha}",
                "languages_url": "https://api.github.com/repos/zealchen/text-generation-inference/languages",
                "stargazers_url": "https://api.github.com/repos/zealchen/text-generation-inference/stargazers",
                "contributors_url": "https://api.github.com/repos/zealchen/text-generation-inference/contributors",
                "subscribers_url": "https://api.github.com/repos/zealchen/text-generation-inference/subscribers",
                "subscription_url": "https://api.github.com/repos/zealchen/text-generation-inference/subscription",
                "commits_url": "https://api.github.com/repos/zealchen/text-generation-inference/commits{/sha}",
                "git_commits_url": "https://api.github.com/repos/zealchen/text-generation-inference/git/commits{/sha}",
                "comments_url": "https://api.github.com/repos/zealchen/text-generation-inference/comments{/number}",
                "issue_comment_url": "https://api.github.com/repos/zealchen/text-generation-inference/issues/comments{/number}",
                "contents_url": "https://api.github.com/repos/zealchen/text-generation-inference/contents/{+path}",
                "compare_url": "https://api.github.com/repos/zealchen/text-generation-inference/compare/{base}...{head}",
                "merges_url": "https://api.github.com/repos/zealchen/text-generation-inference/merges",
                "archive_url": "https://api.github.com/repos/zealchen/text-generation-inference/{archive_format}{/ref}",
                "downloads_url": "https://api.github.com/repos/zealchen/text-generation-inference/downloads",
                "issues_url": "https://api.github.com/repos/zealchen/text-generation-inference/issues{/number}",
                "pulls_url": "https://api.github.com/repos/zealchen/text-generation-inference/pulls{/number}",
                "milestones_url": "https://api.github.com/repos/zealchen/text-generation-inference/milestones{/number}",
                "notifications_url": "https://api.github.com/repos/zealchen/text-generation-inference/notifications{?since,all,participating}",
                "labels_url": "https://api.github.com/repos/zealchen/text-generation-inference/labels{/name}",
                "releases_url": "https://api.github.com/repos/zealchen/text-generation-inference/releases{/id}",
                "deployments_url": "https://api.github.com/repos/zealchen/text-generation-inference/deployments",
                "created_at": "2023-10-26T14:38:07Z",
                "updated_at": "2023-10-26T14:38:07Z",
                "pushed_at": "2023-10-25T11:12:22Z",
                "git_url": "git://github.com/zealchen/text-generation-inference.git",
                "ssh_url": "git@github.com:zealchen/text-generation-inference.git",
                "clone_url": "https://github.com/zealchen/text-generation-inference.git",
                "svn_url": "https://github.com/zealchen/text-generation-inference",
                "homepage": "http://hf.co/docs/text-generation-inference",
                "size": 2590,
                "stargazers_count": 0,
                "watchers_count": 0,
                "language": null,
                "has_issues": false,
                "has_projects": true,
                "has_downloads": true,
                "has_wiki": false,
                "has_pages": false,
                "has_discussions": false,
                "forks_count": 0,
                "mirror_url": null,
                "archived": false,
                "disabled": false,
                "open_issues_count": 0,
                "license": null,
                "allow_forking": true,
                "is_template": false,
                "web_commit_signoff_required": false,
                "topics": [],
                "visibility": "public",
                "forks": 0,
                "open_issues": 0,
                "watchers": 0,
                "default_branch": "main",
                "public": true
            }
        },
        "public": true,
        "created_at": "2023-10-26T14:38:08Z",
        "org": {
            "id": 25720743,
            "login": "huggingface",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/huggingface",
            "avatar_url": "https://avatars.githubusercontent.com/u/25720743?"
        }
    }
]