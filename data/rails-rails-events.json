[
    {
        "id": "32897006721",
        "type": "IssuesEvent",
        "actor": {
            "id": 7811733,
            "login": "janklimo",
            "display_login": "janklimo",
            "gravatar_id": "",
            "url": "https://api.github.com/users/janklimo",
            "avatar_url": "https://avatars.githubusercontent.com/u/7811733?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "opened",
            "issue": {
                "url": "https://api.github.com/repos/rails/rails/issues/49809",
                "repository_url": "https://api.github.com/repos/rails/rails",
                "labels_url": "https://api.github.com/repos/rails/rails/issues/49809/labels{/name}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/49809/comments",
                "events_url": "https://api.github.com/repos/rails/rails/issues/49809/events",
                "html_url": "https://github.com/rails/rails/issues/49809",
                "id": 1965316490,
                "node_id": "I_kwDNIULOdSRZig",
                "number": 49809,
                "title": "Updating unrelated attributes resets serialized attribute with a wrong value",
                "user": {
                    "login": "janklimo",
                    "id": 7811733,
                    "node_id": "MDQ6VXNlcjc4MTE3MzM=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/7811733?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/janklimo",
                    "html_url": "https://github.com/janklimo",
                    "followers_url": "https://api.github.com/users/janklimo/followers",
                    "following_url": "https://api.github.com/users/janklimo/following{/other_user}",
                    "gists_url": "https://api.github.com/users/janklimo/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/janklimo/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/janklimo/subscriptions",
                    "organizations_url": "https://api.github.com/users/janklimo/orgs",
                    "repos_url": "https://api.github.com/users/janklimo/repos",
                    "events_url": "https://api.github.com/users/janklimo/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/janklimo/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 0,
                "created_at": "2023-10-27T11:24:00Z",
                "updated_at": "2023-10-27T11:24:00Z",
                "closed_at": null,
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "body": "### Steps to reproduce\r\n\r\nThe simplified example below shows that updating an unrelated attribute (name) of a user resets the serialized attribute value with wrong data. Reloading the record fixes the issue.\r\n\r\n```\r\nuser\r\n# => #<User:0x00000001199ac468 id: 1, name: \"Joe\", cached_configuration: #<Configuration:0x000000011bb0cbd0 id: nil, user_id: 1>>\r\n\r\nuser.cached_configuration.options\r\n# => []\r\n```\r\n\r\n```ruby\r\n# frozen_string_literal: true\r\n\r\nrequire 'bundler/inline'\r\n\r\ngemfile(true) do\r\n  source 'https://rubygems.org'\r\n\r\n  git_source(:github) { |repo| \"https://github.com/#{repo}.git\" }\r\n\r\n  # Activate the gem you are reporting the issue against.\r\n  gem 'activerecord', '7.1.1' # works on 7.0.8\r\n  gem 'sqlite3'\r\n  gem 'pry-rails'\r\nend\r\n\r\nrequire 'active_record'\r\nrequire 'minitest/autorun'\r\nrequire 'logger'\r\n\r\n# This connection will do for database-independent bug reports.\r\nActiveRecord::Base.establish_connection(adapter: 'sqlite3', database: ':memory:')\r\nActiveRecord::Base.logger = Logger.new(STDOUT)\r\n\r\nActiveRecord::Schema.define do\r\n  create_table :users, force: true do |t|\r\n    t.text :name\r\n    t.json :cached_configuration\r\n  end\r\n\r\n  create_table :configurations, force: true do |t|\r\n    t.integer :user_id\r\n  end\r\n\r\n  create_table :options, force: true do |t|\r\n    t.integer :configuration_id\r\n    t.string :key\r\n    t.string :value\r\n  end\r\nend\r\n\r\nclass ConfigurationCache\r\n  class << self\r\n    def load(configuration_json)\r\n      return if configuration_json.blank?\r\n\r\n      attributes = JSON.parse(configuration_json)\r\n\r\n      Configuration.new(attributes.except('options')).tap do |configuration|\r\n        configuration.options = attributes['options'].map do |option_attributes|\r\n          Option.new(option_attributes)\r\n        end\r\n      end\r\n    end\r\n\r\n    def dump(configuration)\r\n      configuration.to_json(include: :options)\r\n    end\r\n  end\r\nend\r\n\r\nclass User < ActiveRecord::Base\r\n  has_one :configuration\r\n\r\n  serialize :cached_configuration, coder: ConfigurationCache\r\nend\r\n\r\nclass Configuration < ActiveRecord::Base\r\n  belongs_to :user\r\n  has_many :options\r\nend\r\n\r\nclass Option < ActiveRecord::Base\r\n  belongs_to :configuration\r\nend\r\n\r\nclass AttributeSerializationTest < Minitest::Test\r\n  def test_attribute_serialization\r\n    user = User.create!(name: 'Tom')\r\n\r\n    configuration = user.create_configuration!\r\n    configuration.options << Option.create(key: 'key', value: 'secret')\r\n\r\n    user.update!(cached_configuration: configuration)\r\n\r\n    # Correctly serialized and loaded\r\n    assert_equal user.cached_configuration.id, configuration.id\r\n    assert_equal user.cached_configuration.options.size, 1\r\n\r\n    # All correct \u2013 does not update serialized attribute\r\n    user.name = 'Amanda'\r\n\r\n    assert_equal user.cached_configuration.id, configuration.id\r\n    assert_equal user.cached_configuration.options.size, 1\r\n\r\n    # Wrong \u2013 updates serialized attribute with incomplete data\r\n    user.update!(name: 'Joe')\r\n\r\n    binding.pry\r\n\r\n    assert_equal user.cached_configuration.id, configuration.id\r\n    assert_equal user.cached_configuration.options.size, 1\r\n\r\n    # All good again \u2013 reloading the record fixes the serialized attribute\r\n    user.reload\r\n\r\n    assert_equal user.cached_configuration.id, configuration.id\r\n    assert_equal user.cached_configuration.options.size, 1\r\n  end\r\nend\r\n```\r\n\r\n### Expected behavior\r\nUpdating a record should not update serialized attributes.\r\n\r\n### Actual behavior\r\nThe attribute is updated with faulty data.\r\n\r\n### System configuration\r\n**Rails version**: 7.1.1\r\n\r\n**Ruby version**: 3.2.2\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/49809/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/rails/rails/issues/49809/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T11:24:01Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32896163337",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 14981592,
            "login": "Earlopain",
            "display_login": "Earlopain",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Earlopain",
            "avatar_url": "https://avatars.githubusercontent.com/u/14981592?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/rails/rails/issues/49765",
                "repository_url": "https://api.github.com/repos/rails/rails",
                "labels_url": "https://api.github.com/repos/rails/rails/issues/49765/labels{/name}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/49765/comments",
                "events_url": "https://api.github.com/repos/rails/rails/issues/49765/events",
                "html_url": "https://github.com/rails/rails/pull/49765",
                "id": 1959373528,
                "node_id": "PR_kwDNIULOXaWpDw",
                "number": 49765,
                "title": "Make the output of `ActiveRecord::Core#inspect` configurable.",
                "user": {
                    "login": "andrewn617",
                    "id": 39735028,
                    "node_id": "MDQ6VXNlcjM5NzM1MDI4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/39735028?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/andrewn617",
                    "html_url": "https://github.com/andrewn617",
                    "followers_url": "https://api.github.com/users/andrewn617/followers",
                    "following_url": "https://api.github.com/users/andrewn617/following{/other_user}",
                    "gists_url": "https://api.github.com/users/andrewn617/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/andrewn617/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/andrewn617/subscriptions",
                    "organizations_url": "https://api.github.com/users/andrewn617/orgs",
                    "repos_url": "https://api.github.com/users/andrewn617/repos",
                    "events_url": "https://api.github.com/users/andrewn617/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/andrewn617/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 107191,
                        "node_id": "MDU6TGFiZWwxMDcxOTE=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
                        "name": "activerecord",
                        "color": "0b02e1",
                        "default": false,
                        "description": null
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 4,
                "created_at": "2023-10-24T14:20:10Z",
                "updated_at": "2023-10-27T10:49:02Z",
                "closed_at": null,
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/rails/rails/pulls/49765",
                    "html_url": "https://github.com/rails/rails/pull/49765",
                    "diff_url": "https://github.com/rails/rails/pull/49765.diff",
                    "patch_url": "https://github.com/rails/rails/pull/49765.patch",
                    "merged_at": null
                },
                "body": "### Motivation / Background\r\n\r\nFixes https://github.com/rails/rails/issues/49707\r\n\r\nThis Pull Request has been created because we noticed that `ActiveRecord::Core#inspect` was taking >9s to run for some large objects in production. This is because the parameter filter is be executed for every attribute.\r\n\r\n### Detail\r\n\r\nThis Pull Request introduces configuration for `ActiveRecord::Core#inspect`. By default, `inspect` just returns the object with its id (eg `#<Post id: 1>`. The attributes to include can be configured with `Post.attributes_to_inspect=`. If you want to full output with all the attributes you can call `Post.full_inspect`. \r\n\r\n### Additional information\r\n\r\nIn my first draft I had a config to disable this, if you just always want to use `full_inspect`. But it seems easy enough just to do `alias_method :inspect, :full_inspect` on the model, or in `ApplicationRecord` if you want to disable it globally. So the config didn't seem worth it to me.\r\n\r\n### Checklist\r\n\r\nBefore submitting the PR make sure the following are checked:\r\n\r\n* [x] This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.\r\n* [x] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: `[Fix #issue-number]`\r\n* [x] Tests are added or updated if you fix a bug or add a feature.\r\n* [x] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/49765/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/rails/rails/issues/49765/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/rails/rails/issues/comments/1782703305",
                "html_url": "https://github.com/rails/rails/pull/49765#issuecomment-1782703305",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/49765",
                "id": 1782703305,
                "node_id": "IC_kwDNIULOakHkyQ",
                "user": {
                    "login": "Earlopain",
                    "id": 14981592,
                    "node_id": "MDQ6VXNlcjE0OTgxNTky",
                    "avatar_url": "https://avatars.githubusercontent.com/u/14981592?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Earlopain",
                    "html_url": "https://github.com/Earlopain",
                    "followers_url": "https://api.github.com/users/Earlopain/followers",
                    "following_url": "https://api.github.com/users/Earlopain/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Earlopain/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Earlopain/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Earlopain/subscriptions",
                    "organizations_url": "https://api.github.com/users/Earlopain/orgs",
                    "repos_url": "https://api.github.com/users/Earlopain/repos",
                    "events_url": "https://api.github.com/users/Earlopain/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Earlopain/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T10:49:01Z",
                "updated_at": "2023-10-27T10:49:01Z",
                "author_association": "CONTRIBUTOR",
                "body": "Currently there doesn't seem to be a distinction between local/remote here, which the original issue mentions.\r\n\r\nI have accidentally printed much more than I intended in production and because of slow connections that took quite a while. IRB had its autocomplete disabled in production because of similar reasons.\r\n\r\nIn development however I want to see everything. I know I can set the required config to do that, but it really should be the default in my opinion.",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/comments/1782703305/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T10:49:02Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32895360101",
        "type": "ForkEvent",
        "actor": {
            "id": 4284090,
            "login": "romainsalles",
            "display_login": "romainsalles",
            "gravatar_id": "",
            "url": "https://api.github.com/users/romainsalles",
            "avatar_url": "https://avatars.githubusercontent.com/u/4284090?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "forkee": {
                "id": 710732758,
                "node_id": "R_kgDOKlzr1g",
                "name": "rails",
                "full_name": "romainsalles/rails",
                "private": false,
                "owner": {
                    "login": "romainsalles",
                    "id": 4284090,
                    "node_id": "MDQ6VXNlcjQyODQwOTA=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/4284090?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/romainsalles",
                    "html_url": "https://github.com/romainsalles",
                    "followers_url": "https://api.github.com/users/romainsalles/followers",
                    "following_url": "https://api.github.com/users/romainsalles/following{/other_user}",
                    "gists_url": "https://api.github.com/users/romainsalles/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/romainsalles/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/romainsalles/subscriptions",
                    "organizations_url": "https://api.github.com/users/romainsalles/orgs",
                    "repos_url": "https://api.github.com/users/romainsalles/repos",
                    "events_url": "https://api.github.com/users/romainsalles/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/romainsalles/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "html_url": "https://github.com/romainsalles/rails",
                "description": "Ruby on Rails",
                "fork": true,
                "url": "https://api.github.com/repos/romainsalles/rails",
                "forks_url": "https://api.github.com/repos/romainsalles/rails/forks",
                "keys_url": "https://api.github.com/repos/romainsalles/rails/keys{/key_id}",
                "collaborators_url": "https://api.github.com/repos/romainsalles/rails/collaborators{/collaborator}",
                "teams_url": "https://api.github.com/repos/romainsalles/rails/teams",
                "hooks_url": "https://api.github.com/repos/romainsalles/rails/hooks",
                "issue_events_url": "https://api.github.com/repos/romainsalles/rails/issues/events{/number}",
                "events_url": "https://api.github.com/repos/romainsalles/rails/events",
                "assignees_url": "https://api.github.com/repos/romainsalles/rails/assignees{/user}",
                "branches_url": "https://api.github.com/repos/romainsalles/rails/branches{/branch}",
                "tags_url": "https://api.github.com/repos/romainsalles/rails/tags",
                "blobs_url": "https://api.github.com/repos/romainsalles/rails/git/blobs{/sha}",
                "git_tags_url": "https://api.github.com/repos/romainsalles/rails/git/tags{/sha}",
                "git_refs_url": "https://api.github.com/repos/romainsalles/rails/git/refs{/sha}",
                "trees_url": "https://api.github.com/repos/romainsalles/rails/git/trees{/sha}",
                "statuses_url": "https://api.github.com/repos/romainsalles/rails/statuses/{sha}",
                "languages_url": "https://api.github.com/repos/romainsalles/rails/languages",
                "stargazers_url": "https://api.github.com/repos/romainsalles/rails/stargazers",
                "contributors_url": "https://api.github.com/repos/romainsalles/rails/contributors",
                "subscribers_url": "https://api.github.com/repos/romainsalles/rails/subscribers",
                "subscription_url": "https://api.github.com/repos/romainsalles/rails/subscription",
                "commits_url": "https://api.github.com/repos/romainsalles/rails/commits{/sha}",
                "git_commits_url": "https://api.github.com/repos/romainsalles/rails/git/commits{/sha}",
                "comments_url": "https://api.github.com/repos/romainsalles/rails/comments{/number}",
                "issue_comment_url": "https://api.github.com/repos/romainsalles/rails/issues/comments{/number}",
                "contents_url": "https://api.github.com/repos/romainsalles/rails/contents/{+path}",
                "compare_url": "https://api.github.com/repos/romainsalles/rails/compare/{base}...{head}",
                "merges_url": "https://api.github.com/repos/romainsalles/rails/merges",
                "archive_url": "https://api.github.com/repos/romainsalles/rails/{archive_format}{/ref}",
                "downloads_url": "https://api.github.com/repos/romainsalles/rails/downloads",
                "issues_url": "https://api.github.com/repos/romainsalles/rails/issues{/number}",
                "pulls_url": "https://api.github.com/repos/romainsalles/rails/pulls{/number}",
                "milestones_url": "https://api.github.com/repos/romainsalles/rails/milestones{/number}",
                "notifications_url": "https://api.github.com/repos/romainsalles/rails/notifications{?since,all,participating}",
                "labels_url": "https://api.github.com/repos/romainsalles/rails/labels{/name}",
                "releases_url": "https://api.github.com/repos/romainsalles/rails/releases{/id}",
                "deployments_url": "https://api.github.com/repos/romainsalles/rails/deployments",
                "created_at": "2023-10-27T10:17:15Z",
                "updated_at": "2023-10-27T10:17:15Z",
                "pushed_at": "2023-10-27T09:16:38Z",
                "git_url": "git://github.com/romainsalles/rails.git",
                "ssh_url": "git@github.com:romainsalles/rails.git",
                "clone_url": "https://github.com/romainsalles/rails.git",
                "svn_url": "https://github.com/romainsalles/rails",
                "homepage": "https://rubyonrails.org",
                "size": 267389,
                "stargazers_count": 0,
                "watchers_count": 0,
                "language": null,
                "has_issues": false,
                "has_projects": true,
                "has_downloads": true,
                "has_wiki": false,
                "has_pages": false,
                "has_discussions": false,
                "forks_count": 0,
                "mirror_url": null,
                "archived": false,
                "disabled": false,
                "open_issues_count": 0,
                "license": null,
                "allow_forking": true,
                "is_template": false,
                "web_commit_signoff_required": false,
                "topics": [],
                "visibility": "public",
                "forks": 0,
                "open_issues": 0,
                "watchers": 0,
                "default_branch": "main",
                "public": true
            }
        },
        "public": true,
        "created_at": "2023-10-27T10:17:16Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32895228041",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 1435346,
            "login": "rnestler",
            "display_login": "rnestler",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rnestler",
            "avatar_url": "https://avatars.githubusercontent.com/u/1435346?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/rails/rails/issues/34961",
                "repository_url": "https://api.github.com/repos/rails/rails",
                "labels_url": "https://api.github.com/repos/rails/rails/issues/34961/labels{/name}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/34961/comments",
                "events_url": "https://api.github.com/repos/rails/rails/issues/34961/events",
                "html_url": "https://github.com/rails/rails/issues/34961",
                "id": 400379221,
                "node_id": "MDU6SXNzdWU0MDAzNzkyMjE=",
                "number": 34961,
                "title": "ActiveStorage: no authentication for direct uploads?",
                "user": {
                    "login": "wesley6j",
                    "id": 4378997,
                    "node_id": "MDQ6VXNlcjQzNzg5OTc=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/4378997?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/wesley6j",
                    "html_url": "https://github.com/wesley6j",
                    "followers_url": "https://api.github.com/users/wesley6j/followers",
                    "following_url": "https://api.github.com/users/wesley6j/following{/other_user}",
                    "gists_url": "https://api.github.com/users/wesley6j/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/wesley6j/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/wesley6j/subscriptions",
                    "organizations_url": "https://api.github.com/users/wesley6j/orgs",
                    "repos_url": "https://api.github.com/users/wesley6j/repos",
                    "events_url": "https://api.github.com/users/wesley6j/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/wesley6j/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 91966972,
                        "node_id": "MDU6TGFiZWw5MTk2Njk3Mg==",
                        "url": "https://api.github.com/repos/rails/rails/labels/security",
                        "name": "security",
                        "color": "D94A4A",
                        "default": false,
                        "description": null
                    },
                    {
                        "id": 664533972,
                        "node_id": "MDU6TGFiZWw2NjQ1MzM5NzI=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activestorage",
                        "name": "activestorage",
                        "color": "bfd4f2",
                        "default": false,
                        "description": null
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 3,
                "created_at": "2019-01-17T17:16:50Z",
                "updated_at": "2023-10-27T10:12:05Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "The only security measure `ActiveStorage::DirectUploadsController` has is `protect_from_forgery with: :exception`. The `DirectUpload` js client fetches the csrf token from the page header to pass this security check: `this.xhr.setRequestHeader(\"X-CSRF-Token\", getMetaValue(\"csrf-token\"))`.\r\n\r\nSince any Rails generated pages may have this token, The door to upload files is open. Some ActiveStorage users are using ActiveStorage to provide permanent public image links. If the public link can be guessed from the blob information that `DirectUpload` js client gets, unauthorized users may be able to upload and share files.\r\n\r\nBecause a direct upload input behaves like a form, I think we should apply the idea of per form csrf token. This means each input field with `direct_upload: true` should have a direct upload csrf token. If a page has multiple such fields, these fields can share the same token. This way, only users with access to pages with direct upload fields can have this token. \r\n\r\nOr even better, the controller can optionally accept a proc to authenticate user. And `DirectUpload` should accordingly allow setting custom headers. This will also be useful to API only Rails apps.",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/34961/reactions",
                    "total_count": 16,
                    "+1": 16,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/rails/rails/issues/34961/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/rails/rails/issues/comments/1782656395",
                "html_url": "https://github.com/rails/rails/issues/34961#issuecomment-1782656395",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/34961",
                "id": 1782656395,
                "node_id": "IC_kwDNIULOakEtiw",
                "user": {
                    "login": "rnestler",
                    "id": 1435346,
                    "node_id": "MDQ6VXNlcjE0MzUzNDY=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/1435346?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/rnestler",
                    "html_url": "https://github.com/rnestler",
                    "followers_url": "https://api.github.com/users/rnestler/followers",
                    "following_url": "https://api.github.com/users/rnestler/following{/other_user}",
                    "gists_url": "https://api.github.com/users/rnestler/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/rnestler/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/rnestler/subscriptions",
                    "organizations_url": "https://api.github.com/users/rnestler/orgs",
                    "repos_url": "https://api.github.com/users/rnestler/repos",
                    "events_url": "https://api.github.com/users/rnestler/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/rnestler/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T10:12:05Z",
                "updated_at": "2023-10-27T10:12:05Z",
                "author_association": "NONE",
                "body": "As for\r\n> And DirectUpload should accordingly allow setting custom headers.\r\n\r\nThis was done in https://github.com/rails/rails/pull/47773",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/comments/1782656395/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T10:12:06Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32895212054",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 1435346,
            "login": "rnestler",
            "display_login": "rnestler",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rnestler",
            "avatar_url": "https://avatars.githubusercontent.com/u/1435346?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/rails/rails/issues/34961",
                "repository_url": "https://api.github.com/repos/rails/rails",
                "labels_url": "https://api.github.com/repos/rails/rails/issues/34961/labels{/name}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/34961/comments",
                "events_url": "https://api.github.com/repos/rails/rails/issues/34961/events",
                "html_url": "https://github.com/rails/rails/issues/34961",
                "id": 400379221,
                "node_id": "MDU6SXNzdWU0MDAzNzkyMjE=",
                "number": 34961,
                "title": "ActiveStorage: no authentication for direct uploads?",
                "user": {
                    "login": "wesley6j",
                    "id": 4378997,
                    "node_id": "MDQ6VXNlcjQzNzg5OTc=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/4378997?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/wesley6j",
                    "html_url": "https://github.com/wesley6j",
                    "followers_url": "https://api.github.com/users/wesley6j/followers",
                    "following_url": "https://api.github.com/users/wesley6j/following{/other_user}",
                    "gists_url": "https://api.github.com/users/wesley6j/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/wesley6j/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/wesley6j/subscriptions",
                    "organizations_url": "https://api.github.com/users/wesley6j/orgs",
                    "repos_url": "https://api.github.com/users/wesley6j/repos",
                    "events_url": "https://api.github.com/users/wesley6j/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/wesley6j/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 91966972,
                        "node_id": "MDU6TGFiZWw5MTk2Njk3Mg==",
                        "url": "https://api.github.com/repos/rails/rails/labels/security",
                        "name": "security",
                        "color": "D94A4A",
                        "default": false,
                        "description": null
                    },
                    {
                        "id": 664533972,
                        "node_id": "MDU6TGFiZWw2NjQ1MzM5NzI=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activestorage",
                        "name": "activestorage",
                        "color": "bfd4f2",
                        "default": false,
                        "description": null
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 2,
                "created_at": "2019-01-17T17:16:50Z",
                "updated_at": "2023-10-27T10:11:28Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "The only security measure `ActiveStorage::DirectUploadsController` has is `protect_from_forgery with: :exception`. The `DirectUpload` js client fetches the csrf token from the page header to pass this security check: `this.xhr.setRequestHeader(\"X-CSRF-Token\", getMetaValue(\"csrf-token\"))`.\r\n\r\nSince any Rails generated pages may have this token, The door to upload files is open. Some ActiveStorage users are using ActiveStorage to provide permanent public image links. If the public link can be guessed from the blob information that `DirectUpload` js client gets, unauthorized users may be able to upload and share files.\r\n\r\nBecause a direct upload input behaves like a form, I think we should apply the idea of per form csrf token. This means each input field with `direct_upload: true` should have a direct upload csrf token. If a page has multiple such fields, these fields can share the same token. This way, only users with access to pages with direct upload fields can have this token. \r\n\r\nOr even better, the controller can optionally accept a proc to authenticate user. And `DirectUpload` should accordingly allow setting custom headers. This will also be useful to API only Rails apps.",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/34961/reactions",
                    "total_count": 16,
                    "+1": 16,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/rails/rails/issues/34961/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/rails/rails/issues/comments/1782655530",
                "html_url": "https://github.com/rails/rails/issues/34961#issuecomment-1782655530",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/34961",
                "id": 1782655530,
                "node_id": "IC_kwDNIULOakEqKg",
                "user": {
                    "login": "rnestler",
                    "id": 1435346,
                    "node_id": "MDQ6VXNlcjE0MzUzNDY=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/1435346?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/rnestler",
                    "html_url": "https://github.com/rnestler",
                    "followers_url": "https://api.github.com/users/rnestler/followers",
                    "following_url": "https://api.github.com/users/rnestler/following{/other_user}",
                    "gists_url": "https://api.github.com/users/rnestler/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/rnestler/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/rnestler/subscriptions",
                    "organizations_url": "https://api.github.com/users/rnestler/orgs",
                    "repos_url": "https://api.github.com/users/rnestler/repos",
                    "events_url": "https://api.github.com/users/rnestler/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/rnestler/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T10:11:28Z",
                "updated_at": "2023-10-27T10:11:28Z",
                "author_association": "NONE",
                "body": "I'm a bit concerned by this issue, since many people may not be aware that the direct upload API is unprotected and enabled by default.\r\n\r\nDoesn't it mean that many rails applications in the wild may have an unprotected direct upload endpoint which allows attackers to just upload any data to S3 storage (or whatever backend activestorage is configured to use)?",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/comments/1782655530/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T10:11:29Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32893617673",
        "type": "ForkEvent",
        "actor": {
            "id": 47484308,
            "login": "HeyNonster",
            "display_login": "HeyNonster",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HeyNonster",
            "avatar_url": "https://avatars.githubusercontent.com/u/47484308?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "forkee": {
                "id": 710707546,
                "node_id": "R_kgDOKlyJWg",
                "name": "rails",
                "full_name": "HeyNonster/rails",
                "private": false,
                "owner": {
                    "login": "HeyNonster",
                    "id": 47484308,
                    "node_id": "MDQ6VXNlcjQ3NDg0MzA4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/47484308?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/HeyNonster",
                    "html_url": "https://github.com/HeyNonster",
                    "followers_url": "https://api.github.com/users/HeyNonster/followers",
                    "following_url": "https://api.github.com/users/HeyNonster/following{/other_user}",
                    "gists_url": "https://api.github.com/users/HeyNonster/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/HeyNonster/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/HeyNonster/subscriptions",
                    "organizations_url": "https://api.github.com/users/HeyNonster/orgs",
                    "repos_url": "https://api.github.com/users/HeyNonster/repos",
                    "events_url": "https://api.github.com/users/HeyNonster/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/HeyNonster/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "html_url": "https://github.com/HeyNonster/rails",
                "description": "Ruby on Rails",
                "fork": true,
                "url": "https://api.github.com/repos/HeyNonster/rails",
                "forks_url": "https://api.github.com/repos/HeyNonster/rails/forks",
                "keys_url": "https://api.github.com/repos/HeyNonster/rails/keys{/key_id}",
                "collaborators_url": "https://api.github.com/repos/HeyNonster/rails/collaborators{/collaborator}",
                "teams_url": "https://api.github.com/repos/HeyNonster/rails/teams",
                "hooks_url": "https://api.github.com/repos/HeyNonster/rails/hooks",
                "issue_events_url": "https://api.github.com/repos/HeyNonster/rails/issues/events{/number}",
                "events_url": "https://api.github.com/repos/HeyNonster/rails/events",
                "assignees_url": "https://api.github.com/repos/HeyNonster/rails/assignees{/user}",
                "branches_url": "https://api.github.com/repos/HeyNonster/rails/branches{/branch}",
                "tags_url": "https://api.github.com/repos/HeyNonster/rails/tags",
                "blobs_url": "https://api.github.com/repos/HeyNonster/rails/git/blobs{/sha}",
                "git_tags_url": "https://api.github.com/repos/HeyNonster/rails/git/tags{/sha}",
                "git_refs_url": "https://api.github.com/repos/HeyNonster/rails/git/refs{/sha}",
                "trees_url": "https://api.github.com/repos/HeyNonster/rails/git/trees{/sha}",
                "statuses_url": "https://api.github.com/repos/HeyNonster/rails/statuses/{sha}",
                "languages_url": "https://api.github.com/repos/HeyNonster/rails/languages",
                "stargazers_url": "https://api.github.com/repos/HeyNonster/rails/stargazers",
                "contributors_url": "https://api.github.com/repos/HeyNonster/rails/contributors",
                "subscribers_url": "https://api.github.com/repos/HeyNonster/rails/subscribers",
                "subscription_url": "https://api.github.com/repos/HeyNonster/rails/subscription",
                "commits_url": "https://api.github.com/repos/HeyNonster/rails/commits{/sha}",
                "git_commits_url": "https://api.github.com/repos/HeyNonster/rails/git/commits{/sha}",
                "comments_url": "https://api.github.com/repos/HeyNonster/rails/comments{/number}",
                "issue_comment_url": "https://api.github.com/repos/HeyNonster/rails/issues/comments{/number}",
                "contents_url": "https://api.github.com/repos/HeyNonster/rails/contents/{+path}",
                "compare_url": "https://api.github.com/repos/HeyNonster/rails/compare/{base}...{head}",
                "merges_url": "https://api.github.com/repos/HeyNonster/rails/merges",
                "archive_url": "https://api.github.com/repos/HeyNonster/rails/{archive_format}{/ref}",
                "downloads_url": "https://api.github.com/repos/HeyNonster/rails/downloads",
                "issues_url": "https://api.github.com/repos/HeyNonster/rails/issues{/number}",
                "pulls_url": "https://api.github.com/repos/HeyNonster/rails/pulls{/number}",
                "milestones_url": "https://api.github.com/repos/HeyNonster/rails/milestones{/number}",
                "notifications_url": "https://api.github.com/repos/HeyNonster/rails/notifications{?since,all,participating}",
                "labels_url": "https://api.github.com/repos/HeyNonster/rails/labels{/name}",
                "releases_url": "https://api.github.com/repos/HeyNonster/rails/releases{/id}",
                "deployments_url": "https://api.github.com/repos/HeyNonster/rails/deployments",
                "created_at": "2023-10-27T09:11:09Z",
                "updated_at": "2023-10-27T09:11:09Z",
                "pushed_at": "2023-10-27T09:10:18Z",
                "git_url": "git://github.com/HeyNonster/rails.git",
                "ssh_url": "git@github.com:HeyNonster/rails.git",
                "clone_url": "https://github.com/HeyNonster/rails.git",
                "svn_url": "https://github.com/HeyNonster/rails",
                "homepage": "https://rubyonrails.org",
                "size": 267389,
                "stargazers_count": 0,
                "watchers_count": 0,
                "language": null,
                "has_issues": false,
                "has_projects": true,
                "has_downloads": true,
                "has_wiki": false,
                "has_pages": false,
                "has_discussions": false,
                "forks_count": 0,
                "mirror_url": null,
                "archived": false,
                "disabled": false,
                "open_issues_count": 0,
                "license": {
                    "key": "mit",
                    "name": "MIT License",
                    "spdx_id": "MIT",
                    "url": "https://api.github.com/licenses/mit",
                    "node_id": "MDc6TGljZW5zZTEz"
                },
                "allow_forking": true,
                "is_template": false,
                "web_commit_signoff_required": false,
                "topics": [],
                "visibility": "public",
                "forks": 0,
                "open_issues": 0,
                "watchers": 0,
                "default_branch": "main",
                "public": true
            }
        },
        "public": true,
        "created_at": "2023-10-27T09:11:10Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32892648217",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 5279284,
            "login": "sampatbadhe",
            "display_login": "sampatbadhe",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sampatbadhe",
            "avatar_url": "https://avatars.githubusercontent.com/u/5279284?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/rails/rails/issues/49790",
                "repository_url": "https://api.github.com/repos/rails/rails",
                "labels_url": "https://api.github.com/repos/rails/rails/issues/49790/labels{/name}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/49790/comments",
                "events_url": "https://api.github.com/repos/rails/rails/issues/49790/events",
                "html_url": "https://github.com/rails/rails/pull/49790",
                "id": 1962553786,
                "node_id": "PR_kwDNIULOXdCgxg",
                "number": 49790,
                "title": "ActionMailer Email Preview - show date header when present ",
                "user": {
                    "login": "sampatbadhe",
                    "id": 5279284,
                    "node_id": "MDQ6VXNlcjUyNzkyODQ=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/5279284?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/sampatbadhe",
                    "html_url": "https://github.com/sampatbadhe",
                    "followers_url": "https://api.github.com/users/sampatbadhe/followers",
                    "following_url": "https://api.github.com/users/sampatbadhe/following{/other_user}",
                    "gists_url": "https://api.github.com/users/sampatbadhe/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/sampatbadhe/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/sampatbadhe/subscriptions",
                    "organizations_url": "https://api.github.com/users/sampatbadhe/orgs",
                    "repos_url": "https://api.github.com/users/sampatbadhe/repos",
                    "events_url": "https://api.github.com/users/sampatbadhe/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/sampatbadhe/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 107195,
                        "node_id": "MDU6TGFiZWwxMDcxOTU=",
                        "url": "https://api.github.com/repos/rails/rails/labels/railties",
                        "name": "railties",
                        "color": "8BE06E",
                        "default": false,
                        "description": null
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 2,
                "created_at": "2023-10-26T01:42:47Z",
                "updated_at": "2023-10-27T08:34:23Z",
                "closed_at": null,
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/rails/rails/pulls/49790",
                    "html_url": "https://github.com/rails/rails/pull/49790",
                    "diff_url": "https://github.com/rails/rails/pull/49790.diff",
                    "patch_url": "https://github.com/rails/rails/pull/49790.patch",
                    "merged_at": null
                },
                "body": "### Detail\r\n\r\nActionMailer Email Preview - show date header when present or fallback to Time.current.rfc2822\r\n\r\nResolves #49788\r\n\r\nCo-authored-by: @allisonphillips\r\n\r\n### Checklist\r\n\r\nBefore submitting the PR make sure the following are checked:\r\n\r\n* [x] This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.\r\n* [x] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: `[Fix #issue-number]`\r\n* [x] Tests are added or updated if you fix a bug or add a feature.\r\n* [ ] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/49790/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/rails/rails/issues/49790/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/rails/rails/issues/comments/1782520217",
                "html_url": "https://github.com/rails/rails/pull/49790#issuecomment-1782520217",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/49790",
                "id": 1782520217,
                "node_id": "IC_kwDNIULOaj8ZmQ",
                "user": {
                    "login": "sampatbadhe",
                    "id": 5279284,
                    "node_id": "MDQ6VXNlcjUyNzkyODQ=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/5279284?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/sampatbadhe",
                    "html_url": "https://github.com/sampatbadhe",
                    "followers_url": "https://api.github.com/users/sampatbadhe/followers",
                    "following_url": "https://api.github.com/users/sampatbadhe/following{/other_user}",
                    "gists_url": "https://api.github.com/users/sampatbadhe/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/sampatbadhe/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/sampatbadhe/subscriptions",
                    "organizations_url": "https://api.github.com/users/sampatbadhe/orgs",
                    "repos_url": "https://api.github.com/users/sampatbadhe/repos",
                    "events_url": "https://api.github.com/users/sampatbadhe/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/sampatbadhe/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T08:34:23Z",
                "updated_at": "2023-10-27T08:34:23Z",
                "author_association": "CONTRIBUTOR",
                "body": "Thank you for review @Edouard-chin. I have added tests, could you please check.",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/comments/1782520217/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T08:34:23Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32892486289",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 19192189,
            "login": "casperisfine",
            "display_login": "casperisfine",
            "gravatar_id": "",
            "url": "https://api.github.com/users/casperisfine",
            "avatar_url": "https://avatars.githubusercontent.com/u/19192189?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/rails/rails/pulls/comments/1374243700",
                "pull_request_review_id": 1701261071,
                "id": 1374243700,
                "node_id": "PRRC_kwDNIULOUelLdA",
                "diff_hunk": "@@ -0,0 +1,84 @@\n+# frozen_string_literal: true\n+\n+module ActiveRecord\n+  module AttributeMethods\n+    module CompositePrimaryKey # :nodoc:\n+      # Returns the primary key column's value. If the primary key is composite,\n+      # returns an array of the primary key column values.\n+      def id\n+        if self.class.composite_primary_key?",
                "path": "activerecord/lib/active_record/attribute_methods/composite_primary_key.rb",
                "commit_id": "6bba6efca0d5f5a836470f2e776aee9974947e59",
                "original_commit_id": "6bba6efca0d5f5a836470f2e776aee9974947e59",
                "user": {
                    "login": "casperisfine",
                    "id": 19192189,
                    "node_id": "MDQ6VXNlcjE5MTkyMTg5",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19192189?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/casperisfine",
                    "html_url": "https://github.com/casperisfine",
                    "followers_url": "https://api.github.com/users/casperisfine/followers",
                    "following_url": "https://api.github.com/users/casperisfine/following{/other_user}",
                    "gists_url": "https://api.github.com/users/casperisfine/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/casperisfine/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/casperisfine/subscriptions",
                    "organizations_url": "https://api.github.com/users/casperisfine/orgs",
                    "repos_url": "https://api.github.com/users/casperisfine/repos",
                    "events_url": "https://api.github.com/users/casperisfine/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/casperisfine/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "I benched this vs `@primary_key.is_a?(Array)`, the difference is fairly minimal (5-7%):\r\n\r\n```\r\nruby 3.2.2 (2023-03-30 revision e51014f9c0) [arm64-darwin22]\r\nWarming up --------------------------------------\r\n      CPK#id (is_a?)   200.372k i/100ms\r\n      CPK#id (class)   190.537k i/100ms\r\nCalculating -------------------------------------\r\n      CPK#id (is_a?)      1.993M (\u00b1 2.6%) i/s -     10.019M in   5.029710s\r\n      CPK#id (class)      1.855M (\u00b1 7.8%) i/s -      9.336M in   5.075258s\r\n\r\nComparison:\r\n      CPK#id (is_a?):  1993425.4 i/s\r\n      CPK#id (class):  1854978.2 i/s - same-ish: difference falls within error\r\n```\r\n\r\nBut given that with CPK `#id` is already more than twice slower than without, I don't think it's worth micro-optimizing it.\r\n\r\nIf we really want to optimize it, one solution would be to disallow setting a non-CPK on a child of a model with CPK, as it make really little sense to I wouldn't mind having such limitation. It would be a bit tricky to detect as there is potentially ordering issues.\r\n\r\nBut even that doesn't seem to make that much of a difference:\r\n\r\n```\r\nruby 3.2.2 (2023-03-30 revision e51014f9c0) [arm64-darwin22]\r\nWarming up --------------------------------------\r\n   CPK#id (no-check)   208.409k i/100ms\r\n      CPK#id (class)   186.005k i/100ms\r\nCalculating -------------------------------------\r\n   CPK#id (no-check)      2.040M (\u00b1 5.8%) i/s -     10.212M in   5.027149s\r\n      CPK#id (class)      1.882M (\u00b1 3.3%) i/s -      9.486M in   5.047891s\r\n\r\nComparison:\r\n   CPK#id (no-check):  2039769.0 i/s\r\n      CPK#id (class):  1881645.3 i/s - same-ish: difference falls within error\r\n```\r\n\r\n```ruby\r\nbegin\r\n  require \"bundler/inline\"\r\nrescue LoadError => e\r\n  $stderr.puts \"Bundler version 1.10 or later is required. Please update your Bundler\"\r\n  raise e\r\nend\r\n\r\ngemfile(true) do\r\n  source \"https://rubygems.org\"\r\n  gem \"rails\", path: \"/Users/byroot/src/github.com/Shopify/rails\"\r\n  gem \"sqlite3\"\r\n  gem \"benchmark-ips\"\r\nend\r\n\r\nrequire \"active_record\"\r\n\r\nActiveRecord::Base.establish_connection(adapter: \"sqlite3\", database: \":memory:\")\r\nActiveRecord::Base.logger = Logger.new(STDOUT)\r\n\r\nActiveRecord::Schema.define do\r\n  create_table :users do |t|\r\n    t.string :first_name\r\n    t.string :last_name\r\n  end\r\nend\r\n\r\nclass User < ActiveRecord::Base\r\nend\r\n\r\nclass CPKUser < User\r\n  self.primary_key = [:id, :first_name]\r\nend\r\n\r\nmodule ActiveRecord\r\n  module AttributeMethods\r\n    module CompositePrimaryKey # :nodoc:\r\n      # Returns the primary key column's value. If the primary key is composite,\r\n      # returns an array of the primary key column values.\r\n      def no_check_id\r\n        @primary_key.map { |pk| _read_attribute(pk) }\r\n      end\r\n\r\n      def check_class_id\r\n        if self.class.composite_primary_key?\r\n          @primary_key.map { |pk| _read_attribute(pk) }\r\n        else\r\n          super\r\n        end\r\n      end\r\n    end\r\n  end\r\nend\r\n\r\nuser = User.new\r\ncpk_user = CPKUser.new\r\n\r\nputs RUBY_DESCRIPTION\r\n\r\nBenchmark.ips do |x|\r\n  x.report(\"CPK#id (no-check)\") do\r\n    cpk_user.no_check_id\r\n  end\r\n\r\n  x.report(\"CPK#id (class)\") do\r\n    cpk_user.check_class_id\r\n  end\r\n\r\n  x.compare!(order: :baseline)\r\nend\r\n```",
                "created_at": "2023-10-27T08:28:03Z",
                "updated_at": "2023-10-27T08:28:04Z",
                "html_url": "https://github.com/rails/rails/pull/49808#discussion_r1374243700",
                "pull_request_url": "https://api.github.com/repos/rails/rails/pulls/49808",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/comments/1374243700"
                    },
                    "html": {
                        "href": "https://github.com/rails/rails/pull/49808#discussion_r1374243700"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49808"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/pulls/comments/1374243700/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": null,
                "original_start_line": null,
                "start_side": null,
                "line": 9,
                "original_line": 9,
                "side": "RIGHT",
                "original_position": 9,
                "position": 9,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/rails/rails/pulls/49808",
                "id": 1576154469,
                "node_id": "PR_kwDNIULOXfI1ZQ",
                "html_url": "https://github.com/rails/rails/pull/49808",
                "diff_url": "https://github.com/rails/rails/pull/49808.diff",
                "patch_url": "https://github.com/rails/rails/pull/49808.patch",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/49808",
                "number": 49808,
                "state": "open",
                "locked": false,
                "title": "Optimize ActiveRecord::AttributeMethods::PrimaryKey",
                "user": {
                    "login": "casperisfine",
                    "id": 19192189,
                    "node_id": "MDQ6VXNlcjE5MTkyMTg5",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19192189?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/casperisfine",
                    "html_url": "https://github.com/casperisfine",
                    "followers_url": "https://api.github.com/users/casperisfine/followers",
                    "following_url": "https://api.github.com/users/casperisfine/following{/other_user}",
                    "gists_url": "https://api.github.com/users/casperisfine/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/casperisfine/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/casperisfine/subscriptions",
                    "organizations_url": "https://api.github.com/users/casperisfine/orgs",
                    "repos_url": "https://api.github.com/users/casperisfine/repos",
                    "events_url": "https://api.github.com/users/casperisfine/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/casperisfine/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Fix: https://github.com/rails/rails/pull/49798\r\n\r\nHaving to check on every access whether the model has a composite primary key adds a small but non-negligible overhead, even though CPK is envisoned as the exception, not the rule.\r\n\r\nBy moving all the CPK support in a dedicated module, we can late-include it when a CPK is defined on a model. This is essentially a \"de-optimization\" phase.\r\n\r\ncc @nvasilevski @ptolts @rafaelfranca @matthewd \r\n",
                "created_at": "2023-10-27T08:24:08Z",
                "updated_at": "2023-10-27T08:28:04Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "41812dc67bcca9ad03d22ea3e46e82a199d4b058",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 107191,
                        "node_id": "MDU6TGFiZWwxMDcxOTE=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
                        "name": "activerecord",
                        "color": "0b02e1",
                        "default": false,
                        "description": null
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/rails/rails/pulls/49808/commits",
                "review_comments_url": "https://api.github.com/repos/rails/rails/pulls/49808/comments",
                "review_comment_url": "https://api.github.com/repos/rails/rails/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/49808/comments",
                "statuses_url": "https://api.github.com/repos/rails/rails/statuses/6bba6efca0d5f5a836470f2e776aee9974947e59",
                "head": {
                    "label": "Shopify:opt-cpk-id-access",
                    "ref": "opt-cpk-id-access",
                    "sha": "6bba6efca0d5f5a836470f2e776aee9974947e59",
                    "user": {
                        "login": "Shopify",
                        "id": 8085,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjgwODU=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/8085?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/Shopify",
                        "html_url": "https://github.com/Shopify",
                        "followers_url": "https://api.github.com/users/Shopify/followers",
                        "following_url": "https://api.github.com/users/Shopify/following{/other_user}",
                        "gists_url": "https://api.github.com/users/Shopify/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/Shopify/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/Shopify/subscriptions",
                        "organizations_url": "https://api.github.com/users/Shopify/orgs",
                        "repos_url": "https://api.github.com/users/Shopify/repos",
                        "events_url": "https://api.github.com/users/Shopify/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/Shopify/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 60858413,
                        "node_id": "MDEwOlJlcG9zaXRvcnk2MDg1ODQxMw==",
                        "name": "rails",
                        "full_name": "Shopify/rails",
                        "private": false,
                        "owner": {
                            "login": "Shopify",
                            "id": 8085,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjgwODU=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/8085?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/Shopify",
                            "html_url": "https://github.com/Shopify",
                            "followers_url": "https://api.github.com/users/Shopify/followers",
                            "following_url": "https://api.github.com/users/Shopify/following{/other_user}",
                            "gists_url": "https://api.github.com/users/Shopify/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/Shopify/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/Shopify/subscriptions",
                            "organizations_url": "https://api.github.com/users/Shopify/orgs",
                            "repos_url": "https://api.github.com/users/Shopify/repos",
                            "events_url": "https://api.github.com/users/Shopify/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/Shopify/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/Shopify/rails",
                        "description": "Ruby on Rails",
                        "fork": true,
                        "url": "https://api.github.com/repos/Shopify/rails",
                        "forks_url": "https://api.github.com/repos/Shopify/rails/forks",
                        "keys_url": "https://api.github.com/repos/Shopify/rails/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/Shopify/rails/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/Shopify/rails/teams",
                        "hooks_url": "https://api.github.com/repos/Shopify/rails/hooks",
                        "issue_events_url": "https://api.github.com/repos/Shopify/rails/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/Shopify/rails/events",
                        "assignees_url": "https://api.github.com/repos/Shopify/rails/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/Shopify/rails/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/Shopify/rails/tags",
                        "blobs_url": "https://api.github.com/repos/Shopify/rails/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/Shopify/rails/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/Shopify/rails/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/Shopify/rails/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/Shopify/rails/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/Shopify/rails/languages",
                        "stargazers_url": "https://api.github.com/repos/Shopify/rails/stargazers",
                        "contributors_url": "https://api.github.com/repos/Shopify/rails/contributors",
                        "subscribers_url": "https://api.github.com/repos/Shopify/rails/subscribers",
                        "subscription_url": "https://api.github.com/repos/Shopify/rails/subscription",
                        "commits_url": "https://api.github.com/repos/Shopify/rails/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/Shopify/rails/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/Shopify/rails/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/Shopify/rails/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/Shopify/rails/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/Shopify/rails/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/Shopify/rails/merges",
                        "archive_url": "https://api.github.com/repos/Shopify/rails/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/Shopify/rails/downloads",
                        "issues_url": "https://api.github.com/repos/Shopify/rails/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/Shopify/rails/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/Shopify/rails/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/Shopify/rails/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/Shopify/rails/labels{/name}",
                        "releases_url": "https://api.github.com/repos/Shopify/rails/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/Shopify/rails/deployments",
                        "created_at": "2016-06-10T15:34:34Z",
                        "updated_at": "2023-04-20T01:30:38Z",
                        "pushed_at": "2023-10-27T08:23:28Z",
                        "git_url": "git://github.com/Shopify/rails.git",
                        "ssh_url": "git@github.com:Shopify/rails.git",
                        "clone_url": "https://github.com/Shopify/rails.git",
                        "svn_url": "https://github.com/Shopify/rails",
                        "homepage": "http://rubyonrails.org",
                        "size": 229627,
                        "stargazers_count": 13,
                        "watchers_count": 13,
                        "language": "Ruby",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 7,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 0,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 7,
                        "open_issues": 0,
                        "watchers": 13,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "rails:main",
                    "ref": "main",
                    "sha": "392e5efb71c891868f63e95e944b01ebeb476ff5",
                    "user": {
                        "login": "rails",
                        "id": 4223,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQyMjM=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4223?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/rails",
                        "html_url": "https://github.com/rails",
                        "followers_url": "https://api.github.com/users/rails/followers",
                        "following_url": "https://api.github.com/users/rails/following{/other_user}",
                        "gists_url": "https://api.github.com/users/rails/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/rails/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/rails/subscriptions",
                        "organizations_url": "https://api.github.com/users/rails/orgs",
                        "repos_url": "https://api.github.com/users/rails/repos",
                        "events_url": "https://api.github.com/users/rails/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/rails/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 8514,
                        "node_id": "MDEwOlJlcG9zaXRvcnk4NTE0",
                        "name": "rails",
                        "full_name": "rails/rails",
                        "private": false,
                        "owner": {
                            "login": "rails",
                            "id": 4223,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQyMjM=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4223?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/rails",
                            "html_url": "https://github.com/rails",
                            "followers_url": "https://api.github.com/users/rails/followers",
                            "following_url": "https://api.github.com/users/rails/following{/other_user}",
                            "gists_url": "https://api.github.com/users/rails/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/rails/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/rails/subscriptions",
                            "organizations_url": "https://api.github.com/users/rails/orgs",
                            "repos_url": "https://api.github.com/users/rails/repos",
                            "events_url": "https://api.github.com/users/rails/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/rails/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/rails/rails",
                        "description": "Ruby on Rails",
                        "fork": false,
                        "url": "https://api.github.com/repos/rails/rails",
                        "forks_url": "https://api.github.com/repos/rails/rails/forks",
                        "keys_url": "https://api.github.com/repos/rails/rails/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/rails/rails/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/rails/rails/teams",
                        "hooks_url": "https://api.github.com/repos/rails/rails/hooks",
                        "issue_events_url": "https://api.github.com/repos/rails/rails/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/rails/rails/events",
                        "assignees_url": "https://api.github.com/repos/rails/rails/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/rails/rails/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/rails/rails/tags",
                        "blobs_url": "https://api.github.com/repos/rails/rails/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/rails/rails/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/rails/rails/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/rails/rails/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/rails/rails/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/rails/rails/languages",
                        "stargazers_url": "https://api.github.com/repos/rails/rails/stargazers",
                        "contributors_url": "https://api.github.com/repos/rails/rails/contributors",
                        "subscribers_url": "https://api.github.com/repos/rails/rails/subscribers",
                        "subscription_url": "https://api.github.com/repos/rails/rails/subscription",
                        "commits_url": "https://api.github.com/repos/rails/rails/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/rails/rails/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/rails/rails/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/rails/rails/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/rails/rails/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/rails/rails/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/rails/rails/merges",
                        "archive_url": "https://api.github.com/repos/rails/rails/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/rails/rails/downloads",
                        "issues_url": "https://api.github.com/repos/rails/rails/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/rails/rails/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/rails/rails/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/rails/rails/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/rails/rails/labels{/name}",
                        "releases_url": "https://api.github.com/repos/rails/rails/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/rails/rails/deployments",
                        "created_at": "2008-04-11T02:19:47Z",
                        "updated_at": "2023-10-27T08:11:08Z",
                        "pushed_at": "2023-10-27T08:24:09Z",
                        "git_url": "git://github.com/rails/rails.git",
                        "ssh_url": "git@github.com:rails/rails.git",
                        "clone_url": "https://github.com/rails/rails.git",
                        "svn_url": "https://github.com/rails/rails",
                        "homepage": "https://rubyonrails.org",
                        "size": 267388,
                        "stargazers_count": 53684,
                        "watchers_count": 53684,
                        "language": "Ruby",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 21395,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 939,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "activejob",
                            "activerecord",
                            "framework",
                            "html",
                            "mvc",
                            "rails",
                            "ruby"
                        ],
                        "visibility": "public",
                        "forks": 21395,
                        "open_issues": 939,
                        "watchers": 53684,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49808"
                    },
                    "html": {
                        "href": "https://github.com/rails/rails/pull/49808"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/rails/rails/issues/49808"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/rails/rails/issues/49808/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49808/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49808/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/rails/rails/statuses/6bba6efca0d5f5a836470f2e776aee9974947e59"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T08:28:03Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32892486193",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 19192189,
            "login": "casperisfine",
            "display_login": "casperisfine",
            "gravatar_id": "",
            "url": "https://api.github.com/users/casperisfine",
            "avatar_url": "https://avatars.githubusercontent.com/u/19192189?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1701261071,
                "node_id": "PRR_kwDNIULOZWcvDw",
                "user": {
                    "login": "casperisfine",
                    "id": 19192189,
                    "node_id": "MDQ6VXNlcjE5MTkyMTg5",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19192189?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/casperisfine",
                    "html_url": "https://github.com/casperisfine",
                    "followers_url": "https://api.github.com/users/casperisfine/followers",
                    "following_url": "https://api.github.com/users/casperisfine/following{/other_user}",
                    "gists_url": "https://api.github.com/users/casperisfine/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/casperisfine/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/casperisfine/subscriptions",
                    "organizations_url": "https://api.github.com/users/casperisfine/orgs",
                    "repos_url": "https://api.github.com/users/casperisfine/repos",
                    "events_url": "https://api.github.com/users/casperisfine/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/casperisfine/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "commit_id": "6bba6efca0d5f5a836470f2e776aee9974947e59",
                "submitted_at": "2023-10-27T08:28:04Z",
                "state": "commented",
                "html_url": "https://github.com/rails/rails/pull/49808#pullrequestreview-1701261071",
                "pull_request_url": "https://api.github.com/repos/rails/rails/pulls/49808",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "html": {
                        "href": "https://github.com/rails/rails/pull/49808#pullrequestreview-1701261071"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49808"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/rails/rails/pulls/49808",
                "id": 1576154469,
                "node_id": "PR_kwDNIULOXfI1ZQ",
                "html_url": "https://github.com/rails/rails/pull/49808",
                "diff_url": "https://github.com/rails/rails/pull/49808.diff",
                "patch_url": "https://github.com/rails/rails/pull/49808.patch",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/49808",
                "number": 49808,
                "state": "open",
                "locked": false,
                "title": "Optimize ActiveRecord::AttributeMethods::PrimaryKey",
                "user": {
                    "login": "casperisfine",
                    "id": 19192189,
                    "node_id": "MDQ6VXNlcjE5MTkyMTg5",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19192189?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/casperisfine",
                    "html_url": "https://github.com/casperisfine",
                    "followers_url": "https://api.github.com/users/casperisfine/followers",
                    "following_url": "https://api.github.com/users/casperisfine/following{/other_user}",
                    "gists_url": "https://api.github.com/users/casperisfine/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/casperisfine/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/casperisfine/subscriptions",
                    "organizations_url": "https://api.github.com/users/casperisfine/orgs",
                    "repos_url": "https://api.github.com/users/casperisfine/repos",
                    "events_url": "https://api.github.com/users/casperisfine/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/casperisfine/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Fix: https://github.com/rails/rails/pull/49798\r\n\r\nHaving to check on every access whether the model has a composite primary key adds a small but non-negligible overhead, even though CPK is envisoned as the exception, not the rule.\r\n\r\nBy moving all the CPK support in a dedicated module, we can late-include it when a CPK is defined on a model. This is essentially a \"de-optimization\" phase.\r\n\r\ncc @nvasilevski @ptolts @rafaelfranca @matthewd \r\n",
                "created_at": "2023-10-27T08:24:08Z",
                "updated_at": "2023-10-27T08:28:04Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "41812dc67bcca9ad03d22ea3e46e82a199d4b058",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 107191,
                        "node_id": "MDU6TGFiZWwxMDcxOTE=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
                        "name": "activerecord",
                        "color": "0b02e1",
                        "default": false,
                        "description": null
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/rails/rails/pulls/49808/commits",
                "review_comments_url": "https://api.github.com/repos/rails/rails/pulls/49808/comments",
                "review_comment_url": "https://api.github.com/repos/rails/rails/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/49808/comments",
                "statuses_url": "https://api.github.com/repos/rails/rails/statuses/6bba6efca0d5f5a836470f2e776aee9974947e59",
                "head": {
                    "label": "Shopify:opt-cpk-id-access",
                    "ref": "opt-cpk-id-access",
                    "sha": "6bba6efca0d5f5a836470f2e776aee9974947e59",
                    "user": {
                        "login": "Shopify",
                        "id": 8085,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjgwODU=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/8085?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/Shopify",
                        "html_url": "https://github.com/Shopify",
                        "followers_url": "https://api.github.com/users/Shopify/followers",
                        "following_url": "https://api.github.com/users/Shopify/following{/other_user}",
                        "gists_url": "https://api.github.com/users/Shopify/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/Shopify/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/Shopify/subscriptions",
                        "organizations_url": "https://api.github.com/users/Shopify/orgs",
                        "repos_url": "https://api.github.com/users/Shopify/repos",
                        "events_url": "https://api.github.com/users/Shopify/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/Shopify/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 60858413,
                        "node_id": "MDEwOlJlcG9zaXRvcnk2MDg1ODQxMw==",
                        "name": "rails",
                        "full_name": "Shopify/rails",
                        "private": false,
                        "owner": {
                            "login": "Shopify",
                            "id": 8085,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjgwODU=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/8085?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/Shopify",
                            "html_url": "https://github.com/Shopify",
                            "followers_url": "https://api.github.com/users/Shopify/followers",
                            "following_url": "https://api.github.com/users/Shopify/following{/other_user}",
                            "gists_url": "https://api.github.com/users/Shopify/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/Shopify/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/Shopify/subscriptions",
                            "organizations_url": "https://api.github.com/users/Shopify/orgs",
                            "repos_url": "https://api.github.com/users/Shopify/repos",
                            "events_url": "https://api.github.com/users/Shopify/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/Shopify/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/Shopify/rails",
                        "description": "Ruby on Rails",
                        "fork": true,
                        "url": "https://api.github.com/repos/Shopify/rails",
                        "forks_url": "https://api.github.com/repos/Shopify/rails/forks",
                        "keys_url": "https://api.github.com/repos/Shopify/rails/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/Shopify/rails/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/Shopify/rails/teams",
                        "hooks_url": "https://api.github.com/repos/Shopify/rails/hooks",
                        "issue_events_url": "https://api.github.com/repos/Shopify/rails/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/Shopify/rails/events",
                        "assignees_url": "https://api.github.com/repos/Shopify/rails/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/Shopify/rails/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/Shopify/rails/tags",
                        "blobs_url": "https://api.github.com/repos/Shopify/rails/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/Shopify/rails/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/Shopify/rails/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/Shopify/rails/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/Shopify/rails/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/Shopify/rails/languages",
                        "stargazers_url": "https://api.github.com/repos/Shopify/rails/stargazers",
                        "contributors_url": "https://api.github.com/repos/Shopify/rails/contributors",
                        "subscribers_url": "https://api.github.com/repos/Shopify/rails/subscribers",
                        "subscription_url": "https://api.github.com/repos/Shopify/rails/subscription",
                        "commits_url": "https://api.github.com/repos/Shopify/rails/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/Shopify/rails/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/Shopify/rails/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/Shopify/rails/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/Shopify/rails/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/Shopify/rails/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/Shopify/rails/merges",
                        "archive_url": "https://api.github.com/repos/Shopify/rails/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/Shopify/rails/downloads",
                        "issues_url": "https://api.github.com/repos/Shopify/rails/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/Shopify/rails/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/Shopify/rails/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/Shopify/rails/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/Shopify/rails/labels{/name}",
                        "releases_url": "https://api.github.com/repos/Shopify/rails/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/Shopify/rails/deployments",
                        "created_at": "2016-06-10T15:34:34Z",
                        "updated_at": "2023-04-20T01:30:38Z",
                        "pushed_at": "2023-10-27T08:23:28Z",
                        "git_url": "git://github.com/Shopify/rails.git",
                        "ssh_url": "git@github.com:Shopify/rails.git",
                        "clone_url": "https://github.com/Shopify/rails.git",
                        "svn_url": "https://github.com/Shopify/rails",
                        "homepage": "http://rubyonrails.org",
                        "size": 229627,
                        "stargazers_count": 13,
                        "watchers_count": 13,
                        "language": "Ruby",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 7,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 0,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 7,
                        "open_issues": 0,
                        "watchers": 13,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "rails:main",
                    "ref": "main",
                    "sha": "392e5efb71c891868f63e95e944b01ebeb476ff5",
                    "user": {
                        "login": "rails",
                        "id": 4223,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQyMjM=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4223?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/rails",
                        "html_url": "https://github.com/rails",
                        "followers_url": "https://api.github.com/users/rails/followers",
                        "following_url": "https://api.github.com/users/rails/following{/other_user}",
                        "gists_url": "https://api.github.com/users/rails/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/rails/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/rails/subscriptions",
                        "organizations_url": "https://api.github.com/users/rails/orgs",
                        "repos_url": "https://api.github.com/users/rails/repos",
                        "events_url": "https://api.github.com/users/rails/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/rails/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 8514,
                        "node_id": "MDEwOlJlcG9zaXRvcnk4NTE0",
                        "name": "rails",
                        "full_name": "rails/rails",
                        "private": false,
                        "owner": {
                            "login": "rails",
                            "id": 4223,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQyMjM=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4223?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/rails",
                            "html_url": "https://github.com/rails",
                            "followers_url": "https://api.github.com/users/rails/followers",
                            "following_url": "https://api.github.com/users/rails/following{/other_user}",
                            "gists_url": "https://api.github.com/users/rails/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/rails/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/rails/subscriptions",
                            "organizations_url": "https://api.github.com/users/rails/orgs",
                            "repos_url": "https://api.github.com/users/rails/repos",
                            "events_url": "https://api.github.com/users/rails/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/rails/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/rails/rails",
                        "description": "Ruby on Rails",
                        "fork": false,
                        "url": "https://api.github.com/repos/rails/rails",
                        "forks_url": "https://api.github.com/repos/rails/rails/forks",
                        "keys_url": "https://api.github.com/repos/rails/rails/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/rails/rails/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/rails/rails/teams",
                        "hooks_url": "https://api.github.com/repos/rails/rails/hooks",
                        "issue_events_url": "https://api.github.com/repos/rails/rails/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/rails/rails/events",
                        "assignees_url": "https://api.github.com/repos/rails/rails/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/rails/rails/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/rails/rails/tags",
                        "blobs_url": "https://api.github.com/repos/rails/rails/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/rails/rails/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/rails/rails/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/rails/rails/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/rails/rails/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/rails/rails/languages",
                        "stargazers_url": "https://api.github.com/repos/rails/rails/stargazers",
                        "contributors_url": "https://api.github.com/repos/rails/rails/contributors",
                        "subscribers_url": "https://api.github.com/repos/rails/rails/subscribers",
                        "subscription_url": "https://api.github.com/repos/rails/rails/subscription",
                        "commits_url": "https://api.github.com/repos/rails/rails/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/rails/rails/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/rails/rails/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/rails/rails/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/rails/rails/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/rails/rails/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/rails/rails/merges",
                        "archive_url": "https://api.github.com/repos/rails/rails/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/rails/rails/downloads",
                        "issues_url": "https://api.github.com/repos/rails/rails/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/rails/rails/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/rails/rails/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/rails/rails/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/rails/rails/labels{/name}",
                        "releases_url": "https://api.github.com/repos/rails/rails/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/rails/rails/deployments",
                        "created_at": "2008-04-11T02:19:47Z",
                        "updated_at": "2023-10-27T08:11:08Z",
                        "pushed_at": "2023-10-27T08:24:09Z",
                        "git_url": "git://github.com/rails/rails.git",
                        "ssh_url": "git@github.com:rails/rails.git",
                        "clone_url": "https://github.com/rails/rails.git",
                        "svn_url": "https://github.com/rails/rails",
                        "homepage": "https://rubyonrails.org",
                        "size": 267388,
                        "stargazers_count": 53684,
                        "watchers_count": 53684,
                        "language": "Ruby",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 21395,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 939,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "activejob",
                            "activerecord",
                            "framework",
                            "html",
                            "mvc",
                            "rails",
                            "ruby"
                        ],
                        "visibility": "public",
                        "forks": 21395,
                        "open_issues": 939,
                        "watchers": 53684,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49808"
                    },
                    "html": {
                        "href": "https://github.com/rails/rails/pull/49808"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/rails/rails/issues/49808"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/rails/rails/issues/49808/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49808/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49808/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/rails/rails/statuses/6bba6efca0d5f5a836470f2e776aee9974947e59"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T08:28:05Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32892385666",
        "type": "PullRequestEvent",
        "actor": {
            "id": 19192189,
            "login": "casperisfine",
            "display_login": "casperisfine",
            "gravatar_id": "",
            "url": "https://api.github.com/users/casperisfine",
            "avatar_url": "https://avatars.githubusercontent.com/u/19192189?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "opened",
            "number": 49808,
            "pull_request": {
                "url": "https://api.github.com/repos/rails/rails/pulls/49808",
                "id": 1576154469,
                "node_id": "PR_kwDNIULOXfI1ZQ",
                "html_url": "https://github.com/rails/rails/pull/49808",
                "diff_url": "https://github.com/rails/rails/pull/49808.diff",
                "patch_url": "https://github.com/rails/rails/pull/49808.patch",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/49808",
                "number": 49808,
                "state": "open",
                "locked": false,
                "title": "Optimize ActiveRecord::AttributeMethods::PrimaryKey",
                "user": {
                    "login": "casperisfine",
                    "id": 19192189,
                    "node_id": "MDQ6VXNlcjE5MTkyMTg5",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19192189?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/casperisfine",
                    "html_url": "https://github.com/casperisfine",
                    "followers_url": "https://api.github.com/users/casperisfine/followers",
                    "following_url": "https://api.github.com/users/casperisfine/following{/other_user}",
                    "gists_url": "https://api.github.com/users/casperisfine/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/casperisfine/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/casperisfine/subscriptions",
                    "organizations_url": "https://api.github.com/users/casperisfine/orgs",
                    "repos_url": "https://api.github.com/users/casperisfine/repos",
                    "events_url": "https://api.github.com/users/casperisfine/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/casperisfine/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Fix: https://github.com/rails/rails/pull/49798\r\n\r\nHaving to check on every access whether the model has a composite primary key adds a small but non-negligible overhead, even though CPK is envisoned as the exception, not the rule.\r\n\r\nBy moving all the CPK support in a dedicated module, we can late-include it when a CPK is defined on a model. This is essentially a \"de-optimization\" phase.\r\n\r\ncc @nvasilevski @ptolts @rafaelfranca @matthewd \r\n",
                "created_at": "2023-10-27T08:24:08Z",
                "updated_at": "2023-10-27T08:24:08Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": null,
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/rails/rails/pulls/49808/commits",
                "review_comments_url": "https://api.github.com/repos/rails/rails/pulls/49808/comments",
                "review_comment_url": "https://api.github.com/repos/rails/rails/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/49808/comments",
                "statuses_url": "https://api.github.com/repos/rails/rails/statuses/6bba6efca0d5f5a836470f2e776aee9974947e59",
                "head": {
                    "label": "Shopify:opt-cpk-id-access",
                    "ref": "opt-cpk-id-access",
                    "sha": "6bba6efca0d5f5a836470f2e776aee9974947e59",
                    "user": {
                        "login": "Shopify",
                        "id": 8085,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjgwODU=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/8085?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/Shopify",
                        "html_url": "https://github.com/Shopify",
                        "followers_url": "https://api.github.com/users/Shopify/followers",
                        "following_url": "https://api.github.com/users/Shopify/following{/other_user}",
                        "gists_url": "https://api.github.com/users/Shopify/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/Shopify/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/Shopify/subscriptions",
                        "organizations_url": "https://api.github.com/users/Shopify/orgs",
                        "repos_url": "https://api.github.com/users/Shopify/repos",
                        "events_url": "https://api.github.com/users/Shopify/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/Shopify/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 60858413,
                        "node_id": "MDEwOlJlcG9zaXRvcnk2MDg1ODQxMw==",
                        "name": "rails",
                        "full_name": "Shopify/rails",
                        "private": false,
                        "owner": {
                            "login": "Shopify",
                            "id": 8085,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjgwODU=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/8085?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/Shopify",
                            "html_url": "https://github.com/Shopify",
                            "followers_url": "https://api.github.com/users/Shopify/followers",
                            "following_url": "https://api.github.com/users/Shopify/following{/other_user}",
                            "gists_url": "https://api.github.com/users/Shopify/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/Shopify/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/Shopify/subscriptions",
                            "organizations_url": "https://api.github.com/users/Shopify/orgs",
                            "repos_url": "https://api.github.com/users/Shopify/repos",
                            "events_url": "https://api.github.com/users/Shopify/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/Shopify/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/Shopify/rails",
                        "description": "Ruby on Rails",
                        "fork": true,
                        "url": "https://api.github.com/repos/Shopify/rails",
                        "forks_url": "https://api.github.com/repos/Shopify/rails/forks",
                        "keys_url": "https://api.github.com/repos/Shopify/rails/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/Shopify/rails/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/Shopify/rails/teams",
                        "hooks_url": "https://api.github.com/repos/Shopify/rails/hooks",
                        "issue_events_url": "https://api.github.com/repos/Shopify/rails/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/Shopify/rails/events",
                        "assignees_url": "https://api.github.com/repos/Shopify/rails/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/Shopify/rails/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/Shopify/rails/tags",
                        "blobs_url": "https://api.github.com/repos/Shopify/rails/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/Shopify/rails/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/Shopify/rails/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/Shopify/rails/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/Shopify/rails/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/Shopify/rails/languages",
                        "stargazers_url": "https://api.github.com/repos/Shopify/rails/stargazers",
                        "contributors_url": "https://api.github.com/repos/Shopify/rails/contributors",
                        "subscribers_url": "https://api.github.com/repos/Shopify/rails/subscribers",
                        "subscription_url": "https://api.github.com/repos/Shopify/rails/subscription",
                        "commits_url": "https://api.github.com/repos/Shopify/rails/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/Shopify/rails/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/Shopify/rails/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/Shopify/rails/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/Shopify/rails/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/Shopify/rails/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/Shopify/rails/merges",
                        "archive_url": "https://api.github.com/repos/Shopify/rails/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/Shopify/rails/downloads",
                        "issues_url": "https://api.github.com/repos/Shopify/rails/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/Shopify/rails/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/Shopify/rails/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/Shopify/rails/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/Shopify/rails/labels{/name}",
                        "releases_url": "https://api.github.com/repos/Shopify/rails/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/Shopify/rails/deployments",
                        "created_at": "2016-06-10T15:34:34Z",
                        "updated_at": "2023-04-20T01:30:38Z",
                        "pushed_at": "2023-10-27T08:23:28Z",
                        "git_url": "git://github.com/Shopify/rails.git",
                        "ssh_url": "git@github.com:Shopify/rails.git",
                        "clone_url": "https://github.com/Shopify/rails.git",
                        "svn_url": "https://github.com/Shopify/rails",
                        "homepage": "http://rubyonrails.org",
                        "size": 229627,
                        "stargazers_count": 13,
                        "watchers_count": 13,
                        "language": "Ruby",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 7,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 0,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 7,
                        "open_issues": 0,
                        "watchers": 13,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "rails:main",
                    "ref": "main",
                    "sha": "392e5efb71c891868f63e95e944b01ebeb476ff5",
                    "user": {
                        "login": "rails",
                        "id": 4223,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQyMjM=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4223?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/rails",
                        "html_url": "https://github.com/rails",
                        "followers_url": "https://api.github.com/users/rails/followers",
                        "following_url": "https://api.github.com/users/rails/following{/other_user}",
                        "gists_url": "https://api.github.com/users/rails/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/rails/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/rails/subscriptions",
                        "organizations_url": "https://api.github.com/users/rails/orgs",
                        "repos_url": "https://api.github.com/users/rails/repos",
                        "events_url": "https://api.github.com/users/rails/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/rails/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 8514,
                        "node_id": "MDEwOlJlcG9zaXRvcnk4NTE0",
                        "name": "rails",
                        "full_name": "rails/rails",
                        "private": false,
                        "owner": {
                            "login": "rails",
                            "id": 4223,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQyMjM=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4223?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/rails",
                            "html_url": "https://github.com/rails",
                            "followers_url": "https://api.github.com/users/rails/followers",
                            "following_url": "https://api.github.com/users/rails/following{/other_user}",
                            "gists_url": "https://api.github.com/users/rails/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/rails/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/rails/subscriptions",
                            "organizations_url": "https://api.github.com/users/rails/orgs",
                            "repos_url": "https://api.github.com/users/rails/repos",
                            "events_url": "https://api.github.com/users/rails/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/rails/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/rails/rails",
                        "description": "Ruby on Rails",
                        "fork": false,
                        "url": "https://api.github.com/repos/rails/rails",
                        "forks_url": "https://api.github.com/repos/rails/rails/forks",
                        "keys_url": "https://api.github.com/repos/rails/rails/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/rails/rails/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/rails/rails/teams",
                        "hooks_url": "https://api.github.com/repos/rails/rails/hooks",
                        "issue_events_url": "https://api.github.com/repos/rails/rails/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/rails/rails/events",
                        "assignees_url": "https://api.github.com/repos/rails/rails/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/rails/rails/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/rails/rails/tags",
                        "blobs_url": "https://api.github.com/repos/rails/rails/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/rails/rails/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/rails/rails/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/rails/rails/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/rails/rails/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/rails/rails/languages",
                        "stargazers_url": "https://api.github.com/repos/rails/rails/stargazers",
                        "contributors_url": "https://api.github.com/repos/rails/rails/contributors",
                        "subscribers_url": "https://api.github.com/repos/rails/rails/subscribers",
                        "subscription_url": "https://api.github.com/repos/rails/rails/subscription",
                        "commits_url": "https://api.github.com/repos/rails/rails/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/rails/rails/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/rails/rails/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/rails/rails/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/rails/rails/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/rails/rails/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/rails/rails/merges",
                        "archive_url": "https://api.github.com/repos/rails/rails/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/rails/rails/downloads",
                        "issues_url": "https://api.github.com/repos/rails/rails/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/rails/rails/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/rails/rails/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/rails/rails/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/rails/rails/labels{/name}",
                        "releases_url": "https://api.github.com/repos/rails/rails/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/rails/rails/deployments",
                        "created_at": "2008-04-11T02:19:47Z",
                        "updated_at": "2023-10-27T08:11:08Z",
                        "pushed_at": "2023-10-27T08:24:09Z",
                        "git_url": "git://github.com/rails/rails.git",
                        "ssh_url": "git@github.com:rails/rails.git",
                        "clone_url": "https://github.com/rails/rails.git",
                        "svn_url": "https://github.com/rails/rails",
                        "homepage": "https://rubyonrails.org",
                        "size": 267388,
                        "stargazers_count": 53684,
                        "watchers_count": 53684,
                        "language": "Ruby",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 21395,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 939,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "activejob",
                            "activerecord",
                            "framework",
                            "html",
                            "mvc",
                            "rails",
                            "ruby"
                        ],
                        "visibility": "public",
                        "forks": 21395,
                        "open_issues": 939,
                        "watchers": 53684,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49808"
                    },
                    "html": {
                        "href": "https://github.com/rails/rails/pull/49808"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/rails/rails/issues/49808"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/rails/rails/issues/49808/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49808/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49808/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/rails/rails/statuses/6bba6efca0d5f5a836470f2e776aee9974947e59"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null,
                "merged": false,
                "mergeable": null,
                "rebaseable": null,
                "mergeable_state": "unknown",
                "merged_by": null,
                "comments": 0,
                "review_comments": 0,
                "maintainer_can_modify": false,
                "commits": 1,
                "additions": 112,
                "deletions": 56,
                "changed_files": 4
            }
        },
        "public": true,
        "created_at": "2023-10-27T08:24:10Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32892149205",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 16350274,
            "login": "dhavalsingh",
            "display_login": "dhavalsingh",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dhavalsingh",
            "avatar_url": "https://avatars.githubusercontent.com/u/16350274?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/rails/rails/issues/49324",
                "repository_url": "https://api.github.com/repos/rails/rails",
                "labels_url": "https://api.github.com/repos/rails/rails/issues/49324/labels{/name}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/49324/comments",
                "events_url": "https://api.github.com/repos/rails/rails/issues/49324/events",
                "html_url": "https://github.com/rails/rails/issues/49324",
                "id": 1903862903,
                "node_id": "I_kwDNIULOcXqkdw",
                "number": 49324,
                "title": "Cannot detect when touch is called with belongs_to touch: true",
                "user": {
                    "login": "humphreyja",
                    "id": 6947247,
                    "node_id": "MDQ6VXNlcjY5NDcyNDc=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/6947247?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/humphreyja",
                    "html_url": "https://github.com/humphreyja",
                    "followers_url": "https://api.github.com/users/humphreyja/followers",
                    "following_url": "https://api.github.com/users/humphreyja/following{/other_user}",
                    "gists_url": "https://api.github.com/users/humphreyja/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/humphreyja/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/humphreyja/subscriptions",
                    "organizations_url": "https://api.github.com/users/humphreyja/orgs",
                    "repos_url": "https://api.github.com/users/humphreyja/repos",
                    "events_url": "https://api.github.com/users/humphreyja/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/humphreyja/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 107191,
                        "node_id": "MDU6TGFiZWwxMDcxOTE=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
                        "name": "activerecord",
                        "color": "0b02e1",
                        "default": false,
                        "description": null
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 9,
                "created_at": "2023-09-19T23:44:30Z",
                "updated_at": "2023-10-27T08:15:02Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "I can't seem to find a way to detect when a touch event is called in an `after_commit` hook when the touch event is triggered by a relational \"touch: true\" event. If I manually call `comment.touch` the behavior is different and I can detect that the change being made is only a touch event.\r\n\r\nIn our system we rely on `updated_at` for caching, but we also have plenty of actioncable subscriptions and various other calculations being called on `after_commit`, but we only want to actually run those events when the record was updated, not just touched from a related record. \r\n\r\nIs there any way to detect when a commit is caused by a `belongs_to ... touch: true`? I can't seem to find anything about it and this seems like it'd be a pretty useful thing...\r\n\r\n```ruby\r\n# frozen_string_literal: true\r\n\r\nrequire \"bundler/inline\"\r\n\r\ngemfile(true) do\r\n  source \"https://rubygems.org\"\r\n\r\n  gem \"rails\", \"7.0.8\"\r\n  gem \"sqlite3\"\r\nend\r\n\r\nrequire \"active_record\"\r\nrequire \"minitest/autorun\"\r\nrequire \"logger\"\r\n\r\n# This connection will do for database-independent bug reports.\r\nActiveRecord::Base.establish_connection(adapter: \"sqlite3\", database: \":memory:\")\r\nActiveRecord::Base.logger = Logger.new(STDOUT)\r\n\r\nActiveRecord::Schema.define do\r\n  create_table :events, force: true do |t|\r\n    t.string :name\r\n    t.timestamps\r\n  end\r\n\r\n  create_table :posts, force: true do |t|\r\n    t.integer :author_id\r\n    t.string :results\r\n    t.timestamps\r\n  end\r\n\r\n  create_table :comments, force: true do |t|\r\n    t.integer :post_id\r\n    t.string :description\r\n    t.timestamps\r\n  end\r\nend\r\n\r\nclass Event < ActiveRecord::Base\r\nend\r\n\r\nclass Post < ActiveRecord::Base\r\n  has_many :comments\r\n\r\n  after_commit :create_change_event, unless: :touched_only?\r\n\r\n  def create_change_event\r\n    Event.create(name: 'POST')\r\n  end\r\n\r\n  def touched_only?\r\n    saved_changes.keys == ['updated_at']\r\n  end\r\nend\r\n\r\nclass Comment < ActiveRecord::Base\r\n  belongs_to :post, touch: true\r\nend\r\n\r\nclass BugTest < Minitest::Test\r\n  def test_relational_touch_should_skip_hook_but_still_touch_parents\r\n    post = Post.create!\r\n    comment = Comment.create!(post:)\r\n    Event.destroy_all\r\n    post.reload\r\n\r\n    assert_equal 0, Event.count, 'should have no events in the database'\r\n\r\n    comment.update(description: 'something...')\r\n    # Post should not create a new updated event because it was touched only\r\n    assert_equal 0, Event.count, 'should still have no events in the database as we do not want to track touch only events'\r\n  end\r\nend\r\n```\r\n\r\n### Expected behavior\r\n<!-- Tell us what should happen -->\r\n`saved_changes` should include `updated_at` to prevent unnecessary operations in the `after_commit` hook.\r\n\r\n### Actual behavior\r\n<!-- Tell us what happens instead -->\r\n`saved_changes` is empty, leading the system to believe that nothing was changed but the `after_commit` hook was still called.\r\n\r\n### System configuration\r\n**Rails version**: 7.0.8\r\n\r\n**Ruby version**: 3.2.2\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/49324/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/rails/rails/issues/49324/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/rails/rails/issues/comments/1782493616",
                "html_url": "https://github.com/rails/rails/issues/49324#issuecomment-1782493616",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/49324",
                "id": 1782493616,
                "node_id": "IC_kwDNIULOaj6xsA",
                "user": {
                    "login": "dhavalsingh",
                    "id": 16350274,
                    "node_id": "MDQ6VXNlcjE2MzUwMjc0",
                    "avatar_url": "https://avatars.githubusercontent.com/u/16350274?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/dhavalsingh",
                    "html_url": "https://github.com/dhavalsingh",
                    "followers_url": "https://api.github.com/users/dhavalsingh/followers",
                    "following_url": "https://api.github.com/users/dhavalsingh/following{/other_user}",
                    "gists_url": "https://api.github.com/users/dhavalsingh/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/dhavalsingh/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/dhavalsingh/subscriptions",
                    "organizations_url": "https://api.github.com/users/dhavalsingh/orgs",
                    "repos_url": "https://api.github.com/users/dhavalsingh/repos",
                    "events_url": "https://api.github.com/users/dhavalsingh/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/dhavalsingh/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T08:15:02Z",
                "updated_at": "2023-10-27T08:15:02Z",
                "author_association": "NONE",
                "body": "I was facing a similar [issue](https://www.reddit.com/r/rails/comments/17h6hlj/using_touch_with_belongs_to_doesnt_resetupdate/?utm_source=share&utm_medium=web2x&context=3)\r\n\r\nI think there are 2 things to be noted here:\r\n\r\n> Indirect changes through touch: true: When touch: true triggers an update, it's somewhat indirect in terms of the object's loaded state within the running Ruby application. The Car object, if it was already loaded, doesn't internally register a change through the typical \"dirty tracking\" mechanisms because, from its perspective within the application, its attributes haven't been manually altered. The touch happens at the database level, and without reloading the Car instance in your Ruby application, you might not see this change reflected in the object's dirty tracking state.\r\n\r\nSecond is something I've also realised recently is \r\n\r\n> Avoid calls to update, save or other methods which create side-effects to the object inside your callback. For example, don't call update(attribute: \"value\") within a callback. This can alter the state of the model and may result in unexpected side effects during commit. Instead, you can safely assign values directly (for example, self.attribute = \"value\") in before_create / before_update or earlier callbacks.\r\n\r\nThis is given in the [docs](https://edgeguides.rubyonrails.org/active_record_callbacks.html#callback-registration).\r\nSo \r\n```\r\n  def create_change_event\r\n    Event.create(name: 'POST')\r\n  end\r\n```\r\nDoing this will have some weird side effects. \r\n\r\nAlthough, i was thinking of raising a PR to update the docs a little for `touch` to mention it doesn't save the state used for dirty tracking in case of indirect touches. This should make things more clear. \r\n\r\nAlso a problem i have with this is, indirect `touch` can trigger an after_commit but not update the dirty method tracking which is not a good idea, as a lot of folks use dirty methods to run callbacks and this can cause a lot of issues. Both of these things IMO should be mentioned somewhere\r\n\r\n\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/comments/1782493616/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T08:15:02Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32891842255",
        "type": "PullRequestEvent",
        "actor": {
            "id": 5657035,
            "login": "fatkodima",
            "display_login": "fatkodima",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fatkodima",
            "avatar_url": "https://avatars.githubusercontent.com/u/5657035?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "opened",
            "number": 49807,
            "pull_request": {
                "url": "https://api.github.com/repos/rails/rails/pulls/49807",
                "id": 1576123034,
                "node_id": "PR_kwDNIULOXfG6mg",
                "html_url": "https://github.com/rails/rails/pull/49807",
                "diff_url": "https://github.com/rails/rails/pull/49807.diff",
                "patch_url": "https://github.com/rails/rails/pull/49807.patch",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/49807",
                "number": 49807,
                "state": "open",
                "locked": false,
                "title": "Fix `ActiveRecord::Promise` example [skip ci]",
                "user": {
                    "login": "fatkodima",
                    "id": 5657035,
                    "node_id": "MDQ6VXNlcjU2NTcwMzU=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/5657035?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/fatkodima",
                    "html_url": "https://github.com/fatkodima",
                    "followers_url": "https://api.github.com/users/fatkodima/followers",
                    "following_url": "https://api.github.com/users/fatkodima/following{/other_user}",
                    "gists_url": "https://api.github.com/users/fatkodima/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/fatkodima/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/fatkodima/subscriptions",
                    "organizations_url": "https://api.github.com/users/fatkodima/orgs",
                    "repos_url": "https://api.github.com/users/fatkodima/repos",
                    "events_url": "https://api.github.com/users/fatkodima/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/fatkodima/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Fixes #49805.",
                "created_at": "2023-10-27T08:02:48Z",
                "updated_at": "2023-10-27T08:02:48Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": null,
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/rails/rails/pulls/49807/commits",
                "review_comments_url": "https://api.github.com/repos/rails/rails/pulls/49807/comments",
                "review_comment_url": "https://api.github.com/repos/rails/rails/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/49807/comments",
                "statuses_url": "https://api.github.com/repos/rails/rails/statuses/da62c2a2956e9a44b9d6c1a504d2a84c11ffaf7b",
                "head": {
                    "label": "fatkodima:fix-promise-example",
                    "ref": "fix-promise-example",
                    "sha": "da62c2a2956e9a44b9d6c1a504d2a84c11ffaf7b",
                    "user": {
                        "login": "fatkodima",
                        "id": 5657035,
                        "node_id": "MDQ6VXNlcjU2NTcwMzU=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/5657035?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/fatkodima",
                        "html_url": "https://github.com/fatkodima",
                        "followers_url": "https://api.github.com/users/fatkodima/followers",
                        "following_url": "https://api.github.com/users/fatkodima/following{/other_user}",
                        "gists_url": "https://api.github.com/users/fatkodima/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/fatkodima/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/fatkodima/subscriptions",
                        "organizations_url": "https://api.github.com/users/fatkodima/orgs",
                        "repos_url": "https://api.github.com/users/fatkodima/repos",
                        "events_url": "https://api.github.com/users/fatkodima/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/fatkodima/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 95306717,
                        "node_id": "MDEwOlJlcG9zaXRvcnk5NTMwNjcxNw==",
                        "name": "rails",
                        "full_name": "fatkodima/rails",
                        "private": false,
                        "owner": {
                            "login": "fatkodima",
                            "id": 5657035,
                            "node_id": "MDQ6VXNlcjU2NTcwMzU=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/5657035?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/fatkodima",
                            "html_url": "https://github.com/fatkodima",
                            "followers_url": "https://api.github.com/users/fatkodima/followers",
                            "following_url": "https://api.github.com/users/fatkodima/following{/other_user}",
                            "gists_url": "https://api.github.com/users/fatkodima/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/fatkodima/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/fatkodima/subscriptions",
                            "organizations_url": "https://api.github.com/users/fatkodima/orgs",
                            "repos_url": "https://api.github.com/users/fatkodima/repos",
                            "events_url": "https://api.github.com/users/fatkodima/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/fatkodima/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/fatkodima/rails",
                        "description": "Ruby on Rails",
                        "fork": true,
                        "url": "https://api.github.com/repos/fatkodima/rails",
                        "forks_url": "https://api.github.com/repos/fatkodima/rails/forks",
                        "keys_url": "https://api.github.com/repos/fatkodima/rails/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/fatkodima/rails/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/fatkodima/rails/teams",
                        "hooks_url": "https://api.github.com/repos/fatkodima/rails/hooks",
                        "issue_events_url": "https://api.github.com/repos/fatkodima/rails/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/fatkodima/rails/events",
                        "assignees_url": "https://api.github.com/repos/fatkodima/rails/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/fatkodima/rails/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/fatkodima/rails/tags",
                        "blobs_url": "https://api.github.com/repos/fatkodima/rails/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/fatkodima/rails/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/fatkodima/rails/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/fatkodima/rails/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/fatkodima/rails/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/fatkodima/rails/languages",
                        "stargazers_url": "https://api.github.com/repos/fatkodima/rails/stargazers",
                        "contributors_url": "https://api.github.com/repos/fatkodima/rails/contributors",
                        "subscribers_url": "https://api.github.com/repos/fatkodima/rails/subscribers",
                        "subscription_url": "https://api.github.com/repos/fatkodima/rails/subscription",
                        "commits_url": "https://api.github.com/repos/fatkodima/rails/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/fatkodima/rails/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/fatkodima/rails/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/fatkodima/rails/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/fatkodima/rails/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/fatkodima/rails/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/fatkodima/rails/merges",
                        "archive_url": "https://api.github.com/repos/fatkodima/rails/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/fatkodima/rails/downloads",
                        "issues_url": "https://api.github.com/repos/fatkodima/rails/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/fatkodima/rails/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/fatkodima/rails/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/fatkodima/rails/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/fatkodima/rails/labels{/name}",
                        "releases_url": "https://api.github.com/repos/fatkodima/rails/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/fatkodima/rails/deployments",
                        "created_at": "2017-06-24T15:40:24Z",
                        "updated_at": "2022-05-30T00:09:03Z",
                        "pushed_at": "2023-10-27T08:02:11Z",
                        "git_url": "git://github.com/fatkodima/rails.git",
                        "ssh_url": "git@github.com:fatkodima/rails.git",
                        "clone_url": "https://github.com/fatkodima/rails.git",
                        "svn_url": "https://github.com/fatkodima/rails",
                        "homepage": "http://rubyonrails.org",
                        "size": 229517,
                        "stargazers_count": 1,
                        "watchers_count": 1,
                        "language": "Ruby",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 0,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 0,
                        "watchers": 1,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "rails:main",
                    "ref": "main",
                    "sha": "392e5efb71c891868f63e95e944b01ebeb476ff5",
                    "user": {
                        "login": "rails",
                        "id": 4223,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQyMjM=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4223?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/rails",
                        "html_url": "https://github.com/rails",
                        "followers_url": "https://api.github.com/users/rails/followers",
                        "following_url": "https://api.github.com/users/rails/following{/other_user}",
                        "gists_url": "https://api.github.com/users/rails/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/rails/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/rails/subscriptions",
                        "organizations_url": "https://api.github.com/users/rails/orgs",
                        "repos_url": "https://api.github.com/users/rails/repos",
                        "events_url": "https://api.github.com/users/rails/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/rails/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 8514,
                        "node_id": "MDEwOlJlcG9zaXRvcnk4NTE0",
                        "name": "rails",
                        "full_name": "rails/rails",
                        "private": false,
                        "owner": {
                            "login": "rails",
                            "id": 4223,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQyMjM=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4223?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/rails",
                            "html_url": "https://github.com/rails",
                            "followers_url": "https://api.github.com/users/rails/followers",
                            "following_url": "https://api.github.com/users/rails/following{/other_user}",
                            "gists_url": "https://api.github.com/users/rails/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/rails/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/rails/subscriptions",
                            "organizations_url": "https://api.github.com/users/rails/orgs",
                            "repos_url": "https://api.github.com/users/rails/repos",
                            "events_url": "https://api.github.com/users/rails/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/rails/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/rails/rails",
                        "description": "Ruby on Rails",
                        "fork": false,
                        "url": "https://api.github.com/repos/rails/rails",
                        "forks_url": "https://api.github.com/repos/rails/rails/forks",
                        "keys_url": "https://api.github.com/repos/rails/rails/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/rails/rails/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/rails/rails/teams",
                        "hooks_url": "https://api.github.com/repos/rails/rails/hooks",
                        "issue_events_url": "https://api.github.com/repos/rails/rails/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/rails/rails/events",
                        "assignees_url": "https://api.github.com/repos/rails/rails/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/rails/rails/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/rails/rails/tags",
                        "blobs_url": "https://api.github.com/repos/rails/rails/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/rails/rails/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/rails/rails/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/rails/rails/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/rails/rails/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/rails/rails/languages",
                        "stargazers_url": "https://api.github.com/repos/rails/rails/stargazers",
                        "contributors_url": "https://api.github.com/repos/rails/rails/contributors",
                        "subscribers_url": "https://api.github.com/repos/rails/rails/subscribers",
                        "subscription_url": "https://api.github.com/repos/rails/rails/subscription",
                        "commits_url": "https://api.github.com/repos/rails/rails/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/rails/rails/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/rails/rails/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/rails/rails/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/rails/rails/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/rails/rails/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/rails/rails/merges",
                        "archive_url": "https://api.github.com/repos/rails/rails/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/rails/rails/downloads",
                        "issues_url": "https://api.github.com/repos/rails/rails/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/rails/rails/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/rails/rails/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/rails/rails/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/rails/rails/labels{/name}",
                        "releases_url": "https://api.github.com/repos/rails/rails/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/rails/rails/deployments",
                        "created_at": "2008-04-11T02:19:47Z",
                        "updated_at": "2023-10-27T06:12:41Z",
                        "pushed_at": "2023-10-27T08:02:49Z",
                        "git_url": "git://github.com/rails/rails.git",
                        "ssh_url": "git@github.com:rails/rails.git",
                        "clone_url": "https://github.com/rails/rails.git",
                        "svn_url": "https://github.com/rails/rails",
                        "homepage": "https://rubyonrails.org",
                        "size": 267388,
                        "stargazers_count": 53687,
                        "watchers_count": 53687,
                        "language": "Ruby",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 21395,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 938,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "activejob",
                            "activerecord",
                            "framework",
                            "html",
                            "mvc",
                            "rails",
                            "ruby"
                        ],
                        "visibility": "public",
                        "forks": 21395,
                        "open_issues": 938,
                        "watchers": 53687,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49807"
                    },
                    "html": {
                        "href": "https://github.com/rails/rails/pull/49807"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/rails/rails/issues/49807"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/rails/rails/issues/49807/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49807/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49807/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/rails/rails/statuses/da62c2a2956e9a44b9d6c1a504d2a84c11ffaf7b"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null,
                "merged": false,
                "mergeable": null,
                "rebaseable": null,
                "mergeable_state": "unknown",
                "merged_by": null,
                "comments": 0,
                "review_comments": 0,
                "maintainer_can_modify": true,
                "commits": 1,
                "additions": 1,
                "deletions": 1,
                "changed_files": 1
            }
        },
        "public": true,
        "created_at": "2023-10-27T08:02:50Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32891301385",
        "type": "PushEvent",
        "actor": {
            "id": 44640,
            "login": "byroot",
            "display_login": "byroot",
            "gravatar_id": "",
            "url": "https://api.github.com/users/byroot",
            "avatar_url": "https://avatars.githubusercontent.com/u/44640?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "repository_id": 8514,
            "push_id": 15588124802,
            "size": 2,
            "distinct_size": 2,
            "ref": "refs/heads/main",
            "head": "392e5efb71c891868f63e95e944b01ebeb476ff5",
            "before": "e33dbe1b3d423143685154b97ae0992f4ab821b8",
            "commits": [
                {
                    "sha": "cb09616b94ae3ec83778ea330ecff27a9d16631d",
                    "author": {
                        "email": "jean.boussier@gmail.com",
                        "name": "Jean Boussier"
                    },
                    "message": "Avoid exposing ActiveSupport::Testing::NoSkip\n\nIt's only meant for Rails internal use.",
                    "distinct": true,
                    "url": "https://api.github.com/repos/rails/rails/commits/cb09616b94ae3ec83778ea330ecff27a9d16631d"
                },
                {
                    "sha": "392e5efb71c891868f63e95e944b01ebeb476ff5",
                    "author": {
                        "email": "jean.boussier@gmail.com",
                        "name": "Jean Boussier"
                    },
                    "message": "Merge pull request #49806 from Shopify/no-skip-visi\n\nAvoid exposing ActiveSupport::Testing::NoSkip",
                    "distinct": true,
                    "url": "https://api.github.com/repos/rails/rails/commits/392e5efb71c891868f63e95e944b01ebeb476ff5"
                }
            ]
        },
        "public": true,
        "created_at": "2023-10-27T07:40:25Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32891301114",
        "type": "PullRequestEvent",
        "actor": {
            "id": 44640,
            "login": "byroot",
            "display_login": "byroot",
            "gravatar_id": "",
            "url": "https://api.github.com/users/byroot",
            "avatar_url": "https://avatars.githubusercontent.com/u/44640?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "closed",
            "number": 49806,
            "pull_request": {
                "url": "https://api.github.com/repos/rails/rails/pulls/49806",
                "id": 1576046616,
                "node_id": "PR_kwDNIULOXfCQGA",
                "html_url": "https://github.com/rails/rails/pull/49806",
                "diff_url": "https://github.com/rails/rails/pull/49806.diff",
                "patch_url": "https://github.com/rails/rails/pull/49806.patch",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/49806",
                "number": 49806,
                "state": "closed",
                "locked": false,
                "title": "Avoid exposing ActiveSupport::Testing::NoSkip",
                "user": {
                    "login": "casperisfine",
                    "id": 19192189,
                    "node_id": "MDQ6VXNlcjE5MTkyMTg5",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19192189?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/casperisfine",
                    "html_url": "https://github.com/casperisfine",
                    "followers_url": "https://api.github.com/users/casperisfine/followers",
                    "following_url": "https://api.github.com/users/casperisfine/following{/other_user}",
                    "gists_url": "https://api.github.com/users/casperisfine/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/casperisfine/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/casperisfine/subscriptions",
                    "organizations_url": "https://api.github.com/users/casperisfine/orgs",
                    "repos_url": "https://api.github.com/users/casperisfine/repos",
                    "events_url": "https://api.github.com/users/casperisfine/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/casperisfine/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "It's only meant for Rails internal use.\r\n",
                "created_at": "2023-10-27T07:04:17Z",
                "updated_at": "2023-10-27T07:40:24Z",
                "closed_at": "2023-10-27T07:40:24Z",
                "merged_at": "2023-10-27T07:40:24Z",
                "merge_commit_sha": "392e5efb71c891868f63e95e944b01ebeb476ff5",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 107194,
                        "node_id": "MDU6TGFiZWwxMDcxOTQ=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activesupport",
                        "name": "activesupport",
                        "color": "FC9300",
                        "default": false,
                        "description": null
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/rails/rails/pulls/49806/commits",
                "review_comments_url": "https://api.github.com/repos/rails/rails/pulls/49806/comments",
                "review_comment_url": "https://api.github.com/repos/rails/rails/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/49806/comments",
                "statuses_url": "https://api.github.com/repos/rails/rails/statuses/cb09616b94ae3ec83778ea330ecff27a9d16631d",
                "head": {
                    "label": "Shopify:no-skip-visi",
                    "ref": "no-skip-visi",
                    "sha": "cb09616b94ae3ec83778ea330ecff27a9d16631d",
                    "user": {
                        "login": "Shopify",
                        "id": 8085,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjgwODU=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/8085?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/Shopify",
                        "html_url": "https://github.com/Shopify",
                        "followers_url": "https://api.github.com/users/Shopify/followers",
                        "following_url": "https://api.github.com/users/Shopify/following{/other_user}",
                        "gists_url": "https://api.github.com/users/Shopify/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/Shopify/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/Shopify/subscriptions",
                        "organizations_url": "https://api.github.com/users/Shopify/orgs",
                        "repos_url": "https://api.github.com/users/Shopify/repos",
                        "events_url": "https://api.github.com/users/Shopify/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/Shopify/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 60858413,
                        "node_id": "MDEwOlJlcG9zaXRvcnk2MDg1ODQxMw==",
                        "name": "rails",
                        "full_name": "Shopify/rails",
                        "private": false,
                        "owner": {
                            "login": "Shopify",
                            "id": 8085,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjgwODU=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/8085?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/Shopify",
                            "html_url": "https://github.com/Shopify",
                            "followers_url": "https://api.github.com/users/Shopify/followers",
                            "following_url": "https://api.github.com/users/Shopify/following{/other_user}",
                            "gists_url": "https://api.github.com/users/Shopify/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/Shopify/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/Shopify/subscriptions",
                            "organizations_url": "https://api.github.com/users/Shopify/orgs",
                            "repos_url": "https://api.github.com/users/Shopify/repos",
                            "events_url": "https://api.github.com/users/Shopify/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/Shopify/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/Shopify/rails",
                        "description": "Ruby on Rails",
                        "fork": true,
                        "url": "https://api.github.com/repos/Shopify/rails",
                        "forks_url": "https://api.github.com/repos/Shopify/rails/forks",
                        "keys_url": "https://api.github.com/repos/Shopify/rails/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/Shopify/rails/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/Shopify/rails/teams",
                        "hooks_url": "https://api.github.com/repos/Shopify/rails/hooks",
                        "issue_events_url": "https://api.github.com/repos/Shopify/rails/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/Shopify/rails/events",
                        "assignees_url": "https://api.github.com/repos/Shopify/rails/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/Shopify/rails/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/Shopify/rails/tags",
                        "blobs_url": "https://api.github.com/repos/Shopify/rails/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/Shopify/rails/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/Shopify/rails/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/Shopify/rails/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/Shopify/rails/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/Shopify/rails/languages",
                        "stargazers_url": "https://api.github.com/repos/Shopify/rails/stargazers",
                        "contributors_url": "https://api.github.com/repos/Shopify/rails/contributors",
                        "subscribers_url": "https://api.github.com/repos/Shopify/rails/subscribers",
                        "subscription_url": "https://api.github.com/repos/Shopify/rails/subscription",
                        "commits_url": "https://api.github.com/repos/Shopify/rails/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/Shopify/rails/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/Shopify/rails/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/Shopify/rails/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/Shopify/rails/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/Shopify/rails/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/Shopify/rails/merges",
                        "archive_url": "https://api.github.com/repos/Shopify/rails/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/Shopify/rails/downloads",
                        "issues_url": "https://api.github.com/repos/Shopify/rails/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/Shopify/rails/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/Shopify/rails/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/Shopify/rails/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/Shopify/rails/labels{/name}",
                        "releases_url": "https://api.github.com/repos/Shopify/rails/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/Shopify/rails/deployments",
                        "created_at": "2016-06-10T15:34:34Z",
                        "updated_at": "2023-04-20T01:30:38Z",
                        "pushed_at": "2023-10-27T07:03:59Z",
                        "git_url": "git://github.com/Shopify/rails.git",
                        "ssh_url": "git@github.com:Shopify/rails.git",
                        "clone_url": "https://github.com/Shopify/rails.git",
                        "svn_url": "https://github.com/Shopify/rails",
                        "homepage": "http://rubyonrails.org",
                        "size": 229540,
                        "stargazers_count": 13,
                        "watchers_count": 13,
                        "language": "Ruby",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 7,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 0,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 7,
                        "open_issues": 0,
                        "watchers": 13,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "rails:main",
                    "ref": "main",
                    "sha": "e33dbe1b3d423143685154b97ae0992f4ab821b8",
                    "user": {
                        "login": "rails",
                        "id": 4223,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQyMjM=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4223?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/rails",
                        "html_url": "https://github.com/rails",
                        "followers_url": "https://api.github.com/users/rails/followers",
                        "following_url": "https://api.github.com/users/rails/following{/other_user}",
                        "gists_url": "https://api.github.com/users/rails/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/rails/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/rails/subscriptions",
                        "organizations_url": "https://api.github.com/users/rails/orgs",
                        "repos_url": "https://api.github.com/users/rails/repos",
                        "events_url": "https://api.github.com/users/rails/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/rails/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 8514,
                        "node_id": "MDEwOlJlcG9zaXRvcnk4NTE0",
                        "name": "rails",
                        "full_name": "rails/rails",
                        "private": false,
                        "owner": {
                            "login": "rails",
                            "id": 4223,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQyMjM=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4223?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/rails",
                            "html_url": "https://github.com/rails",
                            "followers_url": "https://api.github.com/users/rails/followers",
                            "following_url": "https://api.github.com/users/rails/following{/other_user}",
                            "gists_url": "https://api.github.com/users/rails/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/rails/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/rails/subscriptions",
                            "organizations_url": "https://api.github.com/users/rails/orgs",
                            "repos_url": "https://api.github.com/users/rails/repos",
                            "events_url": "https://api.github.com/users/rails/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/rails/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/rails/rails",
                        "description": "Ruby on Rails",
                        "fork": false,
                        "url": "https://api.github.com/repos/rails/rails",
                        "forks_url": "https://api.github.com/repos/rails/rails/forks",
                        "keys_url": "https://api.github.com/repos/rails/rails/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/rails/rails/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/rails/rails/teams",
                        "hooks_url": "https://api.github.com/repos/rails/rails/hooks",
                        "issue_events_url": "https://api.github.com/repos/rails/rails/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/rails/rails/events",
                        "assignees_url": "https://api.github.com/repos/rails/rails/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/rails/rails/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/rails/rails/tags",
                        "blobs_url": "https://api.github.com/repos/rails/rails/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/rails/rails/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/rails/rails/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/rails/rails/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/rails/rails/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/rails/rails/languages",
                        "stargazers_url": "https://api.github.com/repos/rails/rails/stargazers",
                        "contributors_url": "https://api.github.com/repos/rails/rails/contributors",
                        "subscribers_url": "https://api.github.com/repos/rails/rails/subscribers",
                        "subscription_url": "https://api.github.com/repos/rails/rails/subscription",
                        "commits_url": "https://api.github.com/repos/rails/rails/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/rails/rails/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/rails/rails/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/rails/rails/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/rails/rails/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/rails/rails/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/rails/rails/merges",
                        "archive_url": "https://api.github.com/repos/rails/rails/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/rails/rails/downloads",
                        "issues_url": "https://api.github.com/repos/rails/rails/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/rails/rails/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/rails/rails/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/rails/rails/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/rails/rails/labels{/name}",
                        "releases_url": "https://api.github.com/repos/rails/rails/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/rails/rails/deployments",
                        "created_at": "2008-04-11T02:19:47Z",
                        "updated_at": "2023-10-27T06:12:41Z",
                        "pushed_at": "2023-10-27T07:40:24Z",
                        "git_url": "git://github.com/rails/rails.git",
                        "ssh_url": "git@github.com:rails/rails.git",
                        "clone_url": "https://github.com/rails/rails.git",
                        "svn_url": "https://github.com/rails/rails",
                        "homepage": "https://rubyonrails.org",
                        "size": 267388,
                        "stargazers_count": 53687,
                        "watchers_count": 53687,
                        "language": "Ruby",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 21395,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 937,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "activejob",
                            "activerecord",
                            "framework",
                            "html",
                            "mvc",
                            "rails",
                            "ruby"
                        ],
                        "visibility": "public",
                        "forks": 21395,
                        "open_issues": 937,
                        "watchers": 53687,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49806"
                    },
                    "html": {
                        "href": "https://github.com/rails/rails/pull/49806"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/rails/rails/issues/49806"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/rails/rails/issues/49806/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49806/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49806/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/rails/rails/statuses/cb09616b94ae3ec83778ea330ecff27a9d16631d"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null,
                "merged": true,
                "mergeable": null,
                "rebaseable": null,
                "mergeable_state": "unknown",
                "merged_by": {
                    "login": "byroot",
                    "id": 44640,
                    "node_id": "MDQ6VXNlcjQ0NjQw",
                    "avatar_url": "https://avatars.githubusercontent.com/u/44640?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/byroot",
                    "html_url": "https://github.com/byroot",
                    "followers_url": "https://api.github.com/users/byroot/followers",
                    "following_url": "https://api.github.com/users/byroot/following{/other_user}",
                    "gists_url": "https://api.github.com/users/byroot/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/byroot/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/byroot/subscriptions",
                    "organizations_url": "https://api.github.com/users/byroot/orgs",
                    "repos_url": "https://api.github.com/users/byroot/repos",
                    "events_url": "https://api.github.com/users/byroot/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/byroot/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "comments": 0,
                "review_comments": 0,
                "maintainer_can_modify": false,
                "commits": 1,
                "additions": 9,
                "deletions": 16,
                "changed_files": 2
            }
        },
        "public": true,
        "created_at": "2023-10-27T07:40:25Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32890472140",
        "type": "PullRequestEvent",
        "actor": {
            "id": 19192189,
            "login": "casperisfine",
            "display_login": "casperisfine",
            "gravatar_id": "",
            "url": "https://api.github.com/users/casperisfine",
            "avatar_url": "https://avatars.githubusercontent.com/u/19192189?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "opened",
            "number": 49806,
            "pull_request": {
                "url": "https://api.github.com/repos/rails/rails/pulls/49806",
                "id": 1576046616,
                "node_id": "PR_kwDNIULOXfCQGA",
                "html_url": "https://github.com/rails/rails/pull/49806",
                "diff_url": "https://github.com/rails/rails/pull/49806.diff",
                "patch_url": "https://github.com/rails/rails/pull/49806.patch",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/49806",
                "number": 49806,
                "state": "open",
                "locked": false,
                "title": "Avoid exposing ActiveSupport::Testing::NoSkip",
                "user": {
                    "login": "casperisfine",
                    "id": 19192189,
                    "node_id": "MDQ6VXNlcjE5MTkyMTg5",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19192189?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/casperisfine",
                    "html_url": "https://github.com/casperisfine",
                    "followers_url": "https://api.github.com/users/casperisfine/followers",
                    "following_url": "https://api.github.com/users/casperisfine/following{/other_user}",
                    "gists_url": "https://api.github.com/users/casperisfine/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/casperisfine/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/casperisfine/subscriptions",
                    "organizations_url": "https://api.github.com/users/casperisfine/orgs",
                    "repos_url": "https://api.github.com/users/casperisfine/repos",
                    "events_url": "https://api.github.com/users/casperisfine/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/casperisfine/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "It's only meant for Rails internal use.\r\n",
                "created_at": "2023-10-27T07:04:17Z",
                "updated_at": "2023-10-27T07:04:17Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": null,
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/rails/rails/pulls/49806/commits",
                "review_comments_url": "https://api.github.com/repos/rails/rails/pulls/49806/comments",
                "review_comment_url": "https://api.github.com/repos/rails/rails/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/49806/comments",
                "statuses_url": "https://api.github.com/repos/rails/rails/statuses/cb09616b94ae3ec83778ea330ecff27a9d16631d",
                "head": {
                    "label": "Shopify:no-skip-visi",
                    "ref": "no-skip-visi",
                    "sha": "cb09616b94ae3ec83778ea330ecff27a9d16631d",
                    "user": {
                        "login": "Shopify",
                        "id": 8085,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjgwODU=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/8085?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/Shopify",
                        "html_url": "https://github.com/Shopify",
                        "followers_url": "https://api.github.com/users/Shopify/followers",
                        "following_url": "https://api.github.com/users/Shopify/following{/other_user}",
                        "gists_url": "https://api.github.com/users/Shopify/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/Shopify/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/Shopify/subscriptions",
                        "organizations_url": "https://api.github.com/users/Shopify/orgs",
                        "repos_url": "https://api.github.com/users/Shopify/repos",
                        "events_url": "https://api.github.com/users/Shopify/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/Shopify/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 60858413,
                        "node_id": "MDEwOlJlcG9zaXRvcnk2MDg1ODQxMw==",
                        "name": "rails",
                        "full_name": "Shopify/rails",
                        "private": false,
                        "owner": {
                            "login": "Shopify",
                            "id": 8085,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjgwODU=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/8085?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/Shopify",
                            "html_url": "https://github.com/Shopify",
                            "followers_url": "https://api.github.com/users/Shopify/followers",
                            "following_url": "https://api.github.com/users/Shopify/following{/other_user}",
                            "gists_url": "https://api.github.com/users/Shopify/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/Shopify/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/Shopify/subscriptions",
                            "organizations_url": "https://api.github.com/users/Shopify/orgs",
                            "repos_url": "https://api.github.com/users/Shopify/repos",
                            "events_url": "https://api.github.com/users/Shopify/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/Shopify/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/Shopify/rails",
                        "description": "Ruby on Rails",
                        "fork": true,
                        "url": "https://api.github.com/repos/Shopify/rails",
                        "forks_url": "https://api.github.com/repos/Shopify/rails/forks",
                        "keys_url": "https://api.github.com/repos/Shopify/rails/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/Shopify/rails/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/Shopify/rails/teams",
                        "hooks_url": "https://api.github.com/repos/Shopify/rails/hooks",
                        "issue_events_url": "https://api.github.com/repos/Shopify/rails/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/Shopify/rails/events",
                        "assignees_url": "https://api.github.com/repos/Shopify/rails/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/Shopify/rails/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/Shopify/rails/tags",
                        "blobs_url": "https://api.github.com/repos/Shopify/rails/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/Shopify/rails/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/Shopify/rails/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/Shopify/rails/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/Shopify/rails/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/Shopify/rails/languages",
                        "stargazers_url": "https://api.github.com/repos/Shopify/rails/stargazers",
                        "contributors_url": "https://api.github.com/repos/Shopify/rails/contributors",
                        "subscribers_url": "https://api.github.com/repos/Shopify/rails/subscribers",
                        "subscription_url": "https://api.github.com/repos/Shopify/rails/subscription",
                        "commits_url": "https://api.github.com/repos/Shopify/rails/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/Shopify/rails/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/Shopify/rails/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/Shopify/rails/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/Shopify/rails/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/Shopify/rails/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/Shopify/rails/merges",
                        "archive_url": "https://api.github.com/repos/Shopify/rails/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/Shopify/rails/downloads",
                        "issues_url": "https://api.github.com/repos/Shopify/rails/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/Shopify/rails/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/Shopify/rails/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/Shopify/rails/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/Shopify/rails/labels{/name}",
                        "releases_url": "https://api.github.com/repos/Shopify/rails/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/Shopify/rails/deployments",
                        "created_at": "2016-06-10T15:34:34Z",
                        "updated_at": "2023-04-20T01:30:38Z",
                        "pushed_at": "2023-10-27T07:03:59Z",
                        "git_url": "git://github.com/Shopify/rails.git",
                        "ssh_url": "git@github.com:Shopify/rails.git",
                        "clone_url": "https://github.com/Shopify/rails.git",
                        "svn_url": "https://github.com/Shopify/rails",
                        "homepage": "http://rubyonrails.org",
                        "size": 229540,
                        "stargazers_count": 13,
                        "watchers_count": 13,
                        "language": "Ruby",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 7,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 0,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 7,
                        "open_issues": 0,
                        "watchers": 13,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "rails:main",
                    "ref": "main",
                    "sha": "e33dbe1b3d423143685154b97ae0992f4ab821b8",
                    "user": {
                        "login": "rails",
                        "id": 4223,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQyMjM=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4223?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/rails",
                        "html_url": "https://github.com/rails",
                        "followers_url": "https://api.github.com/users/rails/followers",
                        "following_url": "https://api.github.com/users/rails/following{/other_user}",
                        "gists_url": "https://api.github.com/users/rails/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/rails/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/rails/subscriptions",
                        "organizations_url": "https://api.github.com/users/rails/orgs",
                        "repos_url": "https://api.github.com/users/rails/repos",
                        "events_url": "https://api.github.com/users/rails/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/rails/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 8514,
                        "node_id": "MDEwOlJlcG9zaXRvcnk4NTE0",
                        "name": "rails",
                        "full_name": "rails/rails",
                        "private": false,
                        "owner": {
                            "login": "rails",
                            "id": 4223,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQyMjM=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4223?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/rails",
                            "html_url": "https://github.com/rails",
                            "followers_url": "https://api.github.com/users/rails/followers",
                            "following_url": "https://api.github.com/users/rails/following{/other_user}",
                            "gists_url": "https://api.github.com/users/rails/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/rails/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/rails/subscriptions",
                            "organizations_url": "https://api.github.com/users/rails/orgs",
                            "repos_url": "https://api.github.com/users/rails/repos",
                            "events_url": "https://api.github.com/users/rails/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/rails/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/rails/rails",
                        "description": "Ruby on Rails",
                        "fork": false,
                        "url": "https://api.github.com/repos/rails/rails",
                        "forks_url": "https://api.github.com/repos/rails/rails/forks",
                        "keys_url": "https://api.github.com/repos/rails/rails/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/rails/rails/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/rails/rails/teams",
                        "hooks_url": "https://api.github.com/repos/rails/rails/hooks",
                        "issue_events_url": "https://api.github.com/repos/rails/rails/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/rails/rails/events",
                        "assignees_url": "https://api.github.com/repos/rails/rails/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/rails/rails/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/rails/rails/tags",
                        "blobs_url": "https://api.github.com/repos/rails/rails/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/rails/rails/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/rails/rails/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/rails/rails/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/rails/rails/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/rails/rails/languages",
                        "stargazers_url": "https://api.github.com/repos/rails/rails/stargazers",
                        "contributors_url": "https://api.github.com/repos/rails/rails/contributors",
                        "subscribers_url": "https://api.github.com/repos/rails/rails/subscribers",
                        "subscription_url": "https://api.github.com/repos/rails/rails/subscription",
                        "commits_url": "https://api.github.com/repos/rails/rails/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/rails/rails/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/rails/rails/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/rails/rails/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/rails/rails/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/rails/rails/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/rails/rails/merges",
                        "archive_url": "https://api.github.com/repos/rails/rails/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/rails/rails/downloads",
                        "issues_url": "https://api.github.com/repos/rails/rails/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/rails/rails/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/rails/rails/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/rails/rails/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/rails/rails/labels{/name}",
                        "releases_url": "https://api.github.com/repos/rails/rails/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/rails/rails/deployments",
                        "created_at": "2008-04-11T02:19:47Z",
                        "updated_at": "2023-10-27T06:12:41Z",
                        "pushed_at": "2023-10-27T07:04:17Z",
                        "git_url": "git://github.com/rails/rails.git",
                        "ssh_url": "git@github.com:rails/rails.git",
                        "clone_url": "https://github.com/rails/rails.git",
                        "svn_url": "https://github.com/rails/rails",
                        "homepage": "https://rubyonrails.org",
                        "size": 267388,
                        "stargazers_count": 53687,
                        "watchers_count": 53687,
                        "language": "Ruby",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 21395,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 938,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "activejob",
                            "activerecord",
                            "framework",
                            "html",
                            "mvc",
                            "rails",
                            "ruby"
                        ],
                        "visibility": "public",
                        "forks": 21395,
                        "open_issues": 938,
                        "watchers": 53687,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49806"
                    },
                    "html": {
                        "href": "https://github.com/rails/rails/pull/49806"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/rails/rails/issues/49806"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/rails/rails/issues/49806/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49806/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49806/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/rails/rails/statuses/cb09616b94ae3ec83778ea330ecff27a9d16631d"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null,
                "merged": false,
                "mergeable": null,
                "rebaseable": null,
                "mergeable_state": "unknown",
                "merged_by": null,
                "comments": 0,
                "review_comments": 0,
                "maintainer_can_modify": false,
                "commits": 1,
                "additions": 9,
                "deletions": 16,
                "changed_files": 2
            }
        },
        "public": true,
        "created_at": "2023-10-27T07:04:18Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32890403602",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 1034,
            "login": "matthewd",
            "display_login": "matthewd",
            "gravatar_id": "",
            "url": "https://api.github.com/users/matthewd",
            "avatar_url": "https://avatars.githubusercontent.com/u/1034?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/rails/rails/issues/49802",
                "repository_url": "https://api.github.com/repos/rails/rails",
                "labels_url": "https://api.github.com/repos/rails/rails/issues/49802/labels{/name}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/49802/comments",
                "events_url": "https://api.github.com/repos/rails/rails/issues/49802/events",
                "html_url": "https://github.com/rails/rails/pull/49802",
                "id": 1964535188,
                "node_id": "PR_kwDNIULOXeu90g",
                "number": 49802,
                "title": "Recover from failed connections in PostgreSQL",
                "user": {
                    "login": "composerinteralia",
                    "id": 13696143,
                    "node_id": "MDQ6VXNlcjEzNjk2MTQz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/13696143?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/composerinteralia",
                    "html_url": "https://github.com/composerinteralia",
                    "followers_url": "https://api.github.com/users/composerinteralia/followers",
                    "following_url": "https://api.github.com/users/composerinteralia/following{/other_user}",
                    "gists_url": "https://api.github.com/users/composerinteralia/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/composerinteralia/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/composerinteralia/subscriptions",
                    "organizations_url": "https://api.github.com/users/composerinteralia/orgs",
                    "repos_url": "https://api.github.com/users/composerinteralia/repos",
                    "events_url": "https://api.github.com/users/composerinteralia/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/composerinteralia/received_events",
                    "type": "User",
                    "site_admin": true
                },
                "labels": [
                    {
                        "id": 107191,
                        "node_id": "MDU6TGFiZWwxMDcxOTE=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
                        "name": "activerecord",
                        "color": "0b02e1",
                        "default": false,
                        "description": null
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 2,
                "created_at": "2023-10-26T23:51:52Z",
                "updated_at": "2023-10-27T07:01:07Z",
                "closed_at": null,
                "author_association": "MEMBER",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/rails/rails/pulls/49802",
                    "html_url": "https://github.com/rails/rails/pull/49802",
                    "diff_url": "https://github.com/rails/rails/pull/49802.diff",
                    "patch_url": "https://github.com/rails/rails/pull/49802.patch",
                    "merged_at": null
                },
                "body": "Fixes https://github.com/rails/rails/issues/49781\r\n\r\nPrior to this commit, the PostgreSQL adapter could end up holding onto a broken connection longer than expected, potentially **into the next request after the executor checkin/checkout**.\r\n\r\nThe problem is that the PostgreSQL adapter was using [two separate calls] to `with_raw_connection`, one for preparing a statement and another for executing it. That's fine before the statement is added to the statement pool, but once it the statement exists the first call to `with_raw_connection` [does not actually use the connection]. But that doesn't stop us from marking the connection as [`@verified`][verified], thereby preventing the second `with_raw_connection` from verifying and getting a chance to reconnect.\r\n\r\n[two separate calls]: https://github.com/rails/rails/blob/e33dbe1b3d423143685154b97ae0992f4ab821b8/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb#L910-L917\r\n[does not actually use the connection]: https://github.com/rails/rails/blob/490b9fc22faefca30565a970a8727c915de589ff/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb#L964-L966\r\n[verified]: https://github.com/rails/rails/blob/e33dbe1b3d423143685154b97ae0992f4ab821b8/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb#L1032\r\n\r\n```rb\r\nPost.first\r\n#=> prepare_statement verifies the connection (if needed) and populates the statement pool\r\n#=> exec_prepared succeeds\r\n\r\n#=> Oops!, we lost the connection for whatever reason\r\n\r\nPost.first\r\n#=> prepare_statement returns the statement from the statement pool, connection still marked as verified\r\n#=> exec_prepared fails, marks the connection as unverified\r\n\r\nPost.first\r\n#=> prepare_statement returns the statement from the statement pool, marks the connection as verified!!!\r\n#=> exec_prepared fails, marks the connection as unverified\r\n\r\n#=> request finishes, connection gets marked as unverified for the next request\r\n\r\nPost.first\r\n#=> prepare_statement returns the statement from the statement pool, marks the connection as verified!!!\r\n#=> exec_prepared fails, marks the connection as unverified\r\n```\r\n\r\nThe only way to recover is to execute a statement that hasn't been prepared yet, one that isn't prepared because it has no binds, or one that has `allow_retry: true` (which I think is limited to a few internal queries at the moment\u2014we don't pass the value through to `with_raw_connection` for prepared statements anyway).\r\n\r\nThis commit fixes the problem by preparing and executing the statement within a single `with_raw_connection` block. This is what the other adapters with prepared statements already do.\r\n\r\nIt makes more sense this way\u2014even if we managed to reconnect before executing the statement in the old code, we'd be referencing a prepared statement from a different connection, so it'd fail anyway. Having the prepare and execute in the same `with_raw_connection` means if we do need to reconnect, we'll start from the beginning and prepare the statement again on the fresh connection.\r\n\r\nNote that this change does get rid of connection retries on preparing statements, but I think that's OK. It matches the other adapters, matches the Rails 7.0 behavior, and it's still better than ending up with a broken connection.\r\n\r\n<!--\r\nThanks for contributing to Rails!\r\n\r\nPlease do not make *Draft* pull requests, as they still send\r\nnotifications to everyone watching the Rails repo.\r\n\r\nCreate a pull request when it is ready for review and feedback\r\nfrom the Rails team :).\r\n\r\nIf your pull request affects documentation or any non-code\r\nchanges, guidelines for those changes are [available\r\nhere](https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation)\r\n\r\nAbout this template\r\n\r\nThe following template aims to help contributors write a good description for their pull requests.\r\nWe'd like you to provide a description of the changes in your pull request (i.e. bugs fixed or features added), motivation behind the changes, and complete the checklist below before opening a pull request.\r\n\r\nFeel free to discard it if you need to (e.g. when you just fix a typo). -->\r\n\r\n### Checklist\r\n\r\nBefore submitting the PR make sure the following are checked:\r\n\r\n* [x] This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.\r\n* [x] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: `[Fix #issue-number]`\r\n* [x] Tests are added or updated if you fix a bug or add a feature.\r\n* [x] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/49802/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/rails/rails/issues/49802/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/rails/rails/issues/comments/1782401780",
                "html_url": "https://github.com/rails/rails/pull/49802#issuecomment-1782401780",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/49802",
                "id": 1782401780,
                "node_id": "IC_kwDNIULOaj1K9A",
                "user": {
                    "login": "matthewd",
                    "id": 1034,
                    "node_id": "MDQ6VXNlcjEwMzQ=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/1034?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/matthewd",
                    "html_url": "https://github.com/matthewd",
                    "followers_url": "https://api.github.com/users/matthewd/followers",
                    "following_url": "https://api.github.com/users/matthewd/following{/other_user}",
                    "gists_url": "https://api.github.com/users/matthewd/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/matthewd/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/matthewd/subscriptions",
                    "organizations_url": "https://api.github.com/users/matthewd/orgs",
                    "repos_url": "https://api.github.com/users/matthewd/repos",
                    "events_url": "https://api.github.com/users/matthewd/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/matthewd/received_events",
                    "type": "User",
                    "site_admin": true
                },
                "created_at": "2023-10-27T07:01:07Z",
                "updated_at": "2023-10-27T07:01:07Z",
                "author_association": "MEMBER",
                "body": "> that doesn't stop us from marking the connection as [@verified](https://github.com/rails/rails/blob/e33dbe1b3d423143685154b97ae0992f4ab821b8/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb#L1032)\r\n\r\nYikes! This feels like a concerning property of the current API -- `quote_string`, say, might notice some sorts of connection-breakage, but does not do the end-to-end test that 'verified' is supposed to imply. Maybe we need to push a `verified!` in to the callers that definitively exercise the connection. \ud83e\udd14 \r\n\r\n> Note that this change does get rid of connection retries on preparing statements, but I think that's OK\r\n\r\nYeah, it's not ideal -- an unverified connection will do explicit verification, when it would've been fine to rely on the PREPARE -- but it's not terrible, and would only have that benefit in the presumably-rare not-yet-prepared case. Making a [theoretical] retryable prepared query actually work in its retry seems like a fair win.",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/comments/1782401780/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T07:01:08Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32890336797",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 19192189,
            "login": "casperisfine",
            "display_login": "casperisfine",
            "gravatar_id": "",
            "url": "https://api.github.com/users/casperisfine",
            "avatar_url": "https://avatars.githubusercontent.com/u/19192189?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/rails/rails/issues/49798",
                "repository_url": "https://api.github.com/repos/rails/rails",
                "labels_url": "https://api.github.com/repos/rails/rails/issues/49798/labels{/name}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/49798/comments",
                "events_url": "https://api.github.com/repos/rails/rails/issues/49798/events",
                "html_url": "https://github.com/rails/rails/pull/49798",
                "id": 1963746565,
                "node_id": "PR_kwDNIULOXeDtEw",
                "number": 49798,
                "title": "Optimize Active Record primary key methods",
                "user": {
                    "login": "casperisfine",
                    "id": 19192189,
                    "node_id": "MDQ6VXNlcjE5MTkyMTg5",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19192189?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/casperisfine",
                    "html_url": "https://github.com/casperisfine",
                    "followers_url": "https://api.github.com/users/casperisfine/followers",
                    "following_url": "https://api.github.com/users/casperisfine/following{/other_user}",
                    "gists_url": "https://api.github.com/users/casperisfine/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/casperisfine/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/casperisfine/subscriptions",
                    "organizations_url": "https://api.github.com/users/casperisfine/orgs",
                    "repos_url": "https://api.github.com/users/casperisfine/repos",
                    "events_url": "https://api.github.com/users/casperisfine/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/casperisfine/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 107191,
                        "node_id": "MDU6TGFiZWwxMDcxOTE=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
                        "name": "activerecord",
                        "color": "0b02e1",
                        "default": false,
                        "description": null
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 11,
                "created_at": "2023-10-26T14:46:55Z",
                "updated_at": "2023-10-27T06:58:00Z",
                "closed_at": null,
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/rails/rails/pulls/49798",
                    "html_url": "https://github.com/rails/rails/pull/49798",
                    "diff_url": "https://github.com/rails/rails/pull/49798.diff",
                    "patch_url": "https://github.com/rails/rails/pull/49798.patch",
                    "merged_at": null
                },
                "body": "`ActiveRecord::Base#id` became `~10%` slower in 7.1 following the introduction of composite primary keys.\r\n\r\nSome production profile revealed a significant amount of time spent in `@primary_key.is_a?(Array)`. Some of it may be the common StackProf bias, but it's still significant.\r\n\r\nBy storing whether the primary key is composite as a boolean we can reclaim about half of the overhead:\r\n\r\n```\r\nruby 3.2.2 (2023-03-30 revision e51014f9c0) [arm64-darwin22]\r\nWarming up --------------------------------------\r\n       User#id (7.0)   507.375k i/100ms\r\n       User#id (7.1)   460.049k i/100ms\r\n       User#id (opt)   486.487k i/100ms\r\nCalculating -------------------------------------\r\n       User#id (7.0)      5.058M (\u00b1 1.1%) i/s -     25.369M in   5.016103s\r\n       User#id (7.1)      4.592M (\u00b1 0.8%) i/s -     23.002M in   5.009319s\r\n       User#id (opt)      4.872M (\u00b1 0.9%) i/s -     24.811M in   5.093091s\r\n\r\nComparison:\r\n       User#id (7.0):  5058058.8 i/s\r\n       User#id (opt):  4871876.3 i/s - 1.04x  slower\r\n       User#id (7.1):  4592198.3 i/s - 1.10x  slower\r\n```\r\n\r\n```\r\nruby 3.1.4p223 (2023-03-30 revision 957bb7cb81) [arm64-darwin22]\r\nWarming up --------------------------------------\r\n       User#id (7.0)   502.562k i/100ms\r\n       User#id (7.1)   430.043k i/100ms\r\n       User#id (opt)   482.961k i/100ms\r\nCalculating -------------------------------------\r\n       User#id (7.0)      5.060M (\u00b1 0.9%) i/s -     25.631M in   5.065498s\r\n       User#id (7.1)      4.325M (\u00b1 0.8%) i/s -     21.932M in   5.071700s\r\n       User#id (opt)      4.804M (\u00b1 0.8%) i/s -     24.148M in   5.027168s\r\n\r\nComparison:\r\n       User#id (7.0):  5060312.9 i/s\r\n       User#id (opt):  4803851.1 i/s - 1.05x  slower\r\n       User#id (7.1):  4324672.3 i/s - 1.17x  slower\r\n```\r\n\r\n<details><summary>Benchmark</summary>\r\n\r\n```ruby\r\nbegin\r\n  require \"bundler/inline\"\r\nrescue LoadError => e\r\n  $stderr.puts \"Bundler version 1.10 or later is required. Please update your Bundler\"\r\n  raise e\r\nend\r\n\r\ngemfile(true) do\r\n  source \"https://rubygems.org\"\r\n  gem \"rails\", path: \"/Users/byroot/src/github.com/Shopify/rails\"\r\n  gem \"sqlite3\"\r\n  gem \"benchmark-ips\"\r\nend\r\n\r\nrequire \"active_record\"\r\n\r\nActiveRecord::Base.establish_connection(adapter: \"sqlite3\", database: \":memory:\")\r\nActiveRecord::Base.logger = Logger.new(STDOUT)\r\n\r\nActiveRecord::Schema.define do\r\n  create_table :users do |t|\r\n    t.string :first_name\r\n    t.string :last_name\r\n  end\r\nend\r\n\r\nclass User < ActiveRecord::Base\r\nend\r\n\r\nmodule ActiveRecord\r\n  module AttributeMethods\r\n    # = Active Record Attribute Methods Primary Key\r\n    module PrimaryKey\r\n      def initialize(...)\r\n        @composite_primary_key = self.class.composite_primary_key?\r\n        super\r\n      end\r\n\r\n      def rails_71_id\r\n        return _read_attribute(@primary_key) unless @primary_key.is_a?(Array)\r\n\r\n        @primary_key.map { |pk| _read_attribute(pk) }\r\n      end\r\n\r\n      def rails_70_id\r\n        _read_attribute(@primary_key)\r\n      end\r\n\r\n      def optimized_id\r\n        if @composite_primary_key\r\n          @primary_key.map { |pk| _read_attribute(pk) }\r\n        else\r\n          _read_attribute(@primary_key)\r\n        end\r\n      end\r\n    end\r\n  end\r\nend\r\n\r\nuser = User.new\r\n\r\nputs RUBY_DESCRIPTION\r\n\r\nBenchmark.ips do |x|\r\n  x.report(\"User#id (7.0)\") do\r\n    user.rails_70_id\r\n  end\r\n\r\n  x.report(\"User#id (7.1)\") do\r\n    user.rails_71_id\r\n  end\r\n\r\n  x.report(\"User#id (opt)\") do\r\n    user.optimized_id\r\n  end\r\n\r\n  x.compare!(order: :baseline)\r\nend\r\n```\r\n</details>\r\n\r\nAnother avenue could be to swap the method entirely. e.g. include a module when you activate composite primary keys on a model. But then it would make it tricky to undo it in a child class. So I'm still on the fence, I'll sleep on it.\r\n\r\ncc @ptolts you reported the profiling.\r\ncc @nvasilevski because CPK.\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/49798/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/rails/rails/issues/49798/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/rails/rails/issues/comments/1782398443",
                "html_url": "https://github.com/rails/rails/pull/49798#issuecomment-1782398443",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/49798",
                "id": 1782398443,
                "node_id": "IC_kwDNIULOaj096w",
                "user": {
                    "login": "casperisfine",
                    "id": 19192189,
                    "node_id": "MDQ6VXNlcjE5MTkyMTg5",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19192189?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/casperisfine",
                    "html_url": "https://github.com/casperisfine",
                    "followers_url": "https://api.github.com/users/casperisfine/followers",
                    "following_url": "https://api.github.com/users/casperisfine/following{/other_user}",
                    "gists_url": "https://api.github.com/users/casperisfine/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/casperisfine/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/casperisfine/subscriptions",
                    "organizations_url": "https://api.github.com/users/casperisfine/orgs",
                    "repos_url": "https://api.github.com/users/casperisfine/repos",
                    "events_url": "https://api.github.com/users/casperisfine/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/casperisfine/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T06:58:00Z",
                "updated_at": "2023-10-27T06:58:00Z",
                "author_association": "CONTRIBUTOR",
                "body": "> I'm running the benchmark script and I keep seeing 7.0 and 7.1 with the same performance.\r\n\r\nSo you don't get the same performance, but `benchmark/ips` says the difference is too small for it to be certain it's significant. It's not wrong, but if you run it a few time you see the difference is consistent.\r\n\r\nAs said previously, if all I got was this benchmark I wouldn't bother, it's really because production profile show it's a big hotspot that I even consider such micro optimizations.",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/comments/1782398443/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T06:58:01Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32890203481",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 19192189,
            "login": "casperisfine",
            "display_login": "casperisfine",
            "gravatar_id": "",
            "url": "https://api.github.com/users/casperisfine",
            "avatar_url": "https://avatars.githubusercontent.com/u/19192189?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/rails/rails/issues/49798",
                "repository_url": "https://api.github.com/repos/rails/rails",
                "labels_url": "https://api.github.com/repos/rails/rails/issues/49798/labels{/name}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/49798/comments",
                "events_url": "https://api.github.com/repos/rails/rails/issues/49798/events",
                "html_url": "https://github.com/rails/rails/pull/49798",
                "id": 1963746565,
                "node_id": "PR_kwDNIULOXeDtEw",
                "number": 49798,
                "title": "Optimize Active Record primary key methods",
                "user": {
                    "login": "casperisfine",
                    "id": 19192189,
                    "node_id": "MDQ6VXNlcjE5MTkyMTg5",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19192189?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/casperisfine",
                    "html_url": "https://github.com/casperisfine",
                    "followers_url": "https://api.github.com/users/casperisfine/followers",
                    "following_url": "https://api.github.com/users/casperisfine/following{/other_user}",
                    "gists_url": "https://api.github.com/users/casperisfine/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/casperisfine/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/casperisfine/subscriptions",
                    "organizations_url": "https://api.github.com/users/casperisfine/orgs",
                    "repos_url": "https://api.github.com/users/casperisfine/repos",
                    "events_url": "https://api.github.com/users/casperisfine/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/casperisfine/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 107191,
                        "node_id": "MDU6TGFiZWwxMDcxOTE=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
                        "name": "activerecord",
                        "color": "0b02e1",
                        "default": false,
                        "description": null
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 10,
                "created_at": "2023-10-26T14:46:55Z",
                "updated_at": "2023-10-27T06:51:27Z",
                "closed_at": null,
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/rails/rails/pulls/49798",
                    "html_url": "https://github.com/rails/rails/pull/49798",
                    "diff_url": "https://github.com/rails/rails/pull/49798.diff",
                    "patch_url": "https://github.com/rails/rails/pull/49798.patch",
                    "merged_at": null
                },
                "body": "`ActiveRecord::Base#id` became `~10%` slower in 7.1 following the introduction of composite primary keys.\r\n\r\nSome production profile revealed a significant amount of time spent in `@primary_key.is_a?(Array)`. Some of it may be the common StackProf bias, but it's still significant.\r\n\r\nBy storing whether the primary key is composite as a boolean we can reclaim about half of the overhead:\r\n\r\n```\r\nruby 3.2.2 (2023-03-30 revision e51014f9c0) [arm64-darwin22]\r\nWarming up --------------------------------------\r\n       User#id (7.0)   507.375k i/100ms\r\n       User#id (7.1)   460.049k i/100ms\r\n       User#id (opt)   486.487k i/100ms\r\nCalculating -------------------------------------\r\n       User#id (7.0)      5.058M (\u00b1 1.1%) i/s -     25.369M in   5.016103s\r\n       User#id (7.1)      4.592M (\u00b1 0.8%) i/s -     23.002M in   5.009319s\r\n       User#id (opt)      4.872M (\u00b1 0.9%) i/s -     24.811M in   5.093091s\r\n\r\nComparison:\r\n       User#id (7.0):  5058058.8 i/s\r\n       User#id (opt):  4871876.3 i/s - 1.04x  slower\r\n       User#id (7.1):  4592198.3 i/s - 1.10x  slower\r\n```\r\n\r\n```\r\nruby 3.1.4p223 (2023-03-30 revision 957bb7cb81) [arm64-darwin22]\r\nWarming up --------------------------------------\r\n       User#id (7.0)   502.562k i/100ms\r\n       User#id (7.1)   430.043k i/100ms\r\n       User#id (opt)   482.961k i/100ms\r\nCalculating -------------------------------------\r\n       User#id (7.0)      5.060M (\u00b1 0.9%) i/s -     25.631M in   5.065498s\r\n       User#id (7.1)      4.325M (\u00b1 0.8%) i/s -     21.932M in   5.071700s\r\n       User#id (opt)      4.804M (\u00b1 0.8%) i/s -     24.148M in   5.027168s\r\n\r\nComparison:\r\n       User#id (7.0):  5060312.9 i/s\r\n       User#id (opt):  4803851.1 i/s - 1.05x  slower\r\n       User#id (7.1):  4324672.3 i/s - 1.17x  slower\r\n```\r\n\r\n<details><summary>Benchmark</summary>\r\n\r\n```ruby\r\nbegin\r\n  require \"bundler/inline\"\r\nrescue LoadError => e\r\n  $stderr.puts \"Bundler version 1.10 or later is required. Please update your Bundler\"\r\n  raise e\r\nend\r\n\r\ngemfile(true) do\r\n  source \"https://rubygems.org\"\r\n  gem \"rails\", path: \"/Users/byroot/src/github.com/Shopify/rails\"\r\n  gem \"sqlite3\"\r\n  gem \"benchmark-ips\"\r\nend\r\n\r\nrequire \"active_record\"\r\n\r\nActiveRecord::Base.establish_connection(adapter: \"sqlite3\", database: \":memory:\")\r\nActiveRecord::Base.logger = Logger.new(STDOUT)\r\n\r\nActiveRecord::Schema.define do\r\n  create_table :users do |t|\r\n    t.string :first_name\r\n    t.string :last_name\r\n  end\r\nend\r\n\r\nclass User < ActiveRecord::Base\r\nend\r\n\r\nmodule ActiveRecord\r\n  module AttributeMethods\r\n    # = Active Record Attribute Methods Primary Key\r\n    module PrimaryKey\r\n      def initialize(...)\r\n        @composite_primary_key = self.class.composite_primary_key?\r\n        super\r\n      end\r\n\r\n      def rails_71_id\r\n        return _read_attribute(@primary_key) unless @primary_key.is_a?(Array)\r\n\r\n        @primary_key.map { |pk| _read_attribute(pk) }\r\n      end\r\n\r\n      def rails_70_id\r\n        _read_attribute(@primary_key)\r\n      end\r\n\r\n      def optimized_id\r\n        if @composite_primary_key\r\n          @primary_key.map { |pk| _read_attribute(pk) }\r\n        else\r\n          _read_attribute(@primary_key)\r\n        end\r\n      end\r\n    end\r\n  end\r\nend\r\n\r\nuser = User.new\r\n\r\nputs RUBY_DESCRIPTION\r\n\r\nBenchmark.ips do |x|\r\n  x.report(\"User#id (7.0)\") do\r\n    user.rails_70_id\r\n  end\r\n\r\n  x.report(\"User#id (7.1)\") do\r\n    user.rails_71_id\r\n  end\r\n\r\n  x.report(\"User#id (opt)\") do\r\n    user.optimized_id\r\n  end\r\n\r\n  x.compare!(order: :baseline)\r\nend\r\n```\r\n</details>\r\n\r\nAnother avenue could be to swap the method entirely. e.g. include a module when you activate composite primary keys on a model. But then it would make it tricky to undo it in a child class. So I'm still on the fence, I'll sleep on it.\r\n\r\ncc @ptolts you reported the profiling.\r\ncc @nvasilevski because CPK.\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/49798/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/rails/rails/issues/49798/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/rails/rails/issues/comments/1782391788",
                "html_url": "https://github.com/rails/rails/pull/49798#issuecomment-1782391788",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/49798",
                "id": 1782391788,
                "node_id": "IC_kwDNIULOaj0j7A",
                "user": {
                    "login": "casperisfine",
                    "id": 19192189,
                    "node_id": "MDQ6VXNlcjE5MTkyMTg5",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19192189?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/casperisfine",
                    "html_url": "https://github.com/casperisfine",
                    "followers_url": "https://api.github.com/users/casperisfine/followers",
                    "following_url": "https://api.github.com/users/casperisfine/following{/other_user}",
                    "gists_url": "https://api.github.com/users/casperisfine/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/casperisfine/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/casperisfine/subscriptions",
                    "organizations_url": "https://api.github.com/users/casperisfine/orgs",
                    "repos_url": "https://api.github.com/users/casperisfine/repos",
                    "events_url": "https://api.github.com/users/casperisfine/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/casperisfine/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T06:51:27Z",
                "updated_at": "2023-10-27T06:51:27Z",
                "author_association": "CONTRIBUTOR",
                "body": "@matthewd yup, I'll work on it today.",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/comments/1782391788/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T06:51:27Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32889466211",
        "type": "WatchEvent",
        "actor": {
            "id": 58849430,
            "login": "BaggioGiacomo",
            "display_login": "BaggioGiacomo",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BaggioGiacomo",
            "avatar_url": "https://avatars.githubusercontent.com/u/58849430?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T06:12:40Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32889431920",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 1034,
            "login": "matthewd",
            "display_login": "matthewd",
            "gravatar_id": "",
            "url": "https://api.github.com/users/matthewd",
            "avatar_url": "https://avatars.githubusercontent.com/u/1034?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/rails/rails/issues/49798",
                "repository_url": "https://api.github.com/repos/rails/rails",
                "labels_url": "https://api.github.com/repos/rails/rails/issues/49798/labels{/name}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/49798/comments",
                "events_url": "https://api.github.com/repos/rails/rails/issues/49798/events",
                "html_url": "https://github.com/rails/rails/pull/49798",
                "id": 1963746565,
                "node_id": "PR_kwDNIULOXeDtEw",
                "number": 49798,
                "title": "Optimize Active Record primary key methods",
                "user": {
                    "login": "casperisfine",
                    "id": 19192189,
                    "node_id": "MDQ6VXNlcjE5MTkyMTg5",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19192189?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/casperisfine",
                    "html_url": "https://github.com/casperisfine",
                    "followers_url": "https://api.github.com/users/casperisfine/followers",
                    "following_url": "https://api.github.com/users/casperisfine/following{/other_user}",
                    "gists_url": "https://api.github.com/users/casperisfine/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/casperisfine/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/casperisfine/subscriptions",
                    "organizations_url": "https://api.github.com/users/casperisfine/orgs",
                    "repos_url": "https://api.github.com/users/casperisfine/repos",
                    "events_url": "https://api.github.com/users/casperisfine/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/casperisfine/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 107191,
                        "node_id": "MDU6TGFiZWwxMDcxOTE=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
                        "name": "activerecord",
                        "color": "0b02e1",
                        "default": false,
                        "description": null
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 9,
                "created_at": "2023-10-26T14:46:55Z",
                "updated_at": "2023-10-27T06:10:40Z",
                "closed_at": null,
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/rails/rails/pulls/49798",
                    "html_url": "https://github.com/rails/rails/pull/49798",
                    "diff_url": "https://github.com/rails/rails/pull/49798.diff",
                    "patch_url": "https://github.com/rails/rails/pull/49798.patch",
                    "merged_at": null
                },
                "body": "`ActiveRecord::Base#id` became `~10%` slower in 7.1 following the introduction of composite primary keys.\r\n\r\nSome production profile revealed a significant amount of time spent in `@primary_key.is_a?(Array)`. Some of it may be the common StackProf bias, but it's still significant.\r\n\r\nBy storing whether the primary key is composite as a boolean we can reclaim about half of the overhead:\r\n\r\n```\r\nruby 3.2.2 (2023-03-30 revision e51014f9c0) [arm64-darwin22]\r\nWarming up --------------------------------------\r\n       User#id (7.0)   507.375k i/100ms\r\n       User#id (7.1)   460.049k i/100ms\r\n       User#id (opt)   486.487k i/100ms\r\nCalculating -------------------------------------\r\n       User#id (7.0)      5.058M (\u00b1 1.1%) i/s -     25.369M in   5.016103s\r\n       User#id (7.1)      4.592M (\u00b1 0.8%) i/s -     23.002M in   5.009319s\r\n       User#id (opt)      4.872M (\u00b1 0.9%) i/s -     24.811M in   5.093091s\r\n\r\nComparison:\r\n       User#id (7.0):  5058058.8 i/s\r\n       User#id (opt):  4871876.3 i/s - 1.04x  slower\r\n       User#id (7.1):  4592198.3 i/s - 1.10x  slower\r\n```\r\n\r\n```\r\nruby 3.1.4p223 (2023-03-30 revision 957bb7cb81) [arm64-darwin22]\r\nWarming up --------------------------------------\r\n       User#id (7.0)   502.562k i/100ms\r\n       User#id (7.1)   430.043k i/100ms\r\n       User#id (opt)   482.961k i/100ms\r\nCalculating -------------------------------------\r\n       User#id (7.0)      5.060M (\u00b1 0.9%) i/s -     25.631M in   5.065498s\r\n       User#id (7.1)      4.325M (\u00b1 0.8%) i/s -     21.932M in   5.071700s\r\n       User#id (opt)      4.804M (\u00b1 0.8%) i/s -     24.148M in   5.027168s\r\n\r\nComparison:\r\n       User#id (7.0):  5060312.9 i/s\r\n       User#id (opt):  4803851.1 i/s - 1.05x  slower\r\n       User#id (7.1):  4324672.3 i/s - 1.17x  slower\r\n```\r\n\r\n<details><summary>Benchmark</summary>\r\n\r\n```ruby\r\nbegin\r\n  require \"bundler/inline\"\r\nrescue LoadError => e\r\n  $stderr.puts \"Bundler version 1.10 or later is required. Please update your Bundler\"\r\n  raise e\r\nend\r\n\r\ngemfile(true) do\r\n  source \"https://rubygems.org\"\r\n  gem \"rails\", path: \"/Users/byroot/src/github.com/Shopify/rails\"\r\n  gem \"sqlite3\"\r\n  gem \"benchmark-ips\"\r\nend\r\n\r\nrequire \"active_record\"\r\n\r\nActiveRecord::Base.establish_connection(adapter: \"sqlite3\", database: \":memory:\")\r\nActiveRecord::Base.logger = Logger.new(STDOUT)\r\n\r\nActiveRecord::Schema.define do\r\n  create_table :users do |t|\r\n    t.string :first_name\r\n    t.string :last_name\r\n  end\r\nend\r\n\r\nclass User < ActiveRecord::Base\r\nend\r\n\r\nmodule ActiveRecord\r\n  module AttributeMethods\r\n    # = Active Record Attribute Methods Primary Key\r\n    module PrimaryKey\r\n      def initialize(...)\r\n        @composite_primary_key = self.class.composite_primary_key?\r\n        super\r\n      end\r\n\r\n      def rails_71_id\r\n        return _read_attribute(@primary_key) unless @primary_key.is_a?(Array)\r\n\r\n        @primary_key.map { |pk| _read_attribute(pk) }\r\n      end\r\n\r\n      def rails_70_id\r\n        _read_attribute(@primary_key)\r\n      end\r\n\r\n      def optimized_id\r\n        if @composite_primary_key\r\n          @primary_key.map { |pk| _read_attribute(pk) }\r\n        else\r\n          _read_attribute(@primary_key)\r\n        end\r\n      end\r\n    end\r\n  end\r\nend\r\n\r\nuser = User.new\r\n\r\nputs RUBY_DESCRIPTION\r\n\r\nBenchmark.ips do |x|\r\n  x.report(\"User#id (7.0)\") do\r\n    user.rails_70_id\r\n  end\r\n\r\n  x.report(\"User#id (7.1)\") do\r\n    user.rails_71_id\r\n  end\r\n\r\n  x.report(\"User#id (opt)\") do\r\n    user.optimized_id\r\n  end\r\n\r\n  x.compare!(order: :baseline)\r\nend\r\n```\r\n</details>\r\n\r\nAnother avenue could be to swap the method entirely. e.g. include a module when you activate composite primary keys on a model. But then it would make it tricky to undo it in a child class. So I'm still on the fence, I'll sleep on it.\r\n\r\ncc @ptolts you reported the profiling.\r\ncc @nvasilevski because CPK.\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/49798/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/rails/rails/issues/49798/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/rails/rails/issues/comments/1782352862",
                "html_url": "https://github.com/rails/rails/pull/49798#issuecomment-1782352862",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/49798",
                "id": 1782352862,
                "node_id": "IC_kwDNIULOajyL3g",
                "user": {
                    "login": "matthewd",
                    "id": 1034,
                    "node_id": "MDQ6VXNlcjEwMzQ=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/1034?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/matthewd",
                    "html_url": "https://github.com/matthewd",
                    "followers_url": "https://api.github.com/users/matthewd/followers",
                    "following_url": "https://api.github.com/users/matthewd/following{/other_user}",
                    "gists_url": "https://api.github.com/users/matthewd/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/matthewd/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/matthewd/subscriptions",
                    "organizations_url": "https://api.github.com/users/matthewd/orgs",
                    "repos_url": "https://api.github.com/users/matthewd/repos",
                    "events_url": "https://api.github.com/users/matthewd/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/matthewd/received_events",
                    "type": "User",
                    "site_admin": true
                },
                "created_at": "2023-10-27T06:10:40Z",
                "updated_at": "2023-10-27T06:10:40Z",
                "author_association": "MEMBER",
                "body": "I had definitely pondered the extra-module approach -- have the base implementation stick with the plain key, then when a composite-looking key gets involved, that model pulls in a corresponding module. Given the extra arrays etc, composite mode is already a de-opt, so it's fine to have the module re-check the composite state dynamically... thus no worries about a subclass or later config change un-compositing... the with-module state is \"check each time\" [what we have now], only the without-module state is specialised [what we had before].",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/comments/1782352862/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T06:10:42Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32889319488",
        "type": "IssuesEvent",
        "actor": {
            "id": 808955,
            "login": "akicho8",
            "display_login": "akicho8",
            "gravatar_id": "",
            "url": "https://api.github.com/users/akicho8",
            "avatar_url": "https://avatars.githubusercontent.com/u/808955?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "opened",
            "issue": {
                "url": "https://api.github.com/repos/rails/rails/issues/49805",
                "repository_url": "https://api.github.com/repos/rails/rails",
                "labels_url": "https://api.github.com/repos/rails/rails/issues/49805/labels{/name}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/49805/comments",
                "events_url": "https://api.github.com/repos/rails/rails/issues/49805/events",
                "html_url": "https://github.com/rails/rails/issues/49805",
                "id": 1964827007,
                "node_id": "I_kwDNIULOdRzhfw",
                "number": 49805,
                "title": "The code inside the comments of ActiveRecord::Promise#then does not work",
                "user": {
                    "login": "akicho8",
                    "id": 808955,
                    "node_id": "MDQ6VXNlcjgwODk1NQ==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/808955?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/akicho8",
                    "html_url": "https://github.com/akicho8",
                    "followers_url": "https://api.github.com/users/akicho8/followers",
                    "following_url": "https://api.github.com/users/akicho8/following{/other_user}",
                    "gists_url": "https://api.github.com/users/akicho8/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/akicho8/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/akicho8/subscriptions",
                    "organizations_url": "https://api.github.com/users/akicho8/orgs",
                    "repos_url": "https://api.github.com/users/akicho8/repos",
                    "events_url": "https://api.github.com/users/akicho8/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/akicho8/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 0,
                "created_at": "2023-10-27T06:04:16Z",
                "updated_at": "2023-10-27T06:04:16Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "https://github.com/rails/rails/blob/e33dbe1b3d423143685154b97ae0992f4ab821b8/activerecord/lib/active_record/promise.rb#L34\r\n\r\nWhile reading the source code, I noticed that the code example in the above comment seems to mistakenly use `async_pluck` instead of `async_pick`.\r\nThis is not a high priority issue, but I thought I should report it.\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/49805/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/rails/rails/issues/49805/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T06:04:18Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32888393167",
        "type": "PullRequestEvent",
        "actor": {
            "id": 277819,
            "login": "zzak",
            "display_login": "zzak",
            "gravatar_id": "",
            "url": "https://api.github.com/users/zzak",
            "avatar_url": "https://avatars.githubusercontent.com/u/277819?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "opened",
            "number": 49804,
            "pull_request": {
                "url": "https://api.github.com/repos/rails/rails/pulls/49804",
                "id": 1575936200,
                "node_id": "PR_kwDNIULOXe7gyA",
                "html_url": "https://github.com/rails/rails/pull/49804",
                "diff_url": "https://github.com/rails/rails/pull/49804.diff",
                "patch_url": "https://github.com/rails/rails/pull/49804.patch",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/49804",
                "number": 49804,
                "state": "open",
                "locked": false,
                "title": "[7-1-stable] Quiet deprecated cache_format_version = 6.1 warnings",
                "user": {
                    "login": "zzak",
                    "id": 277819,
                    "node_id": "MDQ6VXNlcjI3NzgxOQ==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/277819?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/zzak",
                    "html_url": "https://github.com/zzak",
                    "followers_url": "https://api.github.com/users/zzak/followers",
                    "following_url": "https://api.github.com/users/zzak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/zzak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/zzak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/zzak/subscriptions",
                    "organizations_url": "https://api.github.com/users/zzak/orgs",
                    "repos_url": "https://api.github.com/users/zzak/repos",
                    "events_url": "https://api.github.com/users/zzak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/zzak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "created_at": "2023-10-27T05:02:54Z",
                "updated_at": "2023-10-27T05:02:54Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": null,
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/rails/rails/pulls/49804/commits",
                "review_comments_url": "https://api.github.com/repos/rails/rails/pulls/49804/comments",
                "review_comment_url": "https://api.github.com/repos/rails/rails/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/49804/comments",
                "statuses_url": "https://api.github.com/repos/rails/rails/statuses/31049efc08ed6f7d73aa54b7949ba042d929b316",
                "head": {
                    "label": "zzak:7-1/railties/denoise/cache_format_version",
                    "ref": "7-1/railties/denoise/cache_format_version",
                    "sha": "31049efc08ed6f7d73aa54b7949ba042d929b316",
                    "user": {
                        "login": "zzak",
                        "id": 277819,
                        "node_id": "MDQ6VXNlcjI3NzgxOQ==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/277819?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/zzak",
                        "html_url": "https://github.com/zzak",
                        "followers_url": "https://api.github.com/users/zzak/followers",
                        "following_url": "https://api.github.com/users/zzak/following{/other_user}",
                        "gists_url": "https://api.github.com/users/zzak/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/zzak/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/zzak/subscriptions",
                        "organizations_url": "https://api.github.com/users/zzak/orgs",
                        "repos_url": "https://api.github.com/users/zzak/repos",
                        "events_url": "https://api.github.com/users/zzak/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/zzak/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 2396446,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyMzk2NDQ2",
                        "name": "rails",
                        "full_name": "zzak/rails",
                        "private": false,
                        "owner": {
                            "login": "zzak",
                            "id": 277819,
                            "node_id": "MDQ6VXNlcjI3NzgxOQ==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/277819?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/zzak",
                            "html_url": "https://github.com/zzak",
                            "followers_url": "https://api.github.com/users/zzak/followers",
                            "following_url": "https://api.github.com/users/zzak/following{/other_user}",
                            "gists_url": "https://api.github.com/users/zzak/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/zzak/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/zzak/subscriptions",
                            "organizations_url": "https://api.github.com/users/zzak/orgs",
                            "repos_url": "https://api.github.com/users/zzak/repos",
                            "events_url": "https://api.github.com/users/zzak/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/zzak/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/zzak/rails",
                        "description": "Ruby on Rails",
                        "fork": true,
                        "url": "https://api.github.com/repos/zzak/rails",
                        "forks_url": "https://api.github.com/repos/zzak/rails/forks",
                        "keys_url": "https://api.github.com/repos/zzak/rails/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/zzak/rails/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/zzak/rails/teams",
                        "hooks_url": "https://api.github.com/repos/zzak/rails/hooks",
                        "issue_events_url": "https://api.github.com/repos/zzak/rails/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/zzak/rails/events",
                        "assignees_url": "https://api.github.com/repos/zzak/rails/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/zzak/rails/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/zzak/rails/tags",
                        "blobs_url": "https://api.github.com/repos/zzak/rails/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/zzak/rails/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/zzak/rails/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/zzak/rails/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/zzak/rails/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/zzak/rails/languages",
                        "stargazers_url": "https://api.github.com/repos/zzak/rails/stargazers",
                        "contributors_url": "https://api.github.com/repos/zzak/rails/contributors",
                        "subscribers_url": "https://api.github.com/repos/zzak/rails/subscribers",
                        "subscription_url": "https://api.github.com/repos/zzak/rails/subscription",
                        "commits_url": "https://api.github.com/repos/zzak/rails/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/zzak/rails/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/zzak/rails/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/zzak/rails/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/zzak/rails/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/zzak/rails/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/zzak/rails/merges",
                        "archive_url": "https://api.github.com/repos/zzak/rails/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/zzak/rails/downloads",
                        "issues_url": "https://api.github.com/repos/zzak/rails/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/zzak/rails/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/zzak/rails/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/zzak/rails/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/zzak/rails/labels{/name}",
                        "releases_url": "https://api.github.com/repos/zzak/rails/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/zzak/rails/deployments",
                        "created_at": "2011-09-16T00:49:17Z",
                        "updated_at": "2022-01-09T07:23:50Z",
                        "pushed_at": "2023-10-27T05:00:59Z",
                        "git_url": "git://github.com/zzak/rails.git",
                        "ssh_url": "git@github.com:zzak/rails.git",
                        "clone_url": "https://github.com/zzak/rails.git",
                        "svn_url": "https://github.com/zzak/rails",
                        "homepage": "http://rubyonrails.org",
                        "size": 212968,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "Ruby",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 2,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 2,
                        "watchers": 0,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "rails:7-1-stable",
                    "ref": "7-1-stable",
                    "sha": "eba77c4c1e18124ef5f1bb016f37e450008b6a8e",
                    "user": {
                        "login": "rails",
                        "id": 4223,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQyMjM=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4223?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/rails",
                        "html_url": "https://github.com/rails",
                        "followers_url": "https://api.github.com/users/rails/followers",
                        "following_url": "https://api.github.com/users/rails/following{/other_user}",
                        "gists_url": "https://api.github.com/users/rails/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/rails/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/rails/subscriptions",
                        "organizations_url": "https://api.github.com/users/rails/orgs",
                        "repos_url": "https://api.github.com/users/rails/repos",
                        "events_url": "https://api.github.com/users/rails/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/rails/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 8514,
                        "node_id": "MDEwOlJlcG9zaXRvcnk4NTE0",
                        "name": "rails",
                        "full_name": "rails/rails",
                        "private": false,
                        "owner": {
                            "login": "rails",
                            "id": 4223,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQyMjM=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4223?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/rails",
                            "html_url": "https://github.com/rails",
                            "followers_url": "https://api.github.com/users/rails/followers",
                            "following_url": "https://api.github.com/users/rails/following{/other_user}",
                            "gists_url": "https://api.github.com/users/rails/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/rails/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/rails/subscriptions",
                            "organizations_url": "https://api.github.com/users/rails/orgs",
                            "repos_url": "https://api.github.com/users/rails/repos",
                            "events_url": "https://api.github.com/users/rails/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/rails/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/rails/rails",
                        "description": "Ruby on Rails",
                        "fork": false,
                        "url": "https://api.github.com/repos/rails/rails",
                        "forks_url": "https://api.github.com/repos/rails/rails/forks",
                        "keys_url": "https://api.github.com/repos/rails/rails/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/rails/rails/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/rails/rails/teams",
                        "hooks_url": "https://api.github.com/repos/rails/rails/hooks",
                        "issue_events_url": "https://api.github.com/repos/rails/rails/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/rails/rails/events",
                        "assignees_url": "https://api.github.com/repos/rails/rails/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/rails/rails/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/rails/rails/tags",
                        "blobs_url": "https://api.github.com/repos/rails/rails/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/rails/rails/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/rails/rails/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/rails/rails/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/rails/rails/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/rails/rails/languages",
                        "stargazers_url": "https://api.github.com/repos/rails/rails/stargazers",
                        "contributors_url": "https://api.github.com/repos/rails/rails/contributors",
                        "subscribers_url": "https://api.github.com/repos/rails/rails/subscribers",
                        "subscription_url": "https://api.github.com/repos/rails/rails/subscription",
                        "commits_url": "https://api.github.com/repos/rails/rails/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/rails/rails/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/rails/rails/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/rails/rails/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/rails/rails/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/rails/rails/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/rails/rails/merges",
                        "archive_url": "https://api.github.com/repos/rails/rails/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/rails/rails/downloads",
                        "issues_url": "https://api.github.com/repos/rails/rails/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/rails/rails/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/rails/rails/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/rails/rails/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/rails/rails/labels{/name}",
                        "releases_url": "https://api.github.com/repos/rails/rails/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/rails/rails/deployments",
                        "created_at": "2008-04-11T02:19:47Z",
                        "updated_at": "2023-10-27T02:31:59Z",
                        "pushed_at": "2023-10-27T05:02:55Z",
                        "git_url": "git://github.com/rails/rails.git",
                        "ssh_url": "git@github.com:rails/rails.git",
                        "clone_url": "https://github.com/rails/rails.git",
                        "svn_url": "https://github.com/rails/rails",
                        "homepage": "https://rubyonrails.org",
                        "size": 267388,
                        "stargazers_count": 53686,
                        "watchers_count": 53686,
                        "language": "Ruby",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 21395,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 936,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "activejob",
                            "activerecord",
                            "framework",
                            "html",
                            "mvc",
                            "rails",
                            "ruby"
                        ],
                        "visibility": "public",
                        "forks": 21395,
                        "open_issues": 936,
                        "watchers": 53686,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49804"
                    },
                    "html": {
                        "href": "https://github.com/rails/rails/pull/49804"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/rails/rails/issues/49804"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/rails/rails/issues/49804/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49804/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49804/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/rails/rails/statuses/31049efc08ed6f7d73aa54b7949ba042d929b316"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null,
                "merged": false,
                "mergeable": null,
                "rebaseable": null,
                "mergeable_state": "unknown",
                "merged_by": null,
                "comments": 0,
                "review_comments": 0,
                "maintainer_can_modify": true,
                "commits": 1,
                "additions": 17,
                "deletions": 3,
                "changed_files": 4
            }
        },
        "public": true,
        "created_at": "2023-10-27T05:02:55Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32887364705",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 201135,
            "login": "glaszig",
            "display_login": "glaszig",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glaszig",
            "avatar_url": "https://avatars.githubusercontent.com/u/201135?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/rails/rails/issues/46797",
                "repository_url": "https://api.github.com/repos/rails/rails",
                "labels_url": "https://api.github.com/repos/rails/rails/issues/46797/labels{/name}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/46797/comments",
                "events_url": "https://api.github.com/repos/rails/rails/issues/46797/events",
                "html_url": "https://github.com/rails/rails/issues/46797",
                "id": 1508859778,
                "node_id": "I_kwDNIULOWe9fgg",
                "number": 46797,
                "title": "Active Job async adapter may use connections without a lease",
                "user": {
                    "login": "georgeclaghorn",
                    "id": 94129,
                    "node_id": "MDQ6VXNlcjk0MTI5",
                    "avatar_url": "https://avatars.githubusercontent.com/u/94129?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/georgeclaghorn",
                    "html_url": "https://github.com/georgeclaghorn",
                    "followers_url": "https://api.github.com/users/georgeclaghorn/followers",
                    "following_url": "https://api.github.com/users/georgeclaghorn/following{/other_user}",
                    "gists_url": "https://api.github.com/users/georgeclaghorn/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/georgeclaghorn/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/georgeclaghorn/subscriptions",
                    "organizations_url": "https://api.github.com/users/georgeclaghorn/orgs",
                    "repos_url": "https://api.github.com/users/georgeclaghorn/repos",
                    "events_url": "https://api.github.com/users/georgeclaghorn/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/georgeclaghorn/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 123812746,
                        "node_id": "MDU6TGFiZWwxMjM4MTI3NDY=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activejob",
                        "name": "activejob",
                        "color": "5319e7",
                        "default": false,
                        "description": null
                    },
                    {
                        "id": 149514554,
                        "node_id": "MDU6TGFiZWwxNDk1MTQ1NTQ=",
                        "url": "https://api.github.com/repos/rails/rails/labels/pinned",
                        "name": "pinned",
                        "color": "f7c6c7",
                        "default": false,
                        "description": null
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 15,
                "created_at": "2022-12-23T04:15:25Z",
                "updated_at": "2023-10-27T03:40:46Z",
                "closed_at": null,
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "body": "On latest main, tests for an application of mine reliably stall locally and in CI. Sometimes warnings like the following are printed:\r\n\r\n```\r\nWARNING:  there is already a transaction in progress\r\nmessage type 0x43 arrived from server while idle\r\nmessage type 0x5a arrived from server while idle\r\n```\r\n\r\nEnvironment:\r\n* The app uses a single Postgres DB and AR\u2019s Postgres adapter.\r\n\r\n* It uses RSpec and FactoryBot, not Minitest or AR fixtures.\r\n  \r\n  ```\r\n  rspec-core (3.12.0)\r\n    rspec-support (~> 3.12.0)\r\n  rspec-expectations (3.12.0)\r\n    diff-lcs (>= 1.2.0, < 2.0)\r\n    rspec-support (~> 3.12.0)\r\n  rspec-mocks (3.12.0)\r\n    diff-lcs (>= 1.2.0, < 2.0)\r\n    rspec-support (~> 3.12.0)\r\n  rspec-rails (6.0.1)\r\n    actionpack (>= 6.1)\r\n    activesupport (>= 6.1)\r\n    railties (>= 6.1)\r\n    rspec-core (~> 3.11)\r\n    rspec-expectations (~> 3.11)\r\n    rspec-mocks (~> 3.11)\r\n    rspec-support (~> 3.11)\r\n  rspec-support (3.12.0)\r\n  ```\r\n \r\n* It\u2019s on Ruby 3.1.3.\r\n\r\nA `git bisect` pointed to 1a2ca1920c62abdd08c809df1fa98fe0acf14bc3 (cc @byroot). That change does seem relevant, but I haven\u2019t been able to reproduce the issue in a minimal app yet. I\u2019ve tried with both Minitest and RSpec.\r\n\r\nThe tests usually stall in around the same place with the same seed, but not *exactly* the same place. And I looked at two stalled runs with different seeds that didn\u2019t run any common tests before their stalls.\r\n\r\nThis has been difficult to pin down so far but I will keep looking.",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/46797/reactions",
                    "total_count": 3,
                    "+1": 3,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/rails/rails/issues/46797/timeline",
                "performed_via_github_app": null,
                "state_reason": "reopened"
            },
            "comment": {
                "url": "https://api.github.com/repos/rails/rails/issues/comments/1782240582",
                "html_url": "https://github.com/rails/rails/issues/46797#issuecomment-1782240582",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/46797",
                "id": 1782240582,
                "node_id": "IC_kwDNIULOajrVRg",
                "user": {
                    "login": "glaszig",
                    "id": 201135,
                    "node_id": "MDQ6VXNlcjIwMTEzNQ==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/201135?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/glaszig",
                    "html_url": "https://github.com/glaszig",
                    "followers_url": "https://api.github.com/users/glaszig/followers",
                    "following_url": "https://api.github.com/users/glaszig/following{/other_user}",
                    "gists_url": "https://api.github.com/users/glaszig/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/glaszig/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/glaszig/subscriptions",
                    "organizations_url": "https://api.github.com/users/glaszig/orgs",
                    "repos_url": "https://api.github.com/users/glaszig/repos",
                    "events_url": "https://api.github.com/users/glaszig/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/glaszig/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T03:40:46Z",
                "updated_at": "2023-10-27T03:40:46Z",
                "author_association": "CONTRIBUTOR",
                "body": "i managed to resolve the situation with `queue_adapter = :test`.",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/comments/1782240582/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T03:40:46Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32886365290",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 816901,
            "login": "davidstosik",
            "display_login": "davidstosik",
            "gravatar_id": "",
            "url": "https://api.github.com/users/davidstosik",
            "avatar_url": "https://avatars.githubusercontent.com/u/816901?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/rails/rails/pulls/comments/1374003473",
                "pull_request_review_id": 1700899147,
                "id": 1374003473,
                "node_id": "PRRC_kwDNIULOUeWhEQ",
                "diff_hunk": "@@ -0,0 +1,137 @@\n+# frozen_string_literal: true\n+\n+require_relative \"abstract_unit\"\n+\n+class LogBroadcastAndTaggingTest < ActiveSupport::TestCase\n+  setup do\n+    @sink1 = StringIO.new\n+    @sink2 = StringIO.new\n+    @logger1 = Logger.new(@sink1, formatter: ActiveSupport::Logger::SimpleFormatter.new)\n+    @logger2 = Logger.new(@sink2, formatter: ActiveSupport::Logger::SimpleFormatter.new)\n+\n+    @broadcast = ActiveSupport::BroadcastLogger.new\n+    @broadcast.broadcast_to(@logger1, @logger2)\n+  end\n+\n+  test \"tag logs for the whole broadcast with a block\" do\n+    @broadcast.tagged(\"BMX\") { @broadcast.info(\"Hello\") }\n+\n+    assert_equal(\"[BMX] Hello\\n\", @sink1.string)\n+    assert_equal(\"[BMX] Hello\\n\", @sink2.string)\n+  end\n+\n+  test \"tag logs for the whole broadcast without a block\" do\n+    @broadcast.tagged(\"BMX\").info(\"Hello\")\n+\n+    assert_equal(\"[BMX] Hello\\n\", @sink1.string)\n+    assert_equal(\"[BMX] Hello\\n\", @sink2.string)\n+\n+    @sink1.reopen\n+    @sink2.reopen\n+    @broadcast.info(\"Hello\")\n+\n+    assert_equal(\"Hello\\n\", @sink1.string)\n+    assert_equal(\"Hello\\n\", @sink2.string)\n+  end\n+\n+  test \"tag logs only for one sink\" do\n+    @logger1.extend(ActiveSupport::TaggedLogging)\n+    @logger1.push_tags(\"BMX\")\n+\n+    @broadcast.info { \"Hello\" }\n+\n+    assert_equal(\"[BMX] Hello\\n\", @sink1.string)\n+    assert_equal(\"Hello\\n\", @sink2.string)\n+  end\n+\n+  test \"tag logs for multiple sinks\" do\n+    @logger1.extend(ActiveSupport::TaggedLogging)\n+    @logger1.push_tags(\"BMX\")\n+\n+    @logger2.extend(ActiveSupport::TaggedLogging)\n+    @logger2.push_tags(\"APP\")\n+\n+    @broadcast.info { \"Hello\" }\n+\n+    assert_equal(\"[BMX] Hello\\n\", @sink1.string)\n+    assert_equal(\"[APP] Hello\\n\", @sink2.string)\n+  end\n+\n+  test \"tag logs for the whole broadcast and extra tags are added to one sink (block version)\" do\n+    @logger1.extend(ActiveSupport::TaggedLogging)\n+    @logger1.push_tags(\"APP1\")\n+\n+    @logger2.extend(ActiveSupport::TaggedLogging)\n+    @logger2.push_tags(\"APP2\")\n+\n+    @broadcast.tagged(\"BMX\") { @broadcast.info(\"Hello\") }\n+\n+    assert_equal(\"[BMX] [APP1] Hello\\n\", @sink1.string)\n+    assert_equal(\"[BMX] [APP2] Hello\\n\", @sink2.string)\n+  end\n+\n+  test \"tag logs for the whole broadcast and extra tags are added to one sink (non-block version)\" do\n+    @logger1.extend(ActiveSupport::TaggedLogging)\n+    @logger1.push_tags(\"APP1\")\n+\n+    @logger2.extend(ActiveSupport::TaggedLogging)\n+    @logger2.push_tags(\"APP2\")\n+\n+    @broadcast.tagged(\"BMX\").info(\"Hello\")\n+\n+    assert_equal(\"[BMX] [APP1] Hello\\n\", @sink1.string)\n+    assert_equal(\"[BMX] [APP2] Hello\\n\", @sink2.string)\n+\n+    @sink1.reopen\n+    @sink2.reopen\n+    @broadcast.info(\"Hello\")\n+\n+    assert_equal(\"[APP1] Hello\\n\", @sink1.string)\n+    assert_equal(\"[APP2] Hello\\n\", @sink2.string)\n+  end\n+\n+  test \"can broadcast to another broadcast logger with tagging functionalities\" do\n+    @sink3 = StringIO.new\n+    @sink4 = StringIO.new\n+    @logger3 = Logger.new(@sink3, formatter: ActiveSupport::Logger::SimpleFormatter.new)\n+    @logger4 = Logger.new(@sink4, formatter: ActiveSupport::Logger::SimpleFormatter.new)\n+    @broadcast2 = ActiveSupport::BroadcastLogger.new\n+\n+    @broadcast2.broadcast_to(@logger3, @logger4)\n+    @broadcast.broadcast_to(@broadcast2)\n+\n+    @broadcast2.push_tags(\"BROADCAST2\")\n+\n+    @broadcast.tagged(\"BMX\") { @broadcast.info(\"Hello\") }\n+\n+    assert_equal(\"[BMX] Hello\\n\", @sink1.string)\n+    assert_equal(\"[BMX] Hello\\n\", @sink2.string)\n+    assert_equal(\"[BMX] [BROADCAST2] Hello\\n\", @sink3.string)\n+    assert_equal(\"[BMX] [BROADCAST2] Hello\\n\", @sink4.string)\n+  end\n+\n+  test \"#silence works while broadcasting to tagged loggers\" do",
                "path": "activesupport/test/log_broadcast_and_tagging_test.rb",
                "commit_id": "0f6da082dffaea1243693a005bf18fe3d31064f7",
                "original_commit_id": "3a49be6f9526a2b916992eb8cbfe3f0310bfeddc",
                "user": {
                    "login": "davidstosik",
                    "id": 816901,
                    "node_id": "MDQ6VXNlcjgxNjkwMQ==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/816901?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/davidstosik",
                    "html_url": "https://github.com/davidstosik",
                    "followers_url": "https://api.github.com/users/davidstosik/followers",
                    "following_url": "https://api.github.com/users/davidstosik/following{/other_user}",
                    "gists_url": "https://api.github.com/users/davidstosik/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/davidstosik/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/davidstosik/subscriptions",
                    "organizations_url": "https://api.github.com/users/davidstosik/orgs",
                    "repos_url": "https://api.github.com/users/davidstosik/repos",
                    "events_url": "https://api.github.com/users/davidstosik/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/davidstosik/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "@Edouard-chin I'm having more doubts about `#silence` (I guess unrelated to this PR, but as we started the conversation here)\r\n\r\n\r\n\r\n```rb\r\nrequire \"active_support/isolated_execution_state\"\r\nrequire \"active_support/logger_silence\"\r\nrequire \"active_support/broadcast_logger\"\r\n\r\nlogger = ActiveSupport::BroadcastLogger.new(Logger.new(STDOUT), Logger.new(STDOUT))\r\nlogger.silence { logger.warn(\"Error\") };\r\n# W, [2023-10-27T11:14:11.425871 #59954]  WARN -- : Error\r\n# W, [2023-10-27T11:14:11.425960 #59954]  WARN -- : Error\r\n```\r\n\r\nShould silencing a `BroadcastLogger` silence _all_ loggers it broadcasts to, or should it silence only the loggers that support silencing?",
                "created_at": "2023-10-27T02:20:09Z",
                "updated_at": "2023-10-27T02:20:10Z",
                "html_url": "https://github.com/rails/rails/pull/49771#discussion_r1374003473",
                "pull_request_url": "https://api.github.com/repos/rails/rails/pulls/49771",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/comments/1374003473"
                    },
                    "html": {
                        "href": "https://github.com/rails/rails/pull/49771#discussion_r1374003473"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49771"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/pulls/comments/1374003473/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": null,
                "original_start_line": null,
                "start_side": null,
                "line": 113,
                "original_line": 113,
                "side": "RIGHT",
                "in_reply_to_id": 1370605254,
                "original_position": 113,
                "position": 113,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/rails/rails/pulls/49771",
                "id": 1571452335,
                "node_id": "PR_kwDNIULOXap1rw",
                "html_url": "https://github.com/rails/rails/pull/49771",
                "diff_url": "https://github.com/rails/rails/pull/49771.diff",
                "patch_url": "https://github.com/rails/rails/pull/49771.patch",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/49771",
                "number": 49771,
                "state": "open",
                "locked": false,
                "title": "Reimplement TaggedLogging:",
                "user": {
                    "login": "Edouard-chin",
                    "id": 8122246,
                    "node_id": "MDQ6VXNlcjgxMjIyNDY=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/8122246?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Edouard-chin",
                    "html_url": "https://github.com/Edouard-chin",
                    "followers_url": "https://api.github.com/users/Edouard-chin/followers",
                    "following_url": "https://api.github.com/users/Edouard-chin/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Edouard-chin/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Edouard-chin/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Edouard-chin/subscriptions",
                    "organizations_url": "https://api.github.com/users/Edouard-chin/orgs",
                    "repos_url": "https://api.github.com/users/Edouard-chin/repos",
                    "events_url": "https://api.github.com/users/Edouard-chin/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Edouard-chin/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "- ### Context\r\n\r\n  The Tagged Logging functionality has been a source of a few issues over the years, especially when combined with the broadcasting feature. Initializating a Tagged Logger was also not very intuitive:\r\n\r\n  ```ruby \r\n  logger = Logger.new(STDOUT)\r\n  tagged_logger = ActiveSupport::TaggedLogging.new(logger)\r\n  # Would expect the `tagged_logger` to be an instance of `AS::TaggedLogging` \r\n  # but it's a clone of the `logger`.\r\n\r\n  tagged_logger.formatter = ->(_, _, _, message) do\r\n    { message: message }\r\n  end\r\n  # Modifies the formatter to output JSON formatted logs.\r\n  # This breaks tagged logging.\r\n  ```\r\n\r\n  I believe the main reason of those issues is because tagged logging is implemented at the wrong level.\r\n\r\n  ### Solution\r\n\r\n  I made a proposal on the Ruby logger upstream in ruby/logger#90 to help solve this but it hasn't been reviewed yet. So I thought about adding it here for now. The TL;DR is to decouple formatting and adding extra information to logs (which is what tagged logging does).\r\n\r\n  ### Deprecation\r\n\r\n  Since TaggedLogging will no longer access the formatter, there is a few things I'd like to deprecate such as setting a default formatter https://github.com/rails/rails/blob/d68e43922bc11829c52ad9f736ad5549fc97631b/activesupport/lib/active_support/tagged_logging.rb#L124 but doing so in this PR would increase the size of the diff significantly and would maybe distract for PR reviews.\r\n\r\n  Another thing that I believe should be deprecated is `ActiveSupport::TaggedLogging.new`. Adding tagging functionality to a logger should be done using a more ruby approach such as `logger.extend(AS::TaggedLogging)`.\r\n\r\n-------------------\r\n\r\nFix #49757 \r\nFix #49745 \r\nFix #46084 \r\nFix #44668",
                "created_at": "2023-10-24T17:24:15Z",
                "updated_at": "2023-10-27T02:20:09Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "3128eb90b2a3f0d807888e88a82a99cc90635b78",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 107194,
                        "node_id": "MDU6TGFiZWwxMDcxOTQ=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activesupport",
                        "name": "activesupport",
                        "color": "FC9300",
                        "default": false,
                        "description": null
                    },
                    {
                        "id": 123812746,
                        "node_id": "MDU6TGFiZWwxMjM4MTI3NDY=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activejob",
                        "name": "activejob",
                        "color": "5319e7",
                        "default": false,
                        "description": null
                    },
                    {
                        "id": 300028327,
                        "node_id": "MDU6TGFiZWwzMDAwMjgzMjc=",
                        "url": "https://api.github.com/repos/rails/rails/labels/actioncable",
                        "name": "actioncable",
                        "color": "bfdadc",
                        "default": false,
                        "description": null
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/rails/rails/pulls/49771/commits",
                "review_comments_url": "https://api.github.com/repos/rails/rails/pulls/49771/comments",
                "review_comment_url": "https://api.github.com/repos/rails/rails/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/49771/comments",
                "statuses_url": "https://api.github.com/repos/rails/rails/statuses/0f6da082dffaea1243693a005bf18fe3d31064f7",
                "head": {
                    "label": "Edouard-chin:ec-tagged-logging",
                    "ref": "ec-tagged-logging",
                    "sha": "0f6da082dffaea1243693a005bf18fe3d31064f7",
                    "user": {
                        "login": "Edouard-chin",
                        "id": 8122246,
                        "node_id": "MDQ6VXNlcjgxMjIyNDY=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/8122246?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/Edouard-chin",
                        "html_url": "https://github.com/Edouard-chin",
                        "followers_url": "https://api.github.com/users/Edouard-chin/followers",
                        "following_url": "https://api.github.com/users/Edouard-chin/following{/other_user}",
                        "gists_url": "https://api.github.com/users/Edouard-chin/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/Edouard-chin/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/Edouard-chin/subscriptions",
                        "organizations_url": "https://api.github.com/users/Edouard-chin/orgs",
                        "repos_url": "https://api.github.com/users/Edouard-chin/repos",
                        "events_url": "https://api.github.com/users/Edouard-chin/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/Edouard-chin/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 49133917,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0OTEzMzkxNw==",
                        "name": "rails",
                        "full_name": "Edouard-chin/rails",
                        "private": false,
                        "owner": {
                            "login": "Edouard-chin",
                            "id": 8122246,
                            "node_id": "MDQ6VXNlcjgxMjIyNDY=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/8122246?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/Edouard-chin",
                            "html_url": "https://github.com/Edouard-chin",
                            "followers_url": "https://api.github.com/users/Edouard-chin/followers",
                            "following_url": "https://api.github.com/users/Edouard-chin/following{/other_user}",
                            "gists_url": "https://api.github.com/users/Edouard-chin/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/Edouard-chin/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/Edouard-chin/subscriptions",
                            "organizations_url": "https://api.github.com/users/Edouard-chin/orgs",
                            "repos_url": "https://api.github.com/users/Edouard-chin/repos",
                            "events_url": "https://api.github.com/users/Edouard-chin/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/Edouard-chin/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/Edouard-chin/rails",
                        "description": "Ruby on Rails",
                        "fork": true,
                        "url": "https://api.github.com/repos/Edouard-chin/rails",
                        "forks_url": "https://api.github.com/repos/Edouard-chin/rails/forks",
                        "keys_url": "https://api.github.com/repos/Edouard-chin/rails/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/Edouard-chin/rails/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/Edouard-chin/rails/teams",
                        "hooks_url": "https://api.github.com/repos/Edouard-chin/rails/hooks",
                        "issue_events_url": "https://api.github.com/repos/Edouard-chin/rails/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/Edouard-chin/rails/events",
                        "assignees_url": "https://api.github.com/repos/Edouard-chin/rails/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/Edouard-chin/rails/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/Edouard-chin/rails/tags",
                        "blobs_url": "https://api.github.com/repos/Edouard-chin/rails/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/Edouard-chin/rails/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/Edouard-chin/rails/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/Edouard-chin/rails/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/Edouard-chin/rails/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/Edouard-chin/rails/languages",
                        "stargazers_url": "https://api.github.com/repos/Edouard-chin/rails/stargazers",
                        "contributors_url": "https://api.github.com/repos/Edouard-chin/rails/contributors",
                        "subscribers_url": "https://api.github.com/repos/Edouard-chin/rails/subscribers",
                        "subscription_url": "https://api.github.com/repos/Edouard-chin/rails/subscription",
                        "commits_url": "https://api.github.com/repos/Edouard-chin/rails/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/Edouard-chin/rails/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/Edouard-chin/rails/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/Edouard-chin/rails/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/Edouard-chin/rails/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/Edouard-chin/rails/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/Edouard-chin/rails/merges",
                        "archive_url": "https://api.github.com/repos/Edouard-chin/rails/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/Edouard-chin/rails/downloads",
                        "issues_url": "https://api.github.com/repos/Edouard-chin/rails/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/Edouard-chin/rails/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/Edouard-chin/rails/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/Edouard-chin/rails/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/Edouard-chin/rails/labels{/name}",
                        "releases_url": "https://api.github.com/repos/Edouard-chin/rails/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/Edouard-chin/rails/deployments",
                        "created_at": "2016-01-06T12:30:04Z",
                        "updated_at": "2022-02-11T17:11:39Z",
                        "pushed_at": "2023-10-25T14:00:09Z",
                        "git_url": "git://github.com/Edouard-chin/rails.git",
                        "ssh_url": "git@github.com:Edouard-chin/rails.git",
                        "clone_url": "https://github.com/Edouard-chin/rails.git",
                        "svn_url": "https://github.com/Edouard-chin/rails",
                        "homepage": "http://rubyonrails.org",
                        "size": 221454,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "Ruby",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 0,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1,
                        "open_issues": 0,
                        "watchers": 0,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "rails:main",
                    "ref": "main",
                    "sha": "4c5c904a212a850c43adb7a3c3a719ca3d2b9159",
                    "user": {
                        "login": "rails",
                        "id": 4223,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQyMjM=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4223?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/rails",
                        "html_url": "https://github.com/rails",
                        "followers_url": "https://api.github.com/users/rails/followers",
                        "following_url": "https://api.github.com/users/rails/following{/other_user}",
                        "gists_url": "https://api.github.com/users/rails/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/rails/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/rails/subscriptions",
                        "organizations_url": "https://api.github.com/users/rails/orgs",
                        "repos_url": "https://api.github.com/users/rails/repos",
                        "events_url": "https://api.github.com/users/rails/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/rails/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 8514,
                        "node_id": "MDEwOlJlcG9zaXRvcnk4NTE0",
                        "name": "rails",
                        "full_name": "rails/rails",
                        "private": false,
                        "owner": {
                            "login": "rails",
                            "id": 4223,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQyMjM=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4223?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/rails",
                            "html_url": "https://github.com/rails",
                            "followers_url": "https://api.github.com/users/rails/followers",
                            "following_url": "https://api.github.com/users/rails/following{/other_user}",
                            "gists_url": "https://api.github.com/users/rails/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/rails/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/rails/subscriptions",
                            "organizations_url": "https://api.github.com/users/rails/orgs",
                            "repos_url": "https://api.github.com/users/rails/repos",
                            "events_url": "https://api.github.com/users/rails/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/rails/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/rails/rails",
                        "description": "Ruby on Rails",
                        "fork": false,
                        "url": "https://api.github.com/repos/rails/rails",
                        "forks_url": "https://api.github.com/repos/rails/rails/forks",
                        "keys_url": "https://api.github.com/repos/rails/rails/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/rails/rails/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/rails/rails/teams",
                        "hooks_url": "https://api.github.com/repos/rails/rails/hooks",
                        "issue_events_url": "https://api.github.com/repos/rails/rails/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/rails/rails/events",
                        "assignees_url": "https://api.github.com/repos/rails/rails/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/rails/rails/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/rails/rails/tags",
                        "blobs_url": "https://api.github.com/repos/rails/rails/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/rails/rails/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/rails/rails/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/rails/rails/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/rails/rails/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/rails/rails/languages",
                        "stargazers_url": "https://api.github.com/repos/rails/rails/stargazers",
                        "contributors_url": "https://api.github.com/repos/rails/rails/contributors",
                        "subscribers_url": "https://api.github.com/repos/rails/rails/subscribers",
                        "subscription_url": "https://api.github.com/repos/rails/rails/subscription",
                        "commits_url": "https://api.github.com/repos/rails/rails/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/rails/rails/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/rails/rails/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/rails/rails/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/rails/rails/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/rails/rails/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/rails/rails/merges",
                        "archive_url": "https://api.github.com/repos/rails/rails/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/rails/rails/downloads",
                        "issues_url": "https://api.github.com/repos/rails/rails/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/rails/rails/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/rails/rails/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/rails/rails/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/rails/rails/labels{/name}",
                        "releases_url": "https://api.github.com/repos/rails/rails/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/rails/rails/deployments",
                        "created_at": "2008-04-11T02:19:47Z",
                        "updated_at": "2023-10-27T01:15:09Z",
                        "pushed_at": "2023-10-27T02:04:47Z",
                        "git_url": "git://github.com/rails/rails.git",
                        "ssh_url": "git@github.com:rails/rails.git",
                        "clone_url": "https://github.com/rails/rails.git",
                        "svn_url": "https://github.com/rails/rails",
                        "homepage": "https://rubyonrails.org",
                        "size": 267388,
                        "stargazers_count": 53687,
                        "watchers_count": 53687,
                        "language": "Ruby",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 21395,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 935,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "activejob",
                            "activerecord",
                            "framework",
                            "html",
                            "mvc",
                            "rails",
                            "ruby"
                        ],
                        "visibility": "public",
                        "forks": 21395,
                        "open_issues": 935,
                        "watchers": 53687,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49771"
                    },
                    "html": {
                        "href": "https://github.com/rails/rails/pull/49771"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/rails/rails/issues/49771"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/rails/rails/issues/49771/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49771/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49771/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/rails/rails/statuses/0f6da082dffaea1243693a005bf18fe3d31064f7"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T02:20:09Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32886365232",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 816901,
            "login": "davidstosik",
            "display_login": "davidstosik",
            "gravatar_id": "",
            "url": "https://api.github.com/users/davidstosik",
            "avatar_url": "https://avatars.githubusercontent.com/u/816901?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1700899147,
                "node_id": "PRR_kwDNIULOZWGpSw",
                "user": {
                    "login": "davidstosik",
                    "id": 816901,
                    "node_id": "MDQ6VXNlcjgxNjkwMQ==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/816901?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/davidstosik",
                    "html_url": "https://github.com/davidstosik",
                    "followers_url": "https://api.github.com/users/davidstosik/followers",
                    "following_url": "https://api.github.com/users/davidstosik/following{/other_user}",
                    "gists_url": "https://api.github.com/users/davidstosik/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/davidstosik/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/davidstosik/subscriptions",
                    "organizations_url": "https://api.github.com/users/davidstosik/orgs",
                    "repos_url": "https://api.github.com/users/davidstosik/repos",
                    "events_url": "https://api.github.com/users/davidstosik/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/davidstosik/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "commit_id": "3a49be6f9526a2b916992eb8cbfe3f0310bfeddc",
                "submitted_at": "2023-10-27T02:20:09Z",
                "state": "commented",
                "html_url": "https://github.com/rails/rails/pull/49771#pullrequestreview-1700899147",
                "pull_request_url": "https://api.github.com/repos/rails/rails/pulls/49771",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "html": {
                        "href": "https://github.com/rails/rails/pull/49771#pullrequestreview-1700899147"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49771"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/rails/rails/pulls/49771",
                "id": 1571452335,
                "node_id": "PR_kwDNIULOXap1rw",
                "html_url": "https://github.com/rails/rails/pull/49771",
                "diff_url": "https://github.com/rails/rails/pull/49771.diff",
                "patch_url": "https://github.com/rails/rails/pull/49771.patch",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/49771",
                "number": 49771,
                "state": "open",
                "locked": false,
                "title": "Reimplement TaggedLogging:",
                "user": {
                    "login": "Edouard-chin",
                    "id": 8122246,
                    "node_id": "MDQ6VXNlcjgxMjIyNDY=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/8122246?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Edouard-chin",
                    "html_url": "https://github.com/Edouard-chin",
                    "followers_url": "https://api.github.com/users/Edouard-chin/followers",
                    "following_url": "https://api.github.com/users/Edouard-chin/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Edouard-chin/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Edouard-chin/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Edouard-chin/subscriptions",
                    "organizations_url": "https://api.github.com/users/Edouard-chin/orgs",
                    "repos_url": "https://api.github.com/users/Edouard-chin/repos",
                    "events_url": "https://api.github.com/users/Edouard-chin/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Edouard-chin/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "- ### Context\r\n\r\n  The Tagged Logging functionality has been a source of a few issues over the years, especially when combined with the broadcasting feature. Initializating a Tagged Logger was also not very intuitive:\r\n\r\n  ```ruby \r\n  logger = Logger.new(STDOUT)\r\n  tagged_logger = ActiveSupport::TaggedLogging.new(logger)\r\n  # Would expect the `tagged_logger` to be an instance of `AS::TaggedLogging` \r\n  # but it's a clone of the `logger`.\r\n\r\n  tagged_logger.formatter = ->(_, _, _, message) do\r\n    { message: message }\r\n  end\r\n  # Modifies the formatter to output JSON formatted logs.\r\n  # This breaks tagged logging.\r\n  ```\r\n\r\n  I believe the main reason of those issues is because tagged logging is implemented at the wrong level.\r\n\r\n  ### Solution\r\n\r\n  I made a proposal on the Ruby logger upstream in ruby/logger#90 to help solve this but it hasn't been reviewed yet. So I thought about adding it here for now. The TL;DR is to decouple formatting and adding extra information to logs (which is what tagged logging does).\r\n\r\n  ### Deprecation\r\n\r\n  Since TaggedLogging will no longer access the formatter, there is a few things I'd like to deprecate such as setting a default formatter https://github.com/rails/rails/blob/d68e43922bc11829c52ad9f736ad5549fc97631b/activesupport/lib/active_support/tagged_logging.rb#L124 but doing so in this PR would increase the size of the diff significantly and would maybe distract for PR reviews.\r\n\r\n  Another thing that I believe should be deprecated is `ActiveSupport::TaggedLogging.new`. Adding tagging functionality to a logger should be done using a more ruby approach such as `logger.extend(AS::TaggedLogging)`.\r\n\r\n-------------------\r\n\r\nFix #49757 \r\nFix #49745 \r\nFix #46084 \r\nFix #44668",
                "created_at": "2023-10-24T17:24:15Z",
                "updated_at": "2023-10-27T02:20:09Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "3128eb90b2a3f0d807888e88a82a99cc90635b78",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 107194,
                        "node_id": "MDU6TGFiZWwxMDcxOTQ=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activesupport",
                        "name": "activesupport",
                        "color": "FC9300",
                        "default": false,
                        "description": null
                    },
                    {
                        "id": 123812746,
                        "node_id": "MDU6TGFiZWwxMjM4MTI3NDY=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activejob",
                        "name": "activejob",
                        "color": "5319e7",
                        "default": false,
                        "description": null
                    },
                    {
                        "id": 300028327,
                        "node_id": "MDU6TGFiZWwzMDAwMjgzMjc=",
                        "url": "https://api.github.com/repos/rails/rails/labels/actioncable",
                        "name": "actioncable",
                        "color": "bfdadc",
                        "default": false,
                        "description": null
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/rails/rails/pulls/49771/commits",
                "review_comments_url": "https://api.github.com/repos/rails/rails/pulls/49771/comments",
                "review_comment_url": "https://api.github.com/repos/rails/rails/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/49771/comments",
                "statuses_url": "https://api.github.com/repos/rails/rails/statuses/0f6da082dffaea1243693a005bf18fe3d31064f7",
                "head": {
                    "label": "Edouard-chin:ec-tagged-logging",
                    "ref": "ec-tagged-logging",
                    "sha": "0f6da082dffaea1243693a005bf18fe3d31064f7",
                    "user": {
                        "login": "Edouard-chin",
                        "id": 8122246,
                        "node_id": "MDQ6VXNlcjgxMjIyNDY=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/8122246?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/Edouard-chin",
                        "html_url": "https://github.com/Edouard-chin",
                        "followers_url": "https://api.github.com/users/Edouard-chin/followers",
                        "following_url": "https://api.github.com/users/Edouard-chin/following{/other_user}",
                        "gists_url": "https://api.github.com/users/Edouard-chin/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/Edouard-chin/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/Edouard-chin/subscriptions",
                        "organizations_url": "https://api.github.com/users/Edouard-chin/orgs",
                        "repos_url": "https://api.github.com/users/Edouard-chin/repos",
                        "events_url": "https://api.github.com/users/Edouard-chin/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/Edouard-chin/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 49133917,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0OTEzMzkxNw==",
                        "name": "rails",
                        "full_name": "Edouard-chin/rails",
                        "private": false,
                        "owner": {
                            "login": "Edouard-chin",
                            "id": 8122246,
                            "node_id": "MDQ6VXNlcjgxMjIyNDY=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/8122246?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/Edouard-chin",
                            "html_url": "https://github.com/Edouard-chin",
                            "followers_url": "https://api.github.com/users/Edouard-chin/followers",
                            "following_url": "https://api.github.com/users/Edouard-chin/following{/other_user}",
                            "gists_url": "https://api.github.com/users/Edouard-chin/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/Edouard-chin/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/Edouard-chin/subscriptions",
                            "organizations_url": "https://api.github.com/users/Edouard-chin/orgs",
                            "repos_url": "https://api.github.com/users/Edouard-chin/repos",
                            "events_url": "https://api.github.com/users/Edouard-chin/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/Edouard-chin/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/Edouard-chin/rails",
                        "description": "Ruby on Rails",
                        "fork": true,
                        "url": "https://api.github.com/repos/Edouard-chin/rails",
                        "forks_url": "https://api.github.com/repos/Edouard-chin/rails/forks",
                        "keys_url": "https://api.github.com/repos/Edouard-chin/rails/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/Edouard-chin/rails/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/Edouard-chin/rails/teams",
                        "hooks_url": "https://api.github.com/repos/Edouard-chin/rails/hooks",
                        "issue_events_url": "https://api.github.com/repos/Edouard-chin/rails/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/Edouard-chin/rails/events",
                        "assignees_url": "https://api.github.com/repos/Edouard-chin/rails/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/Edouard-chin/rails/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/Edouard-chin/rails/tags",
                        "blobs_url": "https://api.github.com/repos/Edouard-chin/rails/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/Edouard-chin/rails/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/Edouard-chin/rails/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/Edouard-chin/rails/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/Edouard-chin/rails/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/Edouard-chin/rails/languages",
                        "stargazers_url": "https://api.github.com/repos/Edouard-chin/rails/stargazers",
                        "contributors_url": "https://api.github.com/repos/Edouard-chin/rails/contributors",
                        "subscribers_url": "https://api.github.com/repos/Edouard-chin/rails/subscribers",
                        "subscription_url": "https://api.github.com/repos/Edouard-chin/rails/subscription",
                        "commits_url": "https://api.github.com/repos/Edouard-chin/rails/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/Edouard-chin/rails/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/Edouard-chin/rails/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/Edouard-chin/rails/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/Edouard-chin/rails/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/Edouard-chin/rails/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/Edouard-chin/rails/merges",
                        "archive_url": "https://api.github.com/repos/Edouard-chin/rails/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/Edouard-chin/rails/downloads",
                        "issues_url": "https://api.github.com/repos/Edouard-chin/rails/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/Edouard-chin/rails/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/Edouard-chin/rails/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/Edouard-chin/rails/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/Edouard-chin/rails/labels{/name}",
                        "releases_url": "https://api.github.com/repos/Edouard-chin/rails/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/Edouard-chin/rails/deployments",
                        "created_at": "2016-01-06T12:30:04Z",
                        "updated_at": "2022-02-11T17:11:39Z",
                        "pushed_at": "2023-10-25T14:00:09Z",
                        "git_url": "git://github.com/Edouard-chin/rails.git",
                        "ssh_url": "git@github.com:Edouard-chin/rails.git",
                        "clone_url": "https://github.com/Edouard-chin/rails.git",
                        "svn_url": "https://github.com/Edouard-chin/rails",
                        "homepage": "http://rubyonrails.org",
                        "size": 221454,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "Ruby",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 1,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 0,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 1,
                        "open_issues": 0,
                        "watchers": 0,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "rails:main",
                    "ref": "main",
                    "sha": "4c5c904a212a850c43adb7a3c3a719ca3d2b9159",
                    "user": {
                        "login": "rails",
                        "id": 4223,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQyMjM=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4223?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/rails",
                        "html_url": "https://github.com/rails",
                        "followers_url": "https://api.github.com/users/rails/followers",
                        "following_url": "https://api.github.com/users/rails/following{/other_user}",
                        "gists_url": "https://api.github.com/users/rails/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/rails/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/rails/subscriptions",
                        "organizations_url": "https://api.github.com/users/rails/orgs",
                        "repos_url": "https://api.github.com/users/rails/repos",
                        "events_url": "https://api.github.com/users/rails/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/rails/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 8514,
                        "node_id": "MDEwOlJlcG9zaXRvcnk4NTE0",
                        "name": "rails",
                        "full_name": "rails/rails",
                        "private": false,
                        "owner": {
                            "login": "rails",
                            "id": 4223,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQyMjM=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4223?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/rails",
                            "html_url": "https://github.com/rails",
                            "followers_url": "https://api.github.com/users/rails/followers",
                            "following_url": "https://api.github.com/users/rails/following{/other_user}",
                            "gists_url": "https://api.github.com/users/rails/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/rails/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/rails/subscriptions",
                            "organizations_url": "https://api.github.com/users/rails/orgs",
                            "repos_url": "https://api.github.com/users/rails/repos",
                            "events_url": "https://api.github.com/users/rails/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/rails/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/rails/rails",
                        "description": "Ruby on Rails",
                        "fork": false,
                        "url": "https://api.github.com/repos/rails/rails",
                        "forks_url": "https://api.github.com/repos/rails/rails/forks",
                        "keys_url": "https://api.github.com/repos/rails/rails/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/rails/rails/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/rails/rails/teams",
                        "hooks_url": "https://api.github.com/repos/rails/rails/hooks",
                        "issue_events_url": "https://api.github.com/repos/rails/rails/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/rails/rails/events",
                        "assignees_url": "https://api.github.com/repos/rails/rails/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/rails/rails/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/rails/rails/tags",
                        "blobs_url": "https://api.github.com/repos/rails/rails/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/rails/rails/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/rails/rails/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/rails/rails/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/rails/rails/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/rails/rails/languages",
                        "stargazers_url": "https://api.github.com/repos/rails/rails/stargazers",
                        "contributors_url": "https://api.github.com/repos/rails/rails/contributors",
                        "subscribers_url": "https://api.github.com/repos/rails/rails/subscribers",
                        "subscription_url": "https://api.github.com/repos/rails/rails/subscription",
                        "commits_url": "https://api.github.com/repos/rails/rails/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/rails/rails/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/rails/rails/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/rails/rails/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/rails/rails/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/rails/rails/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/rails/rails/merges",
                        "archive_url": "https://api.github.com/repos/rails/rails/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/rails/rails/downloads",
                        "issues_url": "https://api.github.com/repos/rails/rails/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/rails/rails/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/rails/rails/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/rails/rails/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/rails/rails/labels{/name}",
                        "releases_url": "https://api.github.com/repos/rails/rails/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/rails/rails/deployments",
                        "created_at": "2008-04-11T02:19:47Z",
                        "updated_at": "2023-10-27T01:15:09Z",
                        "pushed_at": "2023-10-27T02:04:47Z",
                        "git_url": "git://github.com/rails/rails.git",
                        "ssh_url": "git@github.com:rails/rails.git",
                        "clone_url": "https://github.com/rails/rails.git",
                        "svn_url": "https://github.com/rails/rails",
                        "homepage": "https://rubyonrails.org",
                        "size": 267388,
                        "stargazers_count": 53687,
                        "watchers_count": 53687,
                        "language": "Ruby",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 21395,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 935,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "activejob",
                            "activerecord",
                            "framework",
                            "html",
                            "mvc",
                            "rails",
                            "ruby"
                        ],
                        "visibility": "public",
                        "forks": 21395,
                        "open_issues": 935,
                        "watchers": 53687,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49771"
                    },
                    "html": {
                        "href": "https://github.com/rails/rails/pull/49771"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/rails/rails/issues/49771"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/rails/rails/issues/49771/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49771/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49771/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/rails/rails/statuses/0f6da082dffaea1243693a005bf18fe3d31064f7"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T02:20:10Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32886170876",
        "type": "PullRequestEvent",
        "actor": {
            "id": 277819,
            "login": "zzak",
            "display_login": "zzak",
            "gravatar_id": "",
            "url": "https://api.github.com/users/zzak",
            "avatar_url": "https://avatars.githubusercontent.com/u/277819?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "opened",
            "number": 49803,
            "pull_request": {
                "url": "https://api.github.com/repos/rails/rails/pulls/49803",
                "id": 1575817302,
                "node_id": "PR_kwDNIULOXe0QVg",
                "html_url": "https://github.com/rails/rails/pull/49803",
                "diff_url": "https://github.com/rails/rails/pull/49803.diff",
                "patch_url": "https://github.com/rails/rails/pull/49803.patch",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/49803",
                "number": 49803,
                "state": "open",
                "locked": false,
                "title": "Railties TestHelper remove_from_config should remove all occurrences",
                "user": {
                    "login": "zzak",
                    "id": 277819,
                    "node_id": "MDQ6VXNlcjI3NzgxOQ==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/277819?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/zzak",
                    "html_url": "https://github.com/zzak",
                    "followers_url": "https://api.github.com/users/zzak/followers",
                    "following_url": "https://api.github.com/users/zzak/following{/other_user}",
                    "gists_url": "https://api.github.com/users/zzak/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/zzak/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/zzak/subscriptions",
                    "organizations_url": "https://api.github.com/users/zzak/orgs",
                    "repos_url": "https://api.github.com/users/zzak/repos",
                    "events_url": "https://api.github.com/users/zzak/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/zzak/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "created_at": "2023-10-27T02:04:47Z",
                "updated_at": "2023-10-27T02:04:47Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": null,
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/rails/rails/pulls/49803/commits",
                "review_comments_url": "https://api.github.com/repos/rails/rails/pulls/49803/comments",
                "review_comment_url": "https://api.github.com/repos/rails/rails/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/49803/comments",
                "statuses_url": "https://api.github.com/repos/rails/rails/statuses/e2169f57781042341188df840b701310996ad7ef",
                "head": {
                    "label": "zzak:railties/remove_from_file-gsub",
                    "ref": "railties/remove_from_file-gsub",
                    "sha": "e2169f57781042341188df840b701310996ad7ef",
                    "user": {
                        "login": "zzak",
                        "id": 277819,
                        "node_id": "MDQ6VXNlcjI3NzgxOQ==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/277819?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/zzak",
                        "html_url": "https://github.com/zzak",
                        "followers_url": "https://api.github.com/users/zzak/followers",
                        "following_url": "https://api.github.com/users/zzak/following{/other_user}",
                        "gists_url": "https://api.github.com/users/zzak/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/zzak/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/zzak/subscriptions",
                        "organizations_url": "https://api.github.com/users/zzak/orgs",
                        "repos_url": "https://api.github.com/users/zzak/repos",
                        "events_url": "https://api.github.com/users/zzak/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/zzak/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 2396446,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyMzk2NDQ2",
                        "name": "rails",
                        "full_name": "zzak/rails",
                        "private": false,
                        "owner": {
                            "login": "zzak",
                            "id": 277819,
                            "node_id": "MDQ6VXNlcjI3NzgxOQ==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/277819?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/zzak",
                            "html_url": "https://github.com/zzak",
                            "followers_url": "https://api.github.com/users/zzak/followers",
                            "following_url": "https://api.github.com/users/zzak/following{/other_user}",
                            "gists_url": "https://api.github.com/users/zzak/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/zzak/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/zzak/subscriptions",
                            "organizations_url": "https://api.github.com/users/zzak/orgs",
                            "repos_url": "https://api.github.com/users/zzak/repos",
                            "events_url": "https://api.github.com/users/zzak/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/zzak/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/zzak/rails",
                        "description": "Ruby on Rails",
                        "fork": true,
                        "url": "https://api.github.com/repos/zzak/rails",
                        "forks_url": "https://api.github.com/repos/zzak/rails/forks",
                        "keys_url": "https://api.github.com/repos/zzak/rails/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/zzak/rails/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/zzak/rails/teams",
                        "hooks_url": "https://api.github.com/repos/zzak/rails/hooks",
                        "issue_events_url": "https://api.github.com/repos/zzak/rails/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/zzak/rails/events",
                        "assignees_url": "https://api.github.com/repos/zzak/rails/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/zzak/rails/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/zzak/rails/tags",
                        "blobs_url": "https://api.github.com/repos/zzak/rails/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/zzak/rails/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/zzak/rails/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/zzak/rails/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/zzak/rails/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/zzak/rails/languages",
                        "stargazers_url": "https://api.github.com/repos/zzak/rails/stargazers",
                        "contributors_url": "https://api.github.com/repos/zzak/rails/contributors",
                        "subscribers_url": "https://api.github.com/repos/zzak/rails/subscribers",
                        "subscription_url": "https://api.github.com/repos/zzak/rails/subscription",
                        "commits_url": "https://api.github.com/repos/zzak/rails/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/zzak/rails/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/zzak/rails/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/zzak/rails/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/zzak/rails/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/zzak/rails/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/zzak/rails/merges",
                        "archive_url": "https://api.github.com/repos/zzak/rails/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/zzak/rails/downloads",
                        "issues_url": "https://api.github.com/repos/zzak/rails/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/zzak/rails/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/zzak/rails/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/zzak/rails/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/zzak/rails/labels{/name}",
                        "releases_url": "https://api.github.com/repos/zzak/rails/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/zzak/rails/deployments",
                        "created_at": "2011-09-16T00:49:17Z",
                        "updated_at": "2022-01-09T07:23:50Z",
                        "pushed_at": "2023-10-27T02:00:02Z",
                        "git_url": "git://github.com/zzak/rails.git",
                        "ssh_url": "git@github.com:zzak/rails.git",
                        "clone_url": "https://github.com/zzak/rails.git",
                        "svn_url": "https://github.com/zzak/rails",
                        "homepage": "http://rubyonrails.org",
                        "size": 212763,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "Ruby",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 2,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 2,
                        "watchers": 0,
                        "default_branch": "main"
                    }
                },
                "base": {
                    "label": "rails:main",
                    "ref": "main",
                    "sha": "e33dbe1b3d423143685154b97ae0992f4ab821b8",
                    "user": {
                        "login": "rails",
                        "id": 4223,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQyMjM=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4223?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/rails",
                        "html_url": "https://github.com/rails",
                        "followers_url": "https://api.github.com/users/rails/followers",
                        "following_url": "https://api.github.com/users/rails/following{/other_user}",
                        "gists_url": "https://api.github.com/users/rails/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/rails/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/rails/subscriptions",
                        "organizations_url": "https://api.github.com/users/rails/orgs",
                        "repos_url": "https://api.github.com/users/rails/repos",
                        "events_url": "https://api.github.com/users/rails/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/rails/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 8514,
                        "node_id": "MDEwOlJlcG9zaXRvcnk4NTE0",
                        "name": "rails",
                        "full_name": "rails/rails",
                        "private": false,
                        "owner": {
                            "login": "rails",
                            "id": 4223,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQyMjM=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4223?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/rails",
                            "html_url": "https://github.com/rails",
                            "followers_url": "https://api.github.com/users/rails/followers",
                            "following_url": "https://api.github.com/users/rails/following{/other_user}",
                            "gists_url": "https://api.github.com/users/rails/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/rails/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/rails/subscriptions",
                            "organizations_url": "https://api.github.com/users/rails/orgs",
                            "repos_url": "https://api.github.com/users/rails/repos",
                            "events_url": "https://api.github.com/users/rails/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/rails/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/rails/rails",
                        "description": "Ruby on Rails",
                        "fork": false,
                        "url": "https://api.github.com/repos/rails/rails",
                        "forks_url": "https://api.github.com/repos/rails/rails/forks",
                        "keys_url": "https://api.github.com/repos/rails/rails/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/rails/rails/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/rails/rails/teams",
                        "hooks_url": "https://api.github.com/repos/rails/rails/hooks",
                        "issue_events_url": "https://api.github.com/repos/rails/rails/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/rails/rails/events",
                        "assignees_url": "https://api.github.com/repos/rails/rails/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/rails/rails/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/rails/rails/tags",
                        "blobs_url": "https://api.github.com/repos/rails/rails/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/rails/rails/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/rails/rails/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/rails/rails/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/rails/rails/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/rails/rails/languages",
                        "stargazers_url": "https://api.github.com/repos/rails/rails/stargazers",
                        "contributors_url": "https://api.github.com/repos/rails/rails/contributors",
                        "subscribers_url": "https://api.github.com/repos/rails/rails/subscribers",
                        "subscription_url": "https://api.github.com/repos/rails/rails/subscription",
                        "commits_url": "https://api.github.com/repos/rails/rails/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/rails/rails/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/rails/rails/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/rails/rails/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/rails/rails/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/rails/rails/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/rails/rails/merges",
                        "archive_url": "https://api.github.com/repos/rails/rails/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/rails/rails/downloads",
                        "issues_url": "https://api.github.com/repos/rails/rails/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/rails/rails/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/rails/rails/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/rails/rails/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/rails/rails/labels{/name}",
                        "releases_url": "https://api.github.com/repos/rails/rails/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/rails/rails/deployments",
                        "created_at": "2008-04-11T02:19:47Z",
                        "updated_at": "2023-10-27T01:15:09Z",
                        "pushed_at": "2023-10-27T02:04:47Z",
                        "git_url": "git://github.com/rails/rails.git",
                        "ssh_url": "git@github.com:rails/rails.git",
                        "clone_url": "https://github.com/rails/rails.git",
                        "svn_url": "https://github.com/rails/rails",
                        "homepage": "https://rubyonrails.org",
                        "size": 267388,
                        "stargazers_count": 53687,
                        "watchers_count": 53687,
                        "language": "Ruby",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 21395,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 935,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "activejob",
                            "activerecord",
                            "framework",
                            "html",
                            "mvc",
                            "rails",
                            "ruby"
                        ],
                        "visibility": "public",
                        "forks": 21395,
                        "open_issues": 935,
                        "watchers": 53687,
                        "default_branch": "main"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49803"
                    },
                    "html": {
                        "href": "https://github.com/rails/rails/pull/49803"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/rails/rails/issues/49803"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/rails/rails/issues/49803/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49803/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/rails/rails/pulls/49803/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/rails/rails/statuses/e2169f57781042341188df840b701310996ad7ef"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null,
                "merged": false,
                "mergeable": null,
                "rebaseable": null,
                "mergeable_state": "unknown",
                "merged_by": null,
                "comments": 0,
                "review_comments": 0,
                "maintainer_can_modify": true,
                "commits": 1,
                "additions": 72,
                "deletions": 1,
                "changed_files": 2
            }
        },
        "public": true,
        "created_at": "2023-10-27T02:04:48Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32885522063",
        "type": "WatchEvent",
        "actor": {
            "id": 72311619,
            "login": "WJC5197",
            "display_login": "WJC5197",
            "gravatar_id": "",
            "url": "https://api.github.com/users/WJC5197",
            "avatar_url": "https://avatars.githubusercontent.com/u/72311619?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T01:15:09Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32885332939",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 13696143,
            "login": "composerinteralia",
            "display_login": "composerinteralia",
            "gravatar_id": "",
            "url": "https://api.github.com/users/composerinteralia",
            "avatar_url": "https://avatars.githubusercontent.com/u/13696143?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/rails/rails/issues/49802",
                "repository_url": "https://api.github.com/repos/rails/rails",
                "labels_url": "https://api.github.com/repos/rails/rails/issues/49802/labels{/name}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/49802/comments",
                "events_url": "https://api.github.com/repos/rails/rails/issues/49802/events",
                "html_url": "https://github.com/rails/rails/pull/49802",
                "id": 1964535188,
                "node_id": "PR_kwDNIULOXeu90g",
                "number": 49802,
                "title": "Recover from failed connections in PostgreSQL",
                "user": {
                    "login": "composerinteralia",
                    "id": 13696143,
                    "node_id": "MDQ6VXNlcjEzNjk2MTQz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/13696143?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/composerinteralia",
                    "html_url": "https://github.com/composerinteralia",
                    "followers_url": "https://api.github.com/users/composerinteralia/followers",
                    "following_url": "https://api.github.com/users/composerinteralia/following{/other_user}",
                    "gists_url": "https://api.github.com/users/composerinteralia/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/composerinteralia/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/composerinteralia/subscriptions",
                    "organizations_url": "https://api.github.com/users/composerinteralia/orgs",
                    "repos_url": "https://api.github.com/users/composerinteralia/repos",
                    "events_url": "https://api.github.com/users/composerinteralia/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/composerinteralia/received_events",
                    "type": "User",
                    "site_admin": true
                },
                "labels": [
                    {
                        "id": 107191,
                        "node_id": "MDU6TGFiZWwxMDcxOTE=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
                        "name": "activerecord",
                        "color": "0b02e1",
                        "default": false,
                        "description": null
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 1,
                "created_at": "2023-10-26T23:51:52Z",
                "updated_at": "2023-10-27T01:00:15Z",
                "closed_at": null,
                "author_association": "MEMBER",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/rails/rails/pulls/49802",
                    "html_url": "https://github.com/rails/rails/pull/49802",
                    "diff_url": "https://github.com/rails/rails/pull/49802.diff",
                    "patch_url": "https://github.com/rails/rails/pull/49802.patch",
                    "merged_at": null
                },
                "body": "Fixes https://github.com/rails/rails/issues/49781\r\n\r\nPrior to this commit, the PostgreSQL adapter could end up holding onto a broken connection longer than expected, potentially **into the next request after the executor checkin/checkout**.\r\n\r\nThe problem is that the PostgreSQL adapter was using [two separate calls] to `with_raw_connection`, one for preparing a statement and another for executing it. That's fine before the statement is added to the statement pool, but once it the statement exists the first call to `with_raw_connection` [does not actually use the connection]. But that doesn't stop us from marking the connection as [`@verified`][verified], thereby preventing the second `with_raw_connection` from verifying and getting a chance to reconnect.\r\n\r\n[two separate calls]: https://github.com/rails/rails/blob/e33dbe1b3d423143685154b97ae0992f4ab821b8/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb#L910-L917\r\n[does not actually use the connection]: https://github.com/rails/rails/blob/490b9fc22faefca30565a970a8727c915de589ff/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb#L964-L966\r\n[verified]: https://github.com/rails/rails/blob/e33dbe1b3d423143685154b97ae0992f4ab821b8/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb#L1032\r\n\r\n```rb\r\nPost.first\r\n#=> prepare_statement verifies the connection (if needed) and populates the statement pool\r\n#=> exec_prepared succeeds\r\n\r\n#=> Oops!, we lost the connection for whatever reason\r\n\r\nPost.first\r\n#=> prepare_statement returns the statement from the statement pool, connection still marked as verified\r\n#=> exec_prepared fails, marks the connection as unverified\r\n\r\nPost.first\r\n#=> prepare_statement returns the statement from the statement pool, marks the connection as verified!!!\r\n#=> exec_prepared fails, marks the connection as unverified\r\n\r\n#=> request finishes, connection gets marked as unverified for the next request\r\n\r\nPost.first\r\n#=> prepare_statement returns the statement from the statement pool, marks the connection as verified!!!\r\n#=> exec_prepared fails, marks the connection as unverified\r\n```\r\n\r\nThe only way to recover is to execute a statement that hasn't been prepared yet, one that isn't prepared because it has no binds, or one that has `allow_retry: true` (which I think is limited to a few internal queries at the moment\u2014we don't pass the value through to `with_raw_connection` for prepared statements anyway).\r\n\r\nThis commit fixes the problem by preparing and executing the statement within a single `with_raw_connection` block. This is what the other adapters with prepared statements already do.\r\n\r\nIt makes more sense this way\u2014even if we managed to reconnect before executing the statement in the old code, we'd be referencing a prepared statement from a different connection, so it'd fail anyway. Having the prepare and execute in the same `with_raw_connection` means if we do need to reconnect, we'll start from the beginning and prepare the statement again on the fresh connection.\r\n\r\nNote that this change does get rid of connection retries on preparing statements, but I think that's OK. It matches the other adapters, matches the Rails 7.0 behavior, and it's still better than ending up with a broken connection.\r\n\r\n<!--\r\nThanks for contributing to Rails!\r\n\r\nPlease do not make *Draft* pull requests, as they still send\r\nnotifications to everyone watching the Rails repo.\r\n\r\nCreate a pull request when it is ready for review and feedback\r\nfrom the Rails team :).\r\n\r\nIf your pull request affects documentation or any non-code\r\nchanges, guidelines for those changes are [available\r\nhere](https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation)\r\n\r\nAbout this template\r\n\r\nThe following template aims to help contributors write a good description for their pull requests.\r\nWe'd like you to provide a description of the changes in your pull request (i.e. bugs fixed or features added), motivation behind the changes, and complete the checklist below before opening a pull request.\r\n\r\nFeel free to discard it if you need to (e.g. when you just fix a typo). -->\r\n\r\n### Checklist\r\n\r\nBefore submitting the PR make sure the following are checked:\r\n\r\n* [x] This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.\r\n* [x] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: `[Fix #issue-number]`\r\n* [x] Tests are added or updated if you fix a bug or add a feature.\r\n* [x] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/49802/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/rails/rails/issues/49802/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/rails/rails/issues/comments/1782133371",
                "html_url": "https://github.com/rails/rails/pull/49802#issuecomment-1782133371",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/49802",
                "id": 1782133371,
                "node_id": "IC_kwDNIULOajkyew",
                "user": {
                    "login": "composerinteralia",
                    "id": 13696143,
                    "node_id": "MDQ6VXNlcjEzNjk2MTQz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/13696143?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/composerinteralia",
                    "html_url": "https://github.com/composerinteralia",
                    "followers_url": "https://api.github.com/users/composerinteralia/followers",
                    "following_url": "https://api.github.com/users/composerinteralia/following{/other_user}",
                    "gists_url": "https://api.github.com/users/composerinteralia/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/composerinteralia/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/composerinteralia/subscriptions",
                    "organizations_url": "https://api.github.com/users/composerinteralia/orgs",
                    "repos_url": "https://api.github.com/users/composerinteralia/repos",
                    "events_url": "https://api.github.com/users/composerinteralia/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/composerinteralia/received_events",
                    "type": "User",
                    "site_admin": true
                },
                "created_at": "2023-10-27T01:00:15Z",
                "updated_at": "2023-10-27T01:00:15Z",
                "author_association": "MEMBER",
                "body": "If this fix looks OK, we'll probably want to backport to 7.1 as well.",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/comments/1782133371/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T01:00:16Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32884885723",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 47848,
            "login": "rafaelfranca",
            "display_login": "rafaelfranca",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rafaelfranca",
            "avatar_url": "https://avatars.githubusercontent.com/u/47848?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/rails/rails/issues/46238",
                "repository_url": "https://api.github.com/repos/rails/rails",
                "labels_url": "https://api.github.com/repos/rails/rails/issues/46238/labels{/name}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/46238/comments",
                "events_url": "https://api.github.com/repos/rails/rails/issues/46238/events",
                "html_url": "https://github.com/rails/rails/pull/46238",
                "id": 1408385982,
                "node_id": "PR_kwDNIULOQMRb5g",
                "number": 46238,
                "title": "Pass validation_context to validates_associated",
                "user": {
                    "login": "austenmadden",
                    "id": 7366727,
                    "node_id": "MDQ6VXNlcjczNjY3Mjc=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/7366727?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/austenmadden",
                    "html_url": "https://github.com/austenmadden",
                    "followers_url": "https://api.github.com/users/austenmadden/followers",
                    "following_url": "https://api.github.com/users/austenmadden/following{/other_user}",
                    "gists_url": "https://api.github.com/users/austenmadden/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/austenmadden/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/austenmadden/subscriptions",
                    "organizations_url": "https://api.github.com/users/austenmadden/orgs",
                    "repos_url": "https://api.github.com/users/austenmadden/repos",
                    "events_url": "https://api.github.com/users/austenmadden/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/austenmadden/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 107190,
                        "node_id": "MDU6TGFiZWwxMDcxOTA=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activemodel",
                        "name": "activemodel",
                        "color": "00E5FF",
                        "default": false,
                        "description": null
                    },
                    {
                        "id": 107191,
                        "node_id": "MDU6TGFiZWwxMDcxOTE=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
                        "name": "activerecord",
                        "color": "0b02e1",
                        "default": false,
                        "description": null
                    },
                    {
                        "id": 3666649,
                        "node_id": "MDU6TGFiZWwzNjY2NjQ5",
                        "url": "https://api.github.com/repos/rails/rails/labels/actionview",
                        "name": "actionview",
                        "color": "d7e102",
                        "default": false,
                        "description": null
                    },
                    {
                        "id": 300028327,
                        "node_id": "MDU6TGFiZWwzMDAwMjgzMjc=",
                        "url": "https://api.github.com/repos/rails/rails/labels/actioncable",
                        "name": "actioncable",
                        "color": "bfdadc",
                        "default": false,
                        "description": null
                    },
                    {
                        "id": 6042419827,
                        "node_id": "LA_kwDNIULPAAAAAWgoAnM",
                        "url": "https://api.github.com/repos/rails/rails/labels/accepted",
                        "name": "accepted",
                        "color": "0E8A16",
                        "default": false,
                        "description": "Core accepts PR idea, code may need work"
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 12,
                "created_at": "2022-10-13T20:28:38Z",
                "updated_at": "2023-10-27T00:25:03Z",
                "closed_at": null,
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/rails/rails/pulls/46238",
                    "html_url": "https://github.com/rails/rails/pull/46238",
                    "diff_url": "https://github.com/rails/rails/pull/46238.diff",
                    "patch_url": "https://github.com/rails/rails/pull/46238.patch",
                    "merged_at": null
                },
                "body": "<!--\r\nAbout this template\r\n\r\nThe following template aims to help contributors write a good description for their pull requests.\r\nWe'd like you to provide a description of the changes in your pull request (i.e. bugs fixed or features added), motivation behind the changes, and complete the checklist below before opening a pull request.\r\n\r\nFeel free to discard it if you need to (e.g. when you just fix a typo). -->\r\n\r\n### Motivation / Background\r\n\r\n<!-- Describe why this Pull Request needs to be merged. What bug have you fixed? What feature have you added? Why is it important? -->\r\n\r\nThis Pull Request has been created because https://github.com/rails/rails/issues/46239\r\n\r\n### Detail\r\n\r\nThe docs imply that when specified the `on` option of `validates_associated` should be respected by the validated association. Prior to this change the validation context used will simply be the default behavior as if no `on` option were specified. With this change, the validation_context of the parent record is passed to the `valid?` check.\r\n\r\n### Additional information\r\n\r\n<!-- Provide additional information such as benchmarks, reference to other repositories or alternative solutions. -->\r\n\r\n### Checklist\r\n\r\nBefore submitting the PR make sure the following are checked:\r\n\r\n* [x] This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.\r\n* [x] There are no typos in commit messages and comments.\r\n* [x] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: `[Fix #issue-number]`\r\n* [x] Feature branch is up-to-date with `main` (if not - rebase it).\r\n* [x] Pull request only contains one commit for bug fixes and small features. If it's a larger feature, multiple commits are permitted but must be descriptive.\r\n* [x] Tests are added if you fix a bug or add a feature.\r\n* [x] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.\r\n* [x] PR is not in a draft state.\r\n* [x] CI is passing.\r\n\r\n<!--\r\nNote: Please avoid making *Draft* pull requests, as they still send\r\nnotifications to everyone watching the Rails repo.\r\nCreate a pull request when it is ready for review and feedback\r\nfrom the Rails team :).\r\n\r\nIf your pull request affects documentation or any non-code\r\nchanges, guidelines for those changes are [available\r\nhere](https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation)\r\n\r\nThanks for contributing to Rails! -->\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/46238/reactions",
                    "total_count": 3,
                    "+1": 3,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/rails/rails/issues/46238/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/rails/rails/issues/comments/1782110991",
                "html_url": "https://github.com/rails/rails/pull/46238#issuecomment-1782110991",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/46238",
                "id": 1782110991,
                "node_id": "IC_kwDNIULOajjbDw",
                "user": {
                    "login": "rafaelfranca",
                    "id": 47848,
                    "node_id": "MDQ6VXNlcjQ3ODQ4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/47848?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/rafaelfranca",
                    "html_url": "https://github.com/rafaelfranca",
                    "followers_url": "https://api.github.com/users/rafaelfranca/followers",
                    "following_url": "https://api.github.com/users/rafaelfranca/following{/other_user}",
                    "gists_url": "https://api.github.com/users/rafaelfranca/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/rafaelfranca/subscriptions",
                    "organizations_url": "https://api.github.com/users/rafaelfranca/orgs",
                    "repos_url": "https://api.github.com/users/rafaelfranca/repos",
                    "events_url": "https://api.github.com/users/rafaelfranca/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/rafaelfranca/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T00:25:02Z",
                "updated_at": "2023-10-27T00:25:02Z",
                "author_association": "MEMBER",
                "body": "This PR is accepted but I'd like to give credits to @rafal-brize for the first try. Can you make him co-author of this commit and add him to the CHANGELOG entry?",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/comments/1782110991/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T00:25:03Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    },
    {
        "id": "32884814363",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 47848,
            "login": "rafaelfranca",
            "display_login": "rafaelfranca",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rafaelfranca",
            "avatar_url": "https://avatars.githubusercontent.com/u/47848?"
        },
        "repo": {
            "id": 8514,
            "name": "rails/rails",
            "url": "https://api.github.com/repos/rails/rails"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/rails/rails/issues/46238",
                "repository_url": "https://api.github.com/repos/rails/rails",
                "labels_url": "https://api.github.com/repos/rails/rails/issues/46238/labels{/name}",
                "comments_url": "https://api.github.com/repos/rails/rails/issues/46238/comments",
                "events_url": "https://api.github.com/repos/rails/rails/issues/46238/events",
                "html_url": "https://github.com/rails/rails/pull/46238",
                "id": 1408385982,
                "node_id": "PR_kwDNIULOQMRb5g",
                "number": 46238,
                "title": "Pass validation_context to validates_associated",
                "user": {
                    "login": "austenmadden",
                    "id": 7366727,
                    "node_id": "MDQ6VXNlcjczNjY3Mjc=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/7366727?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/austenmadden",
                    "html_url": "https://github.com/austenmadden",
                    "followers_url": "https://api.github.com/users/austenmadden/followers",
                    "following_url": "https://api.github.com/users/austenmadden/following{/other_user}",
                    "gists_url": "https://api.github.com/users/austenmadden/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/austenmadden/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/austenmadden/subscriptions",
                    "organizations_url": "https://api.github.com/users/austenmadden/orgs",
                    "repos_url": "https://api.github.com/users/austenmadden/repos",
                    "events_url": "https://api.github.com/users/austenmadden/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/austenmadden/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 107190,
                        "node_id": "MDU6TGFiZWwxMDcxOTA=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activemodel",
                        "name": "activemodel",
                        "color": "00E5FF",
                        "default": false,
                        "description": null
                    },
                    {
                        "id": 107191,
                        "node_id": "MDU6TGFiZWwxMDcxOTE=",
                        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
                        "name": "activerecord",
                        "color": "0b02e1",
                        "default": false,
                        "description": null
                    },
                    {
                        "id": 3666649,
                        "node_id": "MDU6TGFiZWwzNjY2NjQ5",
                        "url": "https://api.github.com/repos/rails/rails/labels/actionview",
                        "name": "actionview",
                        "color": "d7e102",
                        "default": false,
                        "description": null
                    },
                    {
                        "id": 300028327,
                        "node_id": "MDU6TGFiZWwzMDAwMjgzMjc=",
                        "url": "https://api.github.com/repos/rails/rails/labels/actioncable",
                        "name": "actioncable",
                        "color": "bfdadc",
                        "default": false,
                        "description": null
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 11,
                "created_at": "2022-10-13T20:28:38Z",
                "updated_at": "2023-10-27T00:19:26Z",
                "closed_at": null,
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/rails/rails/pulls/46238",
                    "html_url": "https://github.com/rails/rails/pull/46238",
                    "diff_url": "https://github.com/rails/rails/pull/46238.diff",
                    "patch_url": "https://github.com/rails/rails/pull/46238.patch",
                    "merged_at": null
                },
                "body": "<!--\r\nAbout this template\r\n\r\nThe following template aims to help contributors write a good description for their pull requests.\r\nWe'd like you to provide a description of the changes in your pull request (i.e. bugs fixed or features added), motivation behind the changes, and complete the checklist below before opening a pull request.\r\n\r\nFeel free to discard it if you need to (e.g. when you just fix a typo). -->\r\n\r\n### Motivation / Background\r\n\r\n<!-- Describe why this Pull Request needs to be merged. What bug have you fixed? What feature have you added? Why is it important? -->\r\n\r\nThis Pull Request has been created because https://github.com/rails/rails/issues/46239\r\n\r\n### Detail\r\n\r\nThe docs imply that when specified the `on` option of `validates_associated` should be respected by the validated association. Prior to this change the validation context used will simply be the default behavior as if no `on` option were specified. With this change, the validation_context of the parent record is passed to the `valid?` check.\r\n\r\n### Additional information\r\n\r\n<!-- Provide additional information such as benchmarks, reference to other repositories or alternative solutions. -->\r\n\r\n### Checklist\r\n\r\nBefore submitting the PR make sure the following are checked:\r\n\r\n* [x] This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.\r\n* [x] There are no typos in commit messages and comments.\r\n* [x] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: `[Fix #issue-number]`\r\n* [x] Feature branch is up-to-date with `main` (if not - rebase it).\r\n* [x] Pull request only contains one commit for bug fixes and small features. If it's a larger feature, multiple commits are permitted but must be descriptive.\r\n* [x] Tests are added if you fix a bug or add a feature.\r\n* [x] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.\r\n* [x] PR is not in a draft state.\r\n* [x] CI is passing.\r\n\r\n<!--\r\nNote: Please avoid making *Draft* pull requests, as they still send\r\nnotifications to everyone watching the Rails repo.\r\nCreate a pull request when it is ready for review and feedback\r\nfrom the Rails team :).\r\n\r\nIf your pull request affects documentation or any non-code\r\nchanges, guidelines for those changes are [available\r\nhere](https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation)\r\n\r\nThanks for contributing to Rails! -->\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/46238/reactions",
                    "total_count": 3,
                    "+1": 3,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/rails/rails/issues/46238/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/rails/rails/issues/comments/1782106892",
                "html_url": "https://github.com/rails/rails/pull/46238#issuecomment-1782106892",
                "issue_url": "https://api.github.com/repos/rails/rails/issues/46238",
                "id": 1782106892,
                "node_id": "IC_kwDNIULOajjLDA",
                "user": {
                    "login": "rafaelfranca",
                    "id": 47848,
                    "node_id": "MDQ6VXNlcjQ3ODQ4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/47848?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/rafaelfranca",
                    "html_url": "https://github.com/rafaelfranca",
                    "followers_url": "https://api.github.com/users/rafaelfranca/followers",
                    "following_url": "https://api.github.com/users/rafaelfranca/following{/other_user}",
                    "gists_url": "https://api.github.com/users/rafaelfranca/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/rafaelfranca/subscriptions",
                    "organizations_url": "https://api.github.com/users/rafaelfranca/orgs",
                    "repos_url": "https://api.github.com/users/rafaelfranca/repos",
                    "events_url": "https://api.github.com/users/rafaelfranca/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/rafaelfranca/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T00:19:25Z",
                "updated_at": "2023-10-27T00:19:25Z",
                "author_association": "MEMBER",
                "body": "Duplicated of #24135",
                "reactions": {
                    "url": "https://api.github.com/repos/rails/rails/issues/comments/1782106892/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T00:19:26Z",
        "org": {
            "id": 4223,
            "login": "rails",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/rails",
            "avatar_url": "https://avatars.githubusercontent.com/u/4223?"
        }
    }
]