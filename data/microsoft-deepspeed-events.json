[
    {
        "id": "32897568736",
        "type": "WatchEvent",
        "actor": {
            "id": 29833275,
            "login": "Akira2017inFrankfurt",
            "display_login": "Akira2017inFrankfurt",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Akira2017inFrankfurt",
            "avatar_url": "https://avatars.githubusercontent.com/u/29833275?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T11:47:48Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32897166263",
        "type": "WatchEvent",
        "actor": {
            "id": 68465393,
            "login": "zwp-peter",
            "display_login": "zwp-peter",
            "gravatar_id": "",
            "url": "https://api.github.com/users/zwp-peter",
            "avatar_url": "https://avatars.githubusercontent.com/u/68465393?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T11:30:42Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32895046843",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 107918818,
            "login": "jiqing-feng",
            "display_login": "jiqing-feng",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jiqing-feng",
            "avatar_url": "https://avatars.githubusercontent.com/u/107918818?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4515",
                "repository_url": "https://api.github.com/repos/microsoft/DeepSpeed",
                "labels_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4515/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4515/comments",
                "events_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4515/events",
                "html_url": "https://github.com/microsoft/DeepSpeed/issues/4515",
                "id": 1944929070,
                "node_id": "I_kwDODg7w7M5z7UMu",
                "number": 4515,
                "title": "During inference, support passing `past_key_values` even if `input_ids.shape[-1] >= 2`",
                "user": {
                    "login": "trianxy",
                    "id": 16118129,
                    "node_id": "MDQ6VXNlcjE2MTE4MTI5",
                    "avatar_url": "https://avatars.githubusercontent.com/u/16118129?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/trianxy",
                    "html_url": "https://github.com/trianxy",
                    "followers_url": "https://api.github.com/users/trianxy/followers",
                    "following_url": "https://api.github.com/users/trianxy/following{/other_user}",
                    "gists_url": "https://api.github.com/users/trianxy/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/trianxy/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/trianxy/subscriptions",
                    "organizations_url": "https://api.github.com/users/trianxy/orgs",
                    "repos_url": "https://api.github.com/users/trianxy/repos",
                    "events_url": "https://api.github.com/users/trianxy/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/trianxy/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 1805232534,
                        "node_id": "MDU6TGFiZWwxODA1MjMyNTM0",
                        "url": "https://api.github.com/repos/microsoft/DeepSpeed/labels/enhancement",
                        "name": "enhancement",
                        "color": "a2eeef",
                        "default": true,
                        "description": "New feature or request"
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 1,
                "created_at": "2023-10-16T10:49:40Z",
                "updated_at": "2023-10-27T10:05:06Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "PROBLEM\r\n----------\r\nI would like to use DeepSpeed together with the LLMA technique described in [this Microsoft paper](https://arxiv.org/pdf/2304.04487.pdf) (cc @nyanyanya ). LLMA, which is related to speculative decoding, speeds up model inference by 3x for several of my use cases.\r\n\r\nBut I can't use DeepSpeed, because it doesn't seem to support inputting my own `past_key_values` if the length of input_ids is `>=2`. This is related to [this comment](https://github.com/microsoft/DeepSpeed/issues/3350#issuecomment-1518720762) by @RezaYazdaniAminabadi\r\n\r\n\r\nCODE TO REPRODUCE\r\n-----------------------\r\nThe following code shows how DeepSpeed does *not* produce the same output (compared to not running with DeepSpeed) when we use past_key_values in combination with input id lengths >=2.\r\n\r\n```python\r\n# !pip install torch==2.0.1 transformers==4.34.0 deepspeed==0.11.1\r\n\r\nfrom typing import Optional, Any\r\nfrom transformers import AutoTokenizer, AutoModelForCausalLM\r\nimport torch\r\nimport deepspeed\r\n\r\n\r\nARCHITECTURE = \"gpt2\"\r\nDEVICE = \"cuda\"\r\nPROMPT = \"Capital city of Germany:\"\r\nMAX_NEW_TOKENS = 10\r\nTOKENIZER = AutoTokenizer.from_pretrained(ARCHITECTURE, use_fast=True)\r\n\r\n\r\ndef cut_pkv(pkv: tuple, length: int = 0) -> tuple:\r\n    \"\"\"Return past_key_values cut to the first `length` tokens.\"\"\"\r\n    return tuple((t1[:, :, :length, :], t2[:, :, :length, :]) for (t1, t2) in pkv)\r\n\r\ndef run_WITHOUT_past_key_values(model: Any) -> None:\r\n    input_ids = TOKENIZER(PROMPT, return_tensors=\"pt\")[\"input_ids\"].to(DEVICE)\r\n    input_plus_completion_ids = input_ids\r\n\r\n    with torch.inference_mode():\r\n        for _ in range(MAX_NEW_TOKENS):\r\n            output = model(input_plus_completion_ids)\r\n            predicted_id = torch.argmax(output.logits[0][-1])\r\n            input_plus_completion_ids = torch.cat((input_plus_completion_ids, predicted_id.view(1, 1)), dim=1)\r\n\r\n    print(TOKENIZER.decode(input_plus_completion_ids[0]))  \r\n    \r\n    \r\ndef run_WITH_past_key_values(model: Any) -> None:\r\n    input_ids = TOKENIZER(PROMPT, return_tensors=\"pt\")[\"input_ids\"].to(DEVICE)\r\n    input_plus_completion_ids = input_ids\r\n    pkv = None\r\n\r\n    with torch.inference_mode():\r\n        for _ in range(MAX_NEW_TOKENS):\r\n            if pkv is None:\r\n                output = model(input_plus_completion_ids)\r\n            else:\r\n                # IMPORTANT: we remove all but the last 2 input ids, and pass in all past_key_values except those of the last 2 input ids\r\n                pkv = cut_pkv(pkv, length=input_plus_completion_ids[0].shape[-1] - 2)\r\n                output = model(input_plus_completion_ids[0:1, -2:], past_key_values=pkv, use_cache=True)\r\n\r\n\r\n            predicted_id = torch.argmax(output.logits[0][-1])\r\n            input_plus_completion_ids = torch.cat((input_plus_completion_ids, predicted_id.view(1, 1)), dim=1)\r\n\r\n            pkv = output.past_key_values\r\n            \r\n    print(TOKENIZER.decode(input_plus_completion_ids[0]))  \r\n\r\n\r\n# running without DeepSpeed works fine in both cases\r\nmodel = AutoModelForCausalLM.from_pretrained(ARCHITECTURE).eval().to(DEVICE)\r\nrun_WITHOUT_past_key_values(model) # correctly prints out: `Capital city of Germany:\\n\\nThe city of Berlin is the capital of`\r\nprint()\r\nprint()\r\nrun_WITH_past_key_values(model) # correctly prints out: `Capital city of Germany:\\n\\nThe city of Berlin is the capital of`\r\n\r\n# running with DeepSpeed produces an erroneous output in the second case\r\nds_engine = deepspeed.init_inference(model, dtype=torch.float32, replace_with_kernel_inject=True)\r\nmodel = ds_engine.module\r\nrun_WITHOUT_past_key_values(model) # correctly prints out: `Capital city of Germany:\\n\\nThe city of Berlin is the capital of`\r\nprint()\r\nprint()\r\nrun_WITH_past_key_values(model) # WRONGLY prints out: `Capital city of Germany:\\n\\n:::::::::`\r\n```\r\n\r\n\r\nSOLUTION\r\n-----------\r\nI would like to get the same results when running a model forward pass, independently on whether I run with or without DeepSpeed. \r\n\r\n\r\nADDITIONAL NOTES\r\n---------------------\r\nThis feature request would likely also fix/resolve [this bug](https://github.com/microsoft/DeepSpeed/issues/3404#issuecomment-1537244575) and [this issue/feature request](https://github.com/microsoft/DeepSpeed/issues/3350#issuecomment-1730288381) mentioned by @sakoush\r\n\r\nI'd be happy to discuss, debug and/or help implementing this.",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4515/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4515/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments/1782647027",
                "html_url": "https://github.com/microsoft/DeepSpeed/issues/4515#issuecomment-1782647027",
                "issue_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4515",
                "id": 1782647027,
                "node_id": "IC_kwDODg7w7M5qQQjz",
                "user": {
                    "login": "jiqing-feng",
                    "id": 107918818,
                    "node_id": "U_kgDOBm614g",
                    "avatar_url": "https://avatars.githubusercontent.com/u/107918818?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jiqing-feng",
                    "html_url": "https://github.com/jiqing-feng",
                    "followers_url": "https://api.github.com/users/jiqing-feng/followers",
                    "following_url": "https://api.github.com/users/jiqing-feng/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jiqing-feng/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jiqing-feng/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jiqing-feng/subscriptions",
                    "organizations_url": "https://api.github.com/users/jiqing-feng/orgs",
                    "repos_url": "https://api.github.com/users/jiqing-feng/repos",
                    "events_url": "https://api.github.com/users/jiqing-feng/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jiqing-feng/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T10:05:06Z",
                "updated_at": "2023-10-27T10:05:06Z",
                "author_association": "NONE",
                "body": "Same problem.",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments/1782647027/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T10:05:07Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32893271018",
        "type": "WatchEvent",
        "actor": {
            "id": 71651717,
            "login": "bjzhb666",
            "display_login": "bjzhb666",
            "gravatar_id": "",
            "url": "https://api.github.com/users/bjzhb666",
            "avatar_url": "https://avatars.githubusercontent.com/u/71651717?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T08:58:05Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32893151138",
        "type": "WatchEvent",
        "actor": {
            "id": 38951435,
            "login": "Rickylht",
            "display_login": "Rickylht",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Rickylht",
            "avatar_url": "https://avatars.githubusercontent.com/u/38951435?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T08:53:43Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32892930119",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 29192565,
            "login": "ryusaeba",
            "display_login": "ryusaeba",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryusaeba",
            "avatar_url": "https://avatars.githubusercontent.com/u/29192565?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4480",
                "repository_url": "https://api.github.com/repos/microsoft/DeepSpeed",
                "labels_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4480/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4480/comments",
                "events_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4480/events",
                "html_url": "https://github.com/microsoft/DeepSpeed/pull/4480",
                "id": 1933334092,
                "node_id": "PR_kwDODg7w7M5cRijN",
                "number": 4480,
                "title": "[Bug fix] Add rope_theta for llama config",
                "user": {
                    "login": "cupertank",
                    "id": 34806644,
                    "node_id": "MDQ6VXNlcjM0ODA2NjQ0",
                    "avatar_url": "https://avatars.githubusercontent.com/u/34806644?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/cupertank",
                    "html_url": "https://github.com/cupertank",
                    "followers_url": "https://api.github.com/users/cupertank/followers",
                    "following_url": "https://api.github.com/users/cupertank/following{/other_user}",
                    "gists_url": "https://api.github.com/users/cupertank/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/cupertank/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/cupertank/subscriptions",
                    "organizations_url": "https://api.github.com/users/cupertank/orgs",
                    "repos_url": "https://api.github.com/users/cupertank/repos",
                    "events_url": "https://api.github.com/users/cupertank/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/cupertank/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "closed",
                "locked": false,
                "assignee": {
                    "login": "mrwyattii",
                    "id": 18311180,
                    "node_id": "MDQ6VXNlcjE4MzExMTgw",
                    "avatar_url": "https://avatars.githubusercontent.com/u/18311180?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/mrwyattii",
                    "html_url": "https://github.com/mrwyattii",
                    "followers_url": "https://api.github.com/users/mrwyattii/followers",
                    "following_url": "https://api.github.com/users/mrwyattii/following{/other_user}",
                    "gists_url": "https://api.github.com/users/mrwyattii/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/mrwyattii/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/mrwyattii/subscriptions",
                    "organizations_url": "https://api.github.com/users/mrwyattii/orgs",
                    "repos_url": "https://api.github.com/users/mrwyattii/repos",
                    "events_url": "https://api.github.com/users/mrwyattii/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/mrwyattii/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "mrwyattii",
                        "id": 18311180,
                        "node_id": "MDQ6VXNlcjE4MzExMTgw",
                        "avatar_url": "https://avatars.githubusercontent.com/u/18311180?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mrwyattii",
                        "html_url": "https://github.com/mrwyattii",
                        "followers_url": "https://api.github.com/users/mrwyattii/followers",
                        "following_url": "https://api.github.com/users/mrwyattii/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mrwyattii/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mrwyattii/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mrwyattii/subscriptions",
                        "organizations_url": "https://api.github.com/users/mrwyattii/orgs",
                        "repos_url": "https://api.github.com/users/mrwyattii/repos",
                        "events_url": "https://api.github.com/users/mrwyattii/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mrwyattii/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "milestone": null,
                "comments": 10,
                "created_at": "2023-10-09T15:29:15Z",
                "updated_at": "2023-10-27T08:45:19Z",
                "closed_at": "2023-10-19T18:12:46Z",
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/pulls/4480",
                    "html_url": "https://github.com/microsoft/DeepSpeed/pull/4480",
                    "diff_url": "https://github.com/microsoft/DeepSpeed/pull/4480.diff",
                    "patch_url": "https://github.com/microsoft/DeepSpeed/pull/4480.patch",
                    "merged_at": "2023-10-19T18:12:46Z"
                },
                "body": "Fixed bug with CodeLlama. Bug description is here https://github.com/microsoft/DeepSpeed/issues/4442. Now DeepSpeed uses rope_theta from transformers.",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4480/reactions",
                    "total_count": 2,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 2,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4480/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments/1782535107",
                "html_url": "https://github.com/microsoft/DeepSpeed/pull/4480#issuecomment-1782535107",
                "issue_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4480",
                "id": 1782535107,
                "node_id": "IC_kwDODg7w7M5qP1PD",
                "user": {
                    "login": "ryusaeba",
                    "id": 29192565,
                    "node_id": "MDQ6VXNlcjI5MTkyNTY1",
                    "avatar_url": "https://avatars.githubusercontent.com/u/29192565?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/ryusaeba",
                    "html_url": "https://github.com/ryusaeba",
                    "followers_url": "https://api.github.com/users/ryusaeba/followers",
                    "following_url": "https://api.github.com/users/ryusaeba/following{/other_user}",
                    "gists_url": "https://api.github.com/users/ryusaeba/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/ryusaeba/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/ryusaeba/subscriptions",
                    "organizations_url": "https://api.github.com/users/ryusaeba/orgs",
                    "repos_url": "https://api.github.com/users/ryusaeba/repos",
                    "events_url": "https://api.github.com/users/ryusaeba/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/ryusaeba/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T08:45:18Z",
                "updated_at": "2023-10-27T08:45:18Z",
                "author_association": "NONE",
                "body": "Do you plan to have a patch release for this?",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments/1782535107/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T08:45:19Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32892694240",
        "type": "WatchEvent",
        "actor": {
            "id": 48671292,
            "login": "Tonanguyxiro",
            "display_login": "Tonanguyxiro",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Tonanguyxiro",
            "avatar_url": "https://avatars.githubusercontent.com/u/48671292?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T08:36:11Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32892218690",
        "type": "WatchEvent",
        "actor": {
            "id": 59118459,
            "login": "ztjhz",
            "display_login": "ztjhz",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ztjhz",
            "avatar_url": "https://avatars.githubusercontent.com/u/59118459?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T08:17:47Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32891910194",
        "type": "WatchEvent",
        "actor": {
            "id": 48041218,
            "login": "HeegerGao",
            "display_login": "HeegerGao",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HeegerGao",
            "avatar_url": "https://avatars.githubusercontent.com/u/48041218?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T08:05:37Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32891570566",
        "type": "ForkEvent",
        "actor": {
            "id": 107918818,
            "login": "jiqing-feng",
            "display_login": "jiqing-feng",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jiqing-feng",
            "avatar_url": "https://avatars.githubusercontent.com/u/107918818?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "forkee": {
                "id": 710678177,
                "node_id": "R_kgDOKlwWoQ",
                "name": "DeepSpeed",
                "full_name": "jiqing-feng/DeepSpeed",
                "private": false,
                "owner": {
                    "login": "jiqing-feng",
                    "id": 107918818,
                    "node_id": "U_kgDOBm614g",
                    "avatar_url": "https://avatars.githubusercontent.com/u/107918818?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/jiqing-feng",
                    "html_url": "https://github.com/jiqing-feng",
                    "followers_url": "https://api.github.com/users/jiqing-feng/followers",
                    "following_url": "https://api.github.com/users/jiqing-feng/following{/other_user}",
                    "gists_url": "https://api.github.com/users/jiqing-feng/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/jiqing-feng/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/jiqing-feng/subscriptions",
                    "organizations_url": "https://api.github.com/users/jiqing-feng/orgs",
                    "repos_url": "https://api.github.com/users/jiqing-feng/repos",
                    "events_url": "https://api.github.com/users/jiqing-feng/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/jiqing-feng/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "html_url": "https://github.com/jiqing-feng/DeepSpeed",
                "description": "DeepSpeed is a deep learning optimization library that makes distributed training and inference easy, efficient, and effective.",
                "fork": true,
                "url": "https://api.github.com/repos/jiqing-feng/DeepSpeed",
                "forks_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/forks",
                "keys_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/keys{/key_id}",
                "collaborators_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/collaborators{/collaborator}",
                "teams_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/teams",
                "hooks_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/hooks",
                "issue_events_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/issues/events{/number}",
                "events_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/events",
                "assignees_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/assignees{/user}",
                "branches_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/branches{/branch}",
                "tags_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/tags",
                "blobs_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/git/blobs{/sha}",
                "git_tags_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/git/tags{/sha}",
                "git_refs_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/git/refs{/sha}",
                "trees_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/git/trees{/sha}",
                "statuses_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/statuses/{sha}",
                "languages_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/languages",
                "stargazers_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/stargazers",
                "contributors_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/contributors",
                "subscribers_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/subscribers",
                "subscription_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/subscription",
                "commits_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/commits{/sha}",
                "git_commits_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/git/commits{/sha}",
                "comments_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/comments{/number}",
                "issue_comment_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/issues/comments{/number}",
                "contents_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/contents/{+path}",
                "compare_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/compare/{base}...{head}",
                "merges_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/merges",
                "archive_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/{archive_format}{/ref}",
                "downloads_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/downloads",
                "issues_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/issues{/number}",
                "pulls_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/pulls{/number}",
                "milestones_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/milestones{/number}",
                "notifications_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/notifications{?since,all,participating}",
                "labels_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/labels{/name}",
                "releases_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/releases{/id}",
                "deployments_url": "https://api.github.com/repos/jiqing-feng/DeepSpeed/deployments",
                "created_at": "2023-10-27T07:51:43Z",
                "updated_at": "2023-10-27T07:51:43Z",
                "pushed_at": "2023-10-27T07:02:19Z",
                "git_url": "git://github.com/jiqing-feng/DeepSpeed.git",
                "ssh_url": "git@github.com:jiqing-feng/DeepSpeed.git",
                "clone_url": "https://github.com/jiqing-feng/DeepSpeed.git",
                "svn_url": "https://github.com/jiqing-feng/DeepSpeed",
                "homepage": "https://www.deepspeed.ai/",
                "size": 187045,
                "stargazers_count": 0,
                "watchers_count": 0,
                "language": null,
                "has_issues": false,
                "has_projects": true,
                "has_downloads": true,
                "has_wiki": false,
                "has_pages": false,
                "has_discussions": false,
                "forks_count": 0,
                "mirror_url": null,
                "archived": false,
                "disabled": false,
                "open_issues_count": 0,
                "license": null,
                "allow_forking": true,
                "is_template": false,
                "web_commit_signoff_required": false,
                "topics": [],
                "visibility": "public",
                "forks": 0,
                "open_issues": 0,
                "watchers": 0,
                "default_branch": "main",
                "public": true
            }
        },
        "public": true,
        "created_at": "2023-10-27T07:51:44Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32891550496",
        "type": "ForkEvent",
        "actor": {
            "id": 28757366,
            "login": "ZhiyuanChen",
            "display_login": "ZhiyuanChen",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ZhiyuanChen",
            "avatar_url": "https://avatars.githubusercontent.com/u/28757366?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "forkee": {
                "id": 710677818,
                "node_id": "R_kgDOKlwVOg",
                "name": "DeepSpeed",
                "full_name": "ZhiyuanChen/DeepSpeed",
                "private": false,
                "owner": {
                    "login": "ZhiyuanChen",
                    "id": 28757366,
                    "node_id": "MDQ6VXNlcjI4NzU3MzY2",
                    "avatar_url": "https://avatars.githubusercontent.com/u/28757366?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/ZhiyuanChen",
                    "html_url": "https://github.com/ZhiyuanChen",
                    "followers_url": "https://api.github.com/users/ZhiyuanChen/followers",
                    "following_url": "https://api.github.com/users/ZhiyuanChen/following{/other_user}",
                    "gists_url": "https://api.github.com/users/ZhiyuanChen/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/ZhiyuanChen/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/ZhiyuanChen/subscriptions",
                    "organizations_url": "https://api.github.com/users/ZhiyuanChen/orgs",
                    "repos_url": "https://api.github.com/users/ZhiyuanChen/repos",
                    "events_url": "https://api.github.com/users/ZhiyuanChen/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/ZhiyuanChen/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "html_url": "https://github.com/ZhiyuanChen/DeepSpeed",
                "description": "DeepSpeed is a deep learning optimization library that makes distributed training and inference easy, efficient, and effective.",
                "fork": true,
                "url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed",
                "forks_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/forks",
                "keys_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/keys{/key_id}",
                "collaborators_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/collaborators{/collaborator}",
                "teams_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/teams",
                "hooks_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/hooks",
                "issue_events_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/issues/events{/number}",
                "events_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/events",
                "assignees_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/assignees{/user}",
                "branches_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/branches{/branch}",
                "tags_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/tags",
                "blobs_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/git/blobs{/sha}",
                "git_tags_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/git/tags{/sha}",
                "git_refs_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/git/refs{/sha}",
                "trees_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/git/trees{/sha}",
                "statuses_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/statuses/{sha}",
                "languages_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/languages",
                "stargazers_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/stargazers",
                "contributors_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/contributors",
                "subscribers_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/subscribers",
                "subscription_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/subscription",
                "commits_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/commits{/sha}",
                "git_commits_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/git/commits{/sha}",
                "comments_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/comments{/number}",
                "issue_comment_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/issues/comments{/number}",
                "contents_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/contents/{+path}",
                "compare_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/compare/{base}...{head}",
                "merges_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/merges",
                "archive_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/{archive_format}{/ref}",
                "downloads_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/downloads",
                "issues_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/issues{/number}",
                "pulls_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/pulls{/number}",
                "milestones_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/milestones{/number}",
                "notifications_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/notifications{?since,all,participating}",
                "labels_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/labels{/name}",
                "releases_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/releases{/id}",
                "deployments_url": "https://api.github.com/repos/ZhiyuanChen/DeepSpeed/deployments",
                "created_at": "2023-10-27T07:50:53Z",
                "updated_at": "2023-10-27T07:50:53Z",
                "pushed_at": "2023-10-27T07:02:19Z",
                "git_url": "git://github.com/ZhiyuanChen/DeepSpeed.git",
                "ssh_url": "git@github.com:ZhiyuanChen/DeepSpeed.git",
                "clone_url": "https://github.com/ZhiyuanChen/DeepSpeed.git",
                "svn_url": "https://github.com/ZhiyuanChen/DeepSpeed",
                "homepage": "https://www.deepspeed.ai/",
                "size": 187045,
                "stargazers_count": 0,
                "watchers_count": 0,
                "language": null,
                "has_issues": false,
                "has_projects": true,
                "has_downloads": true,
                "has_wiki": false,
                "has_pages": false,
                "has_discussions": false,
                "forks_count": 0,
                "mirror_url": null,
                "archived": false,
                "disabled": false,
                "open_issues_count": 0,
                "license": null,
                "allow_forking": true,
                "is_template": false,
                "web_commit_signoff_required": false,
                "topics": [],
                "visibility": "public",
                "forks": 0,
                "open_issues": 0,
                "watchers": 0,
                "default_branch": "master",
                "public": true
            }
        },
        "public": true,
        "created_at": "2023-10-27T07:50:54Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32890520135",
        "type": "WatchEvent",
        "actor": {
            "id": 71265541,
            "login": "xukp20",
            "display_login": "xukp20",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xukp20",
            "avatar_url": "https://avatars.githubusercontent.com/u/71265541?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T07:06:27Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32890510561",
        "type": "WatchEvent",
        "actor": {
            "id": 26319553,
            "login": "SaiLoong",
            "display_login": "SaiLoong",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SaiLoong",
            "avatar_url": "https://avatars.githubusercontent.com/u/26319553?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T07:06:01Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32889835712",
        "type": "IssuesEvent",
        "actor": {
            "id": 50266021,
            "login": "Henryplay",
            "display_login": "Henryplay",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Henryplay",
            "avatar_url": "https://avatars.githubusercontent.com/u/50266021?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "closed",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576",
                "repository_url": "https://api.github.com/repos/microsoft/DeepSpeed",
                "labels_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576/comments",
                "events_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576/events",
                "html_url": "https://github.com/microsoft/DeepSpeed/issues/4576",
                "id": 1964731150,
                "node_id": "I_kwDODg7w7M51G2sO",
                "number": 4576,
                "title": "[BUG] Hey! when I training using deepspeed ,an error occured \"#error You need C++14 to compile PyTorch\"",
                "user": {
                    "login": "Henryplay",
                    "id": 50266021,
                    "node_id": "MDQ6VXNlcjUwMjY2MDIx",
                    "avatar_url": "https://avatars.githubusercontent.com/u/50266021?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Henryplay",
                    "html_url": "https://github.com/Henryplay",
                    "followers_url": "https://api.github.com/users/Henryplay/followers",
                    "following_url": "https://api.github.com/users/Henryplay/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Henryplay/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Henryplay/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Henryplay/subscriptions",
                    "organizations_url": "https://api.github.com/users/Henryplay/orgs",
                    "repos_url": "https://api.github.com/users/Henryplay/repos",
                    "events_url": "https://api.github.com/users/Henryplay/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Henryplay/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 1805232526,
                        "node_id": "MDU6TGFiZWwxODA1MjMyNTI2",
                        "url": "https://api.github.com/repos/microsoft/DeepSpeed/labels/bug",
                        "name": "bug",
                        "color": "d73a4a",
                        "default": true,
                        "description": "Something isn't working"
                    },
                    {
                        "id": 4580271613,
                        "node_id": "LA_kwDODg7w7M8AAAABEQFl_Q",
                        "url": "https://api.github.com/repos/microsoft/DeepSpeed/labels/training",
                        "name": "training",
                        "color": "0052CC",
                        "default": false,
                        "description": ""
                    }
                ],
                "state": "closed",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 1,
                "created_at": "2023-10-27T04:11:27Z",
                "updated_at": "2023-10-27T06:32:53Z",
                "closed_at": "2023-10-27T06:32:53Z",
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "**Describe the bug**\r\nwhen i use 'deepspeed train_ds.py --deepspeed --config_file config/mobile_20230707.yaml --checkpoint_dir ./tmp'  command training my own cnn model, An error has occurred \uff1a`error You need C++14 to compile PyTorch` , and in the `ds_report` informations, torch version .................... 1.13.1+cu117 , and deepspeed wheel compiled w. ...... torch 1.9, cuda 11.1\uff0c Is there any problem here\uff1f\r\n\r\n**ds_report output**\r\n```\r\n[2023-10-27 12:01:25,875] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n--------------------------------------------------\r\nDeepSpeed C++/CUDA extension op report\r\n--------------------------------------------------\r\nNOTE: Ops not installed will be just-in-time (JIT) compiled at\r\n      runtime if needed. Op compatibility means that your system\r\n      meet the required dependencies to JIT install the op.\r\n--------------------------------------------------\r\nJIT compiled ops requires ninja\r\nninja .................. [OKAY]\r\n--------------------------------------------------\r\nop name ................ installed .. compatible\r\n--------------------------------------------------\r\n [WARNING]  async_io requires the dev libaio .so object and headers but these were not found.\r\n [WARNING]  async_io: please install the libaio-dev package with apt\r\n [WARNING]  If libaio is already installed (perhaps from source), try setting the CFLAGS and LDFLAGS environment variables to where it can be found.\r\nasync_io ............... [NO] ....... [NO]\r\nfused_adam ............. [NO] ....... [OKAY]\r\ncpu_adam ............... [NO] ....... [OKAY]\r\ncpu_adagrad ............ [NO] ....... [OKAY]\r\ncpu_lion ............... [NO] ....... [OKAY]\r\n [WARNING]  Please specify the CUTLASS repo directory as environment variable $CUTLASS_PATH\r\nevoformer_attn ......... [NO] ....... [NO]\r\nfused_lamb ............. [NO] ....... [OKAY]\r\nfused_lion ............. [NO] ....... [OKAY]\r\nquantizer .............. [NO] ....... [OKAY]\r\nrandom_ltd ............. [NO] ....... [OKAY]\r\n [WARNING]  please install triton==1.0.0 if you want to use sparse attention\r\nsparse_attn ............ [NO] ....... [NO]\r\nspatial_inference ...... [NO] ....... [OKAY]\r\ntransformer ............ [NO] ....... [OKAY]\r\nstochastic_transformer . [NO] ....... [OKAY]\r\ntransformer_inference .. [NO] ....... [OKAY]\r\n--------------------------------------------------\r\nDeepSpeed general environment info:\r\ntorch install path ............... ['/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch']\r\ntorch version .................... 1.13.1+cu117\r\ndeepspeed install path ........... ['/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed']\r\ndeepspeed info ................... 0.11.1, unknown, unknown\r\ntorch cuda version ............... 11.7\r\ntorch hip version ................ None\r\nnvcc version ..................... 11.7\r\ndeepspeed wheel compiled w. ...... torch 1.9, cuda 11.1\r\nshared memory (/dev/shm) size .... 188.89 GB\r\n```\r\n\r\n**System info (please complete the following information):**\r\n - OS: [e.g. Ubuntu 18.04]\r\n - GPU count and types [e.g. one machines with x4 3090s each]\r\n - Python 3.8\r\n - GCC version is 5.5.0 20171010\r\n\r\n\r\n**Launcher context**\r\n`deepspeed train_ds.py --deepspeed --config_file config/mobile_20230707.yaml --checkpoint_dir ./tmp`\r\n\r\n**Docker context**\r\nAre you using a specific docker image that you can share?\r\n\r\n**Additional context**\r\nfull information is here\r\n```\r\n[2023-10-27 11:49:46,334] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n[2023-10-27 11:49:50,406] [WARNING] [runner.py:203:fetch_hostfile] Unable to find hostfile, will proceed with training with local resources only.\r\n[2023-10-27 11:49:50,434] [INFO] [runner.py:570:main] cmd = /data1/zpsun/miniconda3/envs/ocr_x2000/bin/python -u -m deepspeed.launcher.launch --world_info=eyJsb2NhbGhvc3QiOiBbMCwgMSwgMiwgM119 --master_addr=127.0.0.1 --master_port=29500 --enable_each_rank_log=None train_ds.py --deepspeed --config_file config/mobile_20230707.yaml --checkpoint_dir ./tmp\r\n[2023-10-27 11:49:51,552] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n[2023-10-27 11:49:52,390] [INFO] [launch.py:145:main] WORLD INFO DICT: {'localhost': [0, 1, 2, 3]}\r\n[2023-10-27 11:49:52,390] [INFO] [launch.py:151:main] nnodes=1, num_local_procs=4, node_rank=0\r\n[2023-10-27 11:49:52,390] [INFO] [launch.py:162:main] global_rank_mapping=defaultdict(<class 'list'>, {'localhost': [0, 1, 2, 3]})\r\n[2023-10-27 11:49:52,390] [INFO] [launch.py:163:main] dist_world_size=4\r\n[2023-10-27 11:49:52,390] [INFO] [launch.py:165:main] Setting CUDA_VISIBLE_DEVICES=0,1,2,3\r\n[2023-10-27 11:49:53,528] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n[2023-10-27 11:49:53,534] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n[2023-10-27 11:49:53,544] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n[2023-10-27 11:49:53,553] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n2023-10-27 11:49:54.518 | INFO     | __main__:log_dist:41 - [Rank 0] Creating Experiment Directory\r\n2023-10-27 11:49:54.529 | INFO     | __main__:log_dist:41 - [Rank 0] Experiment Directory created at tmp/ocr_train.2023.10.26.20.49.54.22pkw5e3\r\n2023-10-27 11:49:54.529 | INFO     | __main__:log_dist:41 - [Rank 0] Creating Image Transform\r\n2023-10-27 11:49:54.530 | INFO     | __main__:log_dist:41 - [Rank 0] Parse Dict\r\n2023-10-27 11:49:54.533 | INFO     | __main__:log_dist:41 - [Rank 0] Creating Datasets\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 149983.48it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 146031.62it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 144655.70it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 143595.25it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 136202.04it/s]\r\n\r\n2023-10-27 11:49:57.111 | INFO     | __main__:log_dist:41 - [Rank 0] Dataset Creation Done\r\n2023-10-27 11:49:57.111 | INFO     | __main__:log_dist:41 - [Rank 0] Creating Model\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 131767.63it/s]\r\n\r\n[2023-10-27 11:49:57,190] [INFO] [logging.py:96:log_dist] [Rank -1] DeepSpeed info: version=0.11.1, git-hash=unknown, git-branch=unknown\r\n[2023-10-27 11:49:57,190] [INFO] [comm.py:637:init_distributed] cdb=None\r\n2023-10-27 11:49:57.211 | INFO     | __main__:log_dist:41 - [Rank 0] Model Creation Done\r\n2023-10-27 11:49:57.212 | INFO     | __main__:log_dist:41 - [Rank 0] Creating DeepSpeed engine\r\n[2023-10-27 11:49:57,212] [INFO] [logging.py:96:log_dist] [Rank -1] DeepSpeed info: version=0.11.1, git-hash=unknown, git-branch=unknown\r\n[2023-10-27 11:49:57,212] [INFO] [comm.py:637:init_distributed] cdb=None\r\n[2023-10-27 11:49:57,212] [INFO] [comm.py:668:init_distributed] Initializing TorchBackend in DeepSpeed with backend nccl\r\n[2023-10-27 11:49:57,236] [INFO] [logging.py:96:log_dist] [Rank -1] DeepSpeed info: version=0.11.1, git-hash=unknown, git-branch=unknown\r\n[2023-10-27 11:49:57,236] [INFO] [comm.py:637:init_distributed] cdb=None\r\n[2023-10-27 11:49:57,237] [INFO] [logging.py:96:log_dist] [Rank -1] DeepSpeed info: version=0.11.1, git-hash=unknown, git-branch=unknown\r\n[2023-10-27 11:49:57,237] [INFO] [comm.py:637:init_distributed] cdb=None\r\n[2023-10-27 11:50:00,297] [INFO] [logging.py:96:log_dist] [Rank 0] DeepSpeed Flops Profiler Enabled: False\r\nUsing /data1/zpsun/.cache/torch_extensions/py38_cu117 as PyTorch extensions root...\r\nUsing /data1/zpsun/.cache/torch_extensions/py38_cu117 as PyTorch extensions root...\r\nUsing /data1/zpsun/.cache/torch_extensions/py38_cu117 as PyTorch extensions root...\r\nUsing /data1/zpsun/.cache/torch_extensions/py38_cu117 as PyTorch extensions root...\r\nDetected CUDA files, patching ldflags\r\nEmitting ninja build file /data1/zpsun/.cache/torch_extensions/py38_cu117/cpu_adam/build.ninja...\r\nBuilding extension module cpu_adam...\r\nAllowing ninja to set a default number of workers... (overridable by setting the environment variable MAX_JOBS=N)\r\n[1/2] /usr/local/cuda-11.7/bin/nvcc  -DTORCH_EXTENSION_NAME=cpu_adam -DTORCH_API_INCLUDE_EXTENSION_H -DPYBIND11_COMPILER_TYPE=\\\"_gcc\\\" -DPYBIND11_STDLIB=\\\"_libstdcpp\\\" -DPYBIND11_BUILD_ABI=\\\"_cxxabi1011\\\" -I/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes -I/usr/local/cuda-11.7/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/torch/csrc/api/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/TH -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/THC -isystem /usr/local/cuda-11.7/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/include/python3.8 -D_GLIBCXX_USE_CXX11_ABI=0 -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_BFLOAT16_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr -gencode=arch=compute_86,code=compute_86 -gencode=arch=compute_86,code=sm_86 --compiler-options '-fPIC' -O3 --use_fast_math -std=c++17 -U__CUDA_NO_HALF_OPERATORS__ -U__CUDA_NO_HALF_CONVERSIONS__ -U__CUDA_NO_HALF2_OPERATORS__ -gencode=arch=compute_86,code=sm_86 -gencode=arch=compute_86,code=compute_86 -DBF16_AVAILABLE -c /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/common/custom_cuda_kernel.cu -o custom_cuda_kernel.cuda.o \r\nFAILED: custom_cuda_kernel.cuda.o \r\n/usr/local/cuda-11.7/bin/nvcc  -DTORCH_EXTENSION_NAME=cpu_adam -DTORCH_API_INCLUDE_EXTENSION_H -DPYBIND11_COMPILER_TYPE=\\\"_gcc\\\" -DPYBIND11_STDLIB=\\\"_libstdcpp\\\" -DPYBIND11_BUILD_ABI=\\\"_cxxabi1011\\\" -I/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes -I/usr/local/cuda-11.7/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/torch/csrc/api/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/TH -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/THC -isystem /usr/local/cuda-11.7/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/include/python3.8 -D_GLIBCXX_USE_CXX11_ABI=0 -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_BFLOAT16_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr -gencode=arch=compute_86,code=compute_86 -gencode=arch=compute_86,code=sm_86 --compiler-options '-fPIC' -O3 --use_fast_math -std=c++17 -U__CUDA_NO_HALF_OPERATORS__ -U__CUDA_NO_HALF_CONVERSIONS__ -U__CUDA_NO_HALF2_OPERATORS__ -gencode=arch=compute_86,code=sm_86 -gencode=arch=compute_86,code=compute_86 -DBF16_AVAILABLE -c /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/common/custom_cuda_kernel.cu -o custom_cuda_kernel.cuda.o \r\nnvcc warning : The -std=c++17 flag is not supported with the configured host compiler. Flag will be ignored.\r\nIn file included from /usr/include/c++/5/cstdint:35:0,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/cuda/CUDAContext.h:3,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/context.h:8,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/custom_cuda_layers.h:16,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/common/custom_cuda_kernel.cu:6:\r\n/usr/include/c++/5/bits/c++0x_warning.h:32:2: error: #error This file requires compiler and library support for the ISO C++ 2011 standard. This support must be enabled with the -std=c++11 or -std=gnu++11 compiler options.\r\n #error This file requires compiler and library support \\\r\n  ^\r\nIn file included from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/string_view.h:4:0,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/StringUtil.h:6,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/Exception.h:6,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/core/Generator.h:11,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/CPUGeneratorImpl.h:3,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/Context.h:3,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/cuda/CUDAContext.h:14,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/context.h:8,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/custom_cuda_layers.h:16,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/common/custom_cuda_kernel.cu:6:\r\n/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/C++17.h:27:2: error: #error You need C++14 to compile PyTorch\r\n #error You need C++14 to compile PyTorch\r\n  ^\r\nIn file included from /usr/include/c++/5/experimental/string_view:39:0,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/string_view.h:20,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/StringUtil.h:6,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/Exception.h:6,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/core/Generator.h:11,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/CPUGeneratorImpl.h:3,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/Context.h:3,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/cuda/CUDAContext.h:14,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/context.h:8,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/custom_cuda_layers.h:16,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/common/custom_cuda_kernel.cu:6:\r\n/usr/include/c++/5/bits/c++14_warning.h:32:2: error: #error This file requires compiler and library support for the forthcoming ISO C++ 2014 standard. This support is currently experimental, and must be enabled with the -std=c++1y or -std=gnu++1y compiler options.\r\n #error This file requires compiler and library support for the forthcoming \\\r\n  ^\r\nninja: build stopped: subcommand failed.\r\nTraceback (most recent call last):\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1900, in _run_ninja_build\r\n    subprocess.run(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/subprocess.py\", line 516, in run\r\n    raise CalledProcessError(retcode, process.args,\r\nsubprocess.CalledProcessError: Command '['ninja', '-v']' returned non-zero exit status 1.\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"train_ds.py\", line 263, in <module>\r\n    fire.Fire(train)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 141, in Fire\r\n    component_trace = _Fire(component, args, parsed_flag_args, context, name)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 475, in _Fire\r\n    component, remaining_args = _CallAndUpdateTrace(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 691, in _CallAndUpdateTrace\r\n    component = fn(*varargs, **kwargs)\r\n  File \"train_ds.py\", line 216, in train\r\n    model, _, _, _ = deepspeed.initialize(model=model,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/__init__.py\", line 171, in initialize\r\n    engine = DeepSpeedEngine(args=args,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 304, in __init__\r\n    self._configure_optimizer(optimizer, model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1186, in _configure_optimizer\r\n    basic_optimizer = self._configure_basic_optimizer(model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1257, in _configure_basic_optimizer\r\n    optimizer = DeepSpeedCPUAdam(model_parameters,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 94, in __init__\r\n    self.ds_opt_adam = CPUAdamBuilder().load()\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 446, in load\r\n    return self.jit_load(verbose)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 489, in jit_load\r\n    op_module = load(name=self.name,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1284, in load\r\n    return _jit_compile(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1508, in _jit_compile\r\n    _write_ninja_file_and_build_library(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1623, in _write_ninja_file_and_build_library\r\n    _run_ninja_build(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1916, in _run_ninja_build\r\n    raise RuntimeError(message) from e\r\nRuntimeError: Error building extension 'cpu_adam'\r\nLoading extension module cpu_adam...\r\nTraceback (most recent call last):\r\n  File \"train_ds.py\", line 263, in <module>\r\n    fire.Fire(train)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 141, in Fire\r\n    component_trace = _Fire(component, args, parsed_flag_args, context, name)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 475, in _Fire\r\n    component, remaining_args = _CallAndUpdateTrace(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 691, in _CallAndUpdateTrace\r\n    component = fn(*varargs, **kwargs)\r\n  File \"train_ds.py\", line 216, in train\r\n    model, _, _, _ = deepspeed.initialize(model=model,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/__init__.py\", line 171, in initialize\r\n    engine = DeepSpeedEngine(args=args,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 304, in __init__\r\n    self._configure_optimizer(optimizer, model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1186, in _configure_optimizer\r\n    basic_optimizer = self._configure_basic_optimizer(model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1257, in _configure_basic_optimizer\r\n    optimizer = DeepSpeedCPUAdam(model_parameters,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 94, in __init__\r\n    self.ds_opt_adam = CPUAdamBuilder().load()\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 446, in load\r\n    return self.jit_load(verbose)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 489, in jit_load\r\n    op_module = load(name=self.name,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1284, in load\r\n    return _jit_compile(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1534, in _jit_compile\r\n    return _import_module_from_library(name, build_directory, is_python_module)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1936, in _import_module_from_library\r\n    module = importlib.util.module_from_spec(spec)\r\n  File \"<frozen importlib._bootstrap>\", line 556, in module_from_spec\r\n  File \"<frozen importlib._bootstrap_external>\", line 1166, in create_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\nImportError: /data1/zpsun/.cache/torch_extensions/py38_cu117/cpu_adam/cpu_adam.so: cannot open shared object file: No such file or directory\r\nLoading extension module cpu_adam...\r\nTraceback (most recent call last):\r\n  File \"train_ds.py\", line 263, in <module>\r\n    fire.Fire(train)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 141, in Fire\r\n    component_trace = _Fire(component, args, parsed_flag_args, context, name)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 475, in _Fire\r\n    component, remaining_args = _CallAndUpdateTrace(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 691, in _CallAndUpdateTrace\r\n    component = fn(*varargs, **kwargs)\r\n  File \"train_ds.py\", line 216, in train\r\n    model, _, _, _ = deepspeed.initialize(model=model,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/__init__.py\", line 171, in initialize\r\n    engine = DeepSpeedEngine(args=args,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 304, in __init__\r\n    self._configure_optimizer(optimizer, model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1186, in _configure_optimizer\r\n    basic_optimizer = self._configure_basic_optimizer(model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1257, in _configure_basic_optimizer\r\n    optimizer = DeepSpeedCPUAdam(model_parameters,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 94, in __init__\r\n    self.ds_opt_adam = CPUAdamBuilder().load()\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 446, in load\r\n    return self.jit_load(verbose)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 489, in jit_load\r\n    op_module = load(name=self.name,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1284, in load\r\n    return _jit_compile(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1534, in _jit_compile\r\n    return _import_module_from_library(name, build_directory, is_python_module)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1936, in _import_module_from_library\r\n    module = importlib.util.module_from_spec(spec)\r\n  File \"<frozen importlib._bootstrap>\", line 556, in module_from_spec\r\n  File \"<frozen importlib._bootstrap_external>\", line 1166, in create_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\nImportError: /data1/zpsun/.cache/torch_extensions/py38_cu117/cpu_adam/cpu_adam.so: cannot open shared object file: No such file or directory\r\nLoading extension module cpu_adam...\r\nTraceback (most recent call last):\r\n  File \"train_ds.py\", line 263, in <module>\r\n    fire.Fire(train)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 141, in Fire\r\n    component_trace = _Fire(component, args, parsed_flag_args, context, name)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 475, in _Fire\r\n    component, remaining_args = _CallAndUpdateTrace(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 691, in _CallAndUpdateTrace\r\n    component = fn(*varargs, **kwargs)\r\n  File \"train_ds.py\", line 216, in train\r\n    model, _, _, _ = deepspeed.initialize(model=model,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/__init__.py\", line 171, in initialize\r\n    engine = DeepSpeedEngine(args=args,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 304, in __init__\r\n    self._configure_optimizer(optimizer, model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1186, in _configure_optimizer\r\n    basic_optimizer = self._configure_basic_optimizer(model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1257, in _configure_basic_optimizer\r\n    optimizer = DeepSpeedCPUAdam(model_parameters,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 94, in __init__\r\n    self.ds_opt_adam = CPUAdamBuilder().load()\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 446, in load\r\n    return self.jit_load(verbose)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 489, in jit_load\r\n    op_module = load(name=self.name,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1284, in load\r\n    return _jit_compile(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1534, in _jit_compile\r\n    return _import_module_from_library(name, build_directory, is_python_module)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1936, in _import_module_from_library\r\n    module = importlib.util.module_from_spec(spec)\r\n  File \"<frozen importlib._bootstrap>\", line 556, in module_from_spec\r\n  File \"<frozen importlib._bootstrap_external>\", line 1166, in create_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\nImportError: /data1/zpsun/.cache/torch_extensions/py38_cu117/cpu_adam/cpu_adam.so: cannot open shared object file: No such file or directory\r\nException ignored in: <function DeepSpeedCPUAdam.__del__ at 0x15325dbfed30>\r\nTraceback (most recent call last):\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 102, in __del__\r\n    self.ds_opt_adam.destroy_adam(self.opt_id)\r\nAttributeError: 'DeepSpeedCPUAdam' object has no attribute 'ds_opt_adam'\r\nException ignored in: <function DeepSpeedCPUAdam.__del__ at 0x153cb28d1d30>\r\nTraceback (most recent call last):\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 102, in __del__\r\n    self.ds_opt_adam.destroy_adam(self.opt_id)\r\nAttributeError: 'DeepSpeedCPUAdam' object has no attribute 'ds_opt_adam'\r\nException ignored in: <function DeepSpeedCPUAdam.__del__ at 0x14d0d6290d30>\r\nTraceback (most recent call last):\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 102, in __del__\r\n    self.ds_opt_adam.destroy_adam(self.opt_id)\r\nAttributeError: 'DeepSpeedCPUAdam' object has no attribute 'ds_opt_adam'\r\nException ignored in: <function DeepSpeedCPUAdam.__del__ at 0x149250829d30>\r\nTraceback (most recent call last):\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 102, in __del__\r\nAttributeError: 'DeepSpeedCPUAdam' object has no attribute 'ds_opt_adam'\r\n[2023-10-27 11:50:07,495] [INFO] [launch.py:315:sigkill_handler] Killing subprocess 39745\r\n[2023-10-27 11:50:07,518] [INFO] [launch.py:315:sigkill_handler] Killing subprocess 39746\r\n[2023-10-27 11:50:07,519] [INFO] [launch.py:315:sigkill_handler] Killing subprocess 39747\r\n[2023-10-27 11:50:07,532] [INFO] [launch.py:315:sigkill_handler] Killing subprocess 39748\r\n[2023-10-27 11:50:07,545] [ERROR] [launch.py:321:sigkill_handler] ['/data1/zpsun/miniconda3/envs/ocr_x2000/bin/python', '-u', 'train_ds.py', '--local_rank=3', '--deepspeed', '--config_file', 'config/mobile_20230707.yaml', '--checkpoint_dir', './tmp'] exits with return code = 1\r\n```\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576/timeline",
                "performed_via_github_app": null,
                "state_reason": "completed"
            }
        },
        "public": true,
        "created_at": "2023-10-27T06:32:54Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32889831770",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 50266021,
            "login": "Henryplay",
            "display_login": "Henryplay",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Henryplay",
            "avatar_url": "https://avatars.githubusercontent.com/u/50266021?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576",
                "repository_url": "https://api.github.com/repos/microsoft/DeepSpeed",
                "labels_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576/comments",
                "events_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576/events",
                "html_url": "https://github.com/microsoft/DeepSpeed/issues/4576",
                "id": 1964731150,
                "node_id": "I_kwDODg7w7M51G2sO",
                "number": 4576,
                "title": "[BUG] Hey! when I training using deepspeed ,an error occured \"#error You need C++14 to compile PyTorch\"",
                "user": {
                    "login": "Henryplay",
                    "id": 50266021,
                    "node_id": "MDQ6VXNlcjUwMjY2MDIx",
                    "avatar_url": "https://avatars.githubusercontent.com/u/50266021?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Henryplay",
                    "html_url": "https://github.com/Henryplay",
                    "followers_url": "https://api.github.com/users/Henryplay/followers",
                    "following_url": "https://api.github.com/users/Henryplay/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Henryplay/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Henryplay/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Henryplay/subscriptions",
                    "organizations_url": "https://api.github.com/users/Henryplay/orgs",
                    "repos_url": "https://api.github.com/users/Henryplay/repos",
                    "events_url": "https://api.github.com/users/Henryplay/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Henryplay/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 1805232526,
                        "node_id": "MDU6TGFiZWwxODA1MjMyNTI2",
                        "url": "https://api.github.com/repos/microsoft/DeepSpeed/labels/bug",
                        "name": "bug",
                        "color": "d73a4a",
                        "default": true,
                        "description": "Something isn't working"
                    },
                    {
                        "id": 4580271613,
                        "node_id": "LA_kwDODg7w7M8AAAABEQFl_Q",
                        "url": "https://api.github.com/repos/microsoft/DeepSpeed/labels/training",
                        "name": "training",
                        "color": "0052CC",
                        "default": false,
                        "description": ""
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 1,
                "created_at": "2023-10-27T04:11:27Z",
                "updated_at": "2023-10-27T06:32:40Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "**Describe the bug**\r\nwhen i use 'deepspeed train_ds.py --deepspeed --config_file config/mobile_20230707.yaml --checkpoint_dir ./tmp'  command training my own cnn model, An error has occurred \uff1a`error You need C++14 to compile PyTorch` , and in the `ds_report` informations, torch version .................... 1.13.1+cu117 , and deepspeed wheel compiled w. ...... torch 1.9, cuda 11.1\uff0c Is there any problem here\uff1f\r\n\r\n**ds_report output**\r\n```\r\n[2023-10-27 12:01:25,875] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n--------------------------------------------------\r\nDeepSpeed C++/CUDA extension op report\r\n--------------------------------------------------\r\nNOTE: Ops not installed will be just-in-time (JIT) compiled at\r\n      runtime if needed. Op compatibility means that your system\r\n      meet the required dependencies to JIT install the op.\r\n--------------------------------------------------\r\nJIT compiled ops requires ninja\r\nninja .................. [OKAY]\r\n--------------------------------------------------\r\nop name ................ installed .. compatible\r\n--------------------------------------------------\r\n [WARNING]  async_io requires the dev libaio .so object and headers but these were not found.\r\n [WARNING]  async_io: please install the libaio-dev package with apt\r\n [WARNING]  If libaio is already installed (perhaps from source), try setting the CFLAGS and LDFLAGS environment variables to where it can be found.\r\nasync_io ............... [NO] ....... [NO]\r\nfused_adam ............. [NO] ....... [OKAY]\r\ncpu_adam ............... [NO] ....... [OKAY]\r\ncpu_adagrad ............ [NO] ....... [OKAY]\r\ncpu_lion ............... [NO] ....... [OKAY]\r\n [WARNING]  Please specify the CUTLASS repo directory as environment variable $CUTLASS_PATH\r\nevoformer_attn ......... [NO] ....... [NO]\r\nfused_lamb ............. [NO] ....... [OKAY]\r\nfused_lion ............. [NO] ....... [OKAY]\r\nquantizer .............. [NO] ....... [OKAY]\r\nrandom_ltd ............. [NO] ....... [OKAY]\r\n [WARNING]  please install triton==1.0.0 if you want to use sparse attention\r\nsparse_attn ............ [NO] ....... [NO]\r\nspatial_inference ...... [NO] ....... [OKAY]\r\ntransformer ............ [NO] ....... [OKAY]\r\nstochastic_transformer . [NO] ....... [OKAY]\r\ntransformer_inference .. [NO] ....... [OKAY]\r\n--------------------------------------------------\r\nDeepSpeed general environment info:\r\ntorch install path ............... ['/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch']\r\ntorch version .................... 1.13.1+cu117\r\ndeepspeed install path ........... ['/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed']\r\ndeepspeed info ................... 0.11.1, unknown, unknown\r\ntorch cuda version ............... 11.7\r\ntorch hip version ................ None\r\nnvcc version ..................... 11.7\r\ndeepspeed wheel compiled w. ...... torch 1.9, cuda 11.1\r\nshared memory (/dev/shm) size .... 188.89 GB\r\n```\r\n\r\n**System info (please complete the following information):**\r\n - OS: [e.g. Ubuntu 18.04]\r\n - GPU count and types [e.g. one machines with x4 3090s each]\r\n - Python 3.8\r\n - GCC version is 5.5.0 20171010\r\n\r\n\r\n**Launcher context**\r\n`deepspeed train_ds.py --deepspeed --config_file config/mobile_20230707.yaml --checkpoint_dir ./tmp`\r\n\r\n**Docker context**\r\nAre you using a specific docker image that you can share?\r\n\r\n**Additional context**\r\nfull information is here\r\n```\r\n[2023-10-27 11:49:46,334] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n[2023-10-27 11:49:50,406] [WARNING] [runner.py:203:fetch_hostfile] Unable to find hostfile, will proceed with training with local resources only.\r\n[2023-10-27 11:49:50,434] [INFO] [runner.py:570:main] cmd = /data1/zpsun/miniconda3/envs/ocr_x2000/bin/python -u -m deepspeed.launcher.launch --world_info=eyJsb2NhbGhvc3QiOiBbMCwgMSwgMiwgM119 --master_addr=127.0.0.1 --master_port=29500 --enable_each_rank_log=None train_ds.py --deepspeed --config_file config/mobile_20230707.yaml --checkpoint_dir ./tmp\r\n[2023-10-27 11:49:51,552] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n[2023-10-27 11:49:52,390] [INFO] [launch.py:145:main] WORLD INFO DICT: {'localhost': [0, 1, 2, 3]}\r\n[2023-10-27 11:49:52,390] [INFO] [launch.py:151:main] nnodes=1, num_local_procs=4, node_rank=0\r\n[2023-10-27 11:49:52,390] [INFO] [launch.py:162:main] global_rank_mapping=defaultdict(<class 'list'>, {'localhost': [0, 1, 2, 3]})\r\n[2023-10-27 11:49:52,390] [INFO] [launch.py:163:main] dist_world_size=4\r\n[2023-10-27 11:49:52,390] [INFO] [launch.py:165:main] Setting CUDA_VISIBLE_DEVICES=0,1,2,3\r\n[2023-10-27 11:49:53,528] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n[2023-10-27 11:49:53,534] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n[2023-10-27 11:49:53,544] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n[2023-10-27 11:49:53,553] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n2023-10-27 11:49:54.518 | INFO     | __main__:log_dist:41 - [Rank 0] Creating Experiment Directory\r\n2023-10-27 11:49:54.529 | INFO     | __main__:log_dist:41 - [Rank 0] Experiment Directory created at tmp/ocr_train.2023.10.26.20.49.54.22pkw5e3\r\n2023-10-27 11:49:54.529 | INFO     | __main__:log_dist:41 - [Rank 0] Creating Image Transform\r\n2023-10-27 11:49:54.530 | INFO     | __main__:log_dist:41 - [Rank 0] Parse Dict\r\n2023-10-27 11:49:54.533 | INFO     | __main__:log_dist:41 - [Rank 0] Creating Datasets\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 149983.48it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 146031.62it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 144655.70it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 143595.25it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 136202.04it/s]\r\n\r\n2023-10-27 11:49:57.111 | INFO     | __main__:log_dist:41 - [Rank 0] Dataset Creation Done\r\n2023-10-27 11:49:57.111 | INFO     | __main__:log_dist:41 - [Rank 0] Creating Model\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 131767.63it/s]\r\n\r\n[2023-10-27 11:49:57,190] [INFO] [logging.py:96:log_dist] [Rank -1] DeepSpeed info: version=0.11.1, git-hash=unknown, git-branch=unknown\r\n[2023-10-27 11:49:57,190] [INFO] [comm.py:637:init_distributed] cdb=None\r\n2023-10-27 11:49:57.211 | INFO     | __main__:log_dist:41 - [Rank 0] Model Creation Done\r\n2023-10-27 11:49:57.212 | INFO     | __main__:log_dist:41 - [Rank 0] Creating DeepSpeed engine\r\n[2023-10-27 11:49:57,212] [INFO] [logging.py:96:log_dist] [Rank -1] DeepSpeed info: version=0.11.1, git-hash=unknown, git-branch=unknown\r\n[2023-10-27 11:49:57,212] [INFO] [comm.py:637:init_distributed] cdb=None\r\n[2023-10-27 11:49:57,212] [INFO] [comm.py:668:init_distributed] Initializing TorchBackend in DeepSpeed with backend nccl\r\n[2023-10-27 11:49:57,236] [INFO] [logging.py:96:log_dist] [Rank -1] DeepSpeed info: version=0.11.1, git-hash=unknown, git-branch=unknown\r\n[2023-10-27 11:49:57,236] [INFO] [comm.py:637:init_distributed] cdb=None\r\n[2023-10-27 11:49:57,237] [INFO] [logging.py:96:log_dist] [Rank -1] DeepSpeed info: version=0.11.1, git-hash=unknown, git-branch=unknown\r\n[2023-10-27 11:49:57,237] [INFO] [comm.py:637:init_distributed] cdb=None\r\n[2023-10-27 11:50:00,297] [INFO] [logging.py:96:log_dist] [Rank 0] DeepSpeed Flops Profiler Enabled: False\r\nUsing /data1/zpsun/.cache/torch_extensions/py38_cu117 as PyTorch extensions root...\r\nUsing /data1/zpsun/.cache/torch_extensions/py38_cu117 as PyTorch extensions root...\r\nUsing /data1/zpsun/.cache/torch_extensions/py38_cu117 as PyTorch extensions root...\r\nUsing /data1/zpsun/.cache/torch_extensions/py38_cu117 as PyTorch extensions root...\r\nDetected CUDA files, patching ldflags\r\nEmitting ninja build file /data1/zpsun/.cache/torch_extensions/py38_cu117/cpu_adam/build.ninja...\r\nBuilding extension module cpu_adam...\r\nAllowing ninja to set a default number of workers... (overridable by setting the environment variable MAX_JOBS=N)\r\n[1/2] /usr/local/cuda-11.7/bin/nvcc  -DTORCH_EXTENSION_NAME=cpu_adam -DTORCH_API_INCLUDE_EXTENSION_H -DPYBIND11_COMPILER_TYPE=\\\"_gcc\\\" -DPYBIND11_STDLIB=\\\"_libstdcpp\\\" -DPYBIND11_BUILD_ABI=\\\"_cxxabi1011\\\" -I/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes -I/usr/local/cuda-11.7/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/torch/csrc/api/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/TH -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/THC -isystem /usr/local/cuda-11.7/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/include/python3.8 -D_GLIBCXX_USE_CXX11_ABI=0 -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_BFLOAT16_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr -gencode=arch=compute_86,code=compute_86 -gencode=arch=compute_86,code=sm_86 --compiler-options '-fPIC' -O3 --use_fast_math -std=c++17 -U__CUDA_NO_HALF_OPERATORS__ -U__CUDA_NO_HALF_CONVERSIONS__ -U__CUDA_NO_HALF2_OPERATORS__ -gencode=arch=compute_86,code=sm_86 -gencode=arch=compute_86,code=compute_86 -DBF16_AVAILABLE -c /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/common/custom_cuda_kernel.cu -o custom_cuda_kernel.cuda.o \r\nFAILED: custom_cuda_kernel.cuda.o \r\n/usr/local/cuda-11.7/bin/nvcc  -DTORCH_EXTENSION_NAME=cpu_adam -DTORCH_API_INCLUDE_EXTENSION_H -DPYBIND11_COMPILER_TYPE=\\\"_gcc\\\" -DPYBIND11_STDLIB=\\\"_libstdcpp\\\" -DPYBIND11_BUILD_ABI=\\\"_cxxabi1011\\\" -I/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes -I/usr/local/cuda-11.7/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/torch/csrc/api/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/TH -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/THC -isystem /usr/local/cuda-11.7/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/include/python3.8 -D_GLIBCXX_USE_CXX11_ABI=0 -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_BFLOAT16_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr -gencode=arch=compute_86,code=compute_86 -gencode=arch=compute_86,code=sm_86 --compiler-options '-fPIC' -O3 --use_fast_math -std=c++17 -U__CUDA_NO_HALF_OPERATORS__ -U__CUDA_NO_HALF_CONVERSIONS__ -U__CUDA_NO_HALF2_OPERATORS__ -gencode=arch=compute_86,code=sm_86 -gencode=arch=compute_86,code=compute_86 -DBF16_AVAILABLE -c /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/common/custom_cuda_kernel.cu -o custom_cuda_kernel.cuda.o \r\nnvcc warning : The -std=c++17 flag is not supported with the configured host compiler. Flag will be ignored.\r\nIn file included from /usr/include/c++/5/cstdint:35:0,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/cuda/CUDAContext.h:3,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/context.h:8,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/custom_cuda_layers.h:16,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/common/custom_cuda_kernel.cu:6:\r\n/usr/include/c++/5/bits/c++0x_warning.h:32:2: error: #error This file requires compiler and library support for the ISO C++ 2011 standard. This support must be enabled with the -std=c++11 or -std=gnu++11 compiler options.\r\n #error This file requires compiler and library support \\\r\n  ^\r\nIn file included from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/string_view.h:4:0,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/StringUtil.h:6,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/Exception.h:6,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/core/Generator.h:11,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/CPUGeneratorImpl.h:3,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/Context.h:3,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/cuda/CUDAContext.h:14,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/context.h:8,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/custom_cuda_layers.h:16,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/common/custom_cuda_kernel.cu:6:\r\n/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/C++17.h:27:2: error: #error You need C++14 to compile PyTorch\r\n #error You need C++14 to compile PyTorch\r\n  ^\r\nIn file included from /usr/include/c++/5/experimental/string_view:39:0,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/string_view.h:20,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/StringUtil.h:6,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/Exception.h:6,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/core/Generator.h:11,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/CPUGeneratorImpl.h:3,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/Context.h:3,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/cuda/CUDAContext.h:14,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/context.h:8,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/custom_cuda_layers.h:16,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/common/custom_cuda_kernel.cu:6:\r\n/usr/include/c++/5/bits/c++14_warning.h:32:2: error: #error This file requires compiler and library support for the forthcoming ISO C++ 2014 standard. This support is currently experimental, and must be enabled with the -std=c++1y or -std=gnu++1y compiler options.\r\n #error This file requires compiler and library support for the forthcoming \\\r\n  ^\r\nninja: build stopped: subcommand failed.\r\nTraceback (most recent call last):\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1900, in _run_ninja_build\r\n    subprocess.run(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/subprocess.py\", line 516, in run\r\n    raise CalledProcessError(retcode, process.args,\r\nsubprocess.CalledProcessError: Command '['ninja', '-v']' returned non-zero exit status 1.\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"train_ds.py\", line 263, in <module>\r\n    fire.Fire(train)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 141, in Fire\r\n    component_trace = _Fire(component, args, parsed_flag_args, context, name)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 475, in _Fire\r\n    component, remaining_args = _CallAndUpdateTrace(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 691, in _CallAndUpdateTrace\r\n    component = fn(*varargs, **kwargs)\r\n  File \"train_ds.py\", line 216, in train\r\n    model, _, _, _ = deepspeed.initialize(model=model,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/__init__.py\", line 171, in initialize\r\n    engine = DeepSpeedEngine(args=args,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 304, in __init__\r\n    self._configure_optimizer(optimizer, model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1186, in _configure_optimizer\r\n    basic_optimizer = self._configure_basic_optimizer(model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1257, in _configure_basic_optimizer\r\n    optimizer = DeepSpeedCPUAdam(model_parameters,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 94, in __init__\r\n    self.ds_opt_adam = CPUAdamBuilder().load()\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 446, in load\r\n    return self.jit_load(verbose)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 489, in jit_load\r\n    op_module = load(name=self.name,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1284, in load\r\n    return _jit_compile(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1508, in _jit_compile\r\n    _write_ninja_file_and_build_library(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1623, in _write_ninja_file_and_build_library\r\n    _run_ninja_build(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1916, in _run_ninja_build\r\n    raise RuntimeError(message) from e\r\nRuntimeError: Error building extension 'cpu_adam'\r\nLoading extension module cpu_adam...\r\nTraceback (most recent call last):\r\n  File \"train_ds.py\", line 263, in <module>\r\n    fire.Fire(train)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 141, in Fire\r\n    component_trace = _Fire(component, args, parsed_flag_args, context, name)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 475, in _Fire\r\n    component, remaining_args = _CallAndUpdateTrace(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 691, in _CallAndUpdateTrace\r\n    component = fn(*varargs, **kwargs)\r\n  File \"train_ds.py\", line 216, in train\r\n    model, _, _, _ = deepspeed.initialize(model=model,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/__init__.py\", line 171, in initialize\r\n    engine = DeepSpeedEngine(args=args,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 304, in __init__\r\n    self._configure_optimizer(optimizer, model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1186, in _configure_optimizer\r\n    basic_optimizer = self._configure_basic_optimizer(model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1257, in _configure_basic_optimizer\r\n    optimizer = DeepSpeedCPUAdam(model_parameters,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 94, in __init__\r\n    self.ds_opt_adam = CPUAdamBuilder().load()\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 446, in load\r\n    return self.jit_load(verbose)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 489, in jit_load\r\n    op_module = load(name=self.name,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1284, in load\r\n    return _jit_compile(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1534, in _jit_compile\r\n    return _import_module_from_library(name, build_directory, is_python_module)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1936, in _import_module_from_library\r\n    module = importlib.util.module_from_spec(spec)\r\n  File \"<frozen importlib._bootstrap>\", line 556, in module_from_spec\r\n  File \"<frozen importlib._bootstrap_external>\", line 1166, in create_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\nImportError: /data1/zpsun/.cache/torch_extensions/py38_cu117/cpu_adam/cpu_adam.so: cannot open shared object file: No such file or directory\r\nLoading extension module cpu_adam...\r\nTraceback (most recent call last):\r\n  File \"train_ds.py\", line 263, in <module>\r\n    fire.Fire(train)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 141, in Fire\r\n    component_trace = _Fire(component, args, parsed_flag_args, context, name)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 475, in _Fire\r\n    component, remaining_args = _CallAndUpdateTrace(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 691, in _CallAndUpdateTrace\r\n    component = fn(*varargs, **kwargs)\r\n  File \"train_ds.py\", line 216, in train\r\n    model, _, _, _ = deepspeed.initialize(model=model,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/__init__.py\", line 171, in initialize\r\n    engine = DeepSpeedEngine(args=args,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 304, in __init__\r\n    self._configure_optimizer(optimizer, model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1186, in _configure_optimizer\r\n    basic_optimizer = self._configure_basic_optimizer(model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1257, in _configure_basic_optimizer\r\n    optimizer = DeepSpeedCPUAdam(model_parameters,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 94, in __init__\r\n    self.ds_opt_adam = CPUAdamBuilder().load()\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 446, in load\r\n    return self.jit_load(verbose)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 489, in jit_load\r\n    op_module = load(name=self.name,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1284, in load\r\n    return _jit_compile(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1534, in _jit_compile\r\n    return _import_module_from_library(name, build_directory, is_python_module)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1936, in _import_module_from_library\r\n    module = importlib.util.module_from_spec(spec)\r\n  File \"<frozen importlib._bootstrap>\", line 556, in module_from_spec\r\n  File \"<frozen importlib._bootstrap_external>\", line 1166, in create_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\nImportError: /data1/zpsun/.cache/torch_extensions/py38_cu117/cpu_adam/cpu_adam.so: cannot open shared object file: No such file or directory\r\nLoading extension module cpu_adam...\r\nTraceback (most recent call last):\r\n  File \"train_ds.py\", line 263, in <module>\r\n    fire.Fire(train)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 141, in Fire\r\n    component_trace = _Fire(component, args, parsed_flag_args, context, name)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 475, in _Fire\r\n    component, remaining_args = _CallAndUpdateTrace(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 691, in _CallAndUpdateTrace\r\n    component = fn(*varargs, **kwargs)\r\n  File \"train_ds.py\", line 216, in train\r\n    model, _, _, _ = deepspeed.initialize(model=model,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/__init__.py\", line 171, in initialize\r\n    engine = DeepSpeedEngine(args=args,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 304, in __init__\r\n    self._configure_optimizer(optimizer, model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1186, in _configure_optimizer\r\n    basic_optimizer = self._configure_basic_optimizer(model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1257, in _configure_basic_optimizer\r\n    optimizer = DeepSpeedCPUAdam(model_parameters,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 94, in __init__\r\n    self.ds_opt_adam = CPUAdamBuilder().load()\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 446, in load\r\n    return self.jit_load(verbose)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 489, in jit_load\r\n    op_module = load(name=self.name,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1284, in load\r\n    return _jit_compile(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1534, in _jit_compile\r\n    return _import_module_from_library(name, build_directory, is_python_module)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1936, in _import_module_from_library\r\n    module = importlib.util.module_from_spec(spec)\r\n  File \"<frozen importlib._bootstrap>\", line 556, in module_from_spec\r\n  File \"<frozen importlib._bootstrap_external>\", line 1166, in create_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\nImportError: /data1/zpsun/.cache/torch_extensions/py38_cu117/cpu_adam/cpu_adam.so: cannot open shared object file: No such file or directory\r\nException ignored in: <function DeepSpeedCPUAdam.__del__ at 0x15325dbfed30>\r\nTraceback (most recent call last):\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 102, in __del__\r\n    self.ds_opt_adam.destroy_adam(self.opt_id)\r\nAttributeError: 'DeepSpeedCPUAdam' object has no attribute 'ds_opt_adam'\r\nException ignored in: <function DeepSpeedCPUAdam.__del__ at 0x153cb28d1d30>\r\nTraceback (most recent call last):\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 102, in __del__\r\n    self.ds_opt_adam.destroy_adam(self.opt_id)\r\nAttributeError: 'DeepSpeedCPUAdam' object has no attribute 'ds_opt_adam'\r\nException ignored in: <function DeepSpeedCPUAdam.__del__ at 0x14d0d6290d30>\r\nTraceback (most recent call last):\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 102, in __del__\r\n    self.ds_opt_adam.destroy_adam(self.opt_id)\r\nAttributeError: 'DeepSpeedCPUAdam' object has no attribute 'ds_opt_adam'\r\nException ignored in: <function DeepSpeedCPUAdam.__del__ at 0x149250829d30>\r\nTraceback (most recent call last):\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 102, in __del__\r\nAttributeError: 'DeepSpeedCPUAdam' object has no attribute 'ds_opt_adam'\r\n[2023-10-27 11:50:07,495] [INFO] [launch.py:315:sigkill_handler] Killing subprocess 39745\r\n[2023-10-27 11:50:07,518] [INFO] [launch.py:315:sigkill_handler] Killing subprocess 39746\r\n[2023-10-27 11:50:07,519] [INFO] [launch.py:315:sigkill_handler] Killing subprocess 39747\r\n[2023-10-27 11:50:07,532] [INFO] [launch.py:315:sigkill_handler] Killing subprocess 39748\r\n[2023-10-27 11:50:07,545] [ERROR] [launch.py:321:sigkill_handler] ['/data1/zpsun/miniconda3/envs/ocr_x2000/bin/python', '-u', 'train_ds.py', '--local_rank=3', '--deepspeed', '--config_file', 'config/mobile_20230707.yaml', '--checkpoint_dir', './tmp'] exits with return code = 1\r\n```\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments/1782372728",
                "html_url": "https://github.com/microsoft/DeepSpeed/issues/4576#issuecomment-1782372728",
                "issue_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576",
                "id": 1782372728,
                "node_id": "IC_kwDODg7w7M5qPNl4",
                "user": {
                    "login": "Henryplay",
                    "id": 50266021,
                    "node_id": "MDQ6VXNlcjUwMjY2MDIx",
                    "avatar_url": "https://avatars.githubusercontent.com/u/50266021?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Henryplay",
                    "html_url": "https://github.com/Henryplay",
                    "followers_url": "https://api.github.com/users/Henryplay/followers",
                    "following_url": "https://api.github.com/users/Henryplay/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Henryplay/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Henryplay/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Henryplay/subscriptions",
                    "organizations_url": "https://api.github.com/users/Henryplay/orgs",
                    "repos_url": "https://api.github.com/users/Henryplay/repos",
                    "events_url": "https://api.github.com/users/Henryplay/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Henryplay/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T06:32:40Z",
                "updated_at": "2023-10-27T06:32:40Z",
                "author_association": "NONE",
                "body": "Solved it!  When I replace  the launch `deepspeed train_ds.py --deepspeed --config_file config/mobile_20230707.yaml --checkpoint_dir ./tmp` with `deepspeed --bind_cores_to_rank train_ds.py --deepspeed --config_file config/mobile_20230707.yaml --checkpoint_dir ./tmp` , it worked! ",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments/1782372728/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T06:32:41Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32889558486",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 22693362,
            "login": "CoinCheung",
            "display_login": "CoinCheung",
            "gravatar_id": "",
            "url": "https://api.github.com/users/CoinCheung",
            "avatar_url": "https://avatars.githubusercontent.com/u/22693362?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4563",
                "repository_url": "https://api.github.com/repos/microsoft/DeepSpeed",
                "labels_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4563/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4563/comments",
                "events_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4563/events",
                "html_url": "https://github.com/microsoft/DeepSpeed/pull/4563",
                "id": 1960768338,
                "node_id": "PR_kwDODg7w7M5duEc-",
                "number": 4563,
                "title": "Update lr_schedules.py",
                "user": {
                    "login": "CoinCheung",
                    "id": 22693362,
                    "node_id": "MDQ6VXNlcjIyNjkzMzYy",
                    "avatar_url": "https://avatars.githubusercontent.com/u/22693362?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/CoinCheung",
                    "html_url": "https://github.com/CoinCheung",
                    "followers_url": "https://api.github.com/users/CoinCheung/followers",
                    "following_url": "https://api.github.com/users/CoinCheung/following{/other_user}",
                    "gists_url": "https://api.github.com/users/CoinCheung/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/CoinCheung/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/CoinCheung/subscriptions",
                    "organizations_url": "https://api.github.com/users/CoinCheung/orgs",
                    "repos_url": "https://api.github.com/users/CoinCheung/repos",
                    "events_url": "https://api.github.com/users/CoinCheung/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/CoinCheung/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 6,
                "created_at": "2023-10-25T07:47:16Z",
                "updated_at": "2023-10-27T06:17:50Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/pulls/4563",
                    "html_url": "https://github.com/microsoft/DeepSpeed/pull/4563",
                    "diff_url": "https://github.com/microsoft/DeepSpeed/pull/4563.diff",
                    "patch_url": "https://github.com/microsoft/DeepSpeed/pull/4563.patch",
                    "merged_at": null
                },
                "body": "add cosine annealing scheduler\r\n\r\nthis scheduler is widely used in image classification task, and many llm (e.g. llama) use this also.",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4563/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4563/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments/1782359380",
                "html_url": "https://github.com/microsoft/DeepSpeed/pull/4563#issuecomment-1782359380",
                "issue_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4563",
                "id": 1782359380,
                "node_id": "IC_kwDODg7w7M5qPKVU",
                "user": {
                    "login": "CoinCheung",
                    "id": 22693362,
                    "node_id": "MDQ6VXNlcjIyNjkzMzYy",
                    "avatar_url": "https://avatars.githubusercontent.com/u/22693362?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/CoinCheung",
                    "html_url": "https://github.com/CoinCheung",
                    "followers_url": "https://api.github.com/users/CoinCheung/followers",
                    "following_url": "https://api.github.com/users/CoinCheung/following{/other_user}",
                    "gists_url": "https://api.github.com/users/CoinCheung/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/CoinCheung/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/CoinCheung/subscriptions",
                    "organizations_url": "https://api.github.com/users/CoinCheung/orgs",
                    "repos_url": "https://api.github.com/users/CoinCheung/repos",
                    "events_url": "https://api.github.com/users/CoinCheung/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/CoinCheung/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T06:17:50Z",
                "updated_at": "2023-10-27T06:17:50Z",
                "author_association": "NONE",
                "body": "@tjruwase Would you please launch CI one more time ?",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments/1782359380/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T06:17:50Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32889255293",
        "type": "PullRequestEvent",
        "actor": {
            "id": 16394660,
            "login": "ftian1",
            "display_login": "ftian1",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ftian1",
            "avatar_url": "https://avatars.githubusercontent.com/u/16394660?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "opened",
            "number": 4577,
            "pull_request": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/pulls/4577",
                "id": 1575980568,
                "node_id": "PR_kwDODg7w7M5d744Y",
                "html_url": "https://github.com/microsoft/DeepSpeed/pull/4577",
                "diff_url": "https://github.com/microsoft/DeepSpeed/pull/4577.diff",
                "patch_url": "https://github.com/microsoft/DeepSpeed/pull/4577.patch",
                "issue_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4577",
                "number": 4577,
                "state": "open",
                "locked": false,
                "title": "Add more weight only quantization algorithms into DeepSpeed inference.",
                "user": {
                    "login": "ftian1",
                    "id": 16394660,
                    "node_id": "MDQ6VXNlcjE2Mzk0NjYw",
                    "avatar_url": "https://avatars.githubusercontent.com/u/16394660?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/ftian1",
                    "html_url": "https://github.com/ftian1",
                    "followers_url": "https://api.github.com/users/ftian1/followers",
                    "following_url": "https://api.github.com/users/ftian1/following{/other_user}",
                    "gists_url": "https://api.github.com/users/ftian1/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/ftian1/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/ftian1/subscriptions",
                    "organizations_url": "https://api.github.com/users/ftian1/orgs",
                    "repos_url": "https://api.github.com/users/ftian1/repos",
                    "events_url": "https://api.github.com/users/ftian1/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/ftian1/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "This PR is used to unify the interface of extending more weight only quantization algos for DeepSpeed inference.\r\n\r\nAt this PR, we plan to introduce \"RTN\"/\"TEQ\"/\"AWQ\"/\"GPTQ\" weight only quantization algos implemented in [Intel Neural Compressor](https://github.com/intel/neural-compressor) into DeepSpeed.\r\n\r\nRTN: supports more models/architectures, including any Linear shape, enhanced by MSE-driven mechanism.\r\n \r\nTEQ: supports more models/architectures, cross-architectures (CPU and GPU), and comparable with SOTA, supports layer-wise mixed-bits quantization, this algo is orthogonal with AWQ/GPTQ.\r\n\r\nGPTQ: supports more models/architectures, being more productive with lexible calibration data types (fixed/unfixed length, tensor/tuple/dict)\r\n\r\nAWQ: supports more models/architectures, including CPU device.\r\n\r\n<table class=\"tg\">\r\n<thead>\r\n  <tr>\r\n    <th rowspan=\"2\">Model name</th>\r\n    <th rowspan=\"2\">Configuration</th>\r\n    <th colspan=\"2\">Lambada_openai</th>\r\n    <th rowspan=\"2\">Accuracy Ratio<br>[INT8/FP32]</th>\r\n  </tr>\r\n  <tr>\r\n    <th>Accuracy</th>\r\n    <th>Perplexity</th>\r\n  </tr>\r\n</thead>\r\n<tbody>\r\n  <tr>\r\n    <td rowspan=\"2\">meta-llama/Llama-2-70b-chat-hf</td>\r\n    <td>FP32</td>\r\n    <td>0.7543</td>\r\n    <td>2.6181</td>\r\n    <td>/</td>\r\n  </tr>\r\n  <tr>\r\n    <td>RTN<br>W4G32Asym</td>\r\n    <td>0.7518</td>\r\n    <td>2.6496</td>\r\n    <td>0.9967</td>\r\n  </tr>\r\n  <tr>\r\n    <td rowspan=\"2\">meta-llama/Llama-2-70b-hf</td>\r\n    <td>FP32</td>\r\n    <td>0.7964</td>\r\n    <td>2.6612</td>\r\n    <td>/</td>\r\n  </tr>\r\n  <tr>\r\n    <td>RTN<br>W4G32Sym</td>\r\n    <td>0.7941</td>\r\n    <td>2.7243</td>\r\n    <td>0.9971</td>\r\n  </tr>\r\n  <tr>\r\n    <td rowspan=\"2\">meta-llama/Llama-2-7b-chat-hf</td>\r\n    <td>FP32</td>\r\n    <td>0.7058</td>\r\n    <td>3.2788</td>\r\n    <td>/</td>\r\n  </tr>\r\n  <tr>\r\n    <td>GPTQ<br>W4G32Asym</td>\r\n    <td>0.7002</td>\r\n    <td>3.4124</td>\r\n    <td>0.9921</td>\r\n  </tr>\r\n  <tr>\r\n    <td rowspan=\"2\">EleutherAI/gpt-j-6b</td>\r\n    <td>FP32</td>\r\n    <td>0.6831</td>\r\n    <td>4.1023</td>\r\n    <td>/</td>\r\n  </tr>\r\n  <tr>\r\n    <td>TEQ<br>W4G128Asym</td>\r\n    <td>0.6713</td>\r\n    <td>4.3064</td>\r\n    <td>0.9827</td>\r\n  </tr>\r\n</tbody>\r\n</table>\r\n\r\nWith such rich algos introduced, user can decide which one to be used for their production.",
                "created_at": "2023-10-27T06:00:25Z",
                "updated_at": "2023-10-27T06:00:27Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": null,
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [
                    {
                        "login": "arashb",
                        "id": 537836,
                        "node_id": "MDQ6VXNlcjUzNzgzNg==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/537836?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/arashb",
                        "html_url": "https://github.com/arashb",
                        "followers_url": "https://api.github.com/users/arashb/followers",
                        "following_url": "https://api.github.com/users/arashb/following{/other_user}",
                        "gists_url": "https://api.github.com/users/arashb/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/arashb/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/arashb/subscriptions",
                        "organizations_url": "https://api.github.com/users/arashb/orgs",
                        "repos_url": "https://api.github.com/users/arashb/repos",
                        "events_url": "https://api.github.com/users/arashb/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/arashb/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    {
                        "login": "jeffra",
                        "id": 645595,
                        "node_id": "MDQ6VXNlcjY0NTU5NQ==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/645595?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/jeffra",
                        "html_url": "https://github.com/jeffra",
                        "followers_url": "https://api.github.com/users/jeffra/followers",
                        "following_url": "https://api.github.com/users/jeffra/following{/other_user}",
                        "gists_url": "https://api.github.com/users/jeffra/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/jeffra/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/jeffra/subscriptions",
                        "organizations_url": "https://api.github.com/users/jeffra/orgs",
                        "repos_url": "https://api.github.com/users/jeffra/repos",
                        "events_url": "https://api.github.com/users/jeffra/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/jeffra/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    {
                        "login": "cmikeh2",
                        "id": 2001145,
                        "node_id": "MDQ6VXNlcjIwMDExNDU=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/2001145?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/cmikeh2",
                        "html_url": "https://github.com/cmikeh2",
                        "followers_url": "https://api.github.com/users/cmikeh2/followers",
                        "following_url": "https://api.github.com/users/cmikeh2/following{/other_user}",
                        "gists_url": "https://api.github.com/users/cmikeh2/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/cmikeh2/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/cmikeh2/subscriptions",
                        "organizations_url": "https://api.github.com/users/cmikeh2/orgs",
                        "repos_url": "https://api.github.com/users/cmikeh2/repos",
                        "events_url": "https://api.github.com/users/cmikeh2/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/cmikeh2/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    {
                        "login": "awan-10",
                        "id": 9065216,
                        "node_id": "MDQ6VXNlcjkwNjUyMTY=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/9065216?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/awan-10",
                        "html_url": "https://github.com/awan-10",
                        "followers_url": "https://api.github.com/users/awan-10/followers",
                        "following_url": "https://api.github.com/users/awan-10/following{/other_user}",
                        "gists_url": "https://api.github.com/users/awan-10/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/awan-10/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/awan-10/subscriptions",
                        "organizations_url": "https://api.github.com/users/awan-10/orgs",
                        "repos_url": "https://api.github.com/users/awan-10/repos",
                        "events_url": "https://api.github.com/users/awan-10/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/awan-10/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    {
                        "login": "mrwyattii",
                        "id": 18311180,
                        "node_id": "MDQ6VXNlcjE4MzExMTgw",
                        "avatar_url": "https://avatars.githubusercontent.com/u/18311180?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mrwyattii",
                        "html_url": "https://github.com/mrwyattii",
                        "followers_url": "https://api.github.com/users/mrwyattii/followers",
                        "following_url": "https://api.github.com/users/mrwyattii/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mrwyattii/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mrwyattii/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mrwyattii/subscriptions",
                        "organizations_url": "https://api.github.com/users/mrwyattii/orgs",
                        "repos_url": "https://api.github.com/users/mrwyattii/repos",
                        "events_url": "https://api.github.com/users/mrwyattii/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mrwyattii/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    {
                        "login": "RezaYazdaniAminabadi",
                        "id": 44502768,
                        "node_id": "MDQ6VXNlcjQ0NTAyNzY4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/44502768?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/RezaYazdaniAminabadi",
                        "html_url": "https://github.com/RezaYazdaniAminabadi",
                        "followers_url": "https://api.github.com/users/RezaYazdaniAminabadi/followers",
                        "following_url": "https://api.github.com/users/RezaYazdaniAminabadi/following{/other_user}",
                        "gists_url": "https://api.github.com/users/RezaYazdaniAminabadi/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/RezaYazdaniAminabadi/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/RezaYazdaniAminabadi/subscriptions",
                        "organizations_url": "https://api.github.com/users/RezaYazdaniAminabadi/orgs",
                        "repos_url": "https://api.github.com/users/RezaYazdaniAminabadi/repos",
                        "events_url": "https://api.github.com/users/RezaYazdaniAminabadi/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/RezaYazdaniAminabadi/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/microsoft/DeepSpeed/pulls/4577/commits",
                "review_comments_url": "https://api.github.com/repos/microsoft/DeepSpeed/pulls/4577/comments",
                "review_comment_url": "https://api.github.com/repos/microsoft/DeepSpeed/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4577/comments",
                "statuses_url": "https://api.github.com/repos/microsoft/DeepSpeed/statuses/b230cd96eef6dcd35d1a8713114711c27f9c8fa2",
                "head": {
                    "label": "ftian1:woq",
                    "ref": "woq",
                    "sha": "b230cd96eef6dcd35d1a8713114711c27f9c8fa2",
                    "user": {
                        "login": "ftian1",
                        "id": 16394660,
                        "node_id": "MDQ6VXNlcjE2Mzk0NjYw",
                        "avatar_url": "https://avatars.githubusercontent.com/u/16394660?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/ftian1",
                        "html_url": "https://github.com/ftian1",
                        "followers_url": "https://api.github.com/users/ftian1/followers",
                        "following_url": "https://api.github.com/users/ftian1/following{/other_user}",
                        "gists_url": "https://api.github.com/users/ftian1/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/ftian1/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/ftian1/subscriptions",
                        "organizations_url": "https://api.github.com/users/ftian1/orgs",
                        "repos_url": "https://api.github.com/users/ftian1/repos",
                        "events_url": "https://api.github.com/users/ftian1/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/ftian1/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 629797707,
                        "node_id": "R_kgDOJYnzSw",
                        "name": "DeepSpeed",
                        "full_name": "ftian1/DeepSpeed",
                        "private": false,
                        "owner": {
                            "login": "ftian1",
                            "id": 16394660,
                            "node_id": "MDQ6VXNlcjE2Mzk0NjYw",
                            "avatar_url": "https://avatars.githubusercontent.com/u/16394660?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/ftian1",
                            "html_url": "https://github.com/ftian1",
                            "followers_url": "https://api.github.com/users/ftian1/followers",
                            "following_url": "https://api.github.com/users/ftian1/following{/other_user}",
                            "gists_url": "https://api.github.com/users/ftian1/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/ftian1/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/ftian1/subscriptions",
                            "organizations_url": "https://api.github.com/users/ftian1/orgs",
                            "repos_url": "https://api.github.com/users/ftian1/repos",
                            "events_url": "https://api.github.com/users/ftian1/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/ftian1/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/ftian1/DeepSpeed",
                        "description": "DeepSpeed is a deep learning optimization library that makes distributed training and inference easy, efficient, and effective.",
                        "fork": true,
                        "url": "https://api.github.com/repos/ftian1/DeepSpeed",
                        "forks_url": "https://api.github.com/repos/ftian1/DeepSpeed/forks",
                        "keys_url": "https://api.github.com/repos/ftian1/DeepSpeed/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/ftian1/DeepSpeed/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/ftian1/DeepSpeed/teams",
                        "hooks_url": "https://api.github.com/repos/ftian1/DeepSpeed/hooks",
                        "issue_events_url": "https://api.github.com/repos/ftian1/DeepSpeed/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/ftian1/DeepSpeed/events",
                        "assignees_url": "https://api.github.com/repos/ftian1/DeepSpeed/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/ftian1/DeepSpeed/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/ftian1/DeepSpeed/tags",
                        "blobs_url": "https://api.github.com/repos/ftian1/DeepSpeed/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/ftian1/DeepSpeed/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/ftian1/DeepSpeed/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/ftian1/DeepSpeed/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/ftian1/DeepSpeed/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/ftian1/DeepSpeed/languages",
                        "stargazers_url": "https://api.github.com/repos/ftian1/DeepSpeed/stargazers",
                        "contributors_url": "https://api.github.com/repos/ftian1/DeepSpeed/contributors",
                        "subscribers_url": "https://api.github.com/repos/ftian1/DeepSpeed/subscribers",
                        "subscription_url": "https://api.github.com/repos/ftian1/DeepSpeed/subscription",
                        "commits_url": "https://api.github.com/repos/ftian1/DeepSpeed/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/ftian1/DeepSpeed/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/ftian1/DeepSpeed/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/ftian1/DeepSpeed/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/ftian1/DeepSpeed/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/ftian1/DeepSpeed/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/ftian1/DeepSpeed/merges",
                        "archive_url": "https://api.github.com/repos/ftian1/DeepSpeed/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/ftian1/DeepSpeed/downloads",
                        "issues_url": "https://api.github.com/repos/ftian1/DeepSpeed/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/ftian1/DeepSpeed/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/ftian1/DeepSpeed/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/ftian1/DeepSpeed/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/ftian1/DeepSpeed/labels{/name}",
                        "releases_url": "https://api.github.com/repos/ftian1/DeepSpeed/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/ftian1/DeepSpeed/deployments",
                        "created_at": "2023-04-19T03:38:03Z",
                        "updated_at": "2023-04-19T03:41:31Z",
                        "pushed_at": "2023-10-27T05:39:50Z",
                        "git_url": "git://github.com/ftian1/DeepSpeed.git",
                        "ssh_url": "git@github.com:ftian1/DeepSpeed.git",
                        "clone_url": "https://github.com/ftian1/DeepSpeed.git",
                        "svn_url": "https://github.com/ftian1/DeepSpeed",
                        "homepage": "https://www.deepspeed.ai/",
                        "size": 33577,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "Python",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 0,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 0,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "microsoft:master",
                    "ref": "master",
                    "sha": "8f168c2f8d0459592b51e3f2f245729f459bd00d",
                    "user": {
                        "login": "microsoft",
                        "id": 6154722,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjYxNTQ3MjI=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/6154722?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/microsoft",
                        "html_url": "https://github.com/microsoft",
                        "followers_url": "https://api.github.com/users/microsoft/followers",
                        "following_url": "https://api.github.com/users/microsoft/following{/other_user}",
                        "gists_url": "https://api.github.com/users/microsoft/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/microsoft/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/microsoft/subscriptions",
                        "organizations_url": "https://api.github.com/users/microsoft/orgs",
                        "repos_url": "https://api.github.com/users/microsoft/repos",
                        "events_url": "https://api.github.com/users/microsoft/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/microsoft/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 235860204,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyMzU4NjAyMDQ=",
                        "name": "DeepSpeed",
                        "full_name": "microsoft/DeepSpeed",
                        "private": false,
                        "owner": {
                            "login": "microsoft",
                            "id": 6154722,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjYxNTQ3MjI=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/microsoft",
                            "html_url": "https://github.com/microsoft",
                            "followers_url": "https://api.github.com/users/microsoft/followers",
                            "following_url": "https://api.github.com/users/microsoft/following{/other_user}",
                            "gists_url": "https://api.github.com/users/microsoft/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/microsoft/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/microsoft/subscriptions",
                            "organizations_url": "https://api.github.com/users/microsoft/orgs",
                            "repos_url": "https://api.github.com/users/microsoft/repos",
                            "events_url": "https://api.github.com/users/microsoft/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/microsoft/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/microsoft/DeepSpeed",
                        "description": "DeepSpeed is a deep learning optimization library that makes distributed training and inference easy, efficient, and effective.",
                        "fork": false,
                        "url": "https://api.github.com/repos/microsoft/DeepSpeed",
                        "forks_url": "https://api.github.com/repos/microsoft/DeepSpeed/forks",
                        "keys_url": "https://api.github.com/repos/microsoft/DeepSpeed/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/microsoft/DeepSpeed/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/microsoft/DeepSpeed/teams",
                        "hooks_url": "https://api.github.com/repos/microsoft/DeepSpeed/hooks",
                        "issue_events_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/microsoft/DeepSpeed/events",
                        "assignees_url": "https://api.github.com/repos/microsoft/DeepSpeed/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/microsoft/DeepSpeed/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/microsoft/DeepSpeed/tags",
                        "blobs_url": "https://api.github.com/repos/microsoft/DeepSpeed/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/microsoft/DeepSpeed/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/microsoft/DeepSpeed/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/microsoft/DeepSpeed/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/microsoft/DeepSpeed/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/microsoft/DeepSpeed/languages",
                        "stargazers_url": "https://api.github.com/repos/microsoft/DeepSpeed/stargazers",
                        "contributors_url": "https://api.github.com/repos/microsoft/DeepSpeed/contributors",
                        "subscribers_url": "https://api.github.com/repos/microsoft/DeepSpeed/subscribers",
                        "subscription_url": "https://api.github.com/repos/microsoft/DeepSpeed/subscription",
                        "commits_url": "https://api.github.com/repos/microsoft/DeepSpeed/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/microsoft/DeepSpeed/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/microsoft/DeepSpeed/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/microsoft/DeepSpeed/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/microsoft/DeepSpeed/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/microsoft/DeepSpeed/merges",
                        "archive_url": "https://api.github.com/repos/microsoft/DeepSpeed/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/microsoft/DeepSpeed/downloads",
                        "issues_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/microsoft/DeepSpeed/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/microsoft/DeepSpeed/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/microsoft/DeepSpeed/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/microsoft/DeepSpeed/labels{/name}",
                        "releases_url": "https://api.github.com/repos/microsoft/DeepSpeed/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/microsoft/DeepSpeed/deployments",
                        "created_at": "2020-01-23T18:35:18Z",
                        "updated_at": "2023-10-27T05:57:13Z",
                        "pushed_at": "2023-10-27T06:00:26Z",
                        "git_url": "git://github.com/microsoft/DeepSpeed.git",
                        "ssh_url": "git@github.com:microsoft/DeepSpeed.git",
                        "clone_url": "https://github.com/microsoft/DeepSpeed.git",
                        "svn_url": "https://github.com/microsoft/DeepSpeed",
                        "homepage": "https://www.deepspeed.ai/",
                        "size": 187045,
                        "stargazers_count": 29014,
                        "watchers_count": 29014,
                        "language": "Python",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 3534,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 815,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "billion-parameters",
                            "compression",
                            "data-parallelism",
                            "deep-learning",
                            "gpu",
                            "inference",
                            "machine-learning",
                            "mixture-of-experts",
                            "model-parallelism",
                            "pipeline-parallelism",
                            "pytorch",
                            "trillion-parameters",
                            "zero"
                        ],
                        "visibility": "public",
                        "forks": 3534,
                        "open_issues": 815,
                        "watchers": 29014,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/microsoft/DeepSpeed/pulls/4577"
                    },
                    "html": {
                        "href": "https://github.com/microsoft/DeepSpeed/pull/4577"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4577"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4577/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/microsoft/DeepSpeed/pulls/4577/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/microsoft/DeepSpeed/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/microsoft/DeepSpeed/pulls/4577/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/microsoft/DeepSpeed/statuses/b230cd96eef6dcd35d1a8713114711c27f9c8fa2"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null,
                "merged": false,
                "mergeable": null,
                "rebaseable": null,
                "mergeable_state": "unknown",
                "merged_by": null,
                "comments": 0,
                "review_comments": 0,
                "maintainer_can_modify": true,
                "commits": 1,
                "additions": 48,
                "deletions": 1,
                "changed_files": 2
            }
        },
        "public": true,
        "created_at": "2023-10-27T06:00:27Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32889204730",
        "type": "WatchEvent",
        "actor": {
            "id": 11696091,
            "login": "DominikZhuan",
            "display_login": "DominikZhuan",
            "gravatar_id": "",
            "url": "https://api.github.com/users/DominikZhuan",
            "avatar_url": "https://avatars.githubusercontent.com/u/11696091?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T05:57:13Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32888604876",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 10676103,
            "login": "stas00",
            "display_login": "stas00",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stas00",
            "avatar_url": "https://avatars.githubusercontent.com/u/10676103?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025",
                "repository_url": "https://api.github.com/repos/microsoft/DeepSpeed",
                "labels_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025/comments",
                "events_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025/events",
                "html_url": "https://github.com/microsoft/DeepSpeed/issues/2025",
                "id": 1273764327,
                "node_id": "I_kwDODg7w7M5L7Bnn",
                "number": 2025,
                "title": "DeepSpeed with SLURM",
                "user": {
                    "login": "thechargedneutron",
                    "id": 25536866,
                    "node_id": "MDQ6VXNlcjI1NTM2ODY2",
                    "avatar_url": "https://avatars.githubusercontent.com/u/25536866?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/thechargedneutron",
                    "html_url": "https://github.com/thechargedneutron",
                    "followers_url": "https://api.github.com/users/thechargedneutron/followers",
                    "following_url": "https://api.github.com/users/thechargedneutron/following{/other_user}",
                    "gists_url": "https://api.github.com/users/thechargedneutron/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/thechargedneutron/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/thechargedneutron/subscriptions",
                    "organizations_url": "https://api.github.com/users/thechargedneutron/orgs",
                    "repos_url": "https://api.github.com/users/thechargedneutron/repos",
                    "events_url": "https://api.github.com/users/thechargedneutron/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/thechargedneutron/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 1805232526,
                        "node_id": "MDU6TGFiZWwxODA1MjMyNTI2",
                        "url": "https://api.github.com/repos/microsoft/DeepSpeed/labels/bug",
                        "name": "bug",
                        "color": "d73a4a",
                        "default": true,
                        "description": "Something isn't working"
                    }
                ],
                "state": "closed",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 19,
                "created_at": "2022-06-16T15:57:19Z",
                "updated_at": "2023-10-27T05:17:33Z",
                "closed_at": "2022-06-16T21:10:31Z",
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "Hi, I am trying to run DeepSpeed on SLURM with multiple nodes and multiple GPUs on each node. I was referring to this example [here](https://nlp.stanford.edu/mistral/tutorials/deepspeed.html). I am not sure how we can specify the address of all the machines that will be allotted to me when submitting a SLURM script.\r\n\r\nI have my task.sbatch file as this\r\n\r\n```\r\n#SBATCH --nodes=2\r\n#SBATCH --gpus-per-node=8\r\n\r\ndeepspeed --num_gpus 8 --num_nodes 2 finetune.py --config conf/tutorial-gpt2-micro.yaml\r\n```\r\n\r\nI have two questions\r\n1. How do I know addresses of machines when specifying the deepspeed parameters?\r\n2. Why do we need to set lr, scheduler etc. in the config files when the Trainer in the code already has those parameters set for single machine multi-GPU training through Huggingface transformers?\r\n\r\nI am a beginner to SLURM based systems so sorry if there is an easy way to specify the addresses. And if there is a SLURM based example of deepspeed, please point me to that.\r\n\r\nThanks in advance!\r\n\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025/timeline",
                "performed_via_github_app": null,
                "state_reason": "completed"
            },
            "comment": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments/1782308851",
                "html_url": "https://github.com/microsoft/DeepSpeed/issues/2025#issuecomment-1782308851",
                "issue_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025",
                "id": 1782308851,
                "node_id": "IC_kwDODg7w7M5qO9_z",
                "user": {
                    "login": "stas00",
                    "id": 10676103,
                    "node_id": "MDQ6VXNlcjEwNjc2MTAz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/10676103?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/stas00",
                    "html_url": "https://github.com/stas00",
                    "followers_url": "https://api.github.com/users/stas00/followers",
                    "following_url": "https://api.github.com/users/stas00/following{/other_user}",
                    "gists_url": "https://api.github.com/users/stas00/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/stas00/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/stas00/subscriptions",
                    "organizations_url": "https://api.github.com/users/stas00/orgs",
                    "repos_url": "https://api.github.com/users/stas00/repos",
                    "events_url": "https://api.github.com/users/stas00/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/stas00/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T05:17:33Z",
                "updated_at": "2023-10-27T05:17:33Z",
                "author_association": "CONTRIBUTOR",
                "body": "HF transformers examples are all using the HF Trainer (or at least they used to), which is the training loop which sorts all of this for you. https://github.com/huggingface/transformers/blob/main/src/transformers/trainer.py\r\n\r\nRecently its innards got replaced with routines from Accelerate, so to the outside it still uses the same API, but on the inside it delegates almost everything to Accelerate.\r\n\r\nAnd as you noticed Accelerate calls the dist init.\r\n\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments/1782308851/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T05:17:34Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32887898416",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 128442117,
            "login": "lzy37ld",
            "display_login": "lzy37ld",
            "gravatar_id": "",
            "url": "https://api.github.com/users/lzy37ld",
            "avatar_url": "https://avatars.githubusercontent.com/u/128442117?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025",
                "repository_url": "https://api.github.com/repos/microsoft/DeepSpeed",
                "labels_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025/comments",
                "events_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025/events",
                "html_url": "https://github.com/microsoft/DeepSpeed/issues/2025",
                "id": 1273764327,
                "node_id": "I_kwDODg7w7M5L7Bnn",
                "number": 2025,
                "title": "DeepSpeed with SLURM",
                "user": {
                    "login": "thechargedneutron",
                    "id": 25536866,
                    "node_id": "MDQ6VXNlcjI1NTM2ODY2",
                    "avatar_url": "https://avatars.githubusercontent.com/u/25536866?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/thechargedneutron",
                    "html_url": "https://github.com/thechargedneutron",
                    "followers_url": "https://api.github.com/users/thechargedneutron/followers",
                    "following_url": "https://api.github.com/users/thechargedneutron/following{/other_user}",
                    "gists_url": "https://api.github.com/users/thechargedneutron/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/thechargedneutron/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/thechargedneutron/subscriptions",
                    "organizations_url": "https://api.github.com/users/thechargedneutron/orgs",
                    "repos_url": "https://api.github.com/users/thechargedneutron/repos",
                    "events_url": "https://api.github.com/users/thechargedneutron/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/thechargedneutron/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 1805232526,
                        "node_id": "MDU6TGFiZWwxODA1MjMyNTI2",
                        "url": "https://api.github.com/repos/microsoft/DeepSpeed/labels/bug",
                        "name": "bug",
                        "color": "d73a4a",
                        "default": true,
                        "description": "Something isn't working"
                    }
                ],
                "state": "closed",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 18,
                "created_at": "2022-06-16T15:57:19Z",
                "updated_at": "2023-10-27T04:24:25Z",
                "closed_at": "2022-06-16T21:10:31Z",
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "Hi, I am trying to run DeepSpeed on SLURM with multiple nodes and multiple GPUs on each node. I was referring to this example [here](https://nlp.stanford.edu/mistral/tutorials/deepspeed.html). I am not sure how we can specify the address of all the machines that will be allotted to me when submitting a SLURM script.\r\n\r\nI have my task.sbatch file as this\r\n\r\n```\r\n#SBATCH --nodes=2\r\n#SBATCH --gpus-per-node=8\r\n\r\ndeepspeed --num_gpus 8 --num_nodes 2 finetune.py --config conf/tutorial-gpt2-micro.yaml\r\n```\r\n\r\nI have two questions\r\n1. How do I know addresses of machines when specifying the deepspeed parameters?\r\n2. Why do we need to set lr, scheduler etc. in the config files when the Trainer in the code already has those parameters set for single machine multi-GPU training through Huggingface transformers?\r\n\r\nI am a beginner to SLURM based systems so sorry if there is an easy way to specify the addresses. And if there is a SLURM based example of deepspeed, please point me to that.\r\n\r\nThanks in advance!\r\n\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025/timeline",
                "performed_via_github_app": null,
                "state_reason": "completed"
            },
            "comment": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments/1782270078",
                "html_url": "https://github.com/microsoft/DeepSpeed/issues/2025#issuecomment-1782270078",
                "issue_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025",
                "id": 1782270078,
                "node_id": "IC_kwDODg7w7M5qO0h-",
                "user": {
                    "login": "lzy37ld",
                    "id": 128442117,
                    "node_id": "U_kgDOB6ffBQ",
                    "avatar_url": "https://avatars.githubusercontent.com/u/128442117?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/lzy37ld",
                    "html_url": "https://github.com/lzy37ld",
                    "followers_url": "https://api.github.com/users/lzy37ld/followers",
                    "following_url": "https://api.github.com/users/lzy37ld/following{/other_user}",
                    "gists_url": "https://api.github.com/users/lzy37ld/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/lzy37ld/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/lzy37ld/subscriptions",
                    "organizations_url": "https://api.github.com/users/lzy37ld/orgs",
                    "repos_url": "https://api.github.com/users/lzy37ld/repos",
                    "events_url": "https://api.github.com/users/lzy37ld/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/lzy37ld/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T04:24:25Z",
                "updated_at": "2023-10-27T04:24:25Z",
                "author_association": "NONE",
                "body": "Thanks for this clarification!\r\nyes @stas00 , \r\n\"torchrun program is a launcher. If you don't use a special training framework you need to invoke it yourself as you can see in https://github.com/stas00/ml-engineering/blob/b1182d88994a9ef0781d95ace31a14f13518b781/debug/torch-distributed-gpu-test.py#L74\r\n\"\r\nI also checked this script before and that's actually one reason why I ask about where to find dist. init_process_group in HF transformer repo. As you mentioned, deepspeed and accelerate are launchers where the distributed training are invoked. Torchrun is a launcher as well but needs you to invoke it manually. In your scripts, you add dist. init_process_group to build the connection between gpus, so I am asking in HF, say torchrun --nproc_per_node 2 examples/languague_modeling.py, how did they achieve the connection between gpus? torchrun would launch two process but how do they connect? That's what I am looking for. As for accelerate for example, there is a place to do that:\r\nhttps://github.com/huggingface/accelerate/blob/54403875295905c4afb4a9435508e5262a9998c5/src/accelerate/state.py#L180\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments/1782270078/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T04:24:26Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32887755381",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 50266021,
            "login": "Henryplay",
            "display_login": "Henryplay",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Henryplay",
            "avatar_url": "https://avatars.githubusercontent.com/u/50266021?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576",
                "repository_url": "https://api.github.com/repos/microsoft/DeepSpeed",
                "labels_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576/comments",
                "events_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576/events",
                "html_url": "https://github.com/microsoft/DeepSpeed/issues/4576",
                "id": 1964731150,
                "node_id": "I_kwDODg7w7M51G2sO",
                "number": 4576,
                "title": "[BUG] Hey! when I training using deepspeed ,an error occured \"#error You need C++14 to compile PyTorch\"",
                "user": {
                    "login": "Henryplay",
                    "id": 50266021,
                    "node_id": "MDQ6VXNlcjUwMjY2MDIx",
                    "avatar_url": "https://avatars.githubusercontent.com/u/50266021?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Henryplay",
                    "html_url": "https://github.com/Henryplay",
                    "followers_url": "https://api.github.com/users/Henryplay/followers",
                    "following_url": "https://api.github.com/users/Henryplay/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Henryplay/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Henryplay/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Henryplay/subscriptions",
                    "organizations_url": "https://api.github.com/users/Henryplay/orgs",
                    "repos_url": "https://api.github.com/users/Henryplay/repos",
                    "events_url": "https://api.github.com/users/Henryplay/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Henryplay/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 1805232526,
                        "node_id": "MDU6TGFiZWwxODA1MjMyNTI2",
                        "url": "https://api.github.com/repos/microsoft/DeepSpeed/labels/bug",
                        "name": "bug",
                        "color": "d73a4a",
                        "default": true,
                        "description": "Something isn't working"
                    },
                    {
                        "id": 4580271613,
                        "node_id": "LA_kwDODg7w7M8AAAABEQFl_Q",
                        "url": "https://api.github.com/repos/microsoft/DeepSpeed/labels/training",
                        "name": "training",
                        "color": "0052CC",
                        "default": false,
                        "description": ""
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 1,
                "created_at": "2023-10-27T04:11:27Z",
                "updated_at": "2023-10-27T04:13:08Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "**Describe the bug**\r\nwhen i use 'deepspeed train_ds.py --deepspeed --config_file config/mobile_20230707.yaml --checkpoint_dir ./tmp'  command training my own cnn model, An error has occurred \uff1a`error You need C++14 to compile PyTorch` , and in the `ds_report` informations, torch version .................... 1.13.1+cu117 , and deepspeed wheel compiled w. ...... torch 1.9, cuda 11.1\uff0c Is there any problem here\uff1f\r\n\r\n**ds_report output**\r\n```\r\n[2023-10-27 12:01:25,875] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n--------------------------------------------------\r\nDeepSpeed C++/CUDA extension op report\r\n--------------------------------------------------\r\nNOTE: Ops not installed will be just-in-time (JIT) compiled at\r\n      runtime if needed. Op compatibility means that your system\r\n      meet the required dependencies to JIT install the op.\r\n--------------------------------------------------\r\nJIT compiled ops requires ninja\r\nninja .................. [OKAY]\r\n--------------------------------------------------\r\nop name ................ installed .. compatible\r\n--------------------------------------------------\r\n [WARNING]  async_io requires the dev libaio .so object and headers but these were not found.\r\n [WARNING]  async_io: please install the libaio-dev package with apt\r\n [WARNING]  If libaio is already installed (perhaps from source), try setting the CFLAGS and LDFLAGS environment variables to where it can be found.\r\nasync_io ............... [NO] ....... [NO]\r\nfused_adam ............. [NO] ....... [OKAY]\r\ncpu_adam ............... [NO] ....... [OKAY]\r\ncpu_adagrad ............ [NO] ....... [OKAY]\r\ncpu_lion ............... [NO] ....... [OKAY]\r\n [WARNING]  Please specify the CUTLASS repo directory as environment variable $CUTLASS_PATH\r\nevoformer_attn ......... [NO] ....... [NO]\r\nfused_lamb ............. [NO] ....... [OKAY]\r\nfused_lion ............. [NO] ....... [OKAY]\r\nquantizer .............. [NO] ....... [OKAY]\r\nrandom_ltd ............. [NO] ....... [OKAY]\r\n [WARNING]  please install triton==1.0.0 if you want to use sparse attention\r\nsparse_attn ............ [NO] ....... [NO]\r\nspatial_inference ...... [NO] ....... [OKAY]\r\ntransformer ............ [NO] ....... [OKAY]\r\nstochastic_transformer . [NO] ....... [OKAY]\r\ntransformer_inference .. [NO] ....... [OKAY]\r\n--------------------------------------------------\r\nDeepSpeed general environment info:\r\ntorch install path ............... ['/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch']\r\ntorch version .................... 1.13.1+cu117\r\ndeepspeed install path ........... ['/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed']\r\ndeepspeed info ................... 0.11.1, unknown, unknown\r\ntorch cuda version ............... 11.7\r\ntorch hip version ................ None\r\nnvcc version ..................... 11.7\r\ndeepspeed wheel compiled w. ...... torch 1.9, cuda 11.1\r\nshared memory (/dev/shm) size .... 188.89 GB\r\n```\r\n\r\n**System info (please complete the following information):**\r\n - OS: [e.g. Ubuntu 18.04]\r\n - GPU count and types [e.g. one machines with x4 3090s each]\r\n - Python 3.8\r\n\r\n\r\n**Launcher context**\r\n`deepspeed train_ds.py --deepspeed --config_file config/mobile_20230707.yaml --checkpoint_dir ./tmp`\r\n\r\n**Docker context**\r\nAre you using a specific docker image that you can share?\r\n\r\n**Additional context**\r\nfull information is here\r\n```\r\n[2023-10-27 11:49:46,334] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n[2023-10-27 11:49:50,406] [WARNING] [runner.py:203:fetch_hostfile] Unable to find hostfile, will proceed with training with local resources only.\r\n[2023-10-27 11:49:50,434] [INFO] [runner.py:570:main] cmd = /data1/zpsun/miniconda3/envs/ocr_x2000/bin/python -u -m deepspeed.launcher.launch --world_info=eyJsb2NhbGhvc3QiOiBbMCwgMSwgMiwgM119 --master_addr=127.0.0.1 --master_port=29500 --enable_each_rank_log=None train_ds.py --deepspeed --config_file config/mobile_20230707.yaml --checkpoint_dir ./tmp\r\n[2023-10-27 11:49:51,552] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n[2023-10-27 11:49:52,390] [INFO] [launch.py:145:main] WORLD INFO DICT: {'localhost': [0, 1, 2, 3]}\r\n[2023-10-27 11:49:52,390] [INFO] [launch.py:151:main] nnodes=1, num_local_procs=4, node_rank=0\r\n[2023-10-27 11:49:52,390] [INFO] [launch.py:162:main] global_rank_mapping=defaultdict(<class 'list'>, {'localhost': [0, 1, 2, 3]})\r\n[2023-10-27 11:49:52,390] [INFO] [launch.py:163:main] dist_world_size=4\r\n[2023-10-27 11:49:52,390] [INFO] [launch.py:165:main] Setting CUDA_VISIBLE_DEVICES=0,1,2,3\r\n[2023-10-27 11:49:53,528] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n[2023-10-27 11:49:53,534] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n[2023-10-27 11:49:53,544] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n[2023-10-27 11:49:53,553] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n2023-10-27 11:49:54.518 | INFO     | __main__:log_dist:41 - [Rank 0] Creating Experiment Directory\r\n2023-10-27 11:49:54.529 | INFO     | __main__:log_dist:41 - [Rank 0] Experiment Directory created at tmp/ocr_train.2023.10.26.20.49.54.22pkw5e3\r\n2023-10-27 11:49:54.529 | INFO     | __main__:log_dist:41 - [Rank 0] Creating Image Transform\r\n2023-10-27 11:49:54.530 | INFO     | __main__:log_dist:41 - [Rank 0] Parse Dict\r\n2023-10-27 11:49:54.533 | INFO     | __main__:log_dist:41 - [Rank 0] Creating Datasets\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 149983.48it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 146031.62it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 144655.70it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 143595.25it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 136202.04it/s]\r\n\r\n2023-10-27 11:49:57.111 | INFO     | __main__:log_dist:41 - [Rank 0] Dataset Creation Done\r\n2023-10-27 11:49:57.111 | INFO     | __main__:log_dist:41 - [Rank 0] Creating Model\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 131767.63it/s]\r\n\r\n[2023-10-27 11:49:57,190] [INFO] [logging.py:96:log_dist] [Rank -1] DeepSpeed info: version=0.11.1, git-hash=unknown, git-branch=unknown\r\n[2023-10-27 11:49:57,190] [INFO] [comm.py:637:init_distributed] cdb=None\r\n2023-10-27 11:49:57.211 | INFO     | __main__:log_dist:41 - [Rank 0] Model Creation Done\r\n2023-10-27 11:49:57.212 | INFO     | __main__:log_dist:41 - [Rank 0] Creating DeepSpeed engine\r\n[2023-10-27 11:49:57,212] [INFO] [logging.py:96:log_dist] [Rank -1] DeepSpeed info: version=0.11.1, git-hash=unknown, git-branch=unknown\r\n[2023-10-27 11:49:57,212] [INFO] [comm.py:637:init_distributed] cdb=None\r\n[2023-10-27 11:49:57,212] [INFO] [comm.py:668:init_distributed] Initializing TorchBackend in DeepSpeed with backend nccl\r\n[2023-10-27 11:49:57,236] [INFO] [logging.py:96:log_dist] [Rank -1] DeepSpeed info: version=0.11.1, git-hash=unknown, git-branch=unknown\r\n[2023-10-27 11:49:57,236] [INFO] [comm.py:637:init_distributed] cdb=None\r\n[2023-10-27 11:49:57,237] [INFO] [logging.py:96:log_dist] [Rank -1] DeepSpeed info: version=0.11.1, git-hash=unknown, git-branch=unknown\r\n[2023-10-27 11:49:57,237] [INFO] [comm.py:637:init_distributed] cdb=None\r\n[2023-10-27 11:50:00,297] [INFO] [logging.py:96:log_dist] [Rank 0] DeepSpeed Flops Profiler Enabled: False\r\nUsing /data1/zpsun/.cache/torch_extensions/py38_cu117 as PyTorch extensions root...\r\nUsing /data1/zpsun/.cache/torch_extensions/py38_cu117 as PyTorch extensions root...\r\nUsing /data1/zpsun/.cache/torch_extensions/py38_cu117 as PyTorch extensions root...\r\nUsing /data1/zpsun/.cache/torch_extensions/py38_cu117 as PyTorch extensions root...\r\nDetected CUDA files, patching ldflags\r\nEmitting ninja build file /data1/zpsun/.cache/torch_extensions/py38_cu117/cpu_adam/build.ninja...\r\nBuilding extension module cpu_adam...\r\nAllowing ninja to set a default number of workers... (overridable by setting the environment variable MAX_JOBS=N)\r\n[1/2] /usr/local/cuda-11.7/bin/nvcc  -DTORCH_EXTENSION_NAME=cpu_adam -DTORCH_API_INCLUDE_EXTENSION_H -DPYBIND11_COMPILER_TYPE=\\\"_gcc\\\" -DPYBIND11_STDLIB=\\\"_libstdcpp\\\" -DPYBIND11_BUILD_ABI=\\\"_cxxabi1011\\\" -I/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes -I/usr/local/cuda-11.7/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/torch/csrc/api/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/TH -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/THC -isystem /usr/local/cuda-11.7/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/include/python3.8 -D_GLIBCXX_USE_CXX11_ABI=0 -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_BFLOAT16_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr -gencode=arch=compute_86,code=compute_86 -gencode=arch=compute_86,code=sm_86 --compiler-options '-fPIC' -O3 --use_fast_math -std=c++17 -U__CUDA_NO_HALF_OPERATORS__ -U__CUDA_NO_HALF_CONVERSIONS__ -U__CUDA_NO_HALF2_OPERATORS__ -gencode=arch=compute_86,code=sm_86 -gencode=arch=compute_86,code=compute_86 -DBF16_AVAILABLE -c /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/common/custom_cuda_kernel.cu -o custom_cuda_kernel.cuda.o \r\nFAILED: custom_cuda_kernel.cuda.o \r\n/usr/local/cuda-11.7/bin/nvcc  -DTORCH_EXTENSION_NAME=cpu_adam -DTORCH_API_INCLUDE_EXTENSION_H -DPYBIND11_COMPILER_TYPE=\\\"_gcc\\\" -DPYBIND11_STDLIB=\\\"_libstdcpp\\\" -DPYBIND11_BUILD_ABI=\\\"_cxxabi1011\\\" -I/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes -I/usr/local/cuda-11.7/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/torch/csrc/api/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/TH -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/THC -isystem /usr/local/cuda-11.7/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/include/python3.8 -D_GLIBCXX_USE_CXX11_ABI=0 -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_BFLOAT16_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr -gencode=arch=compute_86,code=compute_86 -gencode=arch=compute_86,code=sm_86 --compiler-options '-fPIC' -O3 --use_fast_math -std=c++17 -U__CUDA_NO_HALF_OPERATORS__ -U__CUDA_NO_HALF_CONVERSIONS__ -U__CUDA_NO_HALF2_OPERATORS__ -gencode=arch=compute_86,code=sm_86 -gencode=arch=compute_86,code=compute_86 -DBF16_AVAILABLE -c /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/common/custom_cuda_kernel.cu -o custom_cuda_kernel.cuda.o \r\nnvcc warning : The -std=c++17 flag is not supported with the configured host compiler. Flag will be ignored.\r\nIn file included from /usr/include/c++/5/cstdint:35:0,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/cuda/CUDAContext.h:3,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/context.h:8,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/custom_cuda_layers.h:16,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/common/custom_cuda_kernel.cu:6:\r\n/usr/include/c++/5/bits/c++0x_warning.h:32:2: error: #error This file requires compiler and library support for the ISO C++ 2011 standard. This support must be enabled with the -std=c++11 or -std=gnu++11 compiler options.\r\n #error This file requires compiler and library support \\\r\n  ^\r\nIn file included from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/string_view.h:4:0,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/StringUtil.h:6,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/Exception.h:6,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/core/Generator.h:11,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/CPUGeneratorImpl.h:3,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/Context.h:3,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/cuda/CUDAContext.h:14,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/context.h:8,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/custom_cuda_layers.h:16,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/common/custom_cuda_kernel.cu:6:\r\n/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/C++17.h:27:2: error: #error You need C++14 to compile PyTorch\r\n #error You need C++14 to compile PyTorch\r\n  ^\r\nIn file included from /usr/include/c++/5/experimental/string_view:39:0,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/string_view.h:20,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/StringUtil.h:6,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/Exception.h:6,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/core/Generator.h:11,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/CPUGeneratorImpl.h:3,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/Context.h:3,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/cuda/CUDAContext.h:14,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/context.h:8,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/custom_cuda_layers.h:16,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/common/custom_cuda_kernel.cu:6:\r\n/usr/include/c++/5/bits/c++14_warning.h:32:2: error: #error This file requires compiler and library support for the forthcoming ISO C++ 2014 standard. This support is currently experimental, and must be enabled with the -std=c++1y or -std=gnu++1y compiler options.\r\n #error This file requires compiler and library support for the forthcoming \\\r\n  ^\r\nninja: build stopped: subcommand failed.\r\nTraceback (most recent call last):\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1900, in _run_ninja_build\r\n    subprocess.run(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/subprocess.py\", line 516, in run\r\n    raise CalledProcessError(retcode, process.args,\r\nsubprocess.CalledProcessError: Command '['ninja', '-v']' returned non-zero exit status 1.\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"train_ds.py\", line 263, in <module>\r\n    fire.Fire(train)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 141, in Fire\r\n    component_trace = _Fire(component, args, parsed_flag_args, context, name)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 475, in _Fire\r\n    component, remaining_args = _CallAndUpdateTrace(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 691, in _CallAndUpdateTrace\r\n    component = fn(*varargs, **kwargs)\r\n  File \"train_ds.py\", line 216, in train\r\n    model, _, _, _ = deepspeed.initialize(model=model,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/__init__.py\", line 171, in initialize\r\n    engine = DeepSpeedEngine(args=args,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 304, in __init__\r\n    self._configure_optimizer(optimizer, model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1186, in _configure_optimizer\r\n    basic_optimizer = self._configure_basic_optimizer(model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1257, in _configure_basic_optimizer\r\n    optimizer = DeepSpeedCPUAdam(model_parameters,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 94, in __init__\r\n    self.ds_opt_adam = CPUAdamBuilder().load()\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 446, in load\r\n    return self.jit_load(verbose)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 489, in jit_load\r\n    op_module = load(name=self.name,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1284, in load\r\n    return _jit_compile(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1508, in _jit_compile\r\n    _write_ninja_file_and_build_library(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1623, in _write_ninja_file_and_build_library\r\n    _run_ninja_build(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1916, in _run_ninja_build\r\n    raise RuntimeError(message) from e\r\nRuntimeError: Error building extension 'cpu_adam'\r\nLoading extension module cpu_adam...\r\nTraceback (most recent call last):\r\n  File \"train_ds.py\", line 263, in <module>\r\n    fire.Fire(train)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 141, in Fire\r\n    component_trace = _Fire(component, args, parsed_flag_args, context, name)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 475, in _Fire\r\n    component, remaining_args = _CallAndUpdateTrace(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 691, in _CallAndUpdateTrace\r\n    component = fn(*varargs, **kwargs)\r\n  File \"train_ds.py\", line 216, in train\r\n    model, _, _, _ = deepspeed.initialize(model=model,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/__init__.py\", line 171, in initialize\r\n    engine = DeepSpeedEngine(args=args,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 304, in __init__\r\n    self._configure_optimizer(optimizer, model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1186, in _configure_optimizer\r\n    basic_optimizer = self._configure_basic_optimizer(model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1257, in _configure_basic_optimizer\r\n    optimizer = DeepSpeedCPUAdam(model_parameters,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 94, in __init__\r\n    self.ds_opt_adam = CPUAdamBuilder().load()\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 446, in load\r\n    return self.jit_load(verbose)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 489, in jit_load\r\n    op_module = load(name=self.name,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1284, in load\r\n    return _jit_compile(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1534, in _jit_compile\r\n    return _import_module_from_library(name, build_directory, is_python_module)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1936, in _import_module_from_library\r\n    module = importlib.util.module_from_spec(spec)\r\n  File \"<frozen importlib._bootstrap>\", line 556, in module_from_spec\r\n  File \"<frozen importlib._bootstrap_external>\", line 1166, in create_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\nImportError: /data1/zpsun/.cache/torch_extensions/py38_cu117/cpu_adam/cpu_adam.so: cannot open shared object file: No such file or directory\r\nLoading extension module cpu_adam...\r\nTraceback (most recent call last):\r\n  File \"train_ds.py\", line 263, in <module>\r\n    fire.Fire(train)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 141, in Fire\r\n    component_trace = _Fire(component, args, parsed_flag_args, context, name)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 475, in _Fire\r\n    component, remaining_args = _CallAndUpdateTrace(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 691, in _CallAndUpdateTrace\r\n    component = fn(*varargs, **kwargs)\r\n  File \"train_ds.py\", line 216, in train\r\n    model, _, _, _ = deepspeed.initialize(model=model,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/__init__.py\", line 171, in initialize\r\n    engine = DeepSpeedEngine(args=args,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 304, in __init__\r\n    self._configure_optimizer(optimizer, model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1186, in _configure_optimizer\r\n    basic_optimizer = self._configure_basic_optimizer(model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1257, in _configure_basic_optimizer\r\n    optimizer = DeepSpeedCPUAdam(model_parameters,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 94, in __init__\r\n    self.ds_opt_adam = CPUAdamBuilder().load()\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 446, in load\r\n    return self.jit_load(verbose)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 489, in jit_load\r\n    op_module = load(name=self.name,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1284, in load\r\n    return _jit_compile(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1534, in _jit_compile\r\n    return _import_module_from_library(name, build_directory, is_python_module)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1936, in _import_module_from_library\r\n    module = importlib.util.module_from_spec(spec)\r\n  File \"<frozen importlib._bootstrap>\", line 556, in module_from_spec\r\n  File \"<frozen importlib._bootstrap_external>\", line 1166, in create_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\nImportError: /data1/zpsun/.cache/torch_extensions/py38_cu117/cpu_adam/cpu_adam.so: cannot open shared object file: No such file or directory\r\nLoading extension module cpu_adam...\r\nTraceback (most recent call last):\r\n  File \"train_ds.py\", line 263, in <module>\r\n    fire.Fire(train)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 141, in Fire\r\n    component_trace = _Fire(component, args, parsed_flag_args, context, name)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 475, in _Fire\r\n    component, remaining_args = _CallAndUpdateTrace(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 691, in _CallAndUpdateTrace\r\n    component = fn(*varargs, **kwargs)\r\n  File \"train_ds.py\", line 216, in train\r\n    model, _, _, _ = deepspeed.initialize(model=model,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/__init__.py\", line 171, in initialize\r\n    engine = DeepSpeedEngine(args=args,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 304, in __init__\r\n    self._configure_optimizer(optimizer, model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1186, in _configure_optimizer\r\n    basic_optimizer = self._configure_basic_optimizer(model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1257, in _configure_basic_optimizer\r\n    optimizer = DeepSpeedCPUAdam(model_parameters,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 94, in __init__\r\n    self.ds_opt_adam = CPUAdamBuilder().load()\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 446, in load\r\n    return self.jit_load(verbose)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 489, in jit_load\r\n    op_module = load(name=self.name,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1284, in load\r\n    return _jit_compile(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1534, in _jit_compile\r\n    return _import_module_from_library(name, build_directory, is_python_module)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1936, in _import_module_from_library\r\n    module = importlib.util.module_from_spec(spec)\r\n  File \"<frozen importlib._bootstrap>\", line 556, in module_from_spec\r\n  File \"<frozen importlib._bootstrap_external>\", line 1166, in create_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\nImportError: /data1/zpsun/.cache/torch_extensions/py38_cu117/cpu_adam/cpu_adam.so: cannot open shared object file: No such file or directory\r\nException ignored in: <function DeepSpeedCPUAdam.__del__ at 0x15325dbfed30>\r\nTraceback (most recent call last):\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 102, in __del__\r\n    self.ds_opt_adam.destroy_adam(self.opt_id)\r\nAttributeError: 'DeepSpeedCPUAdam' object has no attribute 'ds_opt_adam'\r\nException ignored in: <function DeepSpeedCPUAdam.__del__ at 0x153cb28d1d30>\r\nTraceback (most recent call last):\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 102, in __del__\r\n    self.ds_opt_adam.destroy_adam(self.opt_id)\r\nAttributeError: 'DeepSpeedCPUAdam' object has no attribute 'ds_opt_adam'\r\nException ignored in: <function DeepSpeedCPUAdam.__del__ at 0x14d0d6290d30>\r\nTraceback (most recent call last):\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 102, in __del__\r\n    self.ds_opt_adam.destroy_adam(self.opt_id)\r\nAttributeError: 'DeepSpeedCPUAdam' object has no attribute 'ds_opt_adam'\r\nException ignored in: <function DeepSpeedCPUAdam.__del__ at 0x149250829d30>\r\nTraceback (most recent call last):\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 102, in __del__\r\nAttributeError: 'DeepSpeedCPUAdam' object has no attribute 'ds_opt_adam'\r\n[2023-10-27 11:50:07,495] [INFO] [launch.py:315:sigkill_handler] Killing subprocess 39745\r\n[2023-10-27 11:50:07,518] [INFO] [launch.py:315:sigkill_handler] Killing subprocess 39746\r\n[2023-10-27 11:50:07,519] [INFO] [launch.py:315:sigkill_handler] Killing subprocess 39747\r\n[2023-10-27 11:50:07,532] [INFO] [launch.py:315:sigkill_handler] Killing subprocess 39748\r\n[2023-10-27 11:50:07,545] [ERROR] [launch.py:321:sigkill_handler] ['/data1/zpsun/miniconda3/envs/ocr_x2000/bin/python', '-u', 'train_ds.py', '--local_rank=3', '--deepspeed', '--config_file', 'config/mobile_20230707.yaml', '--checkpoint_dir', './tmp'] exits with return code = 1\r\n```\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments/1782262283",
                "html_url": "https://github.com/microsoft/DeepSpeed/issues/4576#issuecomment-1782262283",
                "issue_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576",
                "id": 1782262283,
                "node_id": "IC_kwDODg7w7M5qOyoL",
                "user": {
                    "login": "Henryplay",
                    "id": 50266021,
                    "node_id": "MDQ6VXNlcjUwMjY2MDIx",
                    "avatar_url": "https://avatars.githubusercontent.com/u/50266021?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Henryplay",
                    "html_url": "https://github.com/Henryplay",
                    "followers_url": "https://api.github.com/users/Henryplay/followers",
                    "following_url": "https://api.github.com/users/Henryplay/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Henryplay/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Henryplay/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Henryplay/subscriptions",
                    "organizations_url": "https://api.github.com/users/Henryplay/orgs",
                    "repos_url": "https://api.github.com/users/Henryplay/repos",
                    "events_url": "https://api.github.com/users/Henryplay/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Henryplay/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T04:13:08Z",
                "updated_at": "2023-10-27T04:13:08Z",
                "author_association": "NONE",
                "body": "also , my gcc version is 5.5.0 20171010",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments/1782262283/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T04:13:09Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32887737901",
        "type": "WatchEvent",
        "actor": {
            "id": 29498800,
            "login": "gyxxyg",
            "display_login": "gyxxyg",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gyxxyg",
            "avatar_url": "https://avatars.githubusercontent.com/u/29498800?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T04:11:43Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32887735019",
        "type": "IssuesEvent",
        "actor": {
            "id": 50266021,
            "login": "Henryplay",
            "display_login": "Henryplay",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Henryplay",
            "avatar_url": "https://avatars.githubusercontent.com/u/50266021?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "opened",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576",
                "repository_url": "https://api.github.com/repos/microsoft/DeepSpeed",
                "labels_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576/comments",
                "events_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576/events",
                "html_url": "https://github.com/microsoft/DeepSpeed/issues/4576",
                "id": 1964731150,
                "node_id": "I_kwDODg7w7M51G2sO",
                "number": 4576,
                "title": "[BUG] Hey! when I training using deepspeed ,an error occured \"#error You need C++14 to compile PyTorch\"",
                "user": {
                    "login": "Henryplay",
                    "id": 50266021,
                    "node_id": "MDQ6VXNlcjUwMjY2MDIx",
                    "avatar_url": "https://avatars.githubusercontent.com/u/50266021?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Henryplay",
                    "html_url": "https://github.com/Henryplay",
                    "followers_url": "https://api.github.com/users/Henryplay/followers",
                    "following_url": "https://api.github.com/users/Henryplay/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Henryplay/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Henryplay/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Henryplay/subscriptions",
                    "organizations_url": "https://api.github.com/users/Henryplay/orgs",
                    "repos_url": "https://api.github.com/users/Henryplay/repos",
                    "events_url": "https://api.github.com/users/Henryplay/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Henryplay/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 1805232526,
                        "node_id": "MDU6TGFiZWwxODA1MjMyNTI2",
                        "url": "https://api.github.com/repos/microsoft/DeepSpeed/labels/bug",
                        "name": "bug",
                        "color": "d73a4a",
                        "default": true,
                        "description": "Something isn't working"
                    },
                    {
                        "id": 4580271613,
                        "node_id": "LA_kwDODg7w7M8AAAABEQFl_Q",
                        "url": "https://api.github.com/repos/microsoft/DeepSpeed/labels/training",
                        "name": "training",
                        "color": "0052CC",
                        "default": false,
                        "description": ""
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 0,
                "created_at": "2023-10-27T04:11:27Z",
                "updated_at": "2023-10-27T04:11:27Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "**Describe the bug**\r\nwhen i use 'deepspeed train_ds.py --deepspeed --config_file config/mobile_20230707.yaml --checkpoint_dir ./tmp'  command training my own cnn model, An error has occurred \uff1a`error You need C++14 to compile PyTorch` , and in the `ds_report` informations, torch version .................... 1.13.1+cu117 , and deepspeed wheel compiled w. ...... torch 1.9, cuda 11.1\uff0c Is there any problem here\uff1f\r\n\r\n**ds_report output**\r\n```\r\n[2023-10-27 12:01:25,875] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n--------------------------------------------------\r\nDeepSpeed C++/CUDA extension op report\r\n--------------------------------------------------\r\nNOTE: Ops not installed will be just-in-time (JIT) compiled at\r\n      runtime if needed. Op compatibility means that your system\r\n      meet the required dependencies to JIT install the op.\r\n--------------------------------------------------\r\nJIT compiled ops requires ninja\r\nninja .................. [OKAY]\r\n--------------------------------------------------\r\nop name ................ installed .. compatible\r\n--------------------------------------------------\r\n [WARNING]  async_io requires the dev libaio .so object and headers but these were not found.\r\n [WARNING]  async_io: please install the libaio-dev package with apt\r\n [WARNING]  If libaio is already installed (perhaps from source), try setting the CFLAGS and LDFLAGS environment variables to where it can be found.\r\nasync_io ............... [NO] ....... [NO]\r\nfused_adam ............. [NO] ....... [OKAY]\r\ncpu_adam ............... [NO] ....... [OKAY]\r\ncpu_adagrad ............ [NO] ....... [OKAY]\r\ncpu_lion ............... [NO] ....... [OKAY]\r\n [WARNING]  Please specify the CUTLASS repo directory as environment variable $CUTLASS_PATH\r\nevoformer_attn ......... [NO] ....... [NO]\r\nfused_lamb ............. [NO] ....... [OKAY]\r\nfused_lion ............. [NO] ....... [OKAY]\r\nquantizer .............. [NO] ....... [OKAY]\r\nrandom_ltd ............. [NO] ....... [OKAY]\r\n [WARNING]  please install triton==1.0.0 if you want to use sparse attention\r\nsparse_attn ............ [NO] ....... [NO]\r\nspatial_inference ...... [NO] ....... [OKAY]\r\ntransformer ............ [NO] ....... [OKAY]\r\nstochastic_transformer . [NO] ....... [OKAY]\r\ntransformer_inference .. [NO] ....... [OKAY]\r\n--------------------------------------------------\r\nDeepSpeed general environment info:\r\ntorch install path ............... ['/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch']\r\ntorch version .................... 1.13.1+cu117\r\ndeepspeed install path ........... ['/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed']\r\ndeepspeed info ................... 0.11.1, unknown, unknown\r\ntorch cuda version ............... 11.7\r\ntorch hip version ................ None\r\nnvcc version ..................... 11.7\r\ndeepspeed wheel compiled w. ...... torch 1.9, cuda 11.1\r\nshared memory (/dev/shm) size .... 188.89 GB\r\n```\r\n\r\n**System info (please complete the following information):**\r\n - OS: [e.g. Ubuntu 18.04]\r\n - GPU count and types [e.g. one machines with x4 3090s each]\r\n - Python 3.8\r\n\r\n\r\n**Launcher context**\r\n`deepspeed train_ds.py --deepspeed --config_file config/mobile_20230707.yaml --checkpoint_dir ./tmp`\r\n\r\n**Docker context**\r\nAre you using a specific docker image that you can share?\r\n\r\n**Additional context**\r\nfull information is here\r\n```\r\n[2023-10-27 11:49:46,334] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n[2023-10-27 11:49:50,406] [WARNING] [runner.py:203:fetch_hostfile] Unable to find hostfile, will proceed with training with local resources only.\r\n[2023-10-27 11:49:50,434] [INFO] [runner.py:570:main] cmd = /data1/zpsun/miniconda3/envs/ocr_x2000/bin/python -u -m deepspeed.launcher.launch --world_info=eyJsb2NhbGhvc3QiOiBbMCwgMSwgMiwgM119 --master_addr=127.0.0.1 --master_port=29500 --enable_each_rank_log=None train_ds.py --deepspeed --config_file config/mobile_20230707.yaml --checkpoint_dir ./tmp\r\n[2023-10-27 11:49:51,552] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n[2023-10-27 11:49:52,390] [INFO] [launch.py:145:main] WORLD INFO DICT: {'localhost': [0, 1, 2, 3]}\r\n[2023-10-27 11:49:52,390] [INFO] [launch.py:151:main] nnodes=1, num_local_procs=4, node_rank=0\r\n[2023-10-27 11:49:52,390] [INFO] [launch.py:162:main] global_rank_mapping=defaultdict(<class 'list'>, {'localhost': [0, 1, 2, 3]})\r\n[2023-10-27 11:49:52,390] [INFO] [launch.py:163:main] dist_world_size=4\r\n[2023-10-27 11:49:52,390] [INFO] [launch.py:165:main] Setting CUDA_VISIBLE_DEVICES=0,1,2,3\r\n[2023-10-27 11:49:53,528] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n[2023-10-27 11:49:53,534] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n[2023-10-27 11:49:53,544] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n[2023-10-27 11:49:53,553] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda (auto detect)\r\n2023-10-27 11:49:54.518 | INFO     | __main__:log_dist:41 - [Rank 0] Creating Experiment Directory\r\n2023-10-27 11:49:54.529 | INFO     | __main__:log_dist:41 - [Rank 0] Experiment Directory created at tmp/ocr_train.2023.10.26.20.49.54.22pkw5e3\r\n2023-10-27 11:49:54.529 | INFO     | __main__:log_dist:41 - [Rank 0] Creating Image Transform\r\n2023-10-27 11:49:54.530 | INFO     | __main__:log_dist:41 - [Rank 0] Parse Dict\r\n2023-10-27 11:49:54.533 | INFO     | __main__:log_dist:41 - [Rank 0] Creating Datasets\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 149983.48it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 146031.62it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 144655.70it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 143595.25it/s]\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 136202.04it/s]\r\n\r\n2023-10-27 11:49:57.111 | INFO     | __main__:log_dist:41 - [Rank 0] Dataset Creation Done\r\n2023-10-27 11:49:57.111 | INFO     | __main__:log_dist:41 - [Rank 0] Creating Model\r\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 173097/173097 [00:01<00:00, 131767.63it/s]\r\n\r\n[2023-10-27 11:49:57,190] [INFO] [logging.py:96:log_dist] [Rank -1] DeepSpeed info: version=0.11.1, git-hash=unknown, git-branch=unknown\r\n[2023-10-27 11:49:57,190] [INFO] [comm.py:637:init_distributed] cdb=None\r\n2023-10-27 11:49:57.211 | INFO     | __main__:log_dist:41 - [Rank 0] Model Creation Done\r\n2023-10-27 11:49:57.212 | INFO     | __main__:log_dist:41 - [Rank 0] Creating DeepSpeed engine\r\n[2023-10-27 11:49:57,212] [INFO] [logging.py:96:log_dist] [Rank -1] DeepSpeed info: version=0.11.1, git-hash=unknown, git-branch=unknown\r\n[2023-10-27 11:49:57,212] [INFO] [comm.py:637:init_distributed] cdb=None\r\n[2023-10-27 11:49:57,212] [INFO] [comm.py:668:init_distributed] Initializing TorchBackend in DeepSpeed with backend nccl\r\n[2023-10-27 11:49:57,236] [INFO] [logging.py:96:log_dist] [Rank -1] DeepSpeed info: version=0.11.1, git-hash=unknown, git-branch=unknown\r\n[2023-10-27 11:49:57,236] [INFO] [comm.py:637:init_distributed] cdb=None\r\n[2023-10-27 11:49:57,237] [INFO] [logging.py:96:log_dist] [Rank -1] DeepSpeed info: version=0.11.1, git-hash=unknown, git-branch=unknown\r\n[2023-10-27 11:49:57,237] [INFO] [comm.py:637:init_distributed] cdb=None\r\n[2023-10-27 11:50:00,297] [INFO] [logging.py:96:log_dist] [Rank 0] DeepSpeed Flops Profiler Enabled: False\r\nUsing /data1/zpsun/.cache/torch_extensions/py38_cu117 as PyTorch extensions root...\r\nUsing /data1/zpsun/.cache/torch_extensions/py38_cu117 as PyTorch extensions root...\r\nUsing /data1/zpsun/.cache/torch_extensions/py38_cu117 as PyTorch extensions root...\r\nUsing /data1/zpsun/.cache/torch_extensions/py38_cu117 as PyTorch extensions root...\r\nDetected CUDA files, patching ldflags\r\nEmitting ninja build file /data1/zpsun/.cache/torch_extensions/py38_cu117/cpu_adam/build.ninja...\r\nBuilding extension module cpu_adam...\r\nAllowing ninja to set a default number of workers... (overridable by setting the environment variable MAX_JOBS=N)\r\n[1/2] /usr/local/cuda-11.7/bin/nvcc  -DTORCH_EXTENSION_NAME=cpu_adam -DTORCH_API_INCLUDE_EXTENSION_H -DPYBIND11_COMPILER_TYPE=\\\"_gcc\\\" -DPYBIND11_STDLIB=\\\"_libstdcpp\\\" -DPYBIND11_BUILD_ABI=\\\"_cxxabi1011\\\" -I/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes -I/usr/local/cuda-11.7/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/torch/csrc/api/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/TH -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/THC -isystem /usr/local/cuda-11.7/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/include/python3.8 -D_GLIBCXX_USE_CXX11_ABI=0 -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_BFLOAT16_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr -gencode=arch=compute_86,code=compute_86 -gencode=arch=compute_86,code=sm_86 --compiler-options '-fPIC' -O3 --use_fast_math -std=c++17 -U__CUDA_NO_HALF_OPERATORS__ -U__CUDA_NO_HALF_CONVERSIONS__ -U__CUDA_NO_HALF2_OPERATORS__ -gencode=arch=compute_86,code=sm_86 -gencode=arch=compute_86,code=compute_86 -DBF16_AVAILABLE -c /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/common/custom_cuda_kernel.cu -o custom_cuda_kernel.cuda.o \r\nFAILED: custom_cuda_kernel.cuda.o \r\n/usr/local/cuda-11.7/bin/nvcc  -DTORCH_EXTENSION_NAME=cpu_adam -DTORCH_API_INCLUDE_EXTENSION_H -DPYBIND11_COMPILER_TYPE=\\\"_gcc\\\" -DPYBIND11_STDLIB=\\\"_libstdcpp\\\" -DPYBIND11_BUILD_ABI=\\\"_cxxabi1011\\\" -I/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes -I/usr/local/cuda-11.7/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/torch/csrc/api/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/TH -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/THC -isystem /usr/local/cuda-11.7/include -isystem /data1/zpsun/miniconda3/envs/ocr_x2000/include/python3.8 -D_GLIBCXX_USE_CXX11_ABI=0 -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_BFLOAT16_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr -gencode=arch=compute_86,code=compute_86 -gencode=arch=compute_86,code=sm_86 --compiler-options '-fPIC' -O3 --use_fast_math -std=c++17 -U__CUDA_NO_HALF_OPERATORS__ -U__CUDA_NO_HALF_CONVERSIONS__ -U__CUDA_NO_HALF2_OPERATORS__ -gencode=arch=compute_86,code=sm_86 -gencode=arch=compute_86,code=compute_86 -DBF16_AVAILABLE -c /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/common/custom_cuda_kernel.cu -o custom_cuda_kernel.cuda.o \r\nnvcc warning : The -std=c++17 flag is not supported with the configured host compiler. Flag will be ignored.\r\nIn file included from /usr/include/c++/5/cstdint:35:0,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/cuda/CUDAContext.h:3,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/context.h:8,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/custom_cuda_layers.h:16,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/common/custom_cuda_kernel.cu:6:\r\n/usr/include/c++/5/bits/c++0x_warning.h:32:2: error: #error This file requires compiler and library support for the ISO C++ 2011 standard. This support must be enabled with the -std=c++11 or -std=gnu++11 compiler options.\r\n #error This file requires compiler and library support \\\r\n  ^\r\nIn file included from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/string_view.h:4:0,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/StringUtil.h:6,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/Exception.h:6,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/core/Generator.h:11,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/CPUGeneratorImpl.h:3,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/Context.h:3,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/cuda/CUDAContext.h:14,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/context.h:8,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/custom_cuda_layers.h:16,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/common/custom_cuda_kernel.cu:6:\r\n/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/C++17.h:27:2: error: #error You need C++14 to compile PyTorch\r\n #error You need C++14 to compile PyTorch\r\n  ^\r\nIn file included from /usr/include/c++/5/experimental/string_view:39:0,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/string_view.h:20,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/StringUtil.h:6,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/c10/util/Exception.h:6,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/core/Generator.h:11,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/CPUGeneratorImpl.h:3,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/Context.h:3,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/include/ATen/cuda/CUDAContext.h:14,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/context.h:8,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/includes/custom_cuda_layers.h:16,\r\n                 from /data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/csrc/common/custom_cuda_kernel.cu:6:\r\n/usr/include/c++/5/bits/c++14_warning.h:32:2: error: #error This file requires compiler and library support for the forthcoming ISO C++ 2014 standard. This support is currently experimental, and must be enabled with the -std=c++1y or -std=gnu++1y compiler options.\r\n #error This file requires compiler and library support for the forthcoming \\\r\n  ^\r\nninja: build stopped: subcommand failed.\r\nTraceback (most recent call last):\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1900, in _run_ninja_build\r\n    subprocess.run(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/subprocess.py\", line 516, in run\r\n    raise CalledProcessError(retcode, process.args,\r\nsubprocess.CalledProcessError: Command '['ninja', '-v']' returned non-zero exit status 1.\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"train_ds.py\", line 263, in <module>\r\n    fire.Fire(train)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 141, in Fire\r\n    component_trace = _Fire(component, args, parsed_flag_args, context, name)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 475, in _Fire\r\n    component, remaining_args = _CallAndUpdateTrace(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 691, in _CallAndUpdateTrace\r\n    component = fn(*varargs, **kwargs)\r\n  File \"train_ds.py\", line 216, in train\r\n    model, _, _, _ = deepspeed.initialize(model=model,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/__init__.py\", line 171, in initialize\r\n    engine = DeepSpeedEngine(args=args,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 304, in __init__\r\n    self._configure_optimizer(optimizer, model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1186, in _configure_optimizer\r\n    basic_optimizer = self._configure_basic_optimizer(model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1257, in _configure_basic_optimizer\r\n    optimizer = DeepSpeedCPUAdam(model_parameters,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 94, in __init__\r\n    self.ds_opt_adam = CPUAdamBuilder().load()\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 446, in load\r\n    return self.jit_load(verbose)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 489, in jit_load\r\n    op_module = load(name=self.name,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1284, in load\r\n    return _jit_compile(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1508, in _jit_compile\r\n    _write_ninja_file_and_build_library(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1623, in _write_ninja_file_and_build_library\r\n    _run_ninja_build(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1916, in _run_ninja_build\r\n    raise RuntimeError(message) from e\r\nRuntimeError: Error building extension 'cpu_adam'\r\nLoading extension module cpu_adam...\r\nTraceback (most recent call last):\r\n  File \"train_ds.py\", line 263, in <module>\r\n    fire.Fire(train)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 141, in Fire\r\n    component_trace = _Fire(component, args, parsed_flag_args, context, name)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 475, in _Fire\r\n    component, remaining_args = _CallAndUpdateTrace(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 691, in _CallAndUpdateTrace\r\n    component = fn(*varargs, **kwargs)\r\n  File \"train_ds.py\", line 216, in train\r\n    model, _, _, _ = deepspeed.initialize(model=model,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/__init__.py\", line 171, in initialize\r\n    engine = DeepSpeedEngine(args=args,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 304, in __init__\r\n    self._configure_optimizer(optimizer, model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1186, in _configure_optimizer\r\n    basic_optimizer = self._configure_basic_optimizer(model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1257, in _configure_basic_optimizer\r\n    optimizer = DeepSpeedCPUAdam(model_parameters,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 94, in __init__\r\n    self.ds_opt_adam = CPUAdamBuilder().load()\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 446, in load\r\n    return self.jit_load(verbose)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 489, in jit_load\r\n    op_module = load(name=self.name,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1284, in load\r\n    return _jit_compile(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1534, in _jit_compile\r\n    return _import_module_from_library(name, build_directory, is_python_module)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1936, in _import_module_from_library\r\n    module = importlib.util.module_from_spec(spec)\r\n  File \"<frozen importlib._bootstrap>\", line 556, in module_from_spec\r\n  File \"<frozen importlib._bootstrap_external>\", line 1166, in create_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\nImportError: /data1/zpsun/.cache/torch_extensions/py38_cu117/cpu_adam/cpu_adam.so: cannot open shared object file: No such file or directory\r\nLoading extension module cpu_adam...\r\nTraceback (most recent call last):\r\n  File \"train_ds.py\", line 263, in <module>\r\n    fire.Fire(train)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 141, in Fire\r\n    component_trace = _Fire(component, args, parsed_flag_args, context, name)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 475, in _Fire\r\n    component, remaining_args = _CallAndUpdateTrace(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 691, in _CallAndUpdateTrace\r\n    component = fn(*varargs, **kwargs)\r\n  File \"train_ds.py\", line 216, in train\r\n    model, _, _, _ = deepspeed.initialize(model=model,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/__init__.py\", line 171, in initialize\r\n    engine = DeepSpeedEngine(args=args,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 304, in __init__\r\n    self._configure_optimizer(optimizer, model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1186, in _configure_optimizer\r\n    basic_optimizer = self._configure_basic_optimizer(model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1257, in _configure_basic_optimizer\r\n    optimizer = DeepSpeedCPUAdam(model_parameters,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 94, in __init__\r\n    self.ds_opt_adam = CPUAdamBuilder().load()\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 446, in load\r\n    return self.jit_load(verbose)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 489, in jit_load\r\n    op_module = load(name=self.name,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1284, in load\r\n    return _jit_compile(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1534, in _jit_compile\r\n    return _import_module_from_library(name, build_directory, is_python_module)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1936, in _import_module_from_library\r\n    module = importlib.util.module_from_spec(spec)\r\n  File \"<frozen importlib._bootstrap>\", line 556, in module_from_spec\r\n  File \"<frozen importlib._bootstrap_external>\", line 1166, in create_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\nImportError: /data1/zpsun/.cache/torch_extensions/py38_cu117/cpu_adam/cpu_adam.so: cannot open shared object file: No such file or directory\r\nLoading extension module cpu_adam...\r\nTraceback (most recent call last):\r\n  File \"train_ds.py\", line 263, in <module>\r\n    fire.Fire(train)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 141, in Fire\r\n    component_trace = _Fire(component, args, parsed_flag_args, context, name)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 475, in _Fire\r\n    component, remaining_args = _CallAndUpdateTrace(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/fire/core.py\", line 691, in _CallAndUpdateTrace\r\n    component = fn(*varargs, **kwargs)\r\n  File \"train_ds.py\", line 216, in train\r\n    model, _, _, _ = deepspeed.initialize(model=model,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/__init__.py\", line 171, in initialize\r\n    engine = DeepSpeedEngine(args=args,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 304, in __init__\r\n    self._configure_optimizer(optimizer, model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1186, in _configure_optimizer\r\n    basic_optimizer = self._configure_basic_optimizer(model_parameters)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/runtime/engine.py\", line 1257, in _configure_basic_optimizer\r\n    optimizer = DeepSpeedCPUAdam(model_parameters,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 94, in __init__\r\n    self.ds_opt_adam = CPUAdamBuilder().load()\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 446, in load\r\n    return self.jit_load(verbose)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/op_builder/builder.py\", line 489, in jit_load\r\n    op_module = load(name=self.name,\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1284, in load\r\n    return _jit_compile(\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1534, in _jit_compile\r\n    return _import_module_from_library(name, build_directory, is_python_module)\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/torch/utils/cpp_extension.py\", line 1936, in _import_module_from_library\r\n    module = importlib.util.module_from_spec(spec)\r\n  File \"<frozen importlib._bootstrap>\", line 556, in module_from_spec\r\n  File \"<frozen importlib._bootstrap_external>\", line 1166, in create_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\nImportError: /data1/zpsun/.cache/torch_extensions/py38_cu117/cpu_adam/cpu_adam.so: cannot open shared object file: No such file or directory\r\nException ignored in: <function DeepSpeedCPUAdam.__del__ at 0x15325dbfed30>\r\nTraceback (most recent call last):\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 102, in __del__\r\n    self.ds_opt_adam.destroy_adam(self.opt_id)\r\nAttributeError: 'DeepSpeedCPUAdam' object has no attribute 'ds_opt_adam'\r\nException ignored in: <function DeepSpeedCPUAdam.__del__ at 0x153cb28d1d30>\r\nTraceback (most recent call last):\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 102, in __del__\r\n    self.ds_opt_adam.destroy_adam(self.opt_id)\r\nAttributeError: 'DeepSpeedCPUAdam' object has no attribute 'ds_opt_adam'\r\nException ignored in: <function DeepSpeedCPUAdam.__del__ at 0x14d0d6290d30>\r\nTraceback (most recent call last):\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 102, in __del__\r\n    self.ds_opt_adam.destroy_adam(self.opt_id)\r\nAttributeError: 'DeepSpeedCPUAdam' object has no attribute 'ds_opt_adam'\r\nException ignored in: <function DeepSpeedCPUAdam.__del__ at 0x149250829d30>\r\nTraceback (most recent call last):\r\n  File \"/data1/zpsun/miniconda3/envs/ocr_x2000/lib/python3.8/site-packages/deepspeed/ops/adam/cpu_adam.py\", line 102, in __del__\r\nAttributeError: 'DeepSpeedCPUAdam' object has no attribute 'ds_opt_adam'\r\n[2023-10-27 11:50:07,495] [INFO] [launch.py:315:sigkill_handler] Killing subprocess 39745\r\n[2023-10-27 11:50:07,518] [INFO] [launch.py:315:sigkill_handler] Killing subprocess 39746\r\n[2023-10-27 11:50:07,519] [INFO] [launch.py:315:sigkill_handler] Killing subprocess 39747\r\n[2023-10-27 11:50:07,532] [INFO] [launch.py:315:sigkill_handler] Killing subprocess 39748\r\n[2023-10-27 11:50:07,545] [ERROR] [launch.py:321:sigkill_handler] ['/data1/zpsun/miniconda3/envs/ocr_x2000/bin/python', '-u', 'train_ds.py', '--local_rank=3', '--deepspeed', '--config_file', 'config/mobile_20230707.yaml', '--checkpoint_dir', './tmp'] exits with return code = 1\r\n```\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4576/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T04:11:28Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32887590811",
        "type": "WatchEvent",
        "actor": {
            "id": 41725233,
            "login": "IzouGend",
            "display_login": "IzouGend",
            "gravatar_id": "",
            "url": "https://api.github.com/users/IzouGend",
            "avatar_url": "https://avatars.githubusercontent.com/u/41725233?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T04:00:03Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32887465150",
        "type": "WatchEvent",
        "actor": {
            "id": 110680007,
            "login": "zhangningboo",
            "display_login": "zhangningboo",
            "gravatar_id": "",
            "url": "https://api.github.com/users/zhangningboo",
            "avatar_url": "https://avatars.githubusercontent.com/u/110680007?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T03:49:28Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32887448835",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 10676103,
            "login": "stas00",
            "display_login": "stas00",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stas00",
            "avatar_url": "https://avatars.githubusercontent.com/u/10676103?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025",
                "repository_url": "https://api.github.com/repos/microsoft/DeepSpeed",
                "labels_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025/comments",
                "events_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025/events",
                "html_url": "https://github.com/microsoft/DeepSpeed/issues/2025",
                "id": 1273764327,
                "node_id": "I_kwDODg7w7M5L7Bnn",
                "number": 2025,
                "title": "DeepSpeed with SLURM",
                "user": {
                    "login": "thechargedneutron",
                    "id": 25536866,
                    "node_id": "MDQ6VXNlcjI1NTM2ODY2",
                    "avatar_url": "https://avatars.githubusercontent.com/u/25536866?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/thechargedneutron",
                    "html_url": "https://github.com/thechargedneutron",
                    "followers_url": "https://api.github.com/users/thechargedneutron/followers",
                    "following_url": "https://api.github.com/users/thechargedneutron/following{/other_user}",
                    "gists_url": "https://api.github.com/users/thechargedneutron/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/thechargedneutron/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/thechargedneutron/subscriptions",
                    "organizations_url": "https://api.github.com/users/thechargedneutron/orgs",
                    "repos_url": "https://api.github.com/users/thechargedneutron/repos",
                    "events_url": "https://api.github.com/users/thechargedneutron/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/thechargedneutron/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 1805232526,
                        "node_id": "MDU6TGFiZWwxODA1MjMyNTI2",
                        "url": "https://api.github.com/repos/microsoft/DeepSpeed/labels/bug",
                        "name": "bug",
                        "color": "d73a4a",
                        "default": true,
                        "description": "Something isn't working"
                    }
                ],
                "state": "closed",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 17,
                "created_at": "2022-06-16T15:57:19Z",
                "updated_at": "2023-10-27T03:48:02Z",
                "closed_at": "2022-06-16T21:10:31Z",
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "Hi, I am trying to run DeepSpeed on SLURM with multiple nodes and multiple GPUs on each node. I was referring to this example [here](https://nlp.stanford.edu/mistral/tutorials/deepspeed.html). I am not sure how we can specify the address of all the machines that will be allotted to me when submitting a SLURM script.\r\n\r\nI have my task.sbatch file as this\r\n\r\n```\r\n#SBATCH --nodes=2\r\n#SBATCH --gpus-per-node=8\r\n\r\ndeepspeed --num_gpus 8 --num_nodes 2 finetune.py --config conf/tutorial-gpt2-micro.yaml\r\n```\r\n\r\nI have two questions\r\n1. How do I know addresses of machines when specifying the deepspeed parameters?\r\n2. Why do we need to set lr, scheduler etc. in the config files when the Trainer in the code already has those parameters set for single machine multi-GPU training through Huggingface transformers?\r\n\r\nI am a beginner to SLURM based systems so sorry if there is an easy way to specify the addresses. And if there is a SLURM based example of deepspeed, please point me to that.\r\n\r\nThanks in advance!\r\n\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025/timeline",
                "performed_via_github_app": null,
                "state_reason": "completed"
            },
            "comment": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments/1782244944",
                "html_url": "https://github.com/microsoft/DeepSpeed/issues/2025#issuecomment-1782244944",
                "issue_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025",
                "id": 1782244944,
                "node_id": "IC_kwDODg7w7M5qOuZQ",
                "user": {
                    "login": "stas00",
                    "id": 10676103,
                    "node_id": "MDQ6VXNlcjEwNjc2MTAz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/10676103?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/stas00",
                    "html_url": "https://github.com/stas00",
                    "followers_url": "https://api.github.com/users/stas00/followers",
                    "following_url": "https://api.github.com/users/stas00/following{/other_user}",
                    "gists_url": "https://api.github.com/users/stas00/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/stas00/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/stas00/subscriptions",
                    "organizations_url": "https://api.github.com/users/stas00/orgs",
                    "repos_url": "https://api.github.com/users/stas00/repos",
                    "events_url": "https://api.github.com/users/stas00/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/stas00/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T03:48:02Z",
                "updated_at": "2023-10-27T03:48:02Z",
                "author_association": "CONTRIBUTOR",
                "body": "it's not the launchers that do that. the launchers only launch the actual processes doing the work.\r\n\r\nYou're also confusing launchers with the programs, which is very easy to do, as it's actually quite confusing. Let's clarify things:\r\n\r\n- `deepspeed` program is a launcher. Deepspeed library is where the distributed is invoked.\r\n- `accelerate` program is a launcher. Accelerate library is where the distributed is invoked.\r\n- `torchrun` program is a launcher. If you don't use a special training framework you need to invoke it yourself as you can see in https://github.com/stas00/ml-engineering/blob/b1182d88994a9ef0781d95ace31a14f13518b781/debug/torch-distributed-gpu-test.py#L74\r\n\r\nAnd you want to read this:\r\nhttps://pytorch.org/docs/stable/distributed.html#torch.distributed.init_process_group\r\n\r\nI hope it's now more clear.\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments/1782244944/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T03:48:03Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32887444851",
        "type": "IssuesEvent",
        "actor": {
            "id": 79833433,
            "login": "zhoumengbo",
            "display_login": "zhoumengbo",
            "gravatar_id": "",
            "url": "https://api.github.com/users/zhoumengbo",
            "avatar_url": "https://avatars.githubusercontent.com/u/79833433?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "opened",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4575",
                "repository_url": "https://api.github.com/repos/microsoft/DeepSpeed",
                "labels_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4575/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4575/comments",
                "events_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4575/events",
                "html_url": "https://github.com/microsoft/DeepSpeed/issues/4575",
                "id": 1964712526,
                "node_id": "I_kwDODg7w7M51GyJO",
                "number": 4575,
                "title": "The best speed performance",
                "user": {
                    "login": "zhoumengbo",
                    "id": 79833433,
                    "node_id": "MDQ6VXNlcjc5ODMzNDMz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/79833433?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/zhoumengbo",
                    "html_url": "https://github.com/zhoumengbo",
                    "followers_url": "https://api.github.com/users/zhoumengbo/followers",
                    "following_url": "https://api.github.com/users/zhoumengbo/following{/other_user}",
                    "gists_url": "https://api.github.com/users/zhoumengbo/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/zhoumengbo/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/zhoumengbo/subscriptions",
                    "organizations_url": "https://api.github.com/users/zhoumengbo/orgs",
                    "repos_url": "https://api.github.com/users/zhoumengbo/repos",
                    "events_url": "https://api.github.com/users/zhoumengbo/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/zhoumengbo/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 0,
                "created_at": "2023-10-27T03:47:40Z",
                "updated_at": "2023-10-27T03:47:40Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "Which framework in DeepSpeed has the best speed performance, and is there anything faster than DeepSpeed?",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4575/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4575/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T03:47:42Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32887311635",
        "type": "WatchEvent",
        "actor": {
            "id": 61188463,
            "login": "namespace-Pt",
            "display_login": "namespace-Pt",
            "gravatar_id": "",
            "url": "https://api.github.com/users/namespace-Pt",
            "avatar_url": "https://avatars.githubusercontent.com/u/61188463?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T03:36:12Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32887140322",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 128442117,
            "login": "lzy37ld",
            "display_login": "lzy37ld",
            "gravatar_id": "",
            "url": "https://api.github.com/users/lzy37ld",
            "avatar_url": "https://avatars.githubusercontent.com/u/128442117?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025",
                "repository_url": "https://api.github.com/repos/microsoft/DeepSpeed",
                "labels_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025/comments",
                "events_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025/events",
                "html_url": "https://github.com/microsoft/DeepSpeed/issues/2025",
                "id": 1273764327,
                "node_id": "I_kwDODg7w7M5L7Bnn",
                "number": 2025,
                "title": "DeepSpeed with SLURM",
                "user": {
                    "login": "thechargedneutron",
                    "id": 25536866,
                    "node_id": "MDQ6VXNlcjI1NTM2ODY2",
                    "avatar_url": "https://avatars.githubusercontent.com/u/25536866?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/thechargedneutron",
                    "html_url": "https://github.com/thechargedneutron",
                    "followers_url": "https://api.github.com/users/thechargedneutron/followers",
                    "following_url": "https://api.github.com/users/thechargedneutron/following{/other_user}",
                    "gists_url": "https://api.github.com/users/thechargedneutron/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/thechargedneutron/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/thechargedneutron/subscriptions",
                    "organizations_url": "https://api.github.com/users/thechargedneutron/orgs",
                    "repos_url": "https://api.github.com/users/thechargedneutron/repos",
                    "events_url": "https://api.github.com/users/thechargedneutron/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/thechargedneutron/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 1805232526,
                        "node_id": "MDU6TGFiZWwxODA1MjMyNTI2",
                        "url": "https://api.github.com/repos/microsoft/DeepSpeed/labels/bug",
                        "name": "bug",
                        "color": "d73a4a",
                        "default": true,
                        "description": "Something isn't working"
                    }
                ],
                "state": "closed",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 16,
                "created_at": "2022-06-16T15:57:19Z",
                "updated_at": "2023-10-27T03:21:56Z",
                "closed_at": "2022-06-16T21:10:31Z",
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "Hi, I am trying to run DeepSpeed on SLURM with multiple nodes and multiple GPUs on each node. I was referring to this example [here](https://nlp.stanford.edu/mistral/tutorials/deepspeed.html). I am not sure how we can specify the address of all the machines that will be allotted to me when submitting a SLURM script.\r\n\r\nI have my task.sbatch file as this\r\n\r\n```\r\n#SBATCH --nodes=2\r\n#SBATCH --gpus-per-node=8\r\n\r\ndeepspeed --num_gpus 8 --num_nodes 2 finetune.py --config conf/tutorial-gpt2-micro.yaml\r\n```\r\n\r\nI have two questions\r\n1. How do I know addresses of machines when specifying the deepspeed parameters?\r\n2. Why do we need to set lr, scheduler etc. in the config files when the Trainer in the code already has those parameters set for single machine multi-GPU training through Huggingface transformers?\r\n\r\nI am a beginner to SLURM based systems so sorry if there is an easy way to specify the addresses. And if there is a SLURM based example of deepspeed, please point me to that.\r\n\r\nThanks in advance!\r\n\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025/timeline",
                "performed_via_github_app": null,
                "state_reason": "completed"
            },
            "comment": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments/1782226744",
                "html_url": "https://github.com/microsoft/DeepSpeed/issues/2025#issuecomment-1782226744",
                "issue_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/2025",
                "id": 1782226744,
                "node_id": "IC_kwDODg7w7M5qOp84",
                "user": {
                    "login": "lzy37ld",
                    "id": 128442117,
                    "node_id": "U_kgDOB6ffBQ",
                    "avatar_url": "https://avatars.githubusercontent.com/u/128442117?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/lzy37ld",
                    "html_url": "https://github.com/lzy37ld",
                    "followers_url": "https://api.github.com/users/lzy37ld/followers",
                    "following_url": "https://api.github.com/users/lzy37ld/following{/other_user}",
                    "gists_url": "https://api.github.com/users/lzy37ld/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/lzy37ld/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/lzy37ld/subscriptions",
                    "organizations_url": "https://api.github.com/users/lzy37ld/orgs",
                    "repos_url": "https://api.github.com/users/lzy37ld/repos",
                    "events_url": "https://api.github.com/users/lzy37ld/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/lzy37ld/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T03:21:56Z",
                "updated_at": "2023-10-27T03:21:56Z",
                "author_association": "NONE",
                "body": "@stas00 The reason I ask is I am using torchrun or deepspeed, accelerate, etc, which are some tools for distributed training. So that means we also would have dist.init_process_group during this distributed training? Is there anyplace I misunderstood?",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments/1782226744/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T03:21:56Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    },
    {
        "id": "32887054106",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 5679313,
            "login": "taozhiwei",
            "display_login": "taozhiwei",
            "gravatar_id": "",
            "url": "https://api.github.com/users/taozhiwei",
            "avatar_url": "https://avatars.githubusercontent.com/u/5679313?"
        },
        "repo": {
            "id": 235860204,
            "name": "microsoft/DeepSpeed",
            "url": "https://api.github.com/repos/microsoft/DeepSpeed"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4282",
                "repository_url": "https://api.github.com/repos/microsoft/DeepSpeed",
                "labels_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4282/labels{/name}",
                "comments_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4282/comments",
                "events_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4282/events",
                "html_url": "https://github.com/microsoft/DeepSpeed/pull/4282",
                "id": 1885294671,
                "node_id": "PR_kwDODg7w7M5ZwCj-",
                "number": 4282,
                "title": "use all_gather_into_tensor instead of all_gather",
                "user": {
                    "login": "taozhiwei",
                    "id": 5679313,
                    "node_id": "MDQ6VXNlcjU2NzkzMTM=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/5679313?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/taozhiwei",
                    "html_url": "https://github.com/taozhiwei",
                    "followers_url": "https://api.github.com/users/taozhiwei/followers",
                    "following_url": "https://api.github.com/users/taozhiwei/following{/other_user}",
                    "gists_url": "https://api.github.com/users/taozhiwei/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/taozhiwei/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/taozhiwei/subscriptions",
                    "organizations_url": "https://api.github.com/users/taozhiwei/orgs",
                    "repos_url": "https://api.github.com/users/taozhiwei/repos",
                    "events_url": "https://api.github.com/users/taozhiwei/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/taozhiwei/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 11,
                "created_at": "2023-09-07T07:37:43Z",
                "updated_at": "2023-10-27T03:15:03Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/pulls/4282",
                    "html_url": "https://github.com/microsoft/DeepSpeed/pull/4282",
                    "diff_url": "https://github.com/microsoft/DeepSpeed/pull/4282.diff",
                    "patch_url": "https://github.com/microsoft/DeepSpeed/pull/4282.patch",
                    "merged_at": null
                },
                "body": "when using allgather, the output is a list, and in the implementation of torch, the list will be flattened and unflattened, which will result in additional allocation of GPU memory and D2D operations. But these all gather operations already have a flat GPU memory, using all_gather_into_tensor  replaces all_gather will save GPU memory allocation and additional D2D operations.\r\nadditionally, batching all gatherers does not reduce the peak usage of GPU memory, so allgather_bucket_size has no effect.",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4282/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4282/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments/1782222130",
                "html_url": "https://github.com/microsoft/DeepSpeed/pull/4282#issuecomment-1782222130",
                "issue_url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/4282",
                "id": 1782222130,
                "node_id": "IC_kwDODg7w7M5qOo0y",
                "user": {
                    "login": "taozhiwei",
                    "id": 5679313,
                    "node_id": "MDQ6VXNlcjU2NzkzMTM=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/5679313?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/taozhiwei",
                    "html_url": "https://github.com/taozhiwei",
                    "followers_url": "https://api.github.com/users/taozhiwei/followers",
                    "following_url": "https://api.github.com/users/taozhiwei/following{/other_user}",
                    "gists_url": "https://api.github.com/users/taozhiwei/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/taozhiwei/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/taozhiwei/subscriptions",
                    "organizations_url": "https://api.github.com/users/taozhiwei/orgs",
                    "repos_url": "https://api.github.com/users/taozhiwei/repos",
                    "events_url": "https://api.github.com/users/taozhiwei/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/taozhiwei/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T03:15:02Z",
                "updated_at": "2023-10-27T03:15:02Z",
                "author_association": "NONE",
                "body": "> This is unsafe to say so. We do see uneven split on parameters (similar things also been observed by pytorch folks and used as the only example in their recent [FSDP paper](https://arxiv.org/pdf/2304.11277.pdf) (as GPU 15 setting in Figure 3)\r\n\r\n@GuanhuaWang If tensor can evenly divide, I will use all_gather_into_tensor , otherwise I will use broadcast, please help review again.",
                "reactions": {
                    "url": "https://api.github.com/repos/microsoft/DeepSpeed/issues/comments/1782222130/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T03:15:03Z",
        "org": {
            "id": 6154722,
            "login": "microsoft",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/microsoft",
            "avatar_url": "https://avatars.githubusercontent.com/u/6154722?"
        }
    }
]