[
    {
        "id": "32897539555",
        "type": "ForkEvent",
        "actor": {
            "id": 1174450,
            "login": "uldza",
            "display_login": "uldza",
            "gravatar_id": "",
            "url": "https://api.github.com/users/uldza",
            "avatar_url": "https://avatars.githubusercontent.com/u/1174450?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "forkee": {
                "id": 710764814,
                "node_id": "R_kgDOKl1pDg",
                "name": "qdrant",
                "full_name": "uldza/qdrant",
                "private": false,
                "owner": {
                    "login": "uldza",
                    "id": 1174450,
                    "node_id": "MDQ6VXNlcjExNzQ0NTA=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/1174450?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/uldza",
                    "html_url": "https://github.com/uldza",
                    "followers_url": "https://api.github.com/users/uldza/followers",
                    "following_url": "https://api.github.com/users/uldza/following{/other_user}",
                    "gists_url": "https://api.github.com/users/uldza/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/uldza/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/uldza/subscriptions",
                    "organizations_url": "https://api.github.com/users/uldza/orgs",
                    "repos_url": "https://api.github.com/users/uldza/repos",
                    "events_url": "https://api.github.com/users/uldza/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/uldza/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "html_url": "https://github.com/uldza/qdrant",
                "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                "fork": true,
                "url": "https://api.github.com/repos/uldza/qdrant",
                "forks_url": "https://api.github.com/repos/uldza/qdrant/forks",
                "keys_url": "https://api.github.com/repos/uldza/qdrant/keys{/key_id}",
                "collaborators_url": "https://api.github.com/repos/uldza/qdrant/collaborators{/collaborator}",
                "teams_url": "https://api.github.com/repos/uldza/qdrant/teams",
                "hooks_url": "https://api.github.com/repos/uldza/qdrant/hooks",
                "issue_events_url": "https://api.github.com/repos/uldza/qdrant/issues/events{/number}",
                "events_url": "https://api.github.com/repos/uldza/qdrant/events",
                "assignees_url": "https://api.github.com/repos/uldza/qdrant/assignees{/user}",
                "branches_url": "https://api.github.com/repos/uldza/qdrant/branches{/branch}",
                "tags_url": "https://api.github.com/repos/uldza/qdrant/tags",
                "blobs_url": "https://api.github.com/repos/uldza/qdrant/git/blobs{/sha}",
                "git_tags_url": "https://api.github.com/repos/uldza/qdrant/git/tags{/sha}",
                "git_refs_url": "https://api.github.com/repos/uldza/qdrant/git/refs{/sha}",
                "trees_url": "https://api.github.com/repos/uldza/qdrant/git/trees{/sha}",
                "statuses_url": "https://api.github.com/repos/uldza/qdrant/statuses/{sha}",
                "languages_url": "https://api.github.com/repos/uldza/qdrant/languages",
                "stargazers_url": "https://api.github.com/repos/uldza/qdrant/stargazers",
                "contributors_url": "https://api.github.com/repos/uldza/qdrant/contributors",
                "subscribers_url": "https://api.github.com/repos/uldza/qdrant/subscribers",
                "subscription_url": "https://api.github.com/repos/uldza/qdrant/subscription",
                "commits_url": "https://api.github.com/repos/uldza/qdrant/commits{/sha}",
                "git_commits_url": "https://api.github.com/repos/uldza/qdrant/git/commits{/sha}",
                "comments_url": "https://api.github.com/repos/uldza/qdrant/comments{/number}",
                "issue_comment_url": "https://api.github.com/repos/uldza/qdrant/issues/comments{/number}",
                "contents_url": "https://api.github.com/repos/uldza/qdrant/contents/{+path}",
                "compare_url": "https://api.github.com/repos/uldza/qdrant/compare/{base}...{head}",
                "merges_url": "https://api.github.com/repos/uldza/qdrant/merges",
                "archive_url": "https://api.github.com/repos/uldza/qdrant/{archive_format}{/ref}",
                "downloads_url": "https://api.github.com/repos/uldza/qdrant/downloads",
                "issues_url": "https://api.github.com/repos/uldza/qdrant/issues{/number}",
                "pulls_url": "https://api.github.com/repos/uldza/qdrant/pulls{/number}",
                "milestones_url": "https://api.github.com/repos/uldza/qdrant/milestones{/number}",
                "notifications_url": "https://api.github.com/repos/uldza/qdrant/notifications{?since,all,participating}",
                "labels_url": "https://api.github.com/repos/uldza/qdrant/labels{/name}",
                "releases_url": "https://api.github.com/repos/uldza/qdrant/releases{/id}",
                "deployments_url": "https://api.github.com/repos/uldza/qdrant/deployments",
                "created_at": "2023-10-27T11:46:33Z",
                "updated_at": "2023-10-27T11:46:33Z",
                "pushed_at": "2023-10-27T11:16:03Z",
                "git_url": "git://github.com/uldza/qdrant.git",
                "ssh_url": "git@github.com:uldza/qdrant.git",
                "clone_url": "https://github.com/uldza/qdrant.git",
                "svn_url": "https://github.com/uldza/qdrant",
                "homepage": "https://qdrant.tech",
                "size": 14825,
                "stargazers_count": 0,
                "watchers_count": 0,
                "language": null,
                "has_issues": false,
                "has_projects": true,
                "has_downloads": true,
                "has_wiki": true,
                "has_pages": false,
                "has_discussions": false,
                "forks_count": 0,
                "mirror_url": null,
                "archived": false,
                "disabled": false,
                "open_issues_count": 0,
                "license": null,
                "allow_forking": true,
                "is_template": false,
                "web_commit_signoff_required": false,
                "topics": [],
                "visibility": "public",
                "forks": 0,
                "open_issues": 0,
                "watchers": 0,
                "default_branch": "main",
                "public": true
            }
        },
        "public": true,
        "created_at": "2023-10-27T11:46:34Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32897154657",
        "type": "WatchEvent",
        "actor": {
            "id": 1074954,
            "login": "w84thesun",
            "display_login": "w84thesun",
            "gravatar_id": "",
            "url": "https://api.github.com/users/w84thesun",
            "avatar_url": "https://avatars.githubusercontent.com/u/1074954?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T11:30:13Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32896814659",
        "type": "PushEvent",
        "actor": {
            "id": 856222,
            "login": "timvisee",
            "display_login": "timvisee",
            "gravatar_id": "",
            "url": "https://api.github.com/users/timvisee",
            "avatar_url": "https://avatars.githubusercontent.com/u/856222?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "repository_id": 268163609,
            "push_id": 15590818737,
            "size": 71,
            "distinct_size": 1,
            "ref": "refs/heads/shard-snapshot-transfer-delete-snapshot-after-use",
            "head": "aadc66d6dc77cc1f384538cf410f0eee48e3c386",
            "before": "a0cb93e9b8c4d234fd22988524b5ce835c08e54e",
            "commits": [
                {
                    "sha": "e610ab202d2e40f898e2cbc42072ac63b385aae2",
                    "author": {
                        "email": "pleshkov.ivan@gmail.com",
                        "name": "Ivan Pleshkov"
                    },
                    "message": "Use enum vector type in vector storage (#2841)\n\n* use enum vector type in vector storage\r\n\r\n* add to_vec_ref",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/e610ab202d2e40f898e2cbc42072ac63b385aae2"
                },
                {
                    "sha": "9e70494990d273536d197021cca6d3dd23989b3d",
                    "author": {
                        "email": "luis.cossio@qdrant.com",
                        "name": "Luis Coss\u00edo"
                    },
                    "message": "Add discovery context scorer (#2820)\n\n* add discovery context query\r\n\r\n* add tests\r\n\r\n* small optimization for loss_by\r\n\r\n* fix async raw scorer\r\n\r\n* ditch micro-optimization\r\n\r\n* remove sigmoid,  rename `iter_all` -> `flat_iter`\r\n\r\n* fix tests, add more cases",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/9e70494990d273536d197021cca6d3dd23989b3d"
                },
                {
                    "sha": "d135fbb4410482e5ea556257d6a86b6edc80c104",
                    "author": {
                        "email": "arnaud.gourlay@gmail.com",
                        "name": "Arnaud Gourlay"
                    },
                    "message": "Fix cargo test doc (#2856)\n\n* fix cargo test doc\r\n\r\n* run doc test on CI\r\n\r\n* try re-ordering tests execution to check if it takes less time",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/d135fbb4410482e5ea556257d6a86b6edc80c104"
                },
                {
                    "sha": "87c9e79cb1e01441f1e4e0d517db6605ea16e0cd",
                    "author": {
                        "email": "arnaud.gourlay@gmail.com",
                        "name": "Arnaud Gourlay"
                    },
                    "message": "Sparse vector in QueryVector (#2854)\n\n* Sparse vector in QueryVector\r\n\r\n* remove experimental sparse raw scorer\r\n\r\n* code review\r\n\r\n* code review",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/87c9e79cb1e01441f1e4e0d517db6605ea16e0cd"
                },
                {
                    "sha": "48889ec5a372df763e9e2a717d818fdb65eb2e5c",
                    "author": {
                        "email": "ffuugoo@users.noreply.github.com",
                        "name": "Roman Titov"
                    },
                    "message": "Update `mold` in the Dockerfile to 2.3.1 (#2859)",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/48889ec5a372df763e9e2a717d818fdb65eb2e5c"
                },
                {
                    "sha": "74c9514f192e6763922c5be2a2879cb13cb2a9d0",
                    "author": {
                        "email": "tim+github@visee.me",
                        "name": "Tim Vis\u00e9e"
                    },
                    "message": "Support API-token authentication through Http Authorization Bearer header (#2855)\n\n* In REST API, also support API key in Authorization Bearer header\r\n\r\n* In gRPC API, also support API key in Authorization Bearer header",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/74c9514f192e6763922c5be2a2879cb13cb2a9d0"
                },
                {
                    "sha": "327c78678cdfe98f24c85be77c9c4c6f06462080",
                    "author": {
                        "email": "Apmats@users.noreply.github.com",
                        "name": "Apostolos Matsagkas"
                    },
                    "message": "Fix overeager marking of visited points during search (#2864)",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/327c78678cdfe98f24c85be77c9c4c6f06462080"
                },
                {
                    "sha": "1f57ffc8f51d6a827e31e161a03c7144af375356",
                    "author": {
                        "email": "ffuugoo@users.noreply.github.com",
                        "name": "Roman Titov"
                    },
                    "message": "Add `ReplicaState::PartialSnapshot` (#2858)\n\n* WIP: Add `ReplicaState::PartialSnapshot`\r\n\r\n* Add documentation\r\n\r\n* fixup! Add documentation\r\n\r\n* Update OpenAPI spec\r\n\r\n* Remove `notify_peer_failure` call for `PartialSnapshot` branch in `apply_state`",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/1f57ffc8f51d6a827e31e161a03c7144af375356"
                },
                {
                    "sha": "8b9df28f83f317415aca391ad1c2f31f7798168b",
                    "author": {
                        "email": "andrey@vasnetsov.com",
                        "name": "Andrey Vasnetsov"
                    },
                    "message": "Hnsw parallel build accuracy (#2869)\n\n* fixes for parallel HNSW graph building\r\n\r\n* mft\r\n\r\n* fix the bug by introducing ready_list, do not use unready point in parallel building\r\n\r\n* fmt\r\n\r\n* rm debug code\r\n\r\n* clippy fix\r\n\r\n* fix test\r\n\r\n* fmt\r\n\r\n* review fixes\r\n\r\n* clippy fix\r\n\r\n* fix filtered hnsw build",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/8b9df28f83f317415aca391ad1c2f31f7798168b"
                },
                {
                    "sha": "d6cdb5572c459737227f775eadb9f8c5ecc843c8",
                    "author": {
                        "email": "tim@visee.me",
                        "name": "timvisee"
                    },
                    "message": "Clone inside blocks",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/d6cdb5572c459737227f775eadb9f8c5ecc843c8"
                },
                {
                    "sha": "f0e158c25cc7f3f3d3cca5a1e51601282c41e77c",
                    "author": {
                        "email": "tim@visee.me",
                        "name": "timvisee"
                    },
                    "message": "Add shard transfer method to distinguish between batching and snapshots",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/f0e158c25cc7f3f3d3cca5a1e51601282c41e77c"
                },
                {
                    "sha": "0356775f60c66174c10b0561b8e0cad0b837013e",
                    "author": {
                        "email": "tim@visee.me",
                        "name": "timvisee"
                    },
                    "message": "Add stub method to drive snapshot transfer",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/0356775f60c66174c10b0561b8e0cad0b837013e"
                },
                {
                    "sha": "4253182360e57decfd815a03ed8724303bb02881",
                    "author": {
                        "email": "tim@visee.me",
                        "name": "timvisee"
                    },
                    "message": "Store remote shard in forward proxy, merge unproxy methods",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/4253182360e57decfd815a03ed8724303bb02881"
                },
                {
                    "sha": "dbf83680d3d5ef4cab90cbd77c0074dd6cb83045",
                    "author": {
                        "email": "tim@visee.me",
                        "name": "timvisee"
                    },
                    "message": "On snapshot shard transfer, create a shard snapshot",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/dbf83680d3d5ef4cab90cbd77c0074dd6cb83045"
                },
                {
                    "sha": "6062f1e43554b6af05d7112c0f3257932bc5c1c3",
                    "author": {
                        "email": "tim@visee.me",
                        "name": "timvisee"
                    },
                    "message": "Unify logic for unproxifying forward and queue proxy",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/6062f1e43554b6af05d7112c0f3257932bc5c1c3"
                },
                {
                    "sha": "90aade69a1334c0a6ededbe0aff847c4bd466883",
                    "author": {
                        "email": "tim@visee.me",
                        "name": "timvisee"
                    },
                    "message": "Error snapshot transfer if shard is not a queue proxy",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/90aade69a1334c0a6ededbe0aff847c4bd466883"
                },
                {
                    "sha": "ed7e2c024e28076b2e2ab7b0dc8ab6ebb74c4cdf",
                    "author": {
                        "email": "tim@visee.me",
                        "name": "timvisee"
                    },
                    "message": "Add remote shard function to request remote HTTP port",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/ed7e2c024e28076b2e2ab7b0dc8ab6ebb74c4cdf"
                },
                {
                    "sha": "06c223c42dbd1e60d23ae6da531ea38951f3c8ee",
                    "author": {
                        "email": "tim@visee.me",
                        "name": "timvisee"
                    },
                    "message": "Handle all specific shard types when proxifying",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/06c223c42dbd1e60d23ae6da531ea38951f3c8ee"
                },
                {
                    "sha": "a8d8cbfe290108dda66d3adfe084a3bf8f25584a",
                    "author": {
                        "email": "tim@visee.me",
                        "name": "timvisee"
                    },
                    "message": "Allow queue proxy for some shard holder snapshot methods",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/a8d8cbfe290108dda66d3adfe084a3bf8f25584a"
                },
                {
                    "sha": "2b4369fe2ea90c8b497d7147828447a3eabcb72c",
                    "author": {
                        "email": "tim@visee.me",
                        "name": "timvisee"
                    },
                    "message": "Bring local and remote shard snapshot transfer URLs into transfer logic",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/2b4369fe2ea90c8b497d7147828447a3eabcb72c"
                }
            ]
        },
        "public": true,
        "created_at": "2023-10-27T11:16:01Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32896401074",
        "type": "PushEvent",
        "actor": {
            "id": 2725918,
            "login": "ffuugoo",
            "display_login": "ffuugoo",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ffuugoo",
            "avatar_url": "https://avatars.githubusercontent.com/u/2725918?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "repository_id": 268163609,
            "push_id": 15590610402,
            "size": 1,
            "distinct_size": 1,
            "ref": "refs/heads/shard-snapshot-safe-cancel",
            "head": "0b9ef1ecaafd6148abfed83efc5144ca4021a8bd",
            "before": "48af6f072d5e23047a62b2dc4c713de5b71bfe83",
            "commits": [
                {
                    "sha": "0b9ef1ecaafd6148abfed83efc5144ca4021a8bd",
                    "author": {
                        "email": "ffuugoo@users.noreply.github.com",
                        "name": "Roman Titov"
                    },
                    "message": "Make `recover_shard_snapshot`/`upload_shard_snapshot` API cancel-safe",
                    "distinct": true,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/0b9ef1ecaafd6148abfed83efc5144ca4021a8bd"
                }
            ]
        },
        "public": true,
        "created_at": "2023-10-27T10:59:01Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32895942311",
        "type": "IssuesEvent",
        "actor": {
            "id": 41898282,
            "login": "github-actions[bot]",
            "display_login": "github-actions",
            "gravatar_id": "",
            "url": "https://api.github.com/users/github-actions[bot]",
            "avatar_url": "https://avatars.githubusercontent.com/u/41898282?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "action": "opened",
            "issue": {
                "url": "https://api.github.com/repos/qdrant/qdrant/issues/2883",
                "repository_url": "https://api.github.com/repos/qdrant/qdrant",
                "labels_url": "https://api.github.com/repos/qdrant/qdrant/issues/2883/labels{/name}",
                "comments_url": "https://api.github.com/repos/qdrant/qdrant/issues/2883/comments",
                "events_url": "https://api.github.com/repos/qdrant/qdrant/issues/2883/events",
                "html_url": "https://github.com/qdrant/qdrant/issues/2883",
                "id": 1965248391,
                "node_id": "I_kwDOD_vaGc51I0-H",
                "number": 2883,
                "title": "Flaky test `hnsw_discover_test::filtered_hnsw_discover_precision`",
                "user": {
                    "login": "github-actions[bot]",
                    "id": 41898282,
                    "node_id": "MDM6Qm90NDE4OTgyODI=",
                    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
                    "html_url": "https://github.com/apps/github-actions",
                    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
                    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
                    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
                    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
                    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
                    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
                    "type": "Bot",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 0,
                "created_at": "2023-10-27T10:39:44Z",
                "updated_at": "2023-10-27T10:39:44Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "## Last report\n\n### System error\n\n```text\ndiscovery_hits = 94 out of 100\nthread 'hnsw_discover_test::filtered_hnsw_discover_precision' panicked at lib/segment/tests/integration/hnsw_discover_test.rs:266:5:\nhits: 94 of 100\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\n```\n\n### Context\n\nDate: 27.10.2023 10:39\n\n[Flaky failure run](https://github.com/qdrant/qdrant/actions/runs/6665799975/job/process-results)\n\n[Commit](https://github.com/qdrant/qdrant/tree/1c7567992f1543fe5fecbc2a2d73f1f74a5f2873)\n\nOS: ubuntu-latest\n\nBranch: refs/pull/2806/merge\n\n#2806\n",
                "reactions": {
                    "url": "https://api.github.com/repos/qdrant/qdrant/issues/2883/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/qdrant/qdrant/issues/2883/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T10:39:45Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32895773959",
        "type": "PushEvent",
        "actor": {
            "id": 856222,
            "login": "timvisee",
            "display_login": "timvisee",
            "gravatar_id": "",
            "url": "https://api.github.com/users/timvisee",
            "avatar_url": "https://avatars.githubusercontent.com/u/856222?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "repository_id": 268163609,
            "push_id": 15590296744,
            "size": 1,
            "distinct_size": 1,
            "ref": "refs/heads/shard-transfer-switch-states",
            "head": "abf7fabf2728d4ad4aba2b2de9a054c3c90b67b9",
            "before": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
            "commits": [
                {
                    "sha": "abf7fabf2728d4ad4aba2b2de9a054c3c90b67b9",
                    "author": {
                        "email": "tim@visee.me",
                        "name": "timvisee"
                    },
                    "message": "Fix typo",
                    "distinct": true,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/abf7fabf2728d4ad4aba2b2de9a054c3c90b67b9"
                }
            ]
        },
        "public": true,
        "created_at": "2023-10-27T10:32:42Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32895103549",
        "type": "PushEvent",
        "actor": {
            "id": 20946825,
            "login": "IvanPleshkov",
            "display_login": "IvanPleshkov",
            "gravatar_id": "",
            "url": "https://api.github.com/users/IvanPleshkov",
            "avatar_url": "https://avatars.githubusercontent.com/u/20946825?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "repository_id": 268163609,
            "push_id": 15589953680,
            "size": 16,
            "distinct_size": 2,
            "ref": "refs/heads/simple-sparse-vector-storage",
            "head": "8c95fdc9d89c6465a3ee2eee851000869b783dad",
            "before": "c5778bd7b94e022c1b403506b96d1d492441e3cb",
            "commits": [
                {
                    "sha": "48889ec5a372df763e9e2a717d818fdb65eb2e5c",
                    "author": {
                        "email": "ffuugoo@users.noreply.github.com",
                        "name": "Roman Titov"
                    },
                    "message": "Update `mold` in the Dockerfile to 2.3.1 (#2859)",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/48889ec5a372df763e9e2a717d818fdb65eb2e5c"
                },
                {
                    "sha": "74c9514f192e6763922c5be2a2879cb13cb2a9d0",
                    "author": {
                        "email": "tim+github@visee.me",
                        "name": "Tim Vis\u00e9e"
                    },
                    "message": "Support API-token authentication through Http Authorization Bearer header (#2855)\n\n* In REST API, also support API key in Authorization Bearer header\r\n\r\n* In gRPC API, also support API key in Authorization Bearer header",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/74c9514f192e6763922c5be2a2879cb13cb2a9d0"
                },
                {
                    "sha": "327c78678cdfe98f24c85be77c9c4c6f06462080",
                    "author": {
                        "email": "Apmats@users.noreply.github.com",
                        "name": "Apostolos Matsagkas"
                    },
                    "message": "Fix overeager marking of visited points during search (#2864)",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/327c78678cdfe98f24c85be77c9c4c6f06462080"
                },
                {
                    "sha": "1f57ffc8f51d6a827e31e161a03c7144af375356",
                    "author": {
                        "email": "ffuugoo@users.noreply.github.com",
                        "name": "Roman Titov"
                    },
                    "message": "Add `ReplicaState::PartialSnapshot` (#2858)\n\n* WIP: Add `ReplicaState::PartialSnapshot`\r\n\r\n* Add documentation\r\n\r\n* fixup! Add documentation\r\n\r\n* Update OpenAPI spec\r\n\r\n* Remove `notify_peer_failure` call for `PartialSnapshot` branch in `apply_state`",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/1f57ffc8f51d6a827e31e161a03c7144af375356"
                },
                {
                    "sha": "8b9df28f83f317415aca391ad1c2f31f7798168b",
                    "author": {
                        "email": "andrey@vasnetsov.com",
                        "name": "Andrey Vasnetsov"
                    },
                    "message": "Hnsw parallel build accuracy (#2869)\n\n* fixes for parallel HNSW graph building\r\n\r\n* mft\r\n\r\n* fix the bug by introducing ready_list, do not use unready point in parallel building\r\n\r\n* fmt\r\n\r\n* rm debug code\r\n\r\n* clippy fix\r\n\r\n* fix test\r\n\r\n* fmt\r\n\r\n* review fixes\r\n\r\n* clippy fix\r\n\r\n* fix filtered hnsw build",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/8b9df28f83f317415aca391ad1c2f31f7798168b"
                },
                {
                    "sha": "f3cd93379c914c05063be270691f4f0f10e1b199",
                    "author": {
                        "email": "pleshkov.ivan@gmail.com",
                        "name": "Ivan Pleshkov"
                    },
                    "message": "propagate vector type into QueryVector (#2878)",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/f3cd93379c914c05063be270691f4f0f10e1b199"
                },
                {
                    "sha": "dd5e2d9d98d43a8a36075a667b04451436a39a6a",
                    "author": {
                        "email": "pleshkov.ivan@gmail.com",
                        "name": "Ivan Pleshkov"
                    },
                    "message": "vector index update function (#2877)",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/dd5e2d9d98d43a8a36075a667b04451436a39a6a"
                },
                {
                    "sha": "95d240cb444972a14bcf93173a230b236e02442d",
                    "author": {
                        "email": "pleshkov.ivan@gmail.com",
                        "name": "Ivan Pleshkov"
                    },
                    "message": "mutable geo index (#2768)",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/95d240cb444972a14bcf93173a230b236e02442d"
                },
                {
                    "sha": "ce9340ebc8e6bcb24cfdd63d2e9716133aef3e89",
                    "author": {
                        "email": "luis.cossio@qdrant.com",
                        "name": "Luis Coss\u00edo"
                    },
                    "message": "extract vector fetching logic from recommendations.rs (#2851)",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/ce9340ebc8e6bcb24cfdd63d2e9716133aef3e89"
                },
                {
                    "sha": "9c4d01e89a8cc32a942f71b4ba5e3c4899a57497",
                    "author": {
                        "email": "andreevlex.as@gmail.com",
                        "name": "Alexander A"
                    },
                    "message": "add update_rate_limit param into config file (#2848)",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/9c4d01e89a8cc32a942f71b4ba5e3c4899a57497"
                },
                {
                    "sha": "1462b3bebe9201aebea4b149760d676cfaf4dd30",
                    "author": {
                        "email": "tim+github@visee.me",
                        "name": "Tim Vis\u00e9e"
                    },
                    "message": "Remove `GetHttpPort` from gRPC API (#2843)",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/1462b3bebe9201aebea4b149760d676cfaf4dd30"
                },
                {
                    "sha": "65e79e45739b7d03dc77b68d66d32be5c96bb94b",
                    "author": {
                        "email": "tim+github@visee.me",
                        "name": "Tim Vis\u00e9e"
                    },
                    "message": "Clean up downloaded snapshot after snapshot recovery (#2846)\n\n* Clean up remote shard snapshot after recovery\r\n\r\n* Clean up remote collection snapshot after recovery\r\n\r\n* Improve logging\r\n\r\n* Refactor file cleaner into TempPath, fix double delete\r\n\r\nThis refactoring is done to better match the structures we use from\r\n`tempfile`. It also has a `TempPath` structure, but it only supports\r\nfiles.\r\n\r\nAlso fixes an issue where we'd try to delete a file twice when\r\n`delete()` was called, because the drop handler tried to delete a second\r\ntime.\r\n\r\n* Use TempFile interface to also clear downloaded snapshots on error\r\n\r\n* Replace our `TempPath` with `tempfile::TempPath`\r\n\r\n* Fix doc\r\n\r\n* Remove clone",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/65e79e45739b7d03dc77b68d66d32be5c96bb94b"
                },
                {
                    "sha": "3b17deb259463510df3c0fc6d33828e96a673c08",
                    "author": {
                        "email": "luis.cossio@qdrant.com",
                        "name": "Luis Coss\u00edo"
                    },
                    "message": "Discovery search handler at hnsw level (#2836)\n\n* add discovery_search_with_graph handler\r\n\r\n* add precision test\r\n\r\n* rename `DiscoveryPair` -> `ContextPair`\r\n\r\n* review fixes\r\n\r\n* renames + comments\r\n\r\n---------\r\n\r\nCo-authored-by: generall <andrey@vasnetsov.com>",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/3b17deb259463510df3c0fc6d33828e96a673c08"
                },
                {
                    "sha": "e03c23983ea217ab3f5b4c036446019974837739",
                    "author": {
                        "email": "andrey@vasnetsov.com",
                        "name": "Andrey Vasnetsov"
                    },
                    "message": "fix: openapi/tests/requirements.txt to reduce vulnerabilities (#2882)\n\nThe following vulnerabilities are fixed by pinning transitive dependencies:\r\n- https://snyk.io/vuln/SNYK-PYTHON-WERKZEUG-6035177\r\n\r\nCo-authored-by: snyk-bot <snyk-bot@snyk.io>",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/e03c23983ea217ab3f5b4c036446019974837739"
                },
                {
                    "sha": "b01089a72a08806b2f3c1f3ae926c69467ecca57",
                    "author": {
                        "email": "arnaud.gourlay@gmail.com",
                        "name": "Arnaud Gourlay"
                    },
                    "message": "Simple sparse vector storage",
                    "distinct": true,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/b01089a72a08806b2f3c1f3ae926c69467ecca57"
                },
                {
                    "sha": "8c95fdc9d89c6465a3ee2eee851000869b783dad",
                    "author": {
                        "email": "arnaud.gourlay@gmail.com",
                        "name": "Arnaud Gourlay"
                    },
                    "message": "better todo",
                    "distinct": true,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/8c95fdc9d89c6465a3ee2eee851000869b783dad"
                }
            ]
        },
        "public": true,
        "created_at": "2023-10-27T10:07:19Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32893625363",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 856222,
            "login": "timvisee",
            "display_login": "timvisee",
            "gravatar_id": "",
            "url": "https://api.github.com/users/timvisee",
            "avatar_url": "https://avatars.githubusercontent.com/u/856222?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/qdrant/qdrant/pulls/comments/1374294052",
                "pull_request_review_id": 1701334330,
                "id": 1374294052,
                "node_id": "PRRC_kwDOD_vaGc5R6hAk",
                "diff_hunk": "@@ -248,41 +292,29 @@ async fn transfer_snapshot(\n             ))\n         })?;\n \n-    // TODO: through consensus, set replica state to partial\n-\n-    // TODO: await other node to have reached partial state\n-\n-    {\n-        let shard = shard_holder_read.get_shard(&shard_id);\n-        let Some(replica_set) = shard else {\n-            return Err(CollectionError::service_error(format!(\n-                \"Shard {shard_id} cannot be transformed from queue to forward proxy because it does not exist\"\n-            )));\n-        };\n-\n-        // Transfer all updates to remote shard and transform into forward proxy shard\n-        // We do this right after the shard has been restored on the remote so that we can catch any\n-        // errors early. The forward proxy shard we end up with will not error again once we unproxify.\n-        log::trace!(\"Transfer all queue proxy updates and transform into forward proxy\");\n-        replica_set.queue_proxy_into_forward_proxy().await?;\n-\n-        // Wait for remote shard to reach partial state in our replica set\n-        log::trace!(\"Wait for local shard to reach Partial state\");\n-        replica_set\n-            .wait_for_partial(transfer_config.to, defaults::CONSENSUS_META_OP_WAIT)\n-            .await\n-            .map_err(|err| {\n-                CollectionError::service_error(format!(\n-                    \"Shard being transferred did not reach Partial state in time: {err}\"\n-                ))\n-            })?;\n-    }\n+    // Set shard state to Partial\n+    log::debug!(\"Shard {shard_id} snapshot recovered on {} for snapshot transfer, switching into next stage through consensus...\", transfer_config.to);\n+    consensus\n+        .snapshot_recovered_switch_to_partial_confirm(\n+            &transfer_config,\n+            collection_name,\n+            replica_set,\n+        )\n+        .await\n+        .map_err(|err| {\n+            CollectionError::service_error(format!(\n+                \"Can't switch shard {shard_id} to Partial state after snapshot transfer: {err}\"\n+            ))\n+        })?;\n \n-    // Synchronize, make sure all nodes have reached consensus before continuing and unproxying\n-    // All other nodes must consider the shard state to be at least partial so that all nodes send\n-    // operations to it.\n+    // Synchronize all nodes\n+    // TODO: only the receiver must be parital here, can synchronize all nodes later\n     await_consensus_sync(consensus, &channel_service, transfer_config.from).await;",
                "path": "lib/collection/src/shards/transfer/shard_transfer.rs",
                "commit_id": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                "original_commit_id": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                "user": {
                    "login": "timvisee",
                    "id": 856222,
                    "node_id": "MDQ6VXNlcjg1NjIyMg==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/856222?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/timvisee",
                    "html_url": "https://github.com/timvisee",
                    "followers_url": "https://api.github.com/users/timvisee/followers",
                    "following_url": "https://api.github.com/users/timvisee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/timvisee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/timvisee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/timvisee/subscriptions",
                    "organizations_url": "https://api.github.com/users/timvisee/orgs",
                    "repos_url": "https://api.github.com/users/timvisee/repos",
                    "events_url": "https://api.github.com/users/timvisee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/timvisee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Here we set the shard state from `PartialSnapshot` to `Partial` through consensus. Then we synchronize consensus across all nodes.\r\n\r\nWe do this after recovering the snapshot on the remote, and before transferring/transforming the queue proxy.",
                "created_at": "2023-10-27T09:11:16Z",
                "updated_at": "2023-10-27T09:11:26Z",
                "html_url": "https://github.com/qdrant/qdrant/pull/2881#discussion_r1374294052",
                "pull_request_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881",
                "author_association": "MEMBER",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/comments/1374294052"
                    },
                    "html": {
                        "href": "https://github.com/qdrant/qdrant/pull/2881#discussion_r1374294052"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/qdrant/qdrant/pulls/comments/1374294052/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": 295,
                "original_start_line": 295,
                "start_side": "RIGHT",
                "line": 312,
                "original_line": 312,
                "side": "RIGHT",
                "original_position": 178,
                "position": 178,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881",
                "id": 1575163698,
                "node_id": "PR_kwDOD_vaGc5d4xcy",
                "html_url": "https://github.com/qdrant/qdrant/pull/2881",
                "diff_url": "https://github.com/qdrant/qdrant/pull/2881.diff",
                "patch_url": "https://github.com/qdrant/qdrant/pull/2881.patch",
                "issue_url": "https://api.github.com/repos/qdrant/qdrant/issues/2881",
                "number": 2881,
                "state": "open",
                "locked": false,
                "title": "Set `(Partial)Snapshot` states for shard snapshot transfer through consensus",
                "user": {
                    "login": "timvisee",
                    "id": 856222,
                    "node_id": "MDQ6VXNlcjg1NjIyMg==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/856222?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/timvisee",
                    "html_url": "https://github.com/timvisee",
                    "followers_url": "https://api.github.com/users/timvisee/followers",
                    "following_url": "https://api.github.com/users/timvisee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/timvisee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/timvisee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/timvisee/subscriptions",
                    "organizations_url": "https://api.github.com/users/timvisee/orgs",
                    "repos_url": "https://api.github.com/users/timvisee/repos",
                    "events_url": "https://api.github.com/users/timvisee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/timvisee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Tracked in https://github.com/qdrant/qdrant/issues/2432.\r\n\r\nMerges into https://github.com/qdrant/qdrant/pull/2467.\r\n\r\nThe three most important things this PR does are:\r\n\r\n- When starting a shard transfer, set the target shard into `PartialSnapshot`.\r\n- Add `ShardTransferOperations::SnapshotRecovered` operation to consensus\r\n  We propose this operation to consensus after the shard has been recovered on the remote. The consensus operation ensures the transfer is still active, and sets the shard from `PartialSnapshot` into `Partial`.\r\n  This operation is confirmed and retried up to 3 times if consensus rejected it.\r\n- Consensus is synchronized explicitly on all nodes to ensure all reached the `Partial` state\r\n\r\nThis finalizes the steps required for setting `PartialSnapshot` and `Partial` states, and synchronizing nodes.\r\n\r\nAlong with that this PR reworks the snapshot transfer function a bit to make it a lot simpler. I've also added extensive documentation to the function to explain the whole transfer process step by step.\r\n\r\nI've tested all these changes manually.\r\n\r\n### All Submissions:\r\n\r\n* [x] Contributions should target the `dev` branch. Did you create your branch from `dev`?\r\n* [x] Have you followed the guidelines in our Contributing document?\r\n* [x] Have you checked to ensure there aren't other open [Pull Requests](../../../pulls) for the same update/change?\r\n\r\n<!-- You can erase any parts of this template not applicable to your Pull Request. -->\r\n\r\n### New Feature Submissions:\r\n\r\n1. [x] Does your submission pass tests?\r\n2. [x] Have you formatted your code locally using `cargo +nightly fmt --all` command prior to submission?\r\n3. [x] Have you checked your code using `cargo clippy --all --all-features` command?",
                "created_at": "2023-10-26T16:14:20Z",
                "updated_at": "2023-10-27T09:11:26Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "b00e1567458ae03f30dfe6548f1aafdd74960ca4",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": true,
                "commits_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/commits",
                "review_comments_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/comments",
                "review_comment_url": "https://api.github.com/repos/qdrant/qdrant/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/qdrant/qdrant/issues/2881/comments",
                "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                "head": {
                    "label": "qdrant:shard-transfer-switch-states",
                    "ref": "shard-transfer-switch-states",
                    "sha": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                    "user": {
                        "login": "qdrant",
                        "id": 73504361,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                        "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/qdrant",
                        "html_url": "https://github.com/qdrant",
                        "followers_url": "https://api.github.com/users/qdrant/followers",
                        "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                        "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                        "organizations_url": "https://api.github.com/users/qdrant/orgs",
                        "repos_url": "https://api.github.com/users/qdrant/repos",
                        "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/qdrant/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 268163609,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyNjgxNjM2MDk=",
                        "name": "qdrant",
                        "full_name": "qdrant/qdrant",
                        "private": false,
                        "owner": {
                            "login": "qdrant",
                            "id": 73504361,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/qdrant",
                            "html_url": "https://github.com/qdrant",
                            "followers_url": "https://api.github.com/users/qdrant/followers",
                            "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                            "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                            "organizations_url": "https://api.github.com/users/qdrant/orgs",
                            "repos_url": "https://api.github.com/users/qdrant/repos",
                            "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/qdrant/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/qdrant/qdrant",
                        "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                        "fork": false,
                        "url": "https://api.github.com/repos/qdrant/qdrant",
                        "forks_url": "https://api.github.com/repos/qdrant/qdrant/forks",
                        "keys_url": "https://api.github.com/repos/qdrant/qdrant/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/qdrant/qdrant/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/qdrant/qdrant/teams",
                        "hooks_url": "https://api.github.com/repos/qdrant/qdrant/hooks",
                        "issue_events_url": "https://api.github.com/repos/qdrant/qdrant/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/qdrant/qdrant/events",
                        "assignees_url": "https://api.github.com/repos/qdrant/qdrant/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/qdrant/qdrant/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/qdrant/qdrant/tags",
                        "blobs_url": "https://api.github.com/repos/qdrant/qdrant/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/qdrant/qdrant/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/qdrant/qdrant/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/qdrant/qdrant/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/qdrant/qdrant/languages",
                        "stargazers_url": "https://api.github.com/repos/qdrant/qdrant/stargazers",
                        "contributors_url": "https://api.github.com/repos/qdrant/qdrant/contributors",
                        "subscribers_url": "https://api.github.com/repos/qdrant/qdrant/subscribers",
                        "subscription_url": "https://api.github.com/repos/qdrant/qdrant/subscription",
                        "commits_url": "https://api.github.com/repos/qdrant/qdrant/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/qdrant/qdrant/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/qdrant/qdrant/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/qdrant/qdrant/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/qdrant/qdrant/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/qdrant/qdrant/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/qdrant/qdrant/merges",
                        "archive_url": "https://api.github.com/repos/qdrant/qdrant/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/qdrant/qdrant/downloads",
                        "issues_url": "https://api.github.com/repos/qdrant/qdrant/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/qdrant/qdrant/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/qdrant/qdrant/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/qdrant/qdrant/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/qdrant/qdrant/labels{/name}",
                        "releases_url": "https://api.github.com/repos/qdrant/qdrant/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/qdrant/qdrant/deployments",
                        "created_at": "2020-05-30T21:37:01Z",
                        "updated_at": "2023-10-27T07:44:43Z",
                        "pushed_at": "2023-10-27T08:37:35Z",
                        "git_url": "git://github.com/qdrant/qdrant.git",
                        "ssh_url": "git@github.com:qdrant/qdrant.git",
                        "clone_url": "https://github.com/qdrant/qdrant.git",
                        "svn_url": "https://github.com/qdrant/qdrant",
                        "homepage": "https://qdrant.tech",
                        "size": 14675,
                        "stargazers_count": 13413,
                        "watchers_count": 13413,
                        "language": "Rust",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 777,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 182,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "approximate-nearest-neighbor-search",
                            "embeddings-similarity",
                            "hacktoberfest",
                            "hnsw",
                            "image-search",
                            "knn-algorithm",
                            "machine-learning",
                            "matching",
                            "mlops",
                            "nearest-neighbor-search",
                            "neural-network",
                            "neural-search",
                            "recommender-system",
                            "search",
                            "search-engine",
                            "search-engines",
                            "similarity-search",
                            "vector-database",
                            "vector-search",
                            "vector-search-engine"
                        ],
                        "visibility": "public",
                        "forks": 777,
                        "open_issues": 182,
                        "watchers": 13413,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "qdrant:add-shard-transfer-snapshot-stubs",
                    "ref": "add-shard-transfer-snapshot-stubs",
                    "sha": "3f42b3427e3efd00b93f318baca090ec1eb1697d",
                    "user": {
                        "login": "qdrant",
                        "id": 73504361,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                        "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/qdrant",
                        "html_url": "https://github.com/qdrant",
                        "followers_url": "https://api.github.com/users/qdrant/followers",
                        "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                        "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                        "organizations_url": "https://api.github.com/users/qdrant/orgs",
                        "repos_url": "https://api.github.com/users/qdrant/repos",
                        "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/qdrant/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 268163609,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyNjgxNjM2MDk=",
                        "name": "qdrant",
                        "full_name": "qdrant/qdrant",
                        "private": false,
                        "owner": {
                            "login": "qdrant",
                            "id": 73504361,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/qdrant",
                            "html_url": "https://github.com/qdrant",
                            "followers_url": "https://api.github.com/users/qdrant/followers",
                            "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                            "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                            "organizations_url": "https://api.github.com/users/qdrant/orgs",
                            "repos_url": "https://api.github.com/users/qdrant/repos",
                            "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/qdrant/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/qdrant/qdrant",
                        "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                        "fork": false,
                        "url": "https://api.github.com/repos/qdrant/qdrant",
                        "forks_url": "https://api.github.com/repos/qdrant/qdrant/forks",
                        "keys_url": "https://api.github.com/repos/qdrant/qdrant/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/qdrant/qdrant/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/qdrant/qdrant/teams",
                        "hooks_url": "https://api.github.com/repos/qdrant/qdrant/hooks",
                        "issue_events_url": "https://api.github.com/repos/qdrant/qdrant/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/qdrant/qdrant/events",
                        "assignees_url": "https://api.github.com/repos/qdrant/qdrant/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/qdrant/qdrant/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/qdrant/qdrant/tags",
                        "blobs_url": "https://api.github.com/repos/qdrant/qdrant/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/qdrant/qdrant/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/qdrant/qdrant/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/qdrant/qdrant/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/qdrant/qdrant/languages",
                        "stargazers_url": "https://api.github.com/repos/qdrant/qdrant/stargazers",
                        "contributors_url": "https://api.github.com/repos/qdrant/qdrant/contributors",
                        "subscribers_url": "https://api.github.com/repos/qdrant/qdrant/subscribers",
                        "subscription_url": "https://api.github.com/repos/qdrant/qdrant/subscription",
                        "commits_url": "https://api.github.com/repos/qdrant/qdrant/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/qdrant/qdrant/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/qdrant/qdrant/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/qdrant/qdrant/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/qdrant/qdrant/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/qdrant/qdrant/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/qdrant/qdrant/merges",
                        "archive_url": "https://api.github.com/repos/qdrant/qdrant/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/qdrant/qdrant/downloads",
                        "issues_url": "https://api.github.com/repos/qdrant/qdrant/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/qdrant/qdrant/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/qdrant/qdrant/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/qdrant/qdrant/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/qdrant/qdrant/labels{/name}",
                        "releases_url": "https://api.github.com/repos/qdrant/qdrant/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/qdrant/qdrant/deployments",
                        "created_at": "2020-05-30T21:37:01Z",
                        "updated_at": "2023-10-27T07:44:43Z",
                        "pushed_at": "2023-10-27T08:37:35Z",
                        "git_url": "git://github.com/qdrant/qdrant.git",
                        "ssh_url": "git@github.com:qdrant/qdrant.git",
                        "clone_url": "https://github.com/qdrant/qdrant.git",
                        "svn_url": "https://github.com/qdrant/qdrant",
                        "homepage": "https://qdrant.tech",
                        "size": 14675,
                        "stargazers_count": 13413,
                        "watchers_count": 13413,
                        "language": "Rust",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 777,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 182,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "approximate-nearest-neighbor-search",
                            "embeddings-similarity",
                            "hacktoberfest",
                            "hnsw",
                            "image-search",
                            "knn-algorithm",
                            "machine-learning",
                            "matching",
                            "mlops",
                            "nearest-neighbor-search",
                            "neural-network",
                            "neural-search",
                            "recommender-system",
                            "search",
                            "search-engine",
                            "search-engines",
                            "similarity-search",
                            "vector-database",
                            "vector-search",
                            "vector-search-engine"
                        ],
                        "visibility": "public",
                        "forks": 777,
                        "open_issues": 182,
                        "watchers": 13413,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881"
                    },
                    "html": {
                        "href": "https://github.com/qdrant/qdrant/pull/2881"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/issues/2881"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/issues/2881/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/statuses/56a9a294c8d01124d6b2d611e4ff9156dfea809b"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T09:11:16Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32893625292",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 856222,
            "login": "timvisee",
            "display_login": "timvisee",
            "gravatar_id": "",
            "url": "https://api.github.com/users/timvisee",
            "avatar_url": "https://avatars.githubusercontent.com/u/856222?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/qdrant/qdrant/pulls/comments/1374290605",
                "pull_request_review_id": 1701334330,
                "id": 1374290605,
                "node_id": "PRRC_kwDOD_vaGc5R6gKt",
                "diff_hunk": "@@ -16,6 +27,64 @@ pub trait ShardTransferConsensus: Send + Sync {\n     /// Returns `(commit, term)`.\n     fn consensus_commit_term(&self) -> (u64, u64);\n \n+    /// After snapshot recovery, propose to switch shard to `Partial`\n+    ///\n+    /// This is called after shard snapshot recovery has been completed on the remote. It submits a\n+    /// proposal to consensus to switch the the shard state from `PartialSnapshot` to `Partial`.\n+    ///\n+    /// # Warning\n+    ///\n+    /// This only submits a proposal to consensus. Calling this does not guarantee that consensus\n+    /// will actually apply the operation across the cluster.\n+    fn snapshot_recovered_switch_to_partial(\n+        &self,\n+        transfer_config: &ShardTransfer,\n+        collection_name: CollectionId,\n+    ) -> CollectionResult<()>;\n+\n+    /// After snapshot recovery, propose to switch shard to `Partial` and confirm locally\n+    ///\n+    /// This is called after shard snapshot recovery has been completed on the remote. It submits a\n+    /// proposal to consensus to switch the the shard state from `PartialSnapshot` to `Partial`.\n+    ///\n+    /// This method also confirms consensus applied the operation before returning by asserting the\n+    /// change is propagated locally. If it fails, it will be retried for up to\n+    /// `CONSENSUS_CONFIRM_RETRIES` times.\n+    async fn snapshot_recovered_switch_to_partial_confirm(\n+        &self,\n+        transfer_config: &ShardTransfer,\n+        collection_name: &str,\n+        replica_set: &ShardReplicaSet,\n+    ) -> CollectionResult<()> {\n+        for attempts in (0..CONSENSUS_CONFIRM_RETRIES).rev() {\n+            // Propose consensus operation\n+            let proposal = self\n+                .snapshot_recovered_switch_to_partial(transfer_config, collection_name.to_string());\n+            match proposal {\n+                Ok(()) => {}\n+                Err(err) if attempts > 0 => {\n+                    log::error!(\"Failed to propose snapshot recovered operation to consensus, retrying: {err}\");\n+                    continue;\n+                }\n+                Err(err) => return Err(err),\n+            }\n+\n+            // Confirm local shard reached partial state\n+            let confirm = replica_set\n+                .wait_for_partial(transfer_config.to, CONSENSUS_CONFIRM_TIMEOUT)\n+                .await;\n+            match confirm {\n+                Ok(()) => return Ok(()),\n+                Err(err) if attempts > 0 => log::error!(\"Failed to confirm snapshot recovered operation on consensus, retrying: {err}\"),\n+                Err(err) => return Err(CollectionError::service_error(format!(\n+                    \"Failed to confirm snapshot recovered operation on consensus after {CONSENSUS_CONFIRM_RETRIES} retries: {err}\"\n+                ))),\n+            }\n+        }\n+\n+        unreachable!();\n+    }",
                "path": "lib/collection/src/shards/transfer/mod.rs",
                "commit_id": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                "original_commit_id": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                "user": {
                    "login": "timvisee",
                    "id": 856222,
                    "node_id": "MDQ6VXNlcjg1NjIyMg==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/856222?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/timvisee",
                    "html_url": "https://github.com/timvisee",
                    "followers_url": "https://api.github.com/users/timvisee/followers",
                    "following_url": "https://api.github.com/users/timvisee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/timvisee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/timvisee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/timvisee/subscriptions",
                    "organizations_url": "https://api.github.com/users/timvisee/orgs",
                    "repos_url": "https://api.github.com/users/timvisee/repos",
                    "events_url": "https://api.github.com/users/timvisee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/timvisee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Called after the shard snapshot is recovered on the remote.\r\n\r\nPropose to consensus to set the shard state from `PartialSnapshot` to `Partial`, but only if the transfer is still active. This is confirmed by testing if our local replica set reaches this state. If it fails, it is retried up to 3 times.",
                "created_at": "2023-10-27T09:08:19Z",
                "updated_at": "2023-10-27T09:11:26Z",
                "html_url": "https://github.com/qdrant/qdrant/pull/2881#discussion_r1374290605",
                "pull_request_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881",
                "author_association": "MEMBER",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/comments/1374290605"
                    },
                    "html": {
                        "href": "https://github.com/qdrant/qdrant/pull/2881#discussion_r1374290605"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/qdrant/qdrant/pulls/comments/1374290605/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": 45,
                "original_start_line": 45,
                "start_side": "RIGHT",
                "line": 86,
                "original_line": 86,
                "side": "RIGHT",
                "original_position": 86,
                "position": 86,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881",
                "id": 1575163698,
                "node_id": "PR_kwDOD_vaGc5d4xcy",
                "html_url": "https://github.com/qdrant/qdrant/pull/2881",
                "diff_url": "https://github.com/qdrant/qdrant/pull/2881.diff",
                "patch_url": "https://github.com/qdrant/qdrant/pull/2881.patch",
                "issue_url": "https://api.github.com/repos/qdrant/qdrant/issues/2881",
                "number": 2881,
                "state": "open",
                "locked": false,
                "title": "Set `(Partial)Snapshot` states for shard snapshot transfer through consensus",
                "user": {
                    "login": "timvisee",
                    "id": 856222,
                    "node_id": "MDQ6VXNlcjg1NjIyMg==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/856222?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/timvisee",
                    "html_url": "https://github.com/timvisee",
                    "followers_url": "https://api.github.com/users/timvisee/followers",
                    "following_url": "https://api.github.com/users/timvisee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/timvisee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/timvisee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/timvisee/subscriptions",
                    "organizations_url": "https://api.github.com/users/timvisee/orgs",
                    "repos_url": "https://api.github.com/users/timvisee/repos",
                    "events_url": "https://api.github.com/users/timvisee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/timvisee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Tracked in https://github.com/qdrant/qdrant/issues/2432.\r\n\r\nMerges into https://github.com/qdrant/qdrant/pull/2467.\r\n\r\nThe three most important things this PR does are:\r\n\r\n- When starting a shard transfer, set the target shard into `PartialSnapshot`.\r\n- Add `ShardTransferOperations::SnapshotRecovered` operation to consensus\r\n  We propose this operation to consensus after the shard has been recovered on the remote. The consensus operation ensures the transfer is still active, and sets the shard from `PartialSnapshot` into `Partial`.\r\n  This operation is confirmed and retried up to 3 times if consensus rejected it.\r\n- Consensus is synchronized explicitly on all nodes to ensure all reached the `Partial` state\r\n\r\nThis finalizes the steps required for setting `PartialSnapshot` and `Partial` states, and synchronizing nodes.\r\n\r\nAlong with that this PR reworks the snapshot transfer function a bit to make it a lot simpler. I've also added extensive documentation to the function to explain the whole transfer process step by step.\r\n\r\nI've tested all these changes manually.\r\n\r\n### All Submissions:\r\n\r\n* [x] Contributions should target the `dev` branch. Did you create your branch from `dev`?\r\n* [x] Have you followed the guidelines in our Contributing document?\r\n* [x] Have you checked to ensure there aren't other open [Pull Requests](../../../pulls) for the same update/change?\r\n\r\n<!-- You can erase any parts of this template not applicable to your Pull Request. -->\r\n\r\n### New Feature Submissions:\r\n\r\n1. [x] Does your submission pass tests?\r\n2. [x] Have you formatted your code locally using `cargo +nightly fmt --all` command prior to submission?\r\n3. [x] Have you checked your code using `cargo clippy --all --all-features` command?",
                "created_at": "2023-10-26T16:14:20Z",
                "updated_at": "2023-10-27T09:11:26Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "b00e1567458ae03f30dfe6548f1aafdd74960ca4",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": true,
                "commits_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/commits",
                "review_comments_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/comments",
                "review_comment_url": "https://api.github.com/repos/qdrant/qdrant/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/qdrant/qdrant/issues/2881/comments",
                "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                "head": {
                    "label": "qdrant:shard-transfer-switch-states",
                    "ref": "shard-transfer-switch-states",
                    "sha": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                    "user": {
                        "login": "qdrant",
                        "id": 73504361,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                        "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/qdrant",
                        "html_url": "https://github.com/qdrant",
                        "followers_url": "https://api.github.com/users/qdrant/followers",
                        "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                        "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                        "organizations_url": "https://api.github.com/users/qdrant/orgs",
                        "repos_url": "https://api.github.com/users/qdrant/repos",
                        "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/qdrant/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 268163609,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyNjgxNjM2MDk=",
                        "name": "qdrant",
                        "full_name": "qdrant/qdrant",
                        "private": false,
                        "owner": {
                            "login": "qdrant",
                            "id": 73504361,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/qdrant",
                            "html_url": "https://github.com/qdrant",
                            "followers_url": "https://api.github.com/users/qdrant/followers",
                            "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                            "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                            "organizations_url": "https://api.github.com/users/qdrant/orgs",
                            "repos_url": "https://api.github.com/users/qdrant/repos",
                            "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/qdrant/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/qdrant/qdrant",
                        "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                        "fork": false,
                        "url": "https://api.github.com/repos/qdrant/qdrant",
                        "forks_url": "https://api.github.com/repos/qdrant/qdrant/forks",
                        "keys_url": "https://api.github.com/repos/qdrant/qdrant/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/qdrant/qdrant/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/qdrant/qdrant/teams",
                        "hooks_url": "https://api.github.com/repos/qdrant/qdrant/hooks",
                        "issue_events_url": "https://api.github.com/repos/qdrant/qdrant/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/qdrant/qdrant/events",
                        "assignees_url": "https://api.github.com/repos/qdrant/qdrant/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/qdrant/qdrant/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/qdrant/qdrant/tags",
                        "blobs_url": "https://api.github.com/repos/qdrant/qdrant/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/qdrant/qdrant/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/qdrant/qdrant/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/qdrant/qdrant/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/qdrant/qdrant/languages",
                        "stargazers_url": "https://api.github.com/repos/qdrant/qdrant/stargazers",
                        "contributors_url": "https://api.github.com/repos/qdrant/qdrant/contributors",
                        "subscribers_url": "https://api.github.com/repos/qdrant/qdrant/subscribers",
                        "subscription_url": "https://api.github.com/repos/qdrant/qdrant/subscription",
                        "commits_url": "https://api.github.com/repos/qdrant/qdrant/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/qdrant/qdrant/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/qdrant/qdrant/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/qdrant/qdrant/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/qdrant/qdrant/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/qdrant/qdrant/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/qdrant/qdrant/merges",
                        "archive_url": "https://api.github.com/repos/qdrant/qdrant/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/qdrant/qdrant/downloads",
                        "issues_url": "https://api.github.com/repos/qdrant/qdrant/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/qdrant/qdrant/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/qdrant/qdrant/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/qdrant/qdrant/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/qdrant/qdrant/labels{/name}",
                        "releases_url": "https://api.github.com/repos/qdrant/qdrant/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/qdrant/qdrant/deployments",
                        "created_at": "2020-05-30T21:37:01Z",
                        "updated_at": "2023-10-27T07:44:43Z",
                        "pushed_at": "2023-10-27T08:37:35Z",
                        "git_url": "git://github.com/qdrant/qdrant.git",
                        "ssh_url": "git@github.com:qdrant/qdrant.git",
                        "clone_url": "https://github.com/qdrant/qdrant.git",
                        "svn_url": "https://github.com/qdrant/qdrant",
                        "homepage": "https://qdrant.tech",
                        "size": 14675,
                        "stargazers_count": 13413,
                        "watchers_count": 13413,
                        "language": "Rust",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 777,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 182,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "approximate-nearest-neighbor-search",
                            "embeddings-similarity",
                            "hacktoberfest",
                            "hnsw",
                            "image-search",
                            "knn-algorithm",
                            "machine-learning",
                            "matching",
                            "mlops",
                            "nearest-neighbor-search",
                            "neural-network",
                            "neural-search",
                            "recommender-system",
                            "search",
                            "search-engine",
                            "search-engines",
                            "similarity-search",
                            "vector-database",
                            "vector-search",
                            "vector-search-engine"
                        ],
                        "visibility": "public",
                        "forks": 777,
                        "open_issues": 182,
                        "watchers": 13413,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "qdrant:add-shard-transfer-snapshot-stubs",
                    "ref": "add-shard-transfer-snapshot-stubs",
                    "sha": "3f42b3427e3efd00b93f318baca090ec1eb1697d",
                    "user": {
                        "login": "qdrant",
                        "id": 73504361,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                        "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/qdrant",
                        "html_url": "https://github.com/qdrant",
                        "followers_url": "https://api.github.com/users/qdrant/followers",
                        "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                        "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                        "organizations_url": "https://api.github.com/users/qdrant/orgs",
                        "repos_url": "https://api.github.com/users/qdrant/repos",
                        "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/qdrant/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 268163609,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyNjgxNjM2MDk=",
                        "name": "qdrant",
                        "full_name": "qdrant/qdrant",
                        "private": false,
                        "owner": {
                            "login": "qdrant",
                            "id": 73504361,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/qdrant",
                            "html_url": "https://github.com/qdrant",
                            "followers_url": "https://api.github.com/users/qdrant/followers",
                            "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                            "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                            "organizations_url": "https://api.github.com/users/qdrant/orgs",
                            "repos_url": "https://api.github.com/users/qdrant/repos",
                            "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/qdrant/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/qdrant/qdrant",
                        "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                        "fork": false,
                        "url": "https://api.github.com/repos/qdrant/qdrant",
                        "forks_url": "https://api.github.com/repos/qdrant/qdrant/forks",
                        "keys_url": "https://api.github.com/repos/qdrant/qdrant/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/qdrant/qdrant/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/qdrant/qdrant/teams",
                        "hooks_url": "https://api.github.com/repos/qdrant/qdrant/hooks",
                        "issue_events_url": "https://api.github.com/repos/qdrant/qdrant/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/qdrant/qdrant/events",
                        "assignees_url": "https://api.github.com/repos/qdrant/qdrant/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/qdrant/qdrant/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/qdrant/qdrant/tags",
                        "blobs_url": "https://api.github.com/repos/qdrant/qdrant/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/qdrant/qdrant/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/qdrant/qdrant/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/qdrant/qdrant/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/qdrant/qdrant/languages",
                        "stargazers_url": "https://api.github.com/repos/qdrant/qdrant/stargazers",
                        "contributors_url": "https://api.github.com/repos/qdrant/qdrant/contributors",
                        "subscribers_url": "https://api.github.com/repos/qdrant/qdrant/subscribers",
                        "subscription_url": "https://api.github.com/repos/qdrant/qdrant/subscription",
                        "commits_url": "https://api.github.com/repos/qdrant/qdrant/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/qdrant/qdrant/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/qdrant/qdrant/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/qdrant/qdrant/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/qdrant/qdrant/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/qdrant/qdrant/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/qdrant/qdrant/merges",
                        "archive_url": "https://api.github.com/repos/qdrant/qdrant/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/qdrant/qdrant/downloads",
                        "issues_url": "https://api.github.com/repos/qdrant/qdrant/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/qdrant/qdrant/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/qdrant/qdrant/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/qdrant/qdrant/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/qdrant/qdrant/labels{/name}",
                        "releases_url": "https://api.github.com/repos/qdrant/qdrant/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/qdrant/qdrant/deployments",
                        "created_at": "2020-05-30T21:37:01Z",
                        "updated_at": "2023-10-27T07:44:43Z",
                        "pushed_at": "2023-10-27T08:37:35Z",
                        "git_url": "git://github.com/qdrant/qdrant.git",
                        "ssh_url": "git@github.com:qdrant/qdrant.git",
                        "clone_url": "https://github.com/qdrant/qdrant.git",
                        "svn_url": "https://github.com/qdrant/qdrant",
                        "homepage": "https://qdrant.tech",
                        "size": 14675,
                        "stargazers_count": 13413,
                        "watchers_count": 13413,
                        "language": "Rust",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 777,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 182,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "approximate-nearest-neighbor-search",
                            "embeddings-similarity",
                            "hacktoberfest",
                            "hnsw",
                            "image-search",
                            "knn-algorithm",
                            "machine-learning",
                            "matching",
                            "mlops",
                            "nearest-neighbor-search",
                            "neural-network",
                            "neural-search",
                            "recommender-system",
                            "search",
                            "search-engine",
                            "search-engines",
                            "similarity-search",
                            "vector-database",
                            "vector-search",
                            "vector-search-engine"
                        ],
                        "visibility": "public",
                        "forks": 777,
                        "open_issues": 182,
                        "watchers": 13413,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881"
                    },
                    "html": {
                        "href": "https://github.com/qdrant/qdrant/pull/2881"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/issues/2881"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/issues/2881/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/statuses/56a9a294c8d01124d6b2d611e4ff9156dfea809b"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T09:08:19Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32893625296",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 856222,
            "login": "timvisee",
            "display_login": "timvisee",
            "gravatar_id": "",
            "url": "https://api.github.com/users/timvisee",
            "avatar_url": "https://avatars.githubusercontent.com/u/856222?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/qdrant/qdrant/pulls/comments/1374292463",
                "pull_request_review_id": 1701334330,
                "id": 1374292463,
                "node_id": "PRRC_kwDOD_vaGc5R6gnv",
                "diff_hunk": "@@ -315,6 +316,28 @@ impl TableOfContent {\n                 )?;\n                 collection.finish_shard_transfer(transfer).await?;\n             }\n+            ShardTransferOperations::SnapshotRecovered(transfer) => {\n+                // Validate transfer exists to prevent double handling\n+                shard_transfer::validate_transfer_exists(\n+                    &transfer,\n+                    &collection.state().await.transfers,\n+                )?;\n+\n+                // Set shard state from `PartialSnapshot` to `Partial`\n+                let operation = SetShardReplicaState {\n+                    collection_name: collection_id,\n+                    shard_id: transfer.shard_id,\n+                    peer_id: transfer.to,\n+                    state: ReplicaState::Partial,\n+                    from_state: Some(ReplicaState::PartialSnapshot),\n+                };\n+                log::debug!(\n+                    \"Set shard replica state from {:?} to {:?} after snapshot recovery\",\n+                    ReplicaState::PartialSnapshot,\n+                    ReplicaState::Partial,\n+                );\n+                self.set_shard_replica_state(operation).await?;\n+            }",
                "path": "lib/storage/src/content_manager/toc/collection_meta_ops.rs",
                "commit_id": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                "original_commit_id": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                "user": {
                    "login": "timvisee",
                    "id": 856222,
                    "node_id": "MDQ6VXNlcjg1NjIyMg==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/856222?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/timvisee",
                    "html_url": "https://github.com/timvisee",
                    "followers_url": "https://api.github.com/users/timvisee/followers",
                    "following_url": "https://api.github.com/users/timvisee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/timvisee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/timvisee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/timvisee/subscriptions",
                    "organizations_url": "https://api.github.com/users/timvisee/orgs",
                    "repos_url": "https://api.github.com/users/timvisee/repos",
                    "events_url": "https://api.github.com/users/timvisee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/timvisee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Implementation of consensus operation:\r\n\r\n- assert a transfer is still active\r\n- set shard replica state from `PartialSnapshot` to `Partial`",
                "created_at": "2023-10-27T09:09:54Z",
                "updated_at": "2023-10-27T09:11:26Z",
                "html_url": "https://github.com/qdrant/qdrant/pull/2881#discussion_r1374292463",
                "pull_request_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881",
                "author_association": "MEMBER",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/comments/1374292463"
                    },
                    "html": {
                        "href": "https://github.com/qdrant/qdrant/pull/2881#discussion_r1374292463"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/qdrant/qdrant/pulls/comments/1374292463/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": 319,
                "original_start_line": 319,
                "start_side": "RIGHT",
                "line": 340,
                "original_line": 340,
                "side": "RIGHT",
                "original_position": 33,
                "position": 33,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881",
                "id": 1575163698,
                "node_id": "PR_kwDOD_vaGc5d4xcy",
                "html_url": "https://github.com/qdrant/qdrant/pull/2881",
                "diff_url": "https://github.com/qdrant/qdrant/pull/2881.diff",
                "patch_url": "https://github.com/qdrant/qdrant/pull/2881.patch",
                "issue_url": "https://api.github.com/repos/qdrant/qdrant/issues/2881",
                "number": 2881,
                "state": "open",
                "locked": false,
                "title": "Set `(Partial)Snapshot` states for shard snapshot transfer through consensus",
                "user": {
                    "login": "timvisee",
                    "id": 856222,
                    "node_id": "MDQ6VXNlcjg1NjIyMg==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/856222?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/timvisee",
                    "html_url": "https://github.com/timvisee",
                    "followers_url": "https://api.github.com/users/timvisee/followers",
                    "following_url": "https://api.github.com/users/timvisee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/timvisee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/timvisee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/timvisee/subscriptions",
                    "organizations_url": "https://api.github.com/users/timvisee/orgs",
                    "repos_url": "https://api.github.com/users/timvisee/repos",
                    "events_url": "https://api.github.com/users/timvisee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/timvisee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Tracked in https://github.com/qdrant/qdrant/issues/2432.\r\n\r\nMerges into https://github.com/qdrant/qdrant/pull/2467.\r\n\r\nThe three most important things this PR does are:\r\n\r\n- When starting a shard transfer, set the target shard into `PartialSnapshot`.\r\n- Add `ShardTransferOperations::SnapshotRecovered` operation to consensus\r\n  We propose this operation to consensus after the shard has been recovered on the remote. The consensus operation ensures the transfer is still active, and sets the shard from `PartialSnapshot` into `Partial`.\r\n  This operation is confirmed and retried up to 3 times if consensus rejected it.\r\n- Consensus is synchronized explicitly on all nodes to ensure all reached the `Partial` state\r\n\r\nThis finalizes the steps required for setting `PartialSnapshot` and `Partial` states, and synchronizing nodes.\r\n\r\nAlong with that this PR reworks the snapshot transfer function a bit to make it a lot simpler. I've also added extensive documentation to the function to explain the whole transfer process step by step.\r\n\r\nI've tested all these changes manually.\r\n\r\n### All Submissions:\r\n\r\n* [x] Contributions should target the `dev` branch. Did you create your branch from `dev`?\r\n* [x] Have you followed the guidelines in our Contributing document?\r\n* [x] Have you checked to ensure there aren't other open [Pull Requests](../../../pulls) for the same update/change?\r\n\r\n<!-- You can erase any parts of this template not applicable to your Pull Request. -->\r\n\r\n### New Feature Submissions:\r\n\r\n1. [x] Does your submission pass tests?\r\n2. [x] Have you formatted your code locally using `cargo +nightly fmt --all` command prior to submission?\r\n3. [x] Have you checked your code using `cargo clippy --all --all-features` command?",
                "created_at": "2023-10-26T16:14:20Z",
                "updated_at": "2023-10-27T09:11:26Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "b00e1567458ae03f30dfe6548f1aafdd74960ca4",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": true,
                "commits_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/commits",
                "review_comments_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/comments",
                "review_comment_url": "https://api.github.com/repos/qdrant/qdrant/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/qdrant/qdrant/issues/2881/comments",
                "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                "head": {
                    "label": "qdrant:shard-transfer-switch-states",
                    "ref": "shard-transfer-switch-states",
                    "sha": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                    "user": {
                        "login": "qdrant",
                        "id": 73504361,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                        "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/qdrant",
                        "html_url": "https://github.com/qdrant",
                        "followers_url": "https://api.github.com/users/qdrant/followers",
                        "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                        "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                        "organizations_url": "https://api.github.com/users/qdrant/orgs",
                        "repos_url": "https://api.github.com/users/qdrant/repos",
                        "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/qdrant/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 268163609,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyNjgxNjM2MDk=",
                        "name": "qdrant",
                        "full_name": "qdrant/qdrant",
                        "private": false,
                        "owner": {
                            "login": "qdrant",
                            "id": 73504361,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/qdrant",
                            "html_url": "https://github.com/qdrant",
                            "followers_url": "https://api.github.com/users/qdrant/followers",
                            "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                            "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                            "organizations_url": "https://api.github.com/users/qdrant/orgs",
                            "repos_url": "https://api.github.com/users/qdrant/repos",
                            "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/qdrant/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/qdrant/qdrant",
                        "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                        "fork": false,
                        "url": "https://api.github.com/repos/qdrant/qdrant",
                        "forks_url": "https://api.github.com/repos/qdrant/qdrant/forks",
                        "keys_url": "https://api.github.com/repos/qdrant/qdrant/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/qdrant/qdrant/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/qdrant/qdrant/teams",
                        "hooks_url": "https://api.github.com/repos/qdrant/qdrant/hooks",
                        "issue_events_url": "https://api.github.com/repos/qdrant/qdrant/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/qdrant/qdrant/events",
                        "assignees_url": "https://api.github.com/repos/qdrant/qdrant/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/qdrant/qdrant/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/qdrant/qdrant/tags",
                        "blobs_url": "https://api.github.com/repos/qdrant/qdrant/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/qdrant/qdrant/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/qdrant/qdrant/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/qdrant/qdrant/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/qdrant/qdrant/languages",
                        "stargazers_url": "https://api.github.com/repos/qdrant/qdrant/stargazers",
                        "contributors_url": "https://api.github.com/repos/qdrant/qdrant/contributors",
                        "subscribers_url": "https://api.github.com/repos/qdrant/qdrant/subscribers",
                        "subscription_url": "https://api.github.com/repos/qdrant/qdrant/subscription",
                        "commits_url": "https://api.github.com/repos/qdrant/qdrant/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/qdrant/qdrant/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/qdrant/qdrant/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/qdrant/qdrant/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/qdrant/qdrant/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/qdrant/qdrant/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/qdrant/qdrant/merges",
                        "archive_url": "https://api.github.com/repos/qdrant/qdrant/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/qdrant/qdrant/downloads",
                        "issues_url": "https://api.github.com/repos/qdrant/qdrant/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/qdrant/qdrant/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/qdrant/qdrant/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/qdrant/qdrant/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/qdrant/qdrant/labels{/name}",
                        "releases_url": "https://api.github.com/repos/qdrant/qdrant/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/qdrant/qdrant/deployments",
                        "created_at": "2020-05-30T21:37:01Z",
                        "updated_at": "2023-10-27T07:44:43Z",
                        "pushed_at": "2023-10-27T08:37:35Z",
                        "git_url": "git://github.com/qdrant/qdrant.git",
                        "ssh_url": "git@github.com:qdrant/qdrant.git",
                        "clone_url": "https://github.com/qdrant/qdrant.git",
                        "svn_url": "https://github.com/qdrant/qdrant",
                        "homepage": "https://qdrant.tech",
                        "size": 14675,
                        "stargazers_count": 13413,
                        "watchers_count": 13413,
                        "language": "Rust",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 777,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 182,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "approximate-nearest-neighbor-search",
                            "embeddings-similarity",
                            "hacktoberfest",
                            "hnsw",
                            "image-search",
                            "knn-algorithm",
                            "machine-learning",
                            "matching",
                            "mlops",
                            "nearest-neighbor-search",
                            "neural-network",
                            "neural-search",
                            "recommender-system",
                            "search",
                            "search-engine",
                            "search-engines",
                            "similarity-search",
                            "vector-database",
                            "vector-search",
                            "vector-search-engine"
                        ],
                        "visibility": "public",
                        "forks": 777,
                        "open_issues": 182,
                        "watchers": 13413,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "qdrant:add-shard-transfer-snapshot-stubs",
                    "ref": "add-shard-transfer-snapshot-stubs",
                    "sha": "3f42b3427e3efd00b93f318baca090ec1eb1697d",
                    "user": {
                        "login": "qdrant",
                        "id": 73504361,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                        "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/qdrant",
                        "html_url": "https://github.com/qdrant",
                        "followers_url": "https://api.github.com/users/qdrant/followers",
                        "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                        "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                        "organizations_url": "https://api.github.com/users/qdrant/orgs",
                        "repos_url": "https://api.github.com/users/qdrant/repos",
                        "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/qdrant/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 268163609,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyNjgxNjM2MDk=",
                        "name": "qdrant",
                        "full_name": "qdrant/qdrant",
                        "private": false,
                        "owner": {
                            "login": "qdrant",
                            "id": 73504361,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/qdrant",
                            "html_url": "https://github.com/qdrant",
                            "followers_url": "https://api.github.com/users/qdrant/followers",
                            "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                            "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                            "organizations_url": "https://api.github.com/users/qdrant/orgs",
                            "repos_url": "https://api.github.com/users/qdrant/repos",
                            "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/qdrant/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/qdrant/qdrant",
                        "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                        "fork": false,
                        "url": "https://api.github.com/repos/qdrant/qdrant",
                        "forks_url": "https://api.github.com/repos/qdrant/qdrant/forks",
                        "keys_url": "https://api.github.com/repos/qdrant/qdrant/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/qdrant/qdrant/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/qdrant/qdrant/teams",
                        "hooks_url": "https://api.github.com/repos/qdrant/qdrant/hooks",
                        "issue_events_url": "https://api.github.com/repos/qdrant/qdrant/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/qdrant/qdrant/events",
                        "assignees_url": "https://api.github.com/repos/qdrant/qdrant/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/qdrant/qdrant/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/qdrant/qdrant/tags",
                        "blobs_url": "https://api.github.com/repos/qdrant/qdrant/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/qdrant/qdrant/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/qdrant/qdrant/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/qdrant/qdrant/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/qdrant/qdrant/languages",
                        "stargazers_url": "https://api.github.com/repos/qdrant/qdrant/stargazers",
                        "contributors_url": "https://api.github.com/repos/qdrant/qdrant/contributors",
                        "subscribers_url": "https://api.github.com/repos/qdrant/qdrant/subscribers",
                        "subscription_url": "https://api.github.com/repos/qdrant/qdrant/subscription",
                        "commits_url": "https://api.github.com/repos/qdrant/qdrant/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/qdrant/qdrant/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/qdrant/qdrant/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/qdrant/qdrant/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/qdrant/qdrant/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/qdrant/qdrant/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/qdrant/qdrant/merges",
                        "archive_url": "https://api.github.com/repos/qdrant/qdrant/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/qdrant/qdrant/downloads",
                        "issues_url": "https://api.github.com/repos/qdrant/qdrant/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/qdrant/qdrant/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/qdrant/qdrant/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/qdrant/qdrant/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/qdrant/qdrant/labels{/name}",
                        "releases_url": "https://api.github.com/repos/qdrant/qdrant/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/qdrant/qdrant/deployments",
                        "created_at": "2020-05-30T21:37:01Z",
                        "updated_at": "2023-10-27T07:44:43Z",
                        "pushed_at": "2023-10-27T08:37:35Z",
                        "git_url": "git://github.com/qdrant/qdrant.git",
                        "ssh_url": "git@github.com:qdrant/qdrant.git",
                        "clone_url": "https://github.com/qdrant/qdrant.git",
                        "svn_url": "https://github.com/qdrant/qdrant",
                        "homepage": "https://qdrant.tech",
                        "size": 14675,
                        "stargazers_count": 13413,
                        "watchers_count": 13413,
                        "language": "Rust",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 777,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 182,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "approximate-nearest-neighbor-search",
                            "embeddings-similarity",
                            "hacktoberfest",
                            "hnsw",
                            "image-search",
                            "knn-algorithm",
                            "machine-learning",
                            "matching",
                            "mlops",
                            "nearest-neighbor-search",
                            "neural-network",
                            "neural-search",
                            "recommender-system",
                            "search",
                            "search-engine",
                            "search-engines",
                            "similarity-search",
                            "vector-database",
                            "vector-search",
                            "vector-search-engine"
                        ],
                        "visibility": "public",
                        "forks": 777,
                        "open_issues": 182,
                        "watchers": 13413,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881"
                    },
                    "html": {
                        "href": "https://github.com/qdrant/qdrant/pull/2881"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/issues/2881"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/issues/2881/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/statuses/56a9a294c8d01124d6b2d611e4ff9156dfea809b"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T09:09:54Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32893625246",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 856222,
            "login": "timvisee",
            "display_login": "timvisee",
            "gravatar_id": "",
            "url": "https://api.github.com/users/timvisee",
            "avatar_url": "https://avatars.githubusercontent.com/u/856222?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1701334330,
                "node_id": "PRR_kwDOD_vaGc5laE06",
                "user": {
                    "login": "timvisee",
                    "id": 856222,
                    "node_id": "MDQ6VXNlcjg1NjIyMg==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/856222?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/timvisee",
                    "html_url": "https://github.com/timvisee",
                    "followers_url": "https://api.github.com/users/timvisee/followers",
                    "following_url": "https://api.github.com/users/timvisee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/timvisee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/timvisee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/timvisee/subscriptions",
                    "organizations_url": "https://api.github.com/users/timvisee/orgs",
                    "repos_url": "https://api.github.com/users/timvisee/repos",
                    "events_url": "https://api.github.com/users/timvisee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/timvisee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "",
                "commit_id": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                "submitted_at": "2023-10-27T09:11:26Z",
                "state": "commented",
                "html_url": "https://github.com/qdrant/qdrant/pull/2881#pullrequestreview-1701334330",
                "pull_request_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881",
                "author_association": "MEMBER",
                "_links": {
                    "html": {
                        "href": "https://github.com/qdrant/qdrant/pull/2881#pullrequestreview-1701334330"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881",
                "id": 1575163698,
                "node_id": "PR_kwDOD_vaGc5d4xcy",
                "html_url": "https://github.com/qdrant/qdrant/pull/2881",
                "diff_url": "https://github.com/qdrant/qdrant/pull/2881.diff",
                "patch_url": "https://github.com/qdrant/qdrant/pull/2881.patch",
                "issue_url": "https://api.github.com/repos/qdrant/qdrant/issues/2881",
                "number": 2881,
                "state": "open",
                "locked": false,
                "title": "Set `(Partial)Snapshot` states for shard snapshot transfer through consensus",
                "user": {
                    "login": "timvisee",
                    "id": 856222,
                    "node_id": "MDQ6VXNlcjg1NjIyMg==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/856222?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/timvisee",
                    "html_url": "https://github.com/timvisee",
                    "followers_url": "https://api.github.com/users/timvisee/followers",
                    "following_url": "https://api.github.com/users/timvisee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/timvisee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/timvisee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/timvisee/subscriptions",
                    "organizations_url": "https://api.github.com/users/timvisee/orgs",
                    "repos_url": "https://api.github.com/users/timvisee/repos",
                    "events_url": "https://api.github.com/users/timvisee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/timvisee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Tracked in https://github.com/qdrant/qdrant/issues/2432.\r\n\r\nMerges into https://github.com/qdrant/qdrant/pull/2467.\r\n\r\nThe three most important things this PR does are:\r\n\r\n- When starting a shard transfer, set the target shard into `PartialSnapshot`.\r\n- Add `ShardTransferOperations::SnapshotRecovered` operation to consensus\r\n  We propose this operation to consensus after the shard has been recovered on the remote. The consensus operation ensures the transfer is still active, and sets the shard from `PartialSnapshot` into `Partial`.\r\n  This operation is confirmed and retried up to 3 times if consensus rejected it.\r\n- Consensus is synchronized explicitly on all nodes to ensure all reached the `Partial` state\r\n\r\nThis finalizes the steps required for setting `PartialSnapshot` and `Partial` states, and synchronizing nodes.\r\n\r\nAlong with that this PR reworks the snapshot transfer function a bit to make it a lot simpler. I've also added extensive documentation to the function to explain the whole transfer process step by step.\r\n\r\nI've tested all these changes manually.\r\n\r\n### All Submissions:\r\n\r\n* [x] Contributions should target the `dev` branch. Did you create your branch from `dev`?\r\n* [x] Have you followed the guidelines in our Contributing document?\r\n* [x] Have you checked to ensure there aren't other open [Pull Requests](../../../pulls) for the same update/change?\r\n\r\n<!-- You can erase any parts of this template not applicable to your Pull Request. -->\r\n\r\n### New Feature Submissions:\r\n\r\n1. [x] Does your submission pass tests?\r\n2. [x] Have you formatted your code locally using `cargo +nightly fmt --all` command prior to submission?\r\n3. [x] Have you checked your code using `cargo clippy --all --all-features` command?",
                "created_at": "2023-10-26T16:14:20Z",
                "updated_at": "2023-10-27T09:11:26Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "b00e1567458ae03f30dfe6548f1aafdd74960ca4",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": true,
                "commits_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/commits",
                "review_comments_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/comments",
                "review_comment_url": "https://api.github.com/repos/qdrant/qdrant/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/qdrant/qdrant/issues/2881/comments",
                "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                "head": {
                    "label": "qdrant:shard-transfer-switch-states",
                    "ref": "shard-transfer-switch-states",
                    "sha": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                    "user": {
                        "login": "qdrant",
                        "id": 73504361,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                        "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/qdrant",
                        "html_url": "https://github.com/qdrant",
                        "followers_url": "https://api.github.com/users/qdrant/followers",
                        "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                        "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                        "organizations_url": "https://api.github.com/users/qdrant/orgs",
                        "repos_url": "https://api.github.com/users/qdrant/repos",
                        "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/qdrant/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 268163609,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyNjgxNjM2MDk=",
                        "name": "qdrant",
                        "full_name": "qdrant/qdrant",
                        "private": false,
                        "owner": {
                            "login": "qdrant",
                            "id": 73504361,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/qdrant",
                            "html_url": "https://github.com/qdrant",
                            "followers_url": "https://api.github.com/users/qdrant/followers",
                            "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                            "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                            "organizations_url": "https://api.github.com/users/qdrant/orgs",
                            "repos_url": "https://api.github.com/users/qdrant/repos",
                            "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/qdrant/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/qdrant/qdrant",
                        "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                        "fork": false,
                        "url": "https://api.github.com/repos/qdrant/qdrant",
                        "forks_url": "https://api.github.com/repos/qdrant/qdrant/forks",
                        "keys_url": "https://api.github.com/repos/qdrant/qdrant/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/qdrant/qdrant/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/qdrant/qdrant/teams",
                        "hooks_url": "https://api.github.com/repos/qdrant/qdrant/hooks",
                        "issue_events_url": "https://api.github.com/repos/qdrant/qdrant/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/qdrant/qdrant/events",
                        "assignees_url": "https://api.github.com/repos/qdrant/qdrant/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/qdrant/qdrant/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/qdrant/qdrant/tags",
                        "blobs_url": "https://api.github.com/repos/qdrant/qdrant/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/qdrant/qdrant/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/qdrant/qdrant/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/qdrant/qdrant/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/qdrant/qdrant/languages",
                        "stargazers_url": "https://api.github.com/repos/qdrant/qdrant/stargazers",
                        "contributors_url": "https://api.github.com/repos/qdrant/qdrant/contributors",
                        "subscribers_url": "https://api.github.com/repos/qdrant/qdrant/subscribers",
                        "subscription_url": "https://api.github.com/repos/qdrant/qdrant/subscription",
                        "commits_url": "https://api.github.com/repos/qdrant/qdrant/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/qdrant/qdrant/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/qdrant/qdrant/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/qdrant/qdrant/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/qdrant/qdrant/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/qdrant/qdrant/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/qdrant/qdrant/merges",
                        "archive_url": "https://api.github.com/repos/qdrant/qdrant/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/qdrant/qdrant/downloads",
                        "issues_url": "https://api.github.com/repos/qdrant/qdrant/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/qdrant/qdrant/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/qdrant/qdrant/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/qdrant/qdrant/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/qdrant/qdrant/labels{/name}",
                        "releases_url": "https://api.github.com/repos/qdrant/qdrant/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/qdrant/qdrant/deployments",
                        "created_at": "2020-05-30T21:37:01Z",
                        "updated_at": "2023-10-27T07:44:43Z",
                        "pushed_at": "2023-10-27T08:37:35Z",
                        "git_url": "git://github.com/qdrant/qdrant.git",
                        "ssh_url": "git@github.com:qdrant/qdrant.git",
                        "clone_url": "https://github.com/qdrant/qdrant.git",
                        "svn_url": "https://github.com/qdrant/qdrant",
                        "homepage": "https://qdrant.tech",
                        "size": 14675,
                        "stargazers_count": 13413,
                        "watchers_count": 13413,
                        "language": "Rust",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 777,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 182,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "approximate-nearest-neighbor-search",
                            "embeddings-similarity",
                            "hacktoberfest",
                            "hnsw",
                            "image-search",
                            "knn-algorithm",
                            "machine-learning",
                            "matching",
                            "mlops",
                            "nearest-neighbor-search",
                            "neural-network",
                            "neural-search",
                            "recommender-system",
                            "search",
                            "search-engine",
                            "search-engines",
                            "similarity-search",
                            "vector-database",
                            "vector-search",
                            "vector-search-engine"
                        ],
                        "visibility": "public",
                        "forks": 777,
                        "open_issues": 182,
                        "watchers": 13413,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "qdrant:add-shard-transfer-snapshot-stubs",
                    "ref": "add-shard-transfer-snapshot-stubs",
                    "sha": "3f42b3427e3efd00b93f318baca090ec1eb1697d",
                    "user": {
                        "login": "qdrant",
                        "id": 73504361,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                        "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/qdrant",
                        "html_url": "https://github.com/qdrant",
                        "followers_url": "https://api.github.com/users/qdrant/followers",
                        "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                        "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                        "organizations_url": "https://api.github.com/users/qdrant/orgs",
                        "repos_url": "https://api.github.com/users/qdrant/repos",
                        "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/qdrant/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 268163609,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyNjgxNjM2MDk=",
                        "name": "qdrant",
                        "full_name": "qdrant/qdrant",
                        "private": false,
                        "owner": {
                            "login": "qdrant",
                            "id": 73504361,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/qdrant",
                            "html_url": "https://github.com/qdrant",
                            "followers_url": "https://api.github.com/users/qdrant/followers",
                            "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                            "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                            "organizations_url": "https://api.github.com/users/qdrant/orgs",
                            "repos_url": "https://api.github.com/users/qdrant/repos",
                            "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/qdrant/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/qdrant/qdrant",
                        "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                        "fork": false,
                        "url": "https://api.github.com/repos/qdrant/qdrant",
                        "forks_url": "https://api.github.com/repos/qdrant/qdrant/forks",
                        "keys_url": "https://api.github.com/repos/qdrant/qdrant/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/qdrant/qdrant/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/qdrant/qdrant/teams",
                        "hooks_url": "https://api.github.com/repos/qdrant/qdrant/hooks",
                        "issue_events_url": "https://api.github.com/repos/qdrant/qdrant/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/qdrant/qdrant/events",
                        "assignees_url": "https://api.github.com/repos/qdrant/qdrant/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/qdrant/qdrant/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/qdrant/qdrant/tags",
                        "blobs_url": "https://api.github.com/repos/qdrant/qdrant/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/qdrant/qdrant/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/qdrant/qdrant/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/qdrant/qdrant/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/qdrant/qdrant/languages",
                        "stargazers_url": "https://api.github.com/repos/qdrant/qdrant/stargazers",
                        "contributors_url": "https://api.github.com/repos/qdrant/qdrant/contributors",
                        "subscribers_url": "https://api.github.com/repos/qdrant/qdrant/subscribers",
                        "subscription_url": "https://api.github.com/repos/qdrant/qdrant/subscription",
                        "commits_url": "https://api.github.com/repos/qdrant/qdrant/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/qdrant/qdrant/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/qdrant/qdrant/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/qdrant/qdrant/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/qdrant/qdrant/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/qdrant/qdrant/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/qdrant/qdrant/merges",
                        "archive_url": "https://api.github.com/repos/qdrant/qdrant/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/qdrant/qdrant/downloads",
                        "issues_url": "https://api.github.com/repos/qdrant/qdrant/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/qdrant/qdrant/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/qdrant/qdrant/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/qdrant/qdrant/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/qdrant/qdrant/labels{/name}",
                        "releases_url": "https://api.github.com/repos/qdrant/qdrant/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/qdrant/qdrant/deployments",
                        "created_at": "2020-05-30T21:37:01Z",
                        "updated_at": "2023-10-27T07:44:43Z",
                        "pushed_at": "2023-10-27T08:37:35Z",
                        "git_url": "git://github.com/qdrant/qdrant.git",
                        "ssh_url": "git@github.com:qdrant/qdrant.git",
                        "clone_url": "https://github.com/qdrant/qdrant.git",
                        "svn_url": "https://github.com/qdrant/qdrant",
                        "homepage": "https://qdrant.tech",
                        "size": 14675,
                        "stargazers_count": 13413,
                        "watchers_count": 13413,
                        "language": "Rust",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 777,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 182,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "approximate-nearest-neighbor-search",
                            "embeddings-similarity",
                            "hacktoberfest",
                            "hnsw",
                            "image-search",
                            "knn-algorithm",
                            "machine-learning",
                            "matching",
                            "mlops",
                            "nearest-neighbor-search",
                            "neural-network",
                            "neural-search",
                            "recommender-system",
                            "search",
                            "search-engine",
                            "search-engines",
                            "similarity-search",
                            "vector-database",
                            "vector-search",
                            "vector-search-engine"
                        ],
                        "visibility": "public",
                        "forks": 777,
                        "open_issues": 182,
                        "watchers": 13413,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881"
                    },
                    "html": {
                        "href": "https://github.com/qdrant/qdrant/pull/2881"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/issues/2881"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/issues/2881/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/statuses/56a9a294c8d01124d6b2d611e4ff9156dfea809b"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T09:11:27Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32893625212",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 856222,
            "login": "timvisee",
            "display_login": "timvisee",
            "gravatar_id": "",
            "url": "https://api.github.com/users/timvisee",
            "avatar_url": "https://avatars.githubusercontent.com/u/856222?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1701334330,
                "node_id": "PRR_kwDOD_vaGc5laE06",
                "user": {
                    "login": "timvisee",
                    "id": 856222,
                    "node_id": "MDQ6VXNlcjg1NjIyMg==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/856222?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/timvisee",
                    "html_url": "https://github.com/timvisee",
                    "followers_url": "https://api.github.com/users/timvisee/followers",
                    "following_url": "https://api.github.com/users/timvisee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/timvisee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/timvisee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/timvisee/subscriptions",
                    "organizations_url": "https://api.github.com/users/timvisee/orgs",
                    "repos_url": "https://api.github.com/users/timvisee/repos",
                    "events_url": "https://api.github.com/users/timvisee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/timvisee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "",
                "commit_id": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                "submitted_at": "2023-10-27T09:11:26Z",
                "state": "commented",
                "html_url": "https://github.com/qdrant/qdrant/pull/2881#pullrequestreview-1701334330",
                "pull_request_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881",
                "author_association": "MEMBER",
                "_links": {
                    "html": {
                        "href": "https://github.com/qdrant/qdrant/pull/2881#pullrequestreview-1701334330"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881",
                "id": 1575163698,
                "node_id": "PR_kwDOD_vaGc5d4xcy",
                "html_url": "https://github.com/qdrant/qdrant/pull/2881",
                "diff_url": "https://github.com/qdrant/qdrant/pull/2881.diff",
                "patch_url": "https://github.com/qdrant/qdrant/pull/2881.patch",
                "issue_url": "https://api.github.com/repos/qdrant/qdrant/issues/2881",
                "number": 2881,
                "state": "open",
                "locked": false,
                "title": "Set `(Partial)Snapshot` states for shard snapshot transfer through consensus",
                "user": {
                    "login": "timvisee",
                    "id": 856222,
                    "node_id": "MDQ6VXNlcjg1NjIyMg==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/856222?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/timvisee",
                    "html_url": "https://github.com/timvisee",
                    "followers_url": "https://api.github.com/users/timvisee/followers",
                    "following_url": "https://api.github.com/users/timvisee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/timvisee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/timvisee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/timvisee/subscriptions",
                    "organizations_url": "https://api.github.com/users/timvisee/orgs",
                    "repos_url": "https://api.github.com/users/timvisee/repos",
                    "events_url": "https://api.github.com/users/timvisee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/timvisee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Tracked in https://github.com/qdrant/qdrant/issues/2432.\r\n\r\nMerges into https://github.com/qdrant/qdrant/pull/2467.\r\n\r\nThe three most important things this PR does are:\r\n\r\n- When starting a shard transfer, set the target shard into `PartialSnapshot`.\r\n- Add `ShardTransferOperations::SnapshotRecovered` operation to consensus\r\n  We propose this operation to consensus after the shard has been recovered on the remote. The consensus operation ensures the transfer is still active, and sets the shard from `PartialSnapshot` into `Partial`.\r\n  This operation is confirmed and retried up to 3 times if consensus rejected it.\r\n- Consensus is synchronized explicitly on all nodes to ensure all reached the `Partial` state\r\n\r\nThis finalizes the steps required for setting `PartialSnapshot` and `Partial` states, and synchronizing nodes.\r\n\r\nAlong with that this PR reworks the snapshot transfer function a bit to make it a lot simpler. I've also added extensive documentation to the function to explain the whole transfer process step by step.\r\n\r\nI've tested all these changes manually.\r\n\r\n### All Submissions:\r\n\r\n* [x] Contributions should target the `dev` branch. Did you create your branch from `dev`?\r\n* [x] Have you followed the guidelines in our Contributing document?\r\n* [x] Have you checked to ensure there aren't other open [Pull Requests](../../../pulls) for the same update/change?\r\n\r\n<!-- You can erase any parts of this template not applicable to your Pull Request. -->\r\n\r\n### New Feature Submissions:\r\n\r\n1. [x] Does your submission pass tests?\r\n2. [x] Have you formatted your code locally using `cargo +nightly fmt --all` command prior to submission?\r\n3. [x] Have you checked your code using `cargo clippy --all --all-features` command?",
                "created_at": "2023-10-26T16:14:20Z",
                "updated_at": "2023-10-27T09:11:26Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "b00e1567458ae03f30dfe6548f1aafdd74960ca4",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": true,
                "commits_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/commits",
                "review_comments_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/comments",
                "review_comment_url": "https://api.github.com/repos/qdrant/qdrant/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/qdrant/qdrant/issues/2881/comments",
                "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                "head": {
                    "label": "qdrant:shard-transfer-switch-states",
                    "ref": "shard-transfer-switch-states",
                    "sha": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                    "user": {
                        "login": "qdrant",
                        "id": 73504361,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                        "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/qdrant",
                        "html_url": "https://github.com/qdrant",
                        "followers_url": "https://api.github.com/users/qdrant/followers",
                        "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                        "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                        "organizations_url": "https://api.github.com/users/qdrant/orgs",
                        "repos_url": "https://api.github.com/users/qdrant/repos",
                        "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/qdrant/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 268163609,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyNjgxNjM2MDk=",
                        "name": "qdrant",
                        "full_name": "qdrant/qdrant",
                        "private": false,
                        "owner": {
                            "login": "qdrant",
                            "id": 73504361,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/qdrant",
                            "html_url": "https://github.com/qdrant",
                            "followers_url": "https://api.github.com/users/qdrant/followers",
                            "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                            "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                            "organizations_url": "https://api.github.com/users/qdrant/orgs",
                            "repos_url": "https://api.github.com/users/qdrant/repos",
                            "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/qdrant/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/qdrant/qdrant",
                        "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                        "fork": false,
                        "url": "https://api.github.com/repos/qdrant/qdrant",
                        "forks_url": "https://api.github.com/repos/qdrant/qdrant/forks",
                        "keys_url": "https://api.github.com/repos/qdrant/qdrant/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/qdrant/qdrant/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/qdrant/qdrant/teams",
                        "hooks_url": "https://api.github.com/repos/qdrant/qdrant/hooks",
                        "issue_events_url": "https://api.github.com/repos/qdrant/qdrant/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/qdrant/qdrant/events",
                        "assignees_url": "https://api.github.com/repos/qdrant/qdrant/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/qdrant/qdrant/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/qdrant/qdrant/tags",
                        "blobs_url": "https://api.github.com/repos/qdrant/qdrant/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/qdrant/qdrant/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/qdrant/qdrant/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/qdrant/qdrant/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/qdrant/qdrant/languages",
                        "stargazers_url": "https://api.github.com/repos/qdrant/qdrant/stargazers",
                        "contributors_url": "https://api.github.com/repos/qdrant/qdrant/contributors",
                        "subscribers_url": "https://api.github.com/repos/qdrant/qdrant/subscribers",
                        "subscription_url": "https://api.github.com/repos/qdrant/qdrant/subscription",
                        "commits_url": "https://api.github.com/repos/qdrant/qdrant/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/qdrant/qdrant/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/qdrant/qdrant/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/qdrant/qdrant/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/qdrant/qdrant/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/qdrant/qdrant/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/qdrant/qdrant/merges",
                        "archive_url": "https://api.github.com/repos/qdrant/qdrant/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/qdrant/qdrant/downloads",
                        "issues_url": "https://api.github.com/repos/qdrant/qdrant/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/qdrant/qdrant/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/qdrant/qdrant/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/qdrant/qdrant/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/qdrant/qdrant/labels{/name}",
                        "releases_url": "https://api.github.com/repos/qdrant/qdrant/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/qdrant/qdrant/deployments",
                        "created_at": "2020-05-30T21:37:01Z",
                        "updated_at": "2023-10-27T07:44:43Z",
                        "pushed_at": "2023-10-27T08:37:35Z",
                        "git_url": "git://github.com/qdrant/qdrant.git",
                        "ssh_url": "git@github.com:qdrant/qdrant.git",
                        "clone_url": "https://github.com/qdrant/qdrant.git",
                        "svn_url": "https://github.com/qdrant/qdrant",
                        "homepage": "https://qdrant.tech",
                        "size": 14675,
                        "stargazers_count": 13413,
                        "watchers_count": 13413,
                        "language": "Rust",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 777,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 182,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "approximate-nearest-neighbor-search",
                            "embeddings-similarity",
                            "hacktoberfest",
                            "hnsw",
                            "image-search",
                            "knn-algorithm",
                            "machine-learning",
                            "matching",
                            "mlops",
                            "nearest-neighbor-search",
                            "neural-network",
                            "neural-search",
                            "recommender-system",
                            "search",
                            "search-engine",
                            "search-engines",
                            "similarity-search",
                            "vector-database",
                            "vector-search",
                            "vector-search-engine"
                        ],
                        "visibility": "public",
                        "forks": 777,
                        "open_issues": 182,
                        "watchers": 13413,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "qdrant:add-shard-transfer-snapshot-stubs",
                    "ref": "add-shard-transfer-snapshot-stubs",
                    "sha": "3f42b3427e3efd00b93f318baca090ec1eb1697d",
                    "user": {
                        "login": "qdrant",
                        "id": 73504361,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                        "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/qdrant",
                        "html_url": "https://github.com/qdrant",
                        "followers_url": "https://api.github.com/users/qdrant/followers",
                        "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                        "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                        "organizations_url": "https://api.github.com/users/qdrant/orgs",
                        "repos_url": "https://api.github.com/users/qdrant/repos",
                        "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/qdrant/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 268163609,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyNjgxNjM2MDk=",
                        "name": "qdrant",
                        "full_name": "qdrant/qdrant",
                        "private": false,
                        "owner": {
                            "login": "qdrant",
                            "id": 73504361,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/qdrant",
                            "html_url": "https://github.com/qdrant",
                            "followers_url": "https://api.github.com/users/qdrant/followers",
                            "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                            "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                            "organizations_url": "https://api.github.com/users/qdrant/orgs",
                            "repos_url": "https://api.github.com/users/qdrant/repos",
                            "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/qdrant/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/qdrant/qdrant",
                        "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                        "fork": false,
                        "url": "https://api.github.com/repos/qdrant/qdrant",
                        "forks_url": "https://api.github.com/repos/qdrant/qdrant/forks",
                        "keys_url": "https://api.github.com/repos/qdrant/qdrant/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/qdrant/qdrant/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/qdrant/qdrant/teams",
                        "hooks_url": "https://api.github.com/repos/qdrant/qdrant/hooks",
                        "issue_events_url": "https://api.github.com/repos/qdrant/qdrant/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/qdrant/qdrant/events",
                        "assignees_url": "https://api.github.com/repos/qdrant/qdrant/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/qdrant/qdrant/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/qdrant/qdrant/tags",
                        "blobs_url": "https://api.github.com/repos/qdrant/qdrant/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/qdrant/qdrant/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/qdrant/qdrant/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/qdrant/qdrant/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/qdrant/qdrant/languages",
                        "stargazers_url": "https://api.github.com/repos/qdrant/qdrant/stargazers",
                        "contributors_url": "https://api.github.com/repos/qdrant/qdrant/contributors",
                        "subscribers_url": "https://api.github.com/repos/qdrant/qdrant/subscribers",
                        "subscription_url": "https://api.github.com/repos/qdrant/qdrant/subscription",
                        "commits_url": "https://api.github.com/repos/qdrant/qdrant/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/qdrant/qdrant/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/qdrant/qdrant/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/qdrant/qdrant/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/qdrant/qdrant/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/qdrant/qdrant/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/qdrant/qdrant/merges",
                        "archive_url": "https://api.github.com/repos/qdrant/qdrant/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/qdrant/qdrant/downloads",
                        "issues_url": "https://api.github.com/repos/qdrant/qdrant/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/qdrant/qdrant/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/qdrant/qdrant/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/qdrant/qdrant/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/qdrant/qdrant/labels{/name}",
                        "releases_url": "https://api.github.com/repos/qdrant/qdrant/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/qdrant/qdrant/deployments",
                        "created_at": "2020-05-30T21:37:01Z",
                        "updated_at": "2023-10-27T07:44:43Z",
                        "pushed_at": "2023-10-27T08:37:35Z",
                        "git_url": "git://github.com/qdrant/qdrant.git",
                        "ssh_url": "git@github.com:qdrant/qdrant.git",
                        "clone_url": "https://github.com/qdrant/qdrant.git",
                        "svn_url": "https://github.com/qdrant/qdrant",
                        "homepage": "https://qdrant.tech",
                        "size": 14675,
                        "stargazers_count": 13413,
                        "watchers_count": 13413,
                        "language": "Rust",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 777,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 182,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "approximate-nearest-neighbor-search",
                            "embeddings-similarity",
                            "hacktoberfest",
                            "hnsw",
                            "image-search",
                            "knn-algorithm",
                            "machine-learning",
                            "matching",
                            "mlops",
                            "nearest-neighbor-search",
                            "neural-network",
                            "neural-search",
                            "recommender-system",
                            "search",
                            "search-engine",
                            "search-engines",
                            "similarity-search",
                            "vector-database",
                            "vector-search",
                            "vector-search-engine"
                        ],
                        "visibility": "public",
                        "forks": 777,
                        "open_issues": 182,
                        "watchers": 13413,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881"
                    },
                    "html": {
                        "href": "https://github.com/qdrant/qdrant/pull/2881"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/issues/2881"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/issues/2881/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/statuses/56a9a294c8d01124d6b2d611e4ff9156dfea809b"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T09:11:27Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32893517477",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 856222,
            "login": "timvisee",
            "display_login": "timvisee",
            "gravatar_id": "",
            "url": "https://api.github.com/users/timvisee",
            "avatar_url": "https://avatars.githubusercontent.com/u/856222?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/qdrant/qdrant/pulls/comments/1374289481",
                "pull_request_review_id": 1701332740,
                "id": 1374289481,
                "node_id": "PRRC_kwDOD_vaGc5R6f5J",
                "diff_hunk": "@@ -16,6 +27,64 @@ pub trait ShardTransferConsensus: Send + Sync {\n     /// Returns `(commit, term)`.\n     fn consensus_commit_term(&self) -> (u64, u64);\n \n+    /// After snapshot recovery, propose to switch shard to `Partial`\n+    ///\n+    /// This is called after shard snapshot recovery has been completed on the remote. It submits a\n+    /// proposal to consensus to switch the the shard state from `PartialSnapshot` to `Partial`.\n+    ///\n+    /// # Warning\n+    ///\n+    /// This only submits a proposal to consensus. Calling this does not guarantee that consensus\n+    /// will actually apply the operation across the cluster.\n+    fn snapshot_recovered_switch_to_partial(\n+        &self,\n+        transfer_config: &ShardTransfer,\n+        collection_name: CollectionId,\n+    ) -> CollectionResult<()>;\n+\n+    /// After snapshot recovery, propose to switch shard to `Partial` and confirm locally\n+    ///\n+    /// This is called after shard snapshot recovery has been completed on the remote. It submits a\n+    /// proposal to consensus to switch the the shard state from `PartialSnapshot` to `Partial`.\n+    ///\n+    /// This method also confirms consensus applied the operation before returning by asserting the\n+    /// change is propagated locally. If it fails, it will be retried for up to\n+    /// `CONSENSUS_CONFIRM_RETRIES` times.\n+    async fn snapshot_recovered_switch_to_partial_confirm(\n+        &self,\n+        transfer_config: &ShardTransfer,\n+        collection_name: &str,\n+        replica_set: &ShardReplicaSet,\n+    ) -> CollectionResult<()> {\n+        for attempts in (0..CONSENSUS_CONFIRM_RETRIES).rev() {\n+            // Propose consensus operation\n+            let proposal = self\n+                .snapshot_recovered_switch_to_partial(transfer_config, collection_name.to_string());\n+            match proposal {\n+                Ok(()) => {}\n+                Err(err) if attempts > 0 => {\n+                    log::error!(\"Failed to propose snapshot recovered operation to consensus, retrying: {err}\");\n+                    continue;\n+                }\n+                Err(err) => return Err(err),\n+            }\n+\n+            // Confirm local shard reached partial state\n+            let confirm = replica_set\n+                .wait_for_partial(transfer_config.to, CONSENSUS_CONFIRM_TIMEOUT)\n+                .await;\n+            match confirm {\n+                Ok(()) => return Ok(()),\n+                Err(err) if attempts > 0 => log::error!(\"Failed to confirm snapshot recovered operation on consensus, retrying: {err}\"),\n+                Err(err) => return Err(CollectionError::service_error(format!(\n+                    \"Failed to confirm snapshot recovered operation on consensus after {CONSENSUS_CONFIRM_RETRIES} retries: {err}\"\n+                ))),\n+            }\n+        }",
                "path": "lib/collection/src/shards/transfer/mod.rs",
                "commit_id": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                "original_commit_id": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                "user": {
                    "login": "timvisee",
                    "id": 856222,
                    "node_id": "MDQ6VXNlcjg1NjIyMg==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/856222?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/timvisee",
                    "html_url": "https://github.com/timvisee",
                    "followers_url": "https://api.github.com/users/timvisee/followers",
                    "following_url": "https://api.github.com/users/timvisee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/timvisee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/timvisee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/timvisee/subscriptions",
                    "organizations_url": "https://api.github.com/users/timvisee/orgs",
                    "repos_url": "https://api.github.com/users/timvisee/repos",
                    "events_url": "https://api.github.com/users/timvisee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/timvisee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Called after the shard snapshot is recovered on the remote.\r\n\r\nPropose to consensus to set the shard state from `PartialSnapshot` to `Partial`, but only if the transfer is still active. This is confirmed and retried up to 3 times before returning with `Ok(())`.",
                "created_at": "2023-10-27T09:07:23Z",
                "updated_at": "2023-10-27T09:07:23Z",
                "html_url": "https://github.com/qdrant/qdrant/pull/2881#discussion_r1374289481",
                "pull_request_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881",
                "author_association": "MEMBER",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/comments/1374289481"
                    },
                    "html": {
                        "href": "https://github.com/qdrant/qdrant/pull/2881#discussion_r1374289481"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/qdrant/qdrant/pulls/comments/1374289481/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": 45,
                "original_start_line": 45,
                "start_side": "RIGHT",
                "line": 83,
                "original_line": 83,
                "side": "RIGHT",
                "original_position": 83,
                "position": 83,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881",
                "id": 1575163698,
                "node_id": "PR_kwDOD_vaGc5d4xcy",
                "html_url": "https://github.com/qdrant/qdrant/pull/2881",
                "diff_url": "https://github.com/qdrant/qdrant/pull/2881.diff",
                "patch_url": "https://github.com/qdrant/qdrant/pull/2881.patch",
                "issue_url": "https://api.github.com/repos/qdrant/qdrant/issues/2881",
                "number": 2881,
                "state": "open",
                "locked": false,
                "title": "Set `(Partial)Snapshot` states for shard snapshot transfer through consensus",
                "user": {
                    "login": "timvisee",
                    "id": 856222,
                    "node_id": "MDQ6VXNlcjg1NjIyMg==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/856222?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/timvisee",
                    "html_url": "https://github.com/timvisee",
                    "followers_url": "https://api.github.com/users/timvisee/followers",
                    "following_url": "https://api.github.com/users/timvisee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/timvisee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/timvisee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/timvisee/subscriptions",
                    "organizations_url": "https://api.github.com/users/timvisee/orgs",
                    "repos_url": "https://api.github.com/users/timvisee/repos",
                    "events_url": "https://api.github.com/users/timvisee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/timvisee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Tracked in https://github.com/qdrant/qdrant/issues/2432.\r\n\r\nMerges into https://github.com/qdrant/qdrant/pull/2467.\r\n\r\n_Work in progress_\r\n\r\n### All Submissions:\r\n\r\n* [x] Contributions should target the `dev` branch. Did you create your branch from `dev`?\r\n* [x] Have you followed the guidelines in our Contributing document?\r\n* [x] Have you checked to ensure there aren't other open [Pull Requests](../../../pulls) for the same update/change?\r\n\r\n<!-- You can erase any parts of this template not applicable to your Pull Request. -->\r\n\r\n### New Feature Submissions:\r\n\r\n1. [x] Does your submission pass tests?\r\n2. [x] Have you formatted your code locally using `cargo +nightly fmt --all` command prior to submission?\r\n3. [x] Have you checked your code using `cargo clippy --all --all-features` command?",
                "created_at": "2023-10-26T16:14:20Z",
                "updated_at": "2023-10-27T09:07:23Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "b00e1567458ae03f30dfe6548f1aafdd74960ca4",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": true,
                "commits_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/commits",
                "review_comments_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/comments",
                "review_comment_url": "https://api.github.com/repos/qdrant/qdrant/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/qdrant/qdrant/issues/2881/comments",
                "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                "head": {
                    "label": "qdrant:shard-transfer-switch-states",
                    "ref": "shard-transfer-switch-states",
                    "sha": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                    "user": {
                        "login": "qdrant",
                        "id": 73504361,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                        "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/qdrant",
                        "html_url": "https://github.com/qdrant",
                        "followers_url": "https://api.github.com/users/qdrant/followers",
                        "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                        "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                        "organizations_url": "https://api.github.com/users/qdrant/orgs",
                        "repos_url": "https://api.github.com/users/qdrant/repos",
                        "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/qdrant/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 268163609,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyNjgxNjM2MDk=",
                        "name": "qdrant",
                        "full_name": "qdrant/qdrant",
                        "private": false,
                        "owner": {
                            "login": "qdrant",
                            "id": 73504361,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/qdrant",
                            "html_url": "https://github.com/qdrant",
                            "followers_url": "https://api.github.com/users/qdrant/followers",
                            "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                            "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                            "organizations_url": "https://api.github.com/users/qdrant/orgs",
                            "repos_url": "https://api.github.com/users/qdrant/repos",
                            "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/qdrant/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/qdrant/qdrant",
                        "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                        "fork": false,
                        "url": "https://api.github.com/repos/qdrant/qdrant",
                        "forks_url": "https://api.github.com/repos/qdrant/qdrant/forks",
                        "keys_url": "https://api.github.com/repos/qdrant/qdrant/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/qdrant/qdrant/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/qdrant/qdrant/teams",
                        "hooks_url": "https://api.github.com/repos/qdrant/qdrant/hooks",
                        "issue_events_url": "https://api.github.com/repos/qdrant/qdrant/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/qdrant/qdrant/events",
                        "assignees_url": "https://api.github.com/repos/qdrant/qdrant/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/qdrant/qdrant/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/qdrant/qdrant/tags",
                        "blobs_url": "https://api.github.com/repos/qdrant/qdrant/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/qdrant/qdrant/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/qdrant/qdrant/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/qdrant/qdrant/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/qdrant/qdrant/languages",
                        "stargazers_url": "https://api.github.com/repos/qdrant/qdrant/stargazers",
                        "contributors_url": "https://api.github.com/repos/qdrant/qdrant/contributors",
                        "subscribers_url": "https://api.github.com/repos/qdrant/qdrant/subscribers",
                        "subscription_url": "https://api.github.com/repos/qdrant/qdrant/subscription",
                        "commits_url": "https://api.github.com/repos/qdrant/qdrant/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/qdrant/qdrant/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/qdrant/qdrant/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/qdrant/qdrant/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/qdrant/qdrant/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/qdrant/qdrant/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/qdrant/qdrant/merges",
                        "archive_url": "https://api.github.com/repos/qdrant/qdrant/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/qdrant/qdrant/downloads",
                        "issues_url": "https://api.github.com/repos/qdrant/qdrant/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/qdrant/qdrant/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/qdrant/qdrant/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/qdrant/qdrant/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/qdrant/qdrant/labels{/name}",
                        "releases_url": "https://api.github.com/repos/qdrant/qdrant/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/qdrant/qdrant/deployments",
                        "created_at": "2020-05-30T21:37:01Z",
                        "updated_at": "2023-10-27T07:44:43Z",
                        "pushed_at": "2023-10-27T08:37:35Z",
                        "git_url": "git://github.com/qdrant/qdrant.git",
                        "ssh_url": "git@github.com:qdrant/qdrant.git",
                        "clone_url": "https://github.com/qdrant/qdrant.git",
                        "svn_url": "https://github.com/qdrant/qdrant",
                        "homepage": "https://qdrant.tech",
                        "size": 14675,
                        "stargazers_count": 13413,
                        "watchers_count": 13413,
                        "language": "Rust",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 777,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 182,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "approximate-nearest-neighbor-search",
                            "embeddings-similarity",
                            "hacktoberfest",
                            "hnsw",
                            "image-search",
                            "knn-algorithm",
                            "machine-learning",
                            "matching",
                            "mlops",
                            "nearest-neighbor-search",
                            "neural-network",
                            "neural-search",
                            "recommender-system",
                            "search",
                            "search-engine",
                            "search-engines",
                            "similarity-search",
                            "vector-database",
                            "vector-search",
                            "vector-search-engine"
                        ],
                        "visibility": "public",
                        "forks": 777,
                        "open_issues": 182,
                        "watchers": 13413,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "qdrant:add-shard-transfer-snapshot-stubs",
                    "ref": "add-shard-transfer-snapshot-stubs",
                    "sha": "3f42b3427e3efd00b93f318baca090ec1eb1697d",
                    "user": {
                        "login": "qdrant",
                        "id": 73504361,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                        "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/qdrant",
                        "html_url": "https://github.com/qdrant",
                        "followers_url": "https://api.github.com/users/qdrant/followers",
                        "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                        "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                        "organizations_url": "https://api.github.com/users/qdrant/orgs",
                        "repos_url": "https://api.github.com/users/qdrant/repos",
                        "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/qdrant/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 268163609,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyNjgxNjM2MDk=",
                        "name": "qdrant",
                        "full_name": "qdrant/qdrant",
                        "private": false,
                        "owner": {
                            "login": "qdrant",
                            "id": 73504361,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/qdrant",
                            "html_url": "https://github.com/qdrant",
                            "followers_url": "https://api.github.com/users/qdrant/followers",
                            "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                            "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                            "organizations_url": "https://api.github.com/users/qdrant/orgs",
                            "repos_url": "https://api.github.com/users/qdrant/repos",
                            "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/qdrant/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/qdrant/qdrant",
                        "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                        "fork": false,
                        "url": "https://api.github.com/repos/qdrant/qdrant",
                        "forks_url": "https://api.github.com/repos/qdrant/qdrant/forks",
                        "keys_url": "https://api.github.com/repos/qdrant/qdrant/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/qdrant/qdrant/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/qdrant/qdrant/teams",
                        "hooks_url": "https://api.github.com/repos/qdrant/qdrant/hooks",
                        "issue_events_url": "https://api.github.com/repos/qdrant/qdrant/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/qdrant/qdrant/events",
                        "assignees_url": "https://api.github.com/repos/qdrant/qdrant/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/qdrant/qdrant/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/qdrant/qdrant/tags",
                        "blobs_url": "https://api.github.com/repos/qdrant/qdrant/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/qdrant/qdrant/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/qdrant/qdrant/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/qdrant/qdrant/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/qdrant/qdrant/languages",
                        "stargazers_url": "https://api.github.com/repos/qdrant/qdrant/stargazers",
                        "contributors_url": "https://api.github.com/repos/qdrant/qdrant/contributors",
                        "subscribers_url": "https://api.github.com/repos/qdrant/qdrant/subscribers",
                        "subscription_url": "https://api.github.com/repos/qdrant/qdrant/subscription",
                        "commits_url": "https://api.github.com/repos/qdrant/qdrant/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/qdrant/qdrant/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/qdrant/qdrant/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/qdrant/qdrant/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/qdrant/qdrant/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/qdrant/qdrant/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/qdrant/qdrant/merges",
                        "archive_url": "https://api.github.com/repos/qdrant/qdrant/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/qdrant/qdrant/downloads",
                        "issues_url": "https://api.github.com/repos/qdrant/qdrant/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/qdrant/qdrant/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/qdrant/qdrant/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/qdrant/qdrant/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/qdrant/qdrant/labels{/name}",
                        "releases_url": "https://api.github.com/repos/qdrant/qdrant/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/qdrant/qdrant/deployments",
                        "created_at": "2020-05-30T21:37:01Z",
                        "updated_at": "2023-10-27T07:44:43Z",
                        "pushed_at": "2023-10-27T08:37:35Z",
                        "git_url": "git://github.com/qdrant/qdrant.git",
                        "ssh_url": "git@github.com:qdrant/qdrant.git",
                        "clone_url": "https://github.com/qdrant/qdrant.git",
                        "svn_url": "https://github.com/qdrant/qdrant",
                        "homepage": "https://qdrant.tech",
                        "size": 14675,
                        "stargazers_count": 13413,
                        "watchers_count": 13413,
                        "language": "Rust",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 777,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 182,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "approximate-nearest-neighbor-search",
                            "embeddings-similarity",
                            "hacktoberfest",
                            "hnsw",
                            "image-search",
                            "knn-algorithm",
                            "machine-learning",
                            "matching",
                            "mlops",
                            "nearest-neighbor-search",
                            "neural-network",
                            "neural-search",
                            "recommender-system",
                            "search",
                            "search-engine",
                            "search-engines",
                            "similarity-search",
                            "vector-database",
                            "vector-search",
                            "vector-search-engine"
                        ],
                        "visibility": "public",
                        "forks": 777,
                        "open_issues": 182,
                        "watchers": 13413,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881"
                    },
                    "html": {
                        "href": "https://github.com/qdrant/qdrant/pull/2881"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/issues/2881"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/issues/2881/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/statuses/56a9a294c8d01124d6b2d611e4ff9156dfea809b"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T09:07:23Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32893517430",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 856222,
            "login": "timvisee",
            "display_login": "timvisee",
            "gravatar_id": "",
            "url": "https://api.github.com/users/timvisee",
            "avatar_url": "https://avatars.githubusercontent.com/u/856222?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1701332740,
                "node_id": "PRR_kwDOD_vaGc5laEcE",
                "user": {
                    "login": "timvisee",
                    "id": 856222,
                    "node_id": "MDQ6VXNlcjg1NjIyMg==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/856222?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/timvisee",
                    "html_url": "https://github.com/timvisee",
                    "followers_url": "https://api.github.com/users/timvisee/followers",
                    "following_url": "https://api.github.com/users/timvisee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/timvisee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/timvisee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/timvisee/subscriptions",
                    "organizations_url": "https://api.github.com/users/timvisee/orgs",
                    "repos_url": "https://api.github.com/users/timvisee/repos",
                    "events_url": "https://api.github.com/users/timvisee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/timvisee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "commit_id": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                "submitted_at": "2023-10-27T09:07:23Z",
                "state": "commented",
                "html_url": "https://github.com/qdrant/qdrant/pull/2881#pullrequestreview-1701332740",
                "pull_request_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881",
                "author_association": "MEMBER",
                "_links": {
                    "html": {
                        "href": "https://github.com/qdrant/qdrant/pull/2881#pullrequestreview-1701332740"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881",
                "id": 1575163698,
                "node_id": "PR_kwDOD_vaGc5d4xcy",
                "html_url": "https://github.com/qdrant/qdrant/pull/2881",
                "diff_url": "https://github.com/qdrant/qdrant/pull/2881.diff",
                "patch_url": "https://github.com/qdrant/qdrant/pull/2881.patch",
                "issue_url": "https://api.github.com/repos/qdrant/qdrant/issues/2881",
                "number": 2881,
                "state": "open",
                "locked": false,
                "title": "Set `(Partial)Snapshot` states for shard snapshot transfer through consensus",
                "user": {
                    "login": "timvisee",
                    "id": 856222,
                    "node_id": "MDQ6VXNlcjg1NjIyMg==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/856222?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/timvisee",
                    "html_url": "https://github.com/timvisee",
                    "followers_url": "https://api.github.com/users/timvisee/followers",
                    "following_url": "https://api.github.com/users/timvisee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/timvisee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/timvisee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/timvisee/subscriptions",
                    "organizations_url": "https://api.github.com/users/timvisee/orgs",
                    "repos_url": "https://api.github.com/users/timvisee/repos",
                    "events_url": "https://api.github.com/users/timvisee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/timvisee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Tracked in https://github.com/qdrant/qdrant/issues/2432.\r\n\r\nMerges into https://github.com/qdrant/qdrant/pull/2467.\r\n\r\n_Work in progress_\r\n\r\n### All Submissions:\r\n\r\n* [x] Contributions should target the `dev` branch. Did you create your branch from `dev`?\r\n* [x] Have you followed the guidelines in our Contributing document?\r\n* [x] Have you checked to ensure there aren't other open [Pull Requests](../../../pulls) for the same update/change?\r\n\r\n<!-- You can erase any parts of this template not applicable to your Pull Request. -->\r\n\r\n### New Feature Submissions:\r\n\r\n1. [x] Does your submission pass tests?\r\n2. [x] Have you formatted your code locally using `cargo +nightly fmt --all` command prior to submission?\r\n3. [x] Have you checked your code using `cargo clippy --all --all-features` command?",
                "created_at": "2023-10-26T16:14:20Z",
                "updated_at": "2023-10-27T09:07:23Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "b00e1567458ae03f30dfe6548f1aafdd74960ca4",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": true,
                "commits_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/commits",
                "review_comments_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/comments",
                "review_comment_url": "https://api.github.com/repos/qdrant/qdrant/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/qdrant/qdrant/issues/2881/comments",
                "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                "head": {
                    "label": "qdrant:shard-transfer-switch-states",
                    "ref": "shard-transfer-switch-states",
                    "sha": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                    "user": {
                        "login": "qdrant",
                        "id": 73504361,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                        "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/qdrant",
                        "html_url": "https://github.com/qdrant",
                        "followers_url": "https://api.github.com/users/qdrant/followers",
                        "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                        "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                        "organizations_url": "https://api.github.com/users/qdrant/orgs",
                        "repos_url": "https://api.github.com/users/qdrant/repos",
                        "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/qdrant/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 268163609,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyNjgxNjM2MDk=",
                        "name": "qdrant",
                        "full_name": "qdrant/qdrant",
                        "private": false,
                        "owner": {
                            "login": "qdrant",
                            "id": 73504361,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/qdrant",
                            "html_url": "https://github.com/qdrant",
                            "followers_url": "https://api.github.com/users/qdrant/followers",
                            "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                            "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                            "organizations_url": "https://api.github.com/users/qdrant/orgs",
                            "repos_url": "https://api.github.com/users/qdrant/repos",
                            "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/qdrant/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/qdrant/qdrant",
                        "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                        "fork": false,
                        "url": "https://api.github.com/repos/qdrant/qdrant",
                        "forks_url": "https://api.github.com/repos/qdrant/qdrant/forks",
                        "keys_url": "https://api.github.com/repos/qdrant/qdrant/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/qdrant/qdrant/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/qdrant/qdrant/teams",
                        "hooks_url": "https://api.github.com/repos/qdrant/qdrant/hooks",
                        "issue_events_url": "https://api.github.com/repos/qdrant/qdrant/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/qdrant/qdrant/events",
                        "assignees_url": "https://api.github.com/repos/qdrant/qdrant/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/qdrant/qdrant/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/qdrant/qdrant/tags",
                        "blobs_url": "https://api.github.com/repos/qdrant/qdrant/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/qdrant/qdrant/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/qdrant/qdrant/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/qdrant/qdrant/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/qdrant/qdrant/languages",
                        "stargazers_url": "https://api.github.com/repos/qdrant/qdrant/stargazers",
                        "contributors_url": "https://api.github.com/repos/qdrant/qdrant/contributors",
                        "subscribers_url": "https://api.github.com/repos/qdrant/qdrant/subscribers",
                        "subscription_url": "https://api.github.com/repos/qdrant/qdrant/subscription",
                        "commits_url": "https://api.github.com/repos/qdrant/qdrant/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/qdrant/qdrant/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/qdrant/qdrant/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/qdrant/qdrant/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/qdrant/qdrant/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/qdrant/qdrant/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/qdrant/qdrant/merges",
                        "archive_url": "https://api.github.com/repos/qdrant/qdrant/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/qdrant/qdrant/downloads",
                        "issues_url": "https://api.github.com/repos/qdrant/qdrant/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/qdrant/qdrant/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/qdrant/qdrant/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/qdrant/qdrant/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/qdrant/qdrant/labels{/name}",
                        "releases_url": "https://api.github.com/repos/qdrant/qdrant/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/qdrant/qdrant/deployments",
                        "created_at": "2020-05-30T21:37:01Z",
                        "updated_at": "2023-10-27T07:44:43Z",
                        "pushed_at": "2023-10-27T08:37:35Z",
                        "git_url": "git://github.com/qdrant/qdrant.git",
                        "ssh_url": "git@github.com:qdrant/qdrant.git",
                        "clone_url": "https://github.com/qdrant/qdrant.git",
                        "svn_url": "https://github.com/qdrant/qdrant",
                        "homepage": "https://qdrant.tech",
                        "size": 14675,
                        "stargazers_count": 13413,
                        "watchers_count": 13413,
                        "language": "Rust",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 777,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 182,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "approximate-nearest-neighbor-search",
                            "embeddings-similarity",
                            "hacktoberfest",
                            "hnsw",
                            "image-search",
                            "knn-algorithm",
                            "machine-learning",
                            "matching",
                            "mlops",
                            "nearest-neighbor-search",
                            "neural-network",
                            "neural-search",
                            "recommender-system",
                            "search",
                            "search-engine",
                            "search-engines",
                            "similarity-search",
                            "vector-database",
                            "vector-search",
                            "vector-search-engine"
                        ],
                        "visibility": "public",
                        "forks": 777,
                        "open_issues": 182,
                        "watchers": 13413,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "qdrant:add-shard-transfer-snapshot-stubs",
                    "ref": "add-shard-transfer-snapshot-stubs",
                    "sha": "3f42b3427e3efd00b93f318baca090ec1eb1697d",
                    "user": {
                        "login": "qdrant",
                        "id": 73504361,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                        "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/qdrant",
                        "html_url": "https://github.com/qdrant",
                        "followers_url": "https://api.github.com/users/qdrant/followers",
                        "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                        "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                        "organizations_url": "https://api.github.com/users/qdrant/orgs",
                        "repos_url": "https://api.github.com/users/qdrant/repos",
                        "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/qdrant/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 268163609,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyNjgxNjM2MDk=",
                        "name": "qdrant",
                        "full_name": "qdrant/qdrant",
                        "private": false,
                        "owner": {
                            "login": "qdrant",
                            "id": 73504361,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/qdrant",
                            "html_url": "https://github.com/qdrant",
                            "followers_url": "https://api.github.com/users/qdrant/followers",
                            "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                            "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                            "organizations_url": "https://api.github.com/users/qdrant/orgs",
                            "repos_url": "https://api.github.com/users/qdrant/repos",
                            "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/qdrant/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/qdrant/qdrant",
                        "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                        "fork": false,
                        "url": "https://api.github.com/repos/qdrant/qdrant",
                        "forks_url": "https://api.github.com/repos/qdrant/qdrant/forks",
                        "keys_url": "https://api.github.com/repos/qdrant/qdrant/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/qdrant/qdrant/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/qdrant/qdrant/teams",
                        "hooks_url": "https://api.github.com/repos/qdrant/qdrant/hooks",
                        "issue_events_url": "https://api.github.com/repos/qdrant/qdrant/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/qdrant/qdrant/events",
                        "assignees_url": "https://api.github.com/repos/qdrant/qdrant/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/qdrant/qdrant/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/qdrant/qdrant/tags",
                        "blobs_url": "https://api.github.com/repos/qdrant/qdrant/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/qdrant/qdrant/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/qdrant/qdrant/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/qdrant/qdrant/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/qdrant/qdrant/languages",
                        "stargazers_url": "https://api.github.com/repos/qdrant/qdrant/stargazers",
                        "contributors_url": "https://api.github.com/repos/qdrant/qdrant/contributors",
                        "subscribers_url": "https://api.github.com/repos/qdrant/qdrant/subscribers",
                        "subscription_url": "https://api.github.com/repos/qdrant/qdrant/subscription",
                        "commits_url": "https://api.github.com/repos/qdrant/qdrant/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/qdrant/qdrant/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/qdrant/qdrant/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/qdrant/qdrant/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/qdrant/qdrant/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/qdrant/qdrant/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/qdrant/qdrant/merges",
                        "archive_url": "https://api.github.com/repos/qdrant/qdrant/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/qdrant/qdrant/downloads",
                        "issues_url": "https://api.github.com/repos/qdrant/qdrant/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/qdrant/qdrant/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/qdrant/qdrant/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/qdrant/qdrant/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/qdrant/qdrant/labels{/name}",
                        "releases_url": "https://api.github.com/repos/qdrant/qdrant/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/qdrant/qdrant/deployments",
                        "created_at": "2020-05-30T21:37:01Z",
                        "updated_at": "2023-10-27T07:44:43Z",
                        "pushed_at": "2023-10-27T08:37:35Z",
                        "git_url": "git://github.com/qdrant/qdrant.git",
                        "ssh_url": "git@github.com:qdrant/qdrant.git",
                        "clone_url": "https://github.com/qdrant/qdrant.git",
                        "svn_url": "https://github.com/qdrant/qdrant",
                        "homepage": "https://qdrant.tech",
                        "size": 14675,
                        "stargazers_count": 13413,
                        "watchers_count": 13413,
                        "language": "Rust",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 777,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 182,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "approximate-nearest-neighbor-search",
                            "embeddings-similarity",
                            "hacktoberfest",
                            "hnsw",
                            "image-search",
                            "knn-algorithm",
                            "machine-learning",
                            "matching",
                            "mlops",
                            "nearest-neighbor-search",
                            "neural-network",
                            "neural-search",
                            "recommender-system",
                            "search",
                            "search-engine",
                            "search-engines",
                            "similarity-search",
                            "vector-database",
                            "vector-search",
                            "vector-search-engine"
                        ],
                        "visibility": "public",
                        "forks": 777,
                        "open_issues": 182,
                        "watchers": 13413,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881"
                    },
                    "html": {
                        "href": "https://github.com/qdrant/qdrant/pull/2881"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/issues/2881"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/issues/2881/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2881/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/statuses/56a9a294c8d01124d6b2d611e4ff9156dfea809b"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T09:07:24Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32892729555",
        "type": "PushEvent",
        "actor": {
            "id": 856222,
            "login": "timvisee",
            "display_login": "timvisee",
            "gravatar_id": "",
            "url": "https://api.github.com/users/timvisee",
            "avatar_url": "https://avatars.githubusercontent.com/u/856222?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "repository_id": 268163609,
            "push_id": 15588810563,
            "size": 1,
            "distinct_size": 1,
            "ref": "refs/heads/shard-transfer-switch-states",
            "head": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
            "before": "0badc98be7d3a57926d59fc4549559b88d25d928",
            "commits": [
                {
                    "sha": "56a9a294c8d01124d6b2d611e4ff9156dfea809b",
                    "author": {
                        "email": "tim@visee.me",
                        "name": "timvisee"
                    },
                    "message": "Add extensive shard snapshot transfer process docs, clean up function",
                    "distinct": true,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/56a9a294c8d01124d6b2d611e4ff9156dfea809b"
                }
            ]
        },
        "public": true,
        "created_at": "2023-10-27T08:37:33Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32891402119",
        "type": "WatchEvent",
        "actor": {
            "id": 142763736,
            "login": "mikey5656",
            "display_login": "mikey5656",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mikey5656",
            "avatar_url": "https://avatars.githubusercontent.com/u/142763736?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T07:44:42Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32891093494",
        "type": "PushEvent",
        "actor": {
            "id": 856222,
            "login": "timvisee",
            "display_login": "timvisee",
            "gravatar_id": "",
            "url": "https://api.github.com/users/timvisee",
            "avatar_url": "https://avatars.githubusercontent.com/u/856222?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "repository_id": 268163609,
            "push_id": 15588025594,
            "size": 1,
            "distinct_size": 1,
            "ref": "refs/heads/dev",
            "head": "e03c23983ea217ab3f5b4c036446019974837739",
            "before": "3b17deb259463510df3c0fc6d33828e96a673c08",
            "commits": [
                {
                    "sha": "e03c23983ea217ab3f5b4c036446019974837739",
                    "author": {
                        "email": "andrey@vasnetsov.com",
                        "name": "Andrey Vasnetsov"
                    },
                    "message": "fix: openapi/tests/requirements.txt to reduce vulnerabilities (#2882)\n\nThe following vulnerabilities are fixed by pinning transitive dependencies:\r\n- https://snyk.io/vuln/SNYK-PYTHON-WERKZEUG-6035177\r\n\r\nCo-authored-by: snyk-bot <snyk-bot@snyk.io>",
                    "distinct": true,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/e03c23983ea217ab3f5b4c036446019974837739"
                }
            ]
        },
        "public": true,
        "created_at": "2023-10-27T07:31:41Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32891069715",
        "type": "DeleteEvent",
        "actor": {
            "id": 856222,
            "login": "timvisee",
            "display_login": "timvisee",
            "gravatar_id": "",
            "url": "https://api.github.com/users/timvisee",
            "avatar_url": "https://avatars.githubusercontent.com/u/856222?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "ref": "snyk-fix-121673c4a7e8e66c3d1c11a76714ca79",
            "ref_type": "branch",
            "pusher_type": "user"
        },
        "public": true,
        "created_at": "2023-10-27T07:30:42Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32891069007",
        "type": "PushEvent",
        "actor": {
            "id": 856222,
            "login": "timvisee",
            "display_login": "timvisee",
            "gravatar_id": "",
            "url": "https://api.github.com/users/timvisee",
            "avatar_url": "https://avatars.githubusercontent.com/u/856222?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "repository_id": 268163609,
            "push_id": 15588014111,
            "size": 1,
            "distinct_size": 1,
            "ref": "refs/heads/master",
            "head": "e686e71b9f514e9f8723c29591003f87b495ae87",
            "before": "20cd26f3774107bd18ba5a6f32a60079a38852b2",
            "commits": [
                {
                    "sha": "e686e71b9f514e9f8723c29591003f87b495ae87",
                    "author": {
                        "email": "andrey@vasnetsov.com",
                        "name": "Andrey Vasnetsov"
                    },
                    "message": "fix: openapi/tests/requirements.txt to reduce vulnerabilities (#2882)\n\nThe following vulnerabilities are fixed by pinning transitive dependencies:\r\n- https://snyk.io/vuln/SNYK-PYTHON-WERKZEUG-6035177\r\n\r\nCo-authored-by: snyk-bot <snyk-bot@snyk.io>",
                    "distinct": true,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/e686e71b9f514e9f8723c29591003f87b495ae87"
                }
            ]
        },
        "public": true,
        "created_at": "2023-10-27T07:30:40Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32891068682",
        "type": "PullRequestEvent",
        "actor": {
            "id": 856222,
            "login": "timvisee",
            "display_login": "timvisee",
            "gravatar_id": "",
            "url": "https://api.github.com/users/timvisee",
            "avatar_url": "https://avatars.githubusercontent.com/u/856222?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "action": "closed",
            "number": 2882,
            "pull_request": {
                "url": "https://api.github.com/repos/qdrant/qdrant/pulls/2882",
                "id": 1575745317,
                "node_id": "PR_kwDOD_vaGc5d6_cl",
                "html_url": "https://github.com/qdrant/qdrant/pull/2882",
                "diff_url": "https://github.com/qdrant/qdrant/pull/2882.diff",
                "patch_url": "https://github.com/qdrant/qdrant/pull/2882.patch",
                "issue_url": "https://api.github.com/repos/qdrant/qdrant/issues/2882",
                "number": 2882,
                "state": "closed",
                "locked": false,
                "title": "[Snyk] Security upgrade werkzeug from 2.2.3 to 3.0.1",
                "user": {
                    "login": "generall",
                    "id": 1935623,
                    "node_id": "MDQ6VXNlcjE5MzU2MjM=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/1935623?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/generall",
                    "html_url": "https://github.com/generall",
                    "followers_url": "https://api.github.com/users/generall/followers",
                    "following_url": "https://api.github.com/users/generall/following{/other_user}",
                    "gists_url": "https://api.github.com/users/generall/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/generall/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/generall/subscriptions",
                    "organizations_url": "https://api.github.com/users/generall/orgs",
                    "repos_url": "https://api.github.com/users/generall/repos",
                    "events_url": "https://api.github.com/users/generall/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/generall/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "<p>This PR was automatically created by Snyk using the credentials of a real user.</p><br /><h3>Snyk has created this PR to fix one or more vulnerable packages in the `pip` dependencies of this project.</h3>\n\n\n\n#### Changes included in this PR\n\n- Changes to the following files to upgrade the vulnerable dependencies to a fixed version:\n    - openapi/tests/requirements.txt\n\n\n<details>\n<summary>\u26a0\ufe0f <b>Warning</b></summary>\n\n```\nschemathesis 3.19.7 requires werkzeug, which is not installed.\n\n```\n</details>\n\n\n#### Vulnerabilities that will be fixed\n\n\n\n\n\n##### By pinning:\nSeverity                   | Priority Score (*)                   | Issue                   | Upgrade                   | Breaking Change                   | Exploit Maturity\n:-------------------------:|-------------------------|:-------------------------|:-------------------------|:-------------------------|:-------------------------\n![medium severity](https://res.cloudinary.com/snyk/image/upload/w_20,h_20/v1561977819/icon/m.png \"medium severity\")  |  **611/1000**  <br/> **Why?** Recently disclosed, Has a fix available, CVSS 6.5  | Inefficient Algorithmic Complexity <br/>[SNYK-PYTHON-WERKZEUG-6035177](https://snyk.io/vuln/SNYK-PYTHON-WERKZEUG-6035177) |  `werkzeug:` <br> `2.2.3 -> 3.0.1` <br>  |  No  | No Known Exploit \n\n(*) Note that the real score may have changed since the PR was raised.\n\n\n\n\nSome vulnerabilities couldn't be fully fixed and so Snyk will still find them when the project is tested again. This may be because the vulnerability existed within more than one direct dependency, but not all of the affected dependencies could be upgraded.\n\n\nCheck the changes in this PR to ensure they won't cause issues with your project.\n\n\n\n------------\n\n\n\n**Note:** *You are seeing this because you or someone else with access to this repository has authorized Snyk to open fix PRs.*\n\nFor more information:  <img src=\"https://api.segment.io/v1/pixel/track?data=eyJ3cml0ZUtleSI6InJyWmxZcEdHY2RyTHZsb0lYd0dUcVg4WkFRTnNCOUEwIiwiYW5vbnltb3VzSWQiOiI5ZWI4NTJiMi1mODVhLTRmYmQtOTE2My00NGU3MGYwNGVlYWUiLCJldmVudCI6IlBSIHZpZXdlZCIsInByb3BlcnRpZXMiOnsicHJJZCI6IjllYjg1MmIyLWY4NWEtNGZiZC05MTYzLTQ0ZTcwZjA0ZWVhZSJ9fQ==\" width=\"0\" height=\"0\"/>\n\ud83e\uddd0 [View latest project report](https://app.snyk.io/org/generall-jyq/project/0f2da737-9ae8-4b0c-bce6-075e016ac4f6?utm_source&#x3D;github&amp;utm_medium&#x3D;referral&amp;page&#x3D;fix-pr)\n\n\ud83d\udee0 [Adjust project settings](https://app.snyk.io/org/generall-jyq/project/0f2da737-9ae8-4b0c-bce6-075e016ac4f6?utm_source&#x3D;github&amp;utm_medium&#x3D;referral&amp;page&#x3D;fix-pr/settings)\n\n\ud83d\udcda [Read more about Snyk's upgrade and patch logic](https://support.snyk.io/hc/en-us/articles/360003891078-Snyk-patches-to-fix-vulnerabilities)\n\n[//]: # (snyk:metadata:{\"prId\":\"9eb852b2-f85a-4fbd-9163-44e70f04eeae\",\"prPublicId\":\"9eb852b2-f85a-4fbd-9163-44e70f04eeae\",\"dependencies\":[{\"name\":\"werkzeug\",\"from\":\"2.2.3\",\"to\":\"3.0.1\"}],\"packageManager\":\"pip\",\"projectPublicId\":\"0f2da737-9ae8-4b0c-bce6-075e016ac4f6\",\"projectUrl\":\"https://app.snyk.io/org/generall-jyq/project/0f2da737-9ae8-4b0c-bce6-075e016ac4f6?utm_source=github&utm_medium=referral&page=fix-pr\",\"type\":\"auto\",\"patch\":[],\"vulns\":[\"SNYK-PYTHON-WERKZEUG-6035177\"],\"upgrade\":[],\"isBreakingChange\":false,\"env\":\"prod\",\"prType\":\"fix\",\"templateVariants\":[\"updated-fix-title\",\"pr-warning-shown\",\"priorityScore\"],\"priorityScoreList\":[611],\"remediationStrategy\":\"vuln\"})\n\n---\n\n**Learn how to fix vulnerabilities with free interactive lessons:**\n\n \ud83e\udd89 [Learn about vulnerability in an interactive lesson of Snyk Learn.](https://learn.snyk.io/?loc&#x3D;fix-pr)\n",
                "created_at": "2023-10-27T00:12:08Z",
                "updated_at": "2023-10-27T07:30:38Z",
                "closed_at": "2023-10-27T07:30:38Z",
                "merged_at": "2023-10-27T07:30:38Z",
                "merge_commit_sha": "e686e71b9f514e9f8723c29591003f87b495ae87",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2882/commits",
                "review_comments_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2882/comments",
                "review_comment_url": "https://api.github.com/repos/qdrant/qdrant/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/qdrant/qdrant/issues/2882/comments",
                "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/cd67e9b7d4067aa4ac4f9c0711d87fed8530900f",
                "head": {
                    "label": "qdrant:snyk-fix-121673c4a7e8e66c3d1c11a76714ca79",
                    "ref": "snyk-fix-121673c4a7e8e66c3d1c11a76714ca79",
                    "sha": "cd67e9b7d4067aa4ac4f9c0711d87fed8530900f",
                    "user": {
                        "login": "qdrant",
                        "id": 73504361,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                        "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/qdrant",
                        "html_url": "https://github.com/qdrant",
                        "followers_url": "https://api.github.com/users/qdrant/followers",
                        "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                        "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                        "organizations_url": "https://api.github.com/users/qdrant/orgs",
                        "repos_url": "https://api.github.com/users/qdrant/repos",
                        "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/qdrant/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 268163609,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyNjgxNjM2MDk=",
                        "name": "qdrant",
                        "full_name": "qdrant/qdrant",
                        "private": false,
                        "owner": {
                            "login": "qdrant",
                            "id": 73504361,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/qdrant",
                            "html_url": "https://github.com/qdrant",
                            "followers_url": "https://api.github.com/users/qdrant/followers",
                            "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                            "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                            "organizations_url": "https://api.github.com/users/qdrant/orgs",
                            "repos_url": "https://api.github.com/users/qdrant/repos",
                            "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/qdrant/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/qdrant/qdrant",
                        "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                        "fork": false,
                        "url": "https://api.github.com/repos/qdrant/qdrant",
                        "forks_url": "https://api.github.com/repos/qdrant/qdrant/forks",
                        "keys_url": "https://api.github.com/repos/qdrant/qdrant/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/qdrant/qdrant/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/qdrant/qdrant/teams",
                        "hooks_url": "https://api.github.com/repos/qdrant/qdrant/hooks",
                        "issue_events_url": "https://api.github.com/repos/qdrant/qdrant/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/qdrant/qdrant/events",
                        "assignees_url": "https://api.github.com/repos/qdrant/qdrant/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/qdrant/qdrant/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/qdrant/qdrant/tags",
                        "blobs_url": "https://api.github.com/repos/qdrant/qdrant/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/qdrant/qdrant/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/qdrant/qdrant/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/qdrant/qdrant/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/qdrant/qdrant/languages",
                        "stargazers_url": "https://api.github.com/repos/qdrant/qdrant/stargazers",
                        "contributors_url": "https://api.github.com/repos/qdrant/qdrant/contributors",
                        "subscribers_url": "https://api.github.com/repos/qdrant/qdrant/subscribers",
                        "subscription_url": "https://api.github.com/repos/qdrant/qdrant/subscription",
                        "commits_url": "https://api.github.com/repos/qdrant/qdrant/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/qdrant/qdrant/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/qdrant/qdrant/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/qdrant/qdrant/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/qdrant/qdrant/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/qdrant/qdrant/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/qdrant/qdrant/merges",
                        "archive_url": "https://api.github.com/repos/qdrant/qdrant/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/qdrant/qdrant/downloads",
                        "issues_url": "https://api.github.com/repos/qdrant/qdrant/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/qdrant/qdrant/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/qdrant/qdrant/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/qdrant/qdrant/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/qdrant/qdrant/labels{/name}",
                        "releases_url": "https://api.github.com/repos/qdrant/qdrant/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/qdrant/qdrant/deployments",
                        "created_at": "2020-05-30T21:37:01Z",
                        "updated_at": "2023-10-27T01:24:03Z",
                        "pushed_at": "2023-10-27T07:30:38Z",
                        "git_url": "git://github.com/qdrant/qdrant.git",
                        "ssh_url": "git@github.com:qdrant/qdrant.git",
                        "clone_url": "https://github.com/qdrant/qdrant.git",
                        "svn_url": "https://github.com/qdrant/qdrant",
                        "homepage": "https://qdrant.tech",
                        "size": 14683,
                        "stargazers_count": 13413,
                        "watchers_count": 13413,
                        "language": "Rust",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 777,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 182,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "approximate-nearest-neighbor-search",
                            "embeddings-similarity",
                            "hacktoberfest",
                            "hnsw",
                            "image-search",
                            "knn-algorithm",
                            "machine-learning",
                            "matching",
                            "mlops",
                            "nearest-neighbor-search",
                            "neural-network",
                            "neural-search",
                            "recommender-system",
                            "search",
                            "search-engine",
                            "search-engines",
                            "similarity-search",
                            "vector-database",
                            "vector-search",
                            "vector-search-engine"
                        ],
                        "visibility": "public",
                        "forks": 777,
                        "open_issues": 182,
                        "watchers": 13413,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "qdrant:master",
                    "ref": "master",
                    "sha": "20cd26f3774107bd18ba5a6f32a60079a38852b2",
                    "user": {
                        "login": "qdrant",
                        "id": 73504361,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                        "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/qdrant",
                        "html_url": "https://github.com/qdrant",
                        "followers_url": "https://api.github.com/users/qdrant/followers",
                        "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                        "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                        "organizations_url": "https://api.github.com/users/qdrant/orgs",
                        "repos_url": "https://api.github.com/users/qdrant/repos",
                        "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/qdrant/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 268163609,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyNjgxNjM2MDk=",
                        "name": "qdrant",
                        "full_name": "qdrant/qdrant",
                        "private": false,
                        "owner": {
                            "login": "qdrant",
                            "id": 73504361,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/qdrant",
                            "html_url": "https://github.com/qdrant",
                            "followers_url": "https://api.github.com/users/qdrant/followers",
                            "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                            "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                            "organizations_url": "https://api.github.com/users/qdrant/orgs",
                            "repos_url": "https://api.github.com/users/qdrant/repos",
                            "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/qdrant/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/qdrant/qdrant",
                        "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                        "fork": false,
                        "url": "https://api.github.com/repos/qdrant/qdrant",
                        "forks_url": "https://api.github.com/repos/qdrant/qdrant/forks",
                        "keys_url": "https://api.github.com/repos/qdrant/qdrant/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/qdrant/qdrant/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/qdrant/qdrant/teams",
                        "hooks_url": "https://api.github.com/repos/qdrant/qdrant/hooks",
                        "issue_events_url": "https://api.github.com/repos/qdrant/qdrant/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/qdrant/qdrant/events",
                        "assignees_url": "https://api.github.com/repos/qdrant/qdrant/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/qdrant/qdrant/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/qdrant/qdrant/tags",
                        "blobs_url": "https://api.github.com/repos/qdrant/qdrant/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/qdrant/qdrant/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/qdrant/qdrant/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/qdrant/qdrant/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/qdrant/qdrant/languages",
                        "stargazers_url": "https://api.github.com/repos/qdrant/qdrant/stargazers",
                        "contributors_url": "https://api.github.com/repos/qdrant/qdrant/contributors",
                        "subscribers_url": "https://api.github.com/repos/qdrant/qdrant/subscribers",
                        "subscription_url": "https://api.github.com/repos/qdrant/qdrant/subscription",
                        "commits_url": "https://api.github.com/repos/qdrant/qdrant/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/qdrant/qdrant/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/qdrant/qdrant/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/qdrant/qdrant/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/qdrant/qdrant/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/qdrant/qdrant/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/qdrant/qdrant/merges",
                        "archive_url": "https://api.github.com/repos/qdrant/qdrant/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/qdrant/qdrant/downloads",
                        "issues_url": "https://api.github.com/repos/qdrant/qdrant/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/qdrant/qdrant/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/qdrant/qdrant/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/qdrant/qdrant/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/qdrant/qdrant/labels{/name}",
                        "releases_url": "https://api.github.com/repos/qdrant/qdrant/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/qdrant/qdrant/deployments",
                        "created_at": "2020-05-30T21:37:01Z",
                        "updated_at": "2023-10-27T01:24:03Z",
                        "pushed_at": "2023-10-27T07:30:38Z",
                        "git_url": "git://github.com/qdrant/qdrant.git",
                        "ssh_url": "git@github.com:qdrant/qdrant.git",
                        "clone_url": "https://github.com/qdrant/qdrant.git",
                        "svn_url": "https://github.com/qdrant/qdrant",
                        "homepage": "https://qdrant.tech",
                        "size": 14683,
                        "stargazers_count": 13413,
                        "watchers_count": 13413,
                        "language": "Rust",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 777,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 182,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "approximate-nearest-neighbor-search",
                            "embeddings-similarity",
                            "hacktoberfest",
                            "hnsw",
                            "image-search",
                            "knn-algorithm",
                            "machine-learning",
                            "matching",
                            "mlops",
                            "nearest-neighbor-search",
                            "neural-network",
                            "neural-search",
                            "recommender-system",
                            "search",
                            "search-engine",
                            "search-engines",
                            "similarity-search",
                            "vector-database",
                            "vector-search",
                            "vector-search-engine"
                        ],
                        "visibility": "public",
                        "forks": 777,
                        "open_issues": 182,
                        "watchers": 13413,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2882"
                    },
                    "html": {
                        "href": "https://github.com/qdrant/qdrant/pull/2882"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/issues/2882"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/issues/2882/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2882/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2882/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/statuses/cd67e9b7d4067aa4ac4f9c0711d87fed8530900f"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null,
                "merged": true,
                "mergeable": null,
                "rebaseable": null,
                "mergeable_state": "unknown",
                "merged_by": {
                    "login": "timvisee",
                    "id": 856222,
                    "node_id": "MDQ6VXNlcjg1NjIyMg==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/856222?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/timvisee",
                    "html_url": "https://github.com/timvisee",
                    "followers_url": "https://api.github.com/users/timvisee/followers",
                    "following_url": "https://api.github.com/users/timvisee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/timvisee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/timvisee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/timvisee/subscriptions",
                    "organizations_url": "https://api.github.com/users/timvisee/orgs",
                    "repos_url": "https://api.github.com/users/timvisee/repos",
                    "events_url": "https://api.github.com/users/timvisee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/timvisee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "comments": 0,
                "review_comments": 0,
                "maintainer_can_modify": false,
                "commits": 1,
                "additions": 2,
                "deletions": 1,
                "changed_files": 1
            }
        },
        "public": true,
        "created_at": "2023-10-27T07:30:39Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32891050080",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 856222,
            "login": "timvisee",
            "display_login": "timvisee",
            "gravatar_id": "",
            "url": "https://api.github.com/users/timvisee",
            "avatar_url": "https://avatars.githubusercontent.com/u/856222?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1701156927,
                "node_id": "PRR_kwDOD_vaGc5lZZg_",
                "user": {
                    "login": "timvisee",
                    "id": 856222,
                    "node_id": "MDQ6VXNlcjg1NjIyMg==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/856222?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/timvisee",
                    "html_url": "https://github.com/timvisee",
                    "followers_url": "https://api.github.com/users/timvisee/followers",
                    "following_url": "https://api.github.com/users/timvisee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/timvisee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/timvisee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/timvisee/subscriptions",
                    "organizations_url": "https://api.github.com/users/timvisee/orgs",
                    "repos_url": "https://api.github.com/users/timvisee/repos",
                    "events_url": "https://api.github.com/users/timvisee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/timvisee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "",
                "commit_id": "cd67e9b7d4067aa4ac4f9c0711d87fed8530900f",
                "submitted_at": "2023-10-27T07:29:53Z",
                "state": "approved",
                "html_url": "https://github.com/qdrant/qdrant/pull/2882#pullrequestreview-1701156927",
                "pull_request_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2882",
                "author_association": "MEMBER",
                "_links": {
                    "html": {
                        "href": "https://github.com/qdrant/qdrant/pull/2882#pullrequestreview-1701156927"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2882"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/qdrant/qdrant/pulls/2882",
                "id": 1575745317,
                "node_id": "PR_kwDOD_vaGc5d6_cl",
                "html_url": "https://github.com/qdrant/qdrant/pull/2882",
                "diff_url": "https://github.com/qdrant/qdrant/pull/2882.diff",
                "patch_url": "https://github.com/qdrant/qdrant/pull/2882.patch",
                "issue_url": "https://api.github.com/repos/qdrant/qdrant/issues/2882",
                "number": 2882,
                "state": "open",
                "locked": false,
                "title": "[Snyk] Security upgrade werkzeug from 2.2.3 to 3.0.1",
                "user": {
                    "login": "generall",
                    "id": 1935623,
                    "node_id": "MDQ6VXNlcjE5MzU2MjM=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/1935623?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/generall",
                    "html_url": "https://github.com/generall",
                    "followers_url": "https://api.github.com/users/generall/followers",
                    "following_url": "https://api.github.com/users/generall/following{/other_user}",
                    "gists_url": "https://api.github.com/users/generall/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/generall/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/generall/subscriptions",
                    "organizations_url": "https://api.github.com/users/generall/orgs",
                    "repos_url": "https://api.github.com/users/generall/repos",
                    "events_url": "https://api.github.com/users/generall/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/generall/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "<p>This PR was automatically created by Snyk using the credentials of a real user.</p><br /><h3>Snyk has created this PR to fix one or more vulnerable packages in the `pip` dependencies of this project.</h3>\n\n\n\n#### Changes included in this PR\n\n- Changes to the following files to upgrade the vulnerable dependencies to a fixed version:\n    - openapi/tests/requirements.txt\n\n\n<details>\n<summary>\u26a0\ufe0f <b>Warning</b></summary>\n\n```\nschemathesis 3.19.7 requires werkzeug, which is not installed.\n\n```\n</details>\n\n\n#### Vulnerabilities that will be fixed\n\n\n\n\n\n##### By pinning:\nSeverity                   | Priority Score (*)                   | Issue                   | Upgrade                   | Breaking Change                   | Exploit Maturity\n:-------------------------:|-------------------------|:-------------------------|:-------------------------|:-------------------------|:-------------------------\n![medium severity](https://res.cloudinary.com/snyk/image/upload/w_20,h_20/v1561977819/icon/m.png \"medium severity\")  |  **611/1000**  <br/> **Why?** Recently disclosed, Has a fix available, CVSS 6.5  | Inefficient Algorithmic Complexity <br/>[SNYK-PYTHON-WERKZEUG-6035177](https://snyk.io/vuln/SNYK-PYTHON-WERKZEUG-6035177) |  `werkzeug:` <br> `2.2.3 -> 3.0.1` <br>  |  No  | No Known Exploit \n\n(*) Note that the real score may have changed since the PR was raised.\n\n\n\n\nSome vulnerabilities couldn't be fully fixed and so Snyk will still find them when the project is tested again. This may be because the vulnerability existed within more than one direct dependency, but not all of the affected dependencies could be upgraded.\n\n\nCheck the changes in this PR to ensure they won't cause issues with your project.\n\n\n\n------------\n\n\n\n**Note:** *You are seeing this because you or someone else with access to this repository has authorized Snyk to open fix PRs.*\n\nFor more information:  <img src=\"https://api.segment.io/v1/pixel/track?data=eyJ3cml0ZUtleSI6InJyWmxZcEdHY2RyTHZsb0lYd0dUcVg4WkFRTnNCOUEwIiwiYW5vbnltb3VzSWQiOiI5ZWI4NTJiMi1mODVhLTRmYmQtOTE2My00NGU3MGYwNGVlYWUiLCJldmVudCI6IlBSIHZpZXdlZCIsInByb3BlcnRpZXMiOnsicHJJZCI6IjllYjg1MmIyLWY4NWEtNGZiZC05MTYzLTQ0ZTcwZjA0ZWVhZSJ9fQ==\" width=\"0\" height=\"0\"/>\n\ud83e\uddd0 [View latest project report](https://app.snyk.io/org/generall-jyq/project/0f2da737-9ae8-4b0c-bce6-075e016ac4f6?utm_source&#x3D;github&amp;utm_medium&#x3D;referral&amp;page&#x3D;fix-pr)\n\n\ud83d\udee0 [Adjust project settings](https://app.snyk.io/org/generall-jyq/project/0f2da737-9ae8-4b0c-bce6-075e016ac4f6?utm_source&#x3D;github&amp;utm_medium&#x3D;referral&amp;page&#x3D;fix-pr/settings)\n\n\ud83d\udcda [Read more about Snyk's upgrade and patch logic](https://support.snyk.io/hc/en-us/articles/360003891078-Snyk-patches-to-fix-vulnerabilities)\n\n[//]: # (snyk:metadata:{\"prId\":\"9eb852b2-f85a-4fbd-9163-44e70f04eeae\",\"prPublicId\":\"9eb852b2-f85a-4fbd-9163-44e70f04eeae\",\"dependencies\":[{\"name\":\"werkzeug\",\"from\":\"2.2.3\",\"to\":\"3.0.1\"}],\"packageManager\":\"pip\",\"projectPublicId\":\"0f2da737-9ae8-4b0c-bce6-075e016ac4f6\",\"projectUrl\":\"https://app.snyk.io/org/generall-jyq/project/0f2da737-9ae8-4b0c-bce6-075e016ac4f6?utm_source=github&utm_medium=referral&page=fix-pr\",\"type\":\"auto\",\"patch\":[],\"vulns\":[\"SNYK-PYTHON-WERKZEUG-6035177\"],\"upgrade\":[],\"isBreakingChange\":false,\"env\":\"prod\",\"prType\":\"fix\",\"templateVariants\":[\"updated-fix-title\",\"pr-warning-shown\",\"priorityScore\"],\"priorityScoreList\":[611],\"remediationStrategy\":\"vuln\"})\n\n---\n\n**Learn how to fix vulnerabilities with free interactive lessons:**\n\n \ud83e\udd89 [Learn about vulnerability in an interactive lesson of Snyk Learn.](https://learn.snyk.io/?loc&#x3D;fix-pr)\n",
                "created_at": "2023-10-27T00:12:08Z",
                "updated_at": "2023-10-27T07:29:53Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "ff7365909606aaeaebb39733c03b305f88a03d51",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2882/commits",
                "review_comments_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2882/comments",
                "review_comment_url": "https://api.github.com/repos/qdrant/qdrant/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/qdrant/qdrant/issues/2882/comments",
                "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/cd67e9b7d4067aa4ac4f9c0711d87fed8530900f",
                "head": {
                    "label": "qdrant:snyk-fix-121673c4a7e8e66c3d1c11a76714ca79",
                    "ref": "snyk-fix-121673c4a7e8e66c3d1c11a76714ca79",
                    "sha": "cd67e9b7d4067aa4ac4f9c0711d87fed8530900f",
                    "user": {
                        "login": "qdrant",
                        "id": 73504361,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                        "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/qdrant",
                        "html_url": "https://github.com/qdrant",
                        "followers_url": "https://api.github.com/users/qdrant/followers",
                        "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                        "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                        "organizations_url": "https://api.github.com/users/qdrant/orgs",
                        "repos_url": "https://api.github.com/users/qdrant/repos",
                        "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/qdrant/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 268163609,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyNjgxNjM2MDk=",
                        "name": "qdrant",
                        "full_name": "qdrant/qdrant",
                        "private": false,
                        "owner": {
                            "login": "qdrant",
                            "id": 73504361,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/qdrant",
                            "html_url": "https://github.com/qdrant",
                            "followers_url": "https://api.github.com/users/qdrant/followers",
                            "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                            "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                            "organizations_url": "https://api.github.com/users/qdrant/orgs",
                            "repos_url": "https://api.github.com/users/qdrant/repos",
                            "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/qdrant/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/qdrant/qdrant",
                        "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                        "fork": false,
                        "url": "https://api.github.com/repos/qdrant/qdrant",
                        "forks_url": "https://api.github.com/repos/qdrant/qdrant/forks",
                        "keys_url": "https://api.github.com/repos/qdrant/qdrant/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/qdrant/qdrant/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/qdrant/qdrant/teams",
                        "hooks_url": "https://api.github.com/repos/qdrant/qdrant/hooks",
                        "issue_events_url": "https://api.github.com/repos/qdrant/qdrant/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/qdrant/qdrant/events",
                        "assignees_url": "https://api.github.com/repos/qdrant/qdrant/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/qdrant/qdrant/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/qdrant/qdrant/tags",
                        "blobs_url": "https://api.github.com/repos/qdrant/qdrant/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/qdrant/qdrant/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/qdrant/qdrant/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/qdrant/qdrant/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/qdrant/qdrant/languages",
                        "stargazers_url": "https://api.github.com/repos/qdrant/qdrant/stargazers",
                        "contributors_url": "https://api.github.com/repos/qdrant/qdrant/contributors",
                        "subscribers_url": "https://api.github.com/repos/qdrant/qdrant/subscribers",
                        "subscription_url": "https://api.github.com/repos/qdrant/qdrant/subscription",
                        "commits_url": "https://api.github.com/repos/qdrant/qdrant/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/qdrant/qdrant/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/qdrant/qdrant/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/qdrant/qdrant/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/qdrant/qdrant/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/qdrant/qdrant/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/qdrant/qdrant/merges",
                        "archive_url": "https://api.github.com/repos/qdrant/qdrant/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/qdrant/qdrant/downloads",
                        "issues_url": "https://api.github.com/repos/qdrant/qdrant/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/qdrant/qdrant/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/qdrant/qdrant/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/qdrant/qdrant/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/qdrant/qdrant/labels{/name}",
                        "releases_url": "https://api.github.com/repos/qdrant/qdrant/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/qdrant/qdrant/deployments",
                        "created_at": "2020-05-30T21:37:01Z",
                        "updated_at": "2023-10-27T01:24:03Z",
                        "pushed_at": "2023-10-27T00:12:09Z",
                        "git_url": "git://github.com/qdrant/qdrant.git",
                        "ssh_url": "git@github.com:qdrant/qdrant.git",
                        "clone_url": "https://github.com/qdrant/qdrant.git",
                        "svn_url": "https://github.com/qdrant/qdrant",
                        "homepage": "https://qdrant.tech",
                        "size": 14683,
                        "stargazers_count": 13413,
                        "watchers_count": 13413,
                        "language": "Rust",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 777,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 183,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "approximate-nearest-neighbor-search",
                            "embeddings-similarity",
                            "hacktoberfest",
                            "hnsw",
                            "image-search",
                            "knn-algorithm",
                            "machine-learning",
                            "matching",
                            "mlops",
                            "nearest-neighbor-search",
                            "neural-network",
                            "neural-search",
                            "recommender-system",
                            "search",
                            "search-engine",
                            "search-engines",
                            "similarity-search",
                            "vector-database",
                            "vector-search",
                            "vector-search-engine"
                        ],
                        "visibility": "public",
                        "forks": 777,
                        "open_issues": 183,
                        "watchers": 13413,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "qdrant:master",
                    "ref": "master",
                    "sha": "20cd26f3774107bd18ba5a6f32a60079a38852b2",
                    "user": {
                        "login": "qdrant",
                        "id": 73504361,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                        "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/qdrant",
                        "html_url": "https://github.com/qdrant",
                        "followers_url": "https://api.github.com/users/qdrant/followers",
                        "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                        "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                        "organizations_url": "https://api.github.com/users/qdrant/orgs",
                        "repos_url": "https://api.github.com/users/qdrant/repos",
                        "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/qdrant/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 268163609,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyNjgxNjM2MDk=",
                        "name": "qdrant",
                        "full_name": "qdrant/qdrant",
                        "private": false,
                        "owner": {
                            "login": "qdrant",
                            "id": 73504361,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/qdrant",
                            "html_url": "https://github.com/qdrant",
                            "followers_url": "https://api.github.com/users/qdrant/followers",
                            "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                            "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                            "organizations_url": "https://api.github.com/users/qdrant/orgs",
                            "repos_url": "https://api.github.com/users/qdrant/repos",
                            "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/qdrant/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/qdrant/qdrant",
                        "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                        "fork": false,
                        "url": "https://api.github.com/repos/qdrant/qdrant",
                        "forks_url": "https://api.github.com/repos/qdrant/qdrant/forks",
                        "keys_url": "https://api.github.com/repos/qdrant/qdrant/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/qdrant/qdrant/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/qdrant/qdrant/teams",
                        "hooks_url": "https://api.github.com/repos/qdrant/qdrant/hooks",
                        "issue_events_url": "https://api.github.com/repos/qdrant/qdrant/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/qdrant/qdrant/events",
                        "assignees_url": "https://api.github.com/repos/qdrant/qdrant/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/qdrant/qdrant/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/qdrant/qdrant/tags",
                        "blobs_url": "https://api.github.com/repos/qdrant/qdrant/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/qdrant/qdrant/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/qdrant/qdrant/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/qdrant/qdrant/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/qdrant/qdrant/languages",
                        "stargazers_url": "https://api.github.com/repos/qdrant/qdrant/stargazers",
                        "contributors_url": "https://api.github.com/repos/qdrant/qdrant/contributors",
                        "subscribers_url": "https://api.github.com/repos/qdrant/qdrant/subscribers",
                        "subscription_url": "https://api.github.com/repos/qdrant/qdrant/subscription",
                        "commits_url": "https://api.github.com/repos/qdrant/qdrant/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/qdrant/qdrant/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/qdrant/qdrant/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/qdrant/qdrant/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/qdrant/qdrant/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/qdrant/qdrant/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/qdrant/qdrant/merges",
                        "archive_url": "https://api.github.com/repos/qdrant/qdrant/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/qdrant/qdrant/downloads",
                        "issues_url": "https://api.github.com/repos/qdrant/qdrant/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/qdrant/qdrant/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/qdrant/qdrant/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/qdrant/qdrant/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/qdrant/qdrant/labels{/name}",
                        "releases_url": "https://api.github.com/repos/qdrant/qdrant/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/qdrant/qdrant/deployments",
                        "created_at": "2020-05-30T21:37:01Z",
                        "updated_at": "2023-10-27T01:24:03Z",
                        "pushed_at": "2023-10-27T00:12:09Z",
                        "git_url": "git://github.com/qdrant/qdrant.git",
                        "ssh_url": "git@github.com:qdrant/qdrant.git",
                        "clone_url": "https://github.com/qdrant/qdrant.git",
                        "svn_url": "https://github.com/qdrant/qdrant",
                        "homepage": "https://qdrant.tech",
                        "size": 14683,
                        "stargazers_count": 13413,
                        "watchers_count": 13413,
                        "language": "Rust",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 777,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 183,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "approximate-nearest-neighbor-search",
                            "embeddings-similarity",
                            "hacktoberfest",
                            "hnsw",
                            "image-search",
                            "knn-algorithm",
                            "machine-learning",
                            "matching",
                            "mlops",
                            "nearest-neighbor-search",
                            "neural-network",
                            "neural-search",
                            "recommender-system",
                            "search",
                            "search-engine",
                            "search-engines",
                            "similarity-search",
                            "vector-database",
                            "vector-search",
                            "vector-search-engine"
                        ],
                        "visibility": "public",
                        "forks": 777,
                        "open_issues": 183,
                        "watchers": 13413,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2882"
                    },
                    "html": {
                        "href": "https://github.com/qdrant/qdrant/pull/2882"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/issues/2882"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/issues/2882/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2882/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2882/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/statuses/cd67e9b7d4067aa4ac4f9c0711d87fed8530900f"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T07:29:54Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32889491738",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 79587688,
            "login": "eliassama",
            "display_login": "eliassama",
            "gravatar_id": "",
            "url": "https://api.github.com/users/eliassama",
            "avatar_url": "https://avatars.githubusercontent.com/u/79587688?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/qdrant/qdrant/issues/2774",
                "repository_url": "https://api.github.com/repos/qdrant/qdrant",
                "labels_url": "https://api.github.com/repos/qdrant/qdrant/issues/2774/labels{/name}",
                "comments_url": "https://api.github.com/repos/qdrant/qdrant/issues/2774/comments",
                "events_url": "https://api.github.com/repos/qdrant/qdrant/issues/2774/events",
                "html_url": "https://github.com/qdrant/qdrant/issues/2774",
                "id": 1931722192,
                "node_id": "I_kwDOD_vaGc5zI73Q",
                "number": 2774,
                "title": "I have some problems with my service",
                "user": {
                    "login": "eliassama",
                    "id": 79587688,
                    "node_id": "MDQ6VXNlcjc5NTg3Njg4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/79587688?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/eliassama",
                    "html_url": "https://github.com/eliassama",
                    "followers_url": "https://api.github.com/users/eliassama/followers",
                    "following_url": "https://api.github.com/users/eliassama/following{/other_user}",
                    "gists_url": "https://api.github.com/users/eliassama/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/eliassama/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/eliassama/subscriptions",
                    "organizations_url": "https://api.github.com/users/eliassama/orgs",
                    "repos_url": "https://api.github.com/users/eliassama/repos",
                    "events_url": "https://api.github.com/users/eliassama/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/eliassama/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 2099127844,
                        "node_id": "MDU6TGFiZWwyMDk5MTI3ODQ0",
                        "url": "https://api.github.com/repos/qdrant/qdrant/labels/bug",
                        "name": "bug",
                        "color": "d73a4a",
                        "default": true,
                        "description": "Something isn't working"
                    }
                ],
                "state": "closed",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 5,
                "created_at": "2023-10-08T09:13:25Z",
                "updated_at": "2023-10-27T06:14:07Z",
                "closed_at": "2023-10-27T06:12:25Z",
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "\r\n## Current Behavior\r\nThe environment is as follows:\r\n1. I have three machines deployed in a distributed cluster. A single machine is 16C 32G\r\n2. Version: v1.1.1\r\n3. There are 33 collection\r\n4. Each set is a 512-dimensional vector, with about 10 million of them\r\n5. collection info is :\r\n```json\r\n{\r\n    \"result\":{\r\n        \"status\":\"green\",\r\n        \"optimizer_status\":\"ok\",\r\n        \"vectors_count\":3977033,\r\n        \"indexed_vectors_count\":3968353,\r\n        \"points_count\":3977033,\r\n        \"segments_count\":4,\r\n        \"config\":{\r\n            \"params\":{\r\n                \"vectors\":{\r\n                    \"size\":512,\r\n                    \"distance\":\"Cosine\"\r\n                },\r\n                \"shard_number\":1,\r\n                \"replication_factor\":2,\r\n                \"write_consistency_factor\":1,\r\n                \"on_disk_payload\":true\r\n            },\r\n            \"hnsw_config\":{\r\n                \"m\":16,\r\n                \"ef_construct\":100,\r\n                \"full_scan_threshold\":10000,\r\n                \"max_indexing_threads\":0,\r\n                \"on_disk\":true,\r\n                \"payload_m\":16\r\n            },\r\n            \"optimizer_config\":{\r\n                \"deleted_threshold\":0.2,\r\n                \"vacuum_min_vector_number\":1000,\r\n                \"default_segment_number\":0,\r\n                \"max_segment_size\":null,\r\n                \"memmap_threshold\":20000,\r\n                \"indexing_threshold\":20000,\r\n                \"flush_interval_sec\":5,\r\n                \"max_optimization_threads\":1\r\n            },\r\n            \"wal_config\":{\r\n                \"wal_capacity_mb\":32,\r\n                \"wal_segments_ahead\":0\r\n            },\r\n            \"quantization_config\":null\r\n        },\r\n        \"payload_schema\":{\r\n            \"user_id\":{\r\n                \"data_type\":\"keyword\",\r\n                \"points\":3977033\r\n            }\r\n        }\r\n    },\r\n    \"status\":\"ok\",\r\n    \"time\":0.004815987\r\n}\r\n```\r\n6. config is:\r\n```yaml\r\nstorage:\r\n  # Where to store all the data\r\n  storage_path: /disk/storage\r\n\r\n  # Where to store snapshots\r\n  snapshots_path: /disk/snapshots\r\n\r\n  # If true - point's payload will not be stored in memory.\r\n  # It will be read from the disk every time it is requested.\r\n  # This setting saves RAM by (slightly) increasing the response time.\r\n  # Note: those payload values that are involved in filtering and are indexed - remain in RAM.\r\n  on_disk_payload: true\r\n\r\n  # Write-ahead-log related configuration\r\n  wal:\r\n    # Size of a single WAL segment\r\n    wal_capacity_mb: 32\r\n\r\n    # Number of WAL segments to create ahead of actual data requirement\r\n    wal_segments_ahead: 0\r\n\r\n  # Normal node - receives all updates and answers all queries\r\n  node_type: \"Normal\"\r\n\r\n  # Listener node - receives all updates, but does not answer search/read queries\r\n  # Useful for setting up a dedicated backup node\r\n  # node_type: \"Listener\"\r\n\r\n  performance:\r\n    # Number of parallel threads used for search operations. If 0 - auto selection.\r\n    max_search_threads: 0\r\n    # Max total number of threads, which can be used for running optimization processes across all collections.\r\n    # Note: Each optimization thread will also use `max_indexing_threads` for index building.\r\n    # So total number of threads used for optimization will be `max_optimization_threads * max_indexing_threads`\r\n    max_optimization_threads: 1\r\n\r\n  optimizers:\r\n    # The minimal fraction of deleted vectors in a segment, required to perform segment optimization\r\n    deleted_threshold: 0.2\r\n\r\n    # The minimal number of vectors in a segment, required to perform segment optimization\r\n    vacuum_min_vector_number: 1000\r\n\r\n    # Target amount of segments optimizer will try to keep.\r\n    # Real amount of segments may vary depending on multiple parameters:\r\n    #  - Amount of stored points\r\n    #  - Current write RPS\r\n    #\r\n    # It is recommended to select default number of segments as a factor of the number of search threads,\r\n    # so that each segment would be handled evenly by one of the threads.\r\n    # If `default_segment_number = 0`, will be automatically selected by the number of available CPUs\r\n    default_segment_number: 0\r\n\r\n    # Do not create segments larger this size (in KiloBytes).\r\n    # Large segments might require disproportionately long indexation times,\r\n    # therefore it makes sense to limit the size of segments.\r\n    #\r\n    # If indexation speed have more priority for your - make this parameter lower.\r\n    # If search speed is more important - make this parameter higher.\r\n    # Note: 1Kb = 1 vector of size 256\r\n    # If not set, will be automatically selected considering the number of available CPUs.\r\n    max_segment_size_kb: null\r\n\r\n    # Maximum size (in KiloBytes) of vectors to store in-memory per segment.\r\n    # Segments larger than this threshold will be stored as read-only memmaped file.\r\n    # To enable memmap storage, lower the threshold\r\n    # Note: 1Kb = 1 vector of size 256\r\n    # If not set, mmap will not be used.\r\n    memmap_threshold_kb: null\r\n\r\n    # Maximum size (in KiloBytes) of vectors allowed for plain index.\r\n    # Default value based on https://github.com/google-research/google-research/blob/master/scann/docs/algorithms.md\r\n    # Note: 1Kb = 1 vector of size 256\r\n    indexing_threshold_kb: 20000\r\n\r\n    # Interval between forced flushes.\r\n    flush_interval_sec: 5\r\n    \r\n    # Max number of threads, which can be used for optimization per collection.\r\n    # Note: Each optimization thread will also use `max_indexing_threads` for index building.\r\n    # So total number of threads used for optimization will be `max_optimization_threads * max_indexing_threads`\r\n    # If `max_optimization_threads = 0`, optimization will be disabled.\r\n    max_optimization_threads: 1\r\n\r\n  # Default parameters of HNSW Index. Could be overridden for each collection individually\r\n  hnsw_index:\r\n    # Number of edges per node in the index graph. Larger the value - more accurate the search, more space required.\r\n    m: 16\r\n    # Number of neighbours to consider during the index building. Larger the value - more accurate the search, more time required to build index.\r\n    ef_construct: 100\r\n    # Minimal size (in KiloBytes) of vectors for additional payload-based indexing.\r\n    # If payload chunk is smaller than `full_scan_threshold_kb` additional indexing won't be used -\r\n    # in this case full-scan search should be preferred by query planner and additional indexing is not required.\r\n    # Note: 1Kb = 1 vector of size 256\r\n    full_scan_threshold_kb: 10000\r\n    # Number of parallel threads used for background index building. If 0 - auto selection.\r\n    max_indexing_threads: 0\r\n    # Store HNSW index on disk. If set to false, index will be stored in RAM. Default: false\r\n    on_disk: true\r\n    # Custom M param for hnsw graph built for payload index. If not set, default M will be used.\r\n    payload_m: null\r\n\r\nservice:\r\n\r\n  # Maximum size of POST data in a single request in megabytes\r\n  max_request_size_mb: 64\r\n\r\n  # Number of parallel workers used for serving the api. If 0 - equal to the number of available cores.\r\n  # If missing - Same as storage.max_search_threads\r\n  max_workers: 0\r\n\r\n  # Host to bind the service on\r\n  host: 0.0.0.0\r\n\r\n  # HTTP port to bind the service on\r\n  http_port: 6333\r\n\r\n  # gRPC port to bind the service on.\r\n  # If `null` - gRPC is disabled. Default: null\r\n  grpc_port: 6334\r\n  # Uncomment to enable gRPC:\r\n  # grpc_port: 6334\r\n\r\n  # Enable CORS headers in REST API.\r\n  # If enabled, browsers would be allowed to query REST endpoints regardless of query origin.\r\n  # More info: https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\r\n  # Default: true\r\n  enable_cors: true\r\n\r\ncluster:\r\n  # Use `enabled: true` to run Qdrant in distributed deployment mode\r\n  enabled: true\r\n\r\n  # Configuration of the inter-cluster communication\r\n  p2p:\r\n    # Port for internal communication between peers\r\n    port: 6335\r\n\r\n  # Configuration related to distributed consensus algorithm\r\n  consensus:\r\n    # How frequently peers should ping each other.\r\n    # Setting this parameter to lower value will allow consensus\r\n    # to detect disconnected nodes earlier, but too frequent\r\n    # tick period may create significant network and CPU overhead.\r\n    # We encourage you NOT to change this parameter unless you know what you are doing.\r\n    tick_period_ms: 100\r\n\r\n\r\n# Set to true to prevent service from sending usage statistics to the developers.\r\n# Read more: https://qdrant.tech/documentation/telemetry\r\ntelemetry_disabled: true\r\n```\r\n\r\nThe questions are as follows:\r\n1. Of the three machines, one machine is always OOM, and one machine uses almost no memory. There's one other machine that works.\r\n2. The following errors are frequently displayed in logs\r\n![image](https://github.com/qdrant/qdrant/assets/79587688/6879c7ec-91dd-4735-8f5b-e8cb0e877d81)\r\n\r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\n1. No exception log is generated\r\n2. Memory load balancing among the three nodes does not stop because of the OOM node, or the memory usage is small\r\n\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/qdrant/qdrant/issues/2774/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/qdrant/qdrant/issues/2774/timeline",
                "performed_via_github_app": null,
                "state_reason": "completed"
            },
            "comment": {
                "url": "https://api.github.com/repos/qdrant/qdrant/issues/comments/1782355982",
                "html_url": "https://github.com/qdrant/qdrant/issues/2774#issuecomment-1782355982",
                "issue_url": "https://api.github.com/repos/qdrant/qdrant/issues/2774",
                "id": 1782355982,
                "node_id": "IC_kwDOD_vaGc5qPJgO",
                "user": {
                    "login": "eliassama",
                    "id": 79587688,
                    "node_id": "MDQ6VXNlcjc5NTg3Njg4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/79587688?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/eliassama",
                    "html_url": "https://github.com/eliassama",
                    "followers_url": "https://api.github.com/users/eliassama/followers",
                    "following_url": "https://api.github.com/users/eliassama/following{/other_user}",
                    "gists_url": "https://api.github.com/users/eliassama/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/eliassama/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/eliassama/subscriptions",
                    "organizations_url": "https://api.github.com/users/eliassama/orgs",
                    "repos_url": "https://api.github.com/users/eliassama/repos",
                    "events_url": "https://api.github.com/users/eliassama/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/eliassama/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T06:14:07Z",
                "updated_at": "2023-10-27T06:14:07Z",
                "author_association": "NONE",
                "body": "To add: The current 1.6.0 cluster runs more stably than the 1.1.1 cluster.\r\n\r\nHope it lasts longer.",
                "reactions": {
                    "url": "https://api.github.com/repos/qdrant/qdrant/issues/comments/1782355982/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T06:14:08Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32889462047",
        "type": "IssuesEvent",
        "actor": {
            "id": 79587688,
            "login": "eliassama",
            "display_login": "eliassama",
            "gravatar_id": "",
            "url": "https://api.github.com/users/eliassama",
            "avatar_url": "https://avatars.githubusercontent.com/u/79587688?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "action": "closed",
            "issue": {
                "url": "https://api.github.com/repos/qdrant/qdrant/issues/2774",
                "repository_url": "https://api.github.com/repos/qdrant/qdrant",
                "labels_url": "https://api.github.com/repos/qdrant/qdrant/issues/2774/labels{/name}",
                "comments_url": "https://api.github.com/repos/qdrant/qdrant/issues/2774/comments",
                "events_url": "https://api.github.com/repos/qdrant/qdrant/issues/2774/events",
                "html_url": "https://github.com/qdrant/qdrant/issues/2774",
                "id": 1931722192,
                "node_id": "I_kwDOD_vaGc5zI73Q",
                "number": 2774,
                "title": "I have some problems with my service",
                "user": {
                    "login": "eliassama",
                    "id": 79587688,
                    "node_id": "MDQ6VXNlcjc5NTg3Njg4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/79587688?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/eliassama",
                    "html_url": "https://github.com/eliassama",
                    "followers_url": "https://api.github.com/users/eliassama/followers",
                    "following_url": "https://api.github.com/users/eliassama/following{/other_user}",
                    "gists_url": "https://api.github.com/users/eliassama/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/eliassama/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/eliassama/subscriptions",
                    "organizations_url": "https://api.github.com/users/eliassama/orgs",
                    "repos_url": "https://api.github.com/users/eliassama/repos",
                    "events_url": "https://api.github.com/users/eliassama/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/eliassama/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 2099127844,
                        "node_id": "MDU6TGFiZWwyMDk5MTI3ODQ0",
                        "url": "https://api.github.com/repos/qdrant/qdrant/labels/bug",
                        "name": "bug",
                        "color": "d73a4a",
                        "default": true,
                        "description": "Something isn't working"
                    }
                ],
                "state": "closed",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 4,
                "created_at": "2023-10-08T09:13:25Z",
                "updated_at": "2023-10-27T06:12:25Z",
                "closed_at": "2023-10-27T06:12:25Z",
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "\r\n## Current Behavior\r\nThe environment is as follows:\r\n1. I have three machines deployed in a distributed cluster. A single machine is 16C 32G\r\n2. Version: v1.1.1\r\n3. There are 33 collection\r\n4. Each set is a 512-dimensional vector, with about 10 million of them\r\n5. collection info is :\r\n```json\r\n{\r\n    \"result\":{\r\n        \"status\":\"green\",\r\n        \"optimizer_status\":\"ok\",\r\n        \"vectors_count\":3977033,\r\n        \"indexed_vectors_count\":3968353,\r\n        \"points_count\":3977033,\r\n        \"segments_count\":4,\r\n        \"config\":{\r\n            \"params\":{\r\n                \"vectors\":{\r\n                    \"size\":512,\r\n                    \"distance\":\"Cosine\"\r\n                },\r\n                \"shard_number\":1,\r\n                \"replication_factor\":2,\r\n                \"write_consistency_factor\":1,\r\n                \"on_disk_payload\":true\r\n            },\r\n            \"hnsw_config\":{\r\n                \"m\":16,\r\n                \"ef_construct\":100,\r\n                \"full_scan_threshold\":10000,\r\n                \"max_indexing_threads\":0,\r\n                \"on_disk\":true,\r\n                \"payload_m\":16\r\n            },\r\n            \"optimizer_config\":{\r\n                \"deleted_threshold\":0.2,\r\n                \"vacuum_min_vector_number\":1000,\r\n                \"default_segment_number\":0,\r\n                \"max_segment_size\":null,\r\n                \"memmap_threshold\":20000,\r\n                \"indexing_threshold\":20000,\r\n                \"flush_interval_sec\":5,\r\n                \"max_optimization_threads\":1\r\n            },\r\n            \"wal_config\":{\r\n                \"wal_capacity_mb\":32,\r\n                \"wal_segments_ahead\":0\r\n            },\r\n            \"quantization_config\":null\r\n        },\r\n        \"payload_schema\":{\r\n            \"user_id\":{\r\n                \"data_type\":\"keyword\",\r\n                \"points\":3977033\r\n            }\r\n        }\r\n    },\r\n    \"status\":\"ok\",\r\n    \"time\":0.004815987\r\n}\r\n```\r\n6. config is:\r\n```yaml\r\nstorage:\r\n  # Where to store all the data\r\n  storage_path: /disk/storage\r\n\r\n  # Where to store snapshots\r\n  snapshots_path: /disk/snapshots\r\n\r\n  # If true - point's payload will not be stored in memory.\r\n  # It will be read from the disk every time it is requested.\r\n  # This setting saves RAM by (slightly) increasing the response time.\r\n  # Note: those payload values that are involved in filtering and are indexed - remain in RAM.\r\n  on_disk_payload: true\r\n\r\n  # Write-ahead-log related configuration\r\n  wal:\r\n    # Size of a single WAL segment\r\n    wal_capacity_mb: 32\r\n\r\n    # Number of WAL segments to create ahead of actual data requirement\r\n    wal_segments_ahead: 0\r\n\r\n  # Normal node - receives all updates and answers all queries\r\n  node_type: \"Normal\"\r\n\r\n  # Listener node - receives all updates, but does not answer search/read queries\r\n  # Useful for setting up a dedicated backup node\r\n  # node_type: \"Listener\"\r\n\r\n  performance:\r\n    # Number of parallel threads used for search operations. If 0 - auto selection.\r\n    max_search_threads: 0\r\n    # Max total number of threads, which can be used for running optimization processes across all collections.\r\n    # Note: Each optimization thread will also use `max_indexing_threads` for index building.\r\n    # So total number of threads used for optimization will be `max_optimization_threads * max_indexing_threads`\r\n    max_optimization_threads: 1\r\n\r\n  optimizers:\r\n    # The minimal fraction of deleted vectors in a segment, required to perform segment optimization\r\n    deleted_threshold: 0.2\r\n\r\n    # The minimal number of vectors in a segment, required to perform segment optimization\r\n    vacuum_min_vector_number: 1000\r\n\r\n    # Target amount of segments optimizer will try to keep.\r\n    # Real amount of segments may vary depending on multiple parameters:\r\n    #  - Amount of stored points\r\n    #  - Current write RPS\r\n    #\r\n    # It is recommended to select default number of segments as a factor of the number of search threads,\r\n    # so that each segment would be handled evenly by one of the threads.\r\n    # If `default_segment_number = 0`, will be automatically selected by the number of available CPUs\r\n    default_segment_number: 0\r\n\r\n    # Do not create segments larger this size (in KiloBytes).\r\n    # Large segments might require disproportionately long indexation times,\r\n    # therefore it makes sense to limit the size of segments.\r\n    #\r\n    # If indexation speed have more priority for your - make this parameter lower.\r\n    # If search speed is more important - make this parameter higher.\r\n    # Note: 1Kb = 1 vector of size 256\r\n    # If not set, will be automatically selected considering the number of available CPUs.\r\n    max_segment_size_kb: null\r\n\r\n    # Maximum size (in KiloBytes) of vectors to store in-memory per segment.\r\n    # Segments larger than this threshold will be stored as read-only memmaped file.\r\n    # To enable memmap storage, lower the threshold\r\n    # Note: 1Kb = 1 vector of size 256\r\n    # If not set, mmap will not be used.\r\n    memmap_threshold_kb: null\r\n\r\n    # Maximum size (in KiloBytes) of vectors allowed for plain index.\r\n    # Default value based on https://github.com/google-research/google-research/blob/master/scann/docs/algorithms.md\r\n    # Note: 1Kb = 1 vector of size 256\r\n    indexing_threshold_kb: 20000\r\n\r\n    # Interval between forced flushes.\r\n    flush_interval_sec: 5\r\n    \r\n    # Max number of threads, which can be used for optimization per collection.\r\n    # Note: Each optimization thread will also use `max_indexing_threads` for index building.\r\n    # So total number of threads used for optimization will be `max_optimization_threads * max_indexing_threads`\r\n    # If `max_optimization_threads = 0`, optimization will be disabled.\r\n    max_optimization_threads: 1\r\n\r\n  # Default parameters of HNSW Index. Could be overridden for each collection individually\r\n  hnsw_index:\r\n    # Number of edges per node in the index graph. Larger the value - more accurate the search, more space required.\r\n    m: 16\r\n    # Number of neighbours to consider during the index building. Larger the value - more accurate the search, more time required to build index.\r\n    ef_construct: 100\r\n    # Minimal size (in KiloBytes) of vectors for additional payload-based indexing.\r\n    # If payload chunk is smaller than `full_scan_threshold_kb` additional indexing won't be used -\r\n    # in this case full-scan search should be preferred by query planner and additional indexing is not required.\r\n    # Note: 1Kb = 1 vector of size 256\r\n    full_scan_threshold_kb: 10000\r\n    # Number of parallel threads used for background index building. If 0 - auto selection.\r\n    max_indexing_threads: 0\r\n    # Store HNSW index on disk. If set to false, index will be stored in RAM. Default: false\r\n    on_disk: true\r\n    # Custom M param for hnsw graph built for payload index. If not set, default M will be used.\r\n    payload_m: null\r\n\r\nservice:\r\n\r\n  # Maximum size of POST data in a single request in megabytes\r\n  max_request_size_mb: 64\r\n\r\n  # Number of parallel workers used for serving the api. If 0 - equal to the number of available cores.\r\n  # If missing - Same as storage.max_search_threads\r\n  max_workers: 0\r\n\r\n  # Host to bind the service on\r\n  host: 0.0.0.0\r\n\r\n  # HTTP port to bind the service on\r\n  http_port: 6333\r\n\r\n  # gRPC port to bind the service on.\r\n  # If `null` - gRPC is disabled. Default: null\r\n  grpc_port: 6334\r\n  # Uncomment to enable gRPC:\r\n  # grpc_port: 6334\r\n\r\n  # Enable CORS headers in REST API.\r\n  # If enabled, browsers would be allowed to query REST endpoints regardless of query origin.\r\n  # More info: https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\r\n  # Default: true\r\n  enable_cors: true\r\n\r\ncluster:\r\n  # Use `enabled: true` to run Qdrant in distributed deployment mode\r\n  enabled: true\r\n\r\n  # Configuration of the inter-cluster communication\r\n  p2p:\r\n    # Port for internal communication between peers\r\n    port: 6335\r\n\r\n  # Configuration related to distributed consensus algorithm\r\n  consensus:\r\n    # How frequently peers should ping each other.\r\n    # Setting this parameter to lower value will allow consensus\r\n    # to detect disconnected nodes earlier, but too frequent\r\n    # tick period may create significant network and CPU overhead.\r\n    # We encourage you NOT to change this parameter unless you know what you are doing.\r\n    tick_period_ms: 100\r\n\r\n\r\n# Set to true to prevent service from sending usage statistics to the developers.\r\n# Read more: https://qdrant.tech/documentation/telemetry\r\ntelemetry_disabled: true\r\n```\r\n\r\nThe questions are as follows:\r\n1. Of the three machines, one machine is always OOM, and one machine uses almost no memory. There's one other machine that works.\r\n2. The following errors are frequently displayed in logs\r\n![image](https://github.com/qdrant/qdrant/assets/79587688/6879c7ec-91dd-4735-8f5b-e8cb0e877d81)\r\n\r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\n1. No exception log is generated\r\n2. Memory load balancing among the three nodes does not stop because of the OOM node, or the memory usage is small\r\n\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/qdrant/qdrant/issues/2774/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/qdrant/qdrant/issues/2774/timeline",
                "performed_via_github_app": null,
                "state_reason": "completed"
            }
        },
        "public": true,
        "created_at": "2023-10-27T06:12:26Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32889461965",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 79587688,
            "login": "eliassama",
            "display_login": "eliassama",
            "gravatar_id": "",
            "url": "https://api.github.com/users/eliassama",
            "avatar_url": "https://avatars.githubusercontent.com/u/79587688?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/qdrant/qdrant/issues/2774",
                "repository_url": "https://api.github.com/repos/qdrant/qdrant",
                "labels_url": "https://api.github.com/repos/qdrant/qdrant/issues/2774/labels{/name}",
                "comments_url": "https://api.github.com/repos/qdrant/qdrant/issues/2774/comments",
                "events_url": "https://api.github.com/repos/qdrant/qdrant/issues/2774/events",
                "html_url": "https://github.com/qdrant/qdrant/issues/2774",
                "id": 1931722192,
                "node_id": "I_kwDOD_vaGc5zI73Q",
                "number": 2774,
                "title": "I have some problems with my service",
                "user": {
                    "login": "eliassama",
                    "id": 79587688,
                    "node_id": "MDQ6VXNlcjc5NTg3Njg4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/79587688?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/eliassama",
                    "html_url": "https://github.com/eliassama",
                    "followers_url": "https://api.github.com/users/eliassama/followers",
                    "following_url": "https://api.github.com/users/eliassama/following{/other_user}",
                    "gists_url": "https://api.github.com/users/eliassama/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/eliassama/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/eliassama/subscriptions",
                    "organizations_url": "https://api.github.com/users/eliassama/orgs",
                    "repos_url": "https://api.github.com/users/eliassama/repos",
                    "events_url": "https://api.github.com/users/eliassama/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/eliassama/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 2099127844,
                        "node_id": "MDU6TGFiZWwyMDk5MTI3ODQ0",
                        "url": "https://api.github.com/repos/qdrant/qdrant/labels/bug",
                        "name": "bug",
                        "color": "d73a4a",
                        "default": true,
                        "description": "Something isn't working"
                    }
                ],
                "state": "closed",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 4,
                "created_at": "2023-10-08T09:13:25Z",
                "updated_at": "2023-10-27T06:12:25Z",
                "closed_at": "2023-10-27T06:12:25Z",
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "\r\n## Current Behavior\r\nThe environment is as follows:\r\n1. I have three machines deployed in a distributed cluster. A single machine is 16C 32G\r\n2. Version: v1.1.1\r\n3. There are 33 collection\r\n4. Each set is a 512-dimensional vector, with about 10 million of them\r\n5. collection info is :\r\n```json\r\n{\r\n    \"result\":{\r\n        \"status\":\"green\",\r\n        \"optimizer_status\":\"ok\",\r\n        \"vectors_count\":3977033,\r\n        \"indexed_vectors_count\":3968353,\r\n        \"points_count\":3977033,\r\n        \"segments_count\":4,\r\n        \"config\":{\r\n            \"params\":{\r\n                \"vectors\":{\r\n                    \"size\":512,\r\n                    \"distance\":\"Cosine\"\r\n                },\r\n                \"shard_number\":1,\r\n                \"replication_factor\":2,\r\n                \"write_consistency_factor\":1,\r\n                \"on_disk_payload\":true\r\n            },\r\n            \"hnsw_config\":{\r\n                \"m\":16,\r\n                \"ef_construct\":100,\r\n                \"full_scan_threshold\":10000,\r\n                \"max_indexing_threads\":0,\r\n                \"on_disk\":true,\r\n                \"payload_m\":16\r\n            },\r\n            \"optimizer_config\":{\r\n                \"deleted_threshold\":0.2,\r\n                \"vacuum_min_vector_number\":1000,\r\n                \"default_segment_number\":0,\r\n                \"max_segment_size\":null,\r\n                \"memmap_threshold\":20000,\r\n                \"indexing_threshold\":20000,\r\n                \"flush_interval_sec\":5,\r\n                \"max_optimization_threads\":1\r\n            },\r\n            \"wal_config\":{\r\n                \"wal_capacity_mb\":32,\r\n                \"wal_segments_ahead\":0\r\n            },\r\n            \"quantization_config\":null\r\n        },\r\n        \"payload_schema\":{\r\n            \"user_id\":{\r\n                \"data_type\":\"keyword\",\r\n                \"points\":3977033\r\n            }\r\n        }\r\n    },\r\n    \"status\":\"ok\",\r\n    \"time\":0.004815987\r\n}\r\n```\r\n6. config is:\r\n```yaml\r\nstorage:\r\n  # Where to store all the data\r\n  storage_path: /disk/storage\r\n\r\n  # Where to store snapshots\r\n  snapshots_path: /disk/snapshots\r\n\r\n  # If true - point's payload will not be stored in memory.\r\n  # It will be read from the disk every time it is requested.\r\n  # This setting saves RAM by (slightly) increasing the response time.\r\n  # Note: those payload values that are involved in filtering and are indexed - remain in RAM.\r\n  on_disk_payload: true\r\n\r\n  # Write-ahead-log related configuration\r\n  wal:\r\n    # Size of a single WAL segment\r\n    wal_capacity_mb: 32\r\n\r\n    # Number of WAL segments to create ahead of actual data requirement\r\n    wal_segments_ahead: 0\r\n\r\n  # Normal node - receives all updates and answers all queries\r\n  node_type: \"Normal\"\r\n\r\n  # Listener node - receives all updates, but does not answer search/read queries\r\n  # Useful for setting up a dedicated backup node\r\n  # node_type: \"Listener\"\r\n\r\n  performance:\r\n    # Number of parallel threads used for search operations. If 0 - auto selection.\r\n    max_search_threads: 0\r\n    # Max total number of threads, which can be used for running optimization processes across all collections.\r\n    # Note: Each optimization thread will also use `max_indexing_threads` for index building.\r\n    # So total number of threads used for optimization will be `max_optimization_threads * max_indexing_threads`\r\n    max_optimization_threads: 1\r\n\r\n  optimizers:\r\n    # The minimal fraction of deleted vectors in a segment, required to perform segment optimization\r\n    deleted_threshold: 0.2\r\n\r\n    # The minimal number of vectors in a segment, required to perform segment optimization\r\n    vacuum_min_vector_number: 1000\r\n\r\n    # Target amount of segments optimizer will try to keep.\r\n    # Real amount of segments may vary depending on multiple parameters:\r\n    #  - Amount of stored points\r\n    #  - Current write RPS\r\n    #\r\n    # It is recommended to select default number of segments as a factor of the number of search threads,\r\n    # so that each segment would be handled evenly by one of the threads.\r\n    # If `default_segment_number = 0`, will be automatically selected by the number of available CPUs\r\n    default_segment_number: 0\r\n\r\n    # Do not create segments larger this size (in KiloBytes).\r\n    # Large segments might require disproportionately long indexation times,\r\n    # therefore it makes sense to limit the size of segments.\r\n    #\r\n    # If indexation speed have more priority for your - make this parameter lower.\r\n    # If search speed is more important - make this parameter higher.\r\n    # Note: 1Kb = 1 vector of size 256\r\n    # If not set, will be automatically selected considering the number of available CPUs.\r\n    max_segment_size_kb: null\r\n\r\n    # Maximum size (in KiloBytes) of vectors to store in-memory per segment.\r\n    # Segments larger than this threshold will be stored as read-only memmaped file.\r\n    # To enable memmap storage, lower the threshold\r\n    # Note: 1Kb = 1 vector of size 256\r\n    # If not set, mmap will not be used.\r\n    memmap_threshold_kb: null\r\n\r\n    # Maximum size (in KiloBytes) of vectors allowed for plain index.\r\n    # Default value based on https://github.com/google-research/google-research/blob/master/scann/docs/algorithms.md\r\n    # Note: 1Kb = 1 vector of size 256\r\n    indexing_threshold_kb: 20000\r\n\r\n    # Interval between forced flushes.\r\n    flush_interval_sec: 5\r\n    \r\n    # Max number of threads, which can be used for optimization per collection.\r\n    # Note: Each optimization thread will also use `max_indexing_threads` for index building.\r\n    # So total number of threads used for optimization will be `max_optimization_threads * max_indexing_threads`\r\n    # If `max_optimization_threads = 0`, optimization will be disabled.\r\n    max_optimization_threads: 1\r\n\r\n  # Default parameters of HNSW Index. Could be overridden for each collection individually\r\n  hnsw_index:\r\n    # Number of edges per node in the index graph. Larger the value - more accurate the search, more space required.\r\n    m: 16\r\n    # Number of neighbours to consider during the index building. Larger the value - more accurate the search, more time required to build index.\r\n    ef_construct: 100\r\n    # Minimal size (in KiloBytes) of vectors for additional payload-based indexing.\r\n    # If payload chunk is smaller than `full_scan_threshold_kb` additional indexing won't be used -\r\n    # in this case full-scan search should be preferred by query planner and additional indexing is not required.\r\n    # Note: 1Kb = 1 vector of size 256\r\n    full_scan_threshold_kb: 10000\r\n    # Number of parallel threads used for background index building. If 0 - auto selection.\r\n    max_indexing_threads: 0\r\n    # Store HNSW index on disk. If set to false, index will be stored in RAM. Default: false\r\n    on_disk: true\r\n    # Custom M param for hnsw graph built for payload index. If not set, default M will be used.\r\n    payload_m: null\r\n\r\nservice:\r\n\r\n  # Maximum size of POST data in a single request in megabytes\r\n  max_request_size_mb: 64\r\n\r\n  # Number of parallel workers used for serving the api. If 0 - equal to the number of available cores.\r\n  # If missing - Same as storage.max_search_threads\r\n  max_workers: 0\r\n\r\n  # Host to bind the service on\r\n  host: 0.0.0.0\r\n\r\n  # HTTP port to bind the service on\r\n  http_port: 6333\r\n\r\n  # gRPC port to bind the service on.\r\n  # If `null` - gRPC is disabled. Default: null\r\n  grpc_port: 6334\r\n  # Uncomment to enable gRPC:\r\n  # grpc_port: 6334\r\n\r\n  # Enable CORS headers in REST API.\r\n  # If enabled, browsers would be allowed to query REST endpoints regardless of query origin.\r\n  # More info: https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\r\n  # Default: true\r\n  enable_cors: true\r\n\r\ncluster:\r\n  # Use `enabled: true` to run Qdrant in distributed deployment mode\r\n  enabled: true\r\n\r\n  # Configuration of the inter-cluster communication\r\n  p2p:\r\n    # Port for internal communication between peers\r\n    port: 6335\r\n\r\n  # Configuration related to distributed consensus algorithm\r\n  consensus:\r\n    # How frequently peers should ping each other.\r\n    # Setting this parameter to lower value will allow consensus\r\n    # to detect disconnected nodes earlier, but too frequent\r\n    # tick period may create significant network and CPU overhead.\r\n    # We encourage you NOT to change this parameter unless you know what you are doing.\r\n    tick_period_ms: 100\r\n\r\n\r\n# Set to true to prevent service from sending usage statistics to the developers.\r\n# Read more: https://qdrant.tech/documentation/telemetry\r\ntelemetry_disabled: true\r\n```\r\n\r\nThe questions are as follows:\r\n1. Of the three machines, one machine is always OOM, and one machine uses almost no memory. There's one other machine that works.\r\n2. The following errors are frequently displayed in logs\r\n![image](https://github.com/qdrant/qdrant/assets/79587688/6879c7ec-91dd-4735-8f5b-e8cb0e877d81)\r\n\r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\n1. No exception log is generated\r\n2. Memory load balancing among the three nodes does not stop because of the OOM node, or the memory usage is small\r\n\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/qdrant/qdrant/issues/2774/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/qdrant/qdrant/issues/2774/timeline",
                "performed_via_github_app": null,
                "state_reason": "completed"
            },
            "comment": {
                "url": "https://api.github.com/repos/qdrant/qdrant/issues/comments/1782354408",
                "html_url": "https://github.com/qdrant/qdrant/issues/2774#issuecomment-1782354408",
                "issue_url": "https://api.github.com/repos/qdrant/qdrant/issues/2774",
                "id": 1782354408,
                "node_id": "IC_kwDOD_vaGc5qPJHo",
                "user": {
                    "login": "eliassama",
                    "id": 79587688,
                    "node_id": "MDQ6VXNlcjc5NTg3Njg4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/79587688?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/eliassama",
                    "html_url": "https://github.com/eliassama",
                    "followers_url": "https://api.github.com/users/eliassama/followers",
                    "following_url": "https://api.github.com/users/eliassama/following{/other_user}",
                    "gists_url": "https://api.github.com/users/eliassama/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/eliassama/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/eliassama/subscriptions",
                    "organizations_url": "https://api.github.com/users/eliassama/orgs",
                    "repos_url": "https://api.github.com/users/eliassama/repos",
                    "events_url": "https://api.github.com/users/eliassama/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/eliassama/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T06:12:25Z",
                "updated_at": "2023-10-27T06:12:25Z",
                "author_association": "NONE",
                "body": "> @eliassama Any updates to share following the version upgrade?\r\n\r\nSorry for replying so late.\r\n\r\nWe did not upgrade the original cluster, but built a new cluster and migrated the data there.\r\n\r\nDuring the migration process, we set the original cluster to read-only status and no longer write to the original cluster.\r\n\r\nDuring the migration process, we perform searches on both the new cluster and the original cluster.\r\n\r\nAfter the cluster migration is completed, we will take the original cluster offline.\r\n\r\nOverall, there seems to be no experience to draw from.\r\n\r\nWe use scripts to read the data from the original cluster and insert it into the new cluster.\r\n\r\nThis way we avoid having to deal with problems that may arise during the upgrade.\r\n\r\nHowever, I noticed that it seems that the file configuration of 1.6.0 has some changes compared to v1.1.1.\r\n\r\nAnd as of 1.6.0, there is a webUI that can be used to perform operations directly.\r\n\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/qdrant/qdrant/issues/comments/1782354408/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T06:12:26Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32885628869",
        "type": "WatchEvent",
        "actor": {
            "id": 15833879,
            "login": "jeffara",
            "display_login": "jeffara",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jeffara",
            "avatar_url": "https://avatars.githubusercontent.com/u/15833879?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T01:24:03Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32884721582",
        "type": "PullRequestEvent",
        "actor": {
            "id": 1935623,
            "login": "generall",
            "display_login": "generall",
            "gravatar_id": "",
            "url": "https://api.github.com/users/generall",
            "avatar_url": "https://avatars.githubusercontent.com/u/1935623?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "action": "opened",
            "number": 2882,
            "pull_request": {
                "url": "https://api.github.com/repos/qdrant/qdrant/pulls/2882",
                "id": 1575745317,
                "node_id": "PR_kwDOD_vaGc5d6_cl",
                "html_url": "https://github.com/qdrant/qdrant/pull/2882",
                "diff_url": "https://github.com/qdrant/qdrant/pull/2882.diff",
                "patch_url": "https://github.com/qdrant/qdrant/pull/2882.patch",
                "issue_url": "https://api.github.com/repos/qdrant/qdrant/issues/2882",
                "number": 2882,
                "state": "open",
                "locked": false,
                "title": "[Snyk] Security upgrade werkzeug from 2.2.3 to 3.0.1",
                "user": {
                    "login": "generall",
                    "id": 1935623,
                    "node_id": "MDQ6VXNlcjE5MzU2MjM=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/1935623?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/generall",
                    "html_url": "https://github.com/generall",
                    "followers_url": "https://api.github.com/users/generall/followers",
                    "following_url": "https://api.github.com/users/generall/following{/other_user}",
                    "gists_url": "https://api.github.com/users/generall/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/generall/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/generall/subscriptions",
                    "organizations_url": "https://api.github.com/users/generall/orgs",
                    "repos_url": "https://api.github.com/users/generall/repos",
                    "events_url": "https://api.github.com/users/generall/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/generall/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "<p>This PR was automatically created by Snyk using the credentials of a real user.</p><br /><h3>Snyk has created this PR to fix one or more vulnerable packages in the `pip` dependencies of this project.</h3>\n\n\n\n#### Changes included in this PR\n\n- Changes to the following files to upgrade the vulnerable dependencies to a fixed version:\n    - openapi/tests/requirements.txt\n\n\n<details>\n<summary>\u26a0\ufe0f <b>Warning</b></summary>\n\n```\nschemathesis 3.19.7 requires werkzeug, which is not installed.\n\n```\n</details>\n\n\n#### Vulnerabilities that will be fixed\n\n\n\n\n\n##### By pinning:\nSeverity                   | Priority Score (*)                   | Issue                   | Upgrade                   | Breaking Change                   | Exploit Maturity\n:-------------------------:|-------------------------|:-------------------------|:-------------------------|:-------------------------|:-------------------------\n![medium severity](https://res.cloudinary.com/snyk/image/upload/w_20,h_20/v1561977819/icon/m.png \"medium severity\")  |  **611/1000**  <br/> **Why?** Recently disclosed, Has a fix available, CVSS 6.5  | Inefficient Algorithmic Complexity <br/>[SNYK-PYTHON-WERKZEUG-6035177](https://snyk.io/vuln/SNYK-PYTHON-WERKZEUG-6035177) |  `werkzeug:` <br> `2.2.3 -> 3.0.1` <br>  |  No  | No Known Exploit \n\n(*) Note that the real score may have changed since the PR was raised.\n\n\n\n\nSome vulnerabilities couldn't be fully fixed and so Snyk will still find them when the project is tested again. This may be because the vulnerability existed within more than one direct dependency, but not all of the affected dependencies could be upgraded.\n\n\nCheck the changes in this PR to ensure they won't cause issues with your project.\n\n\n\n------------\n\n\n\n**Note:** *You are seeing this because you or someone else with access to this repository has authorized Snyk to open fix PRs.*\n\nFor more information:  <img src=\"https://api.segment.io/v1/pixel/track?data=eyJ3cml0ZUtleSI6InJyWmxZcEdHY2RyTHZsb0lYd0dUcVg4WkFRTnNCOUEwIiwiYW5vbnltb3VzSWQiOiI5ZWI4NTJiMi1mODVhLTRmYmQtOTE2My00NGU3MGYwNGVlYWUiLCJldmVudCI6IlBSIHZpZXdlZCIsInByb3BlcnRpZXMiOnsicHJJZCI6IjllYjg1MmIyLWY4NWEtNGZiZC05MTYzLTQ0ZTcwZjA0ZWVhZSJ9fQ==\" width=\"0\" height=\"0\"/>\n\ud83e\uddd0 [View latest project report](https://app.snyk.io/org/generall-jyq/project/0f2da737-9ae8-4b0c-bce6-075e016ac4f6?utm_source&#x3D;github&amp;utm_medium&#x3D;referral&amp;page&#x3D;fix-pr)\n\n\ud83d\udee0 [Adjust project settings](https://app.snyk.io/org/generall-jyq/project/0f2da737-9ae8-4b0c-bce6-075e016ac4f6?utm_source&#x3D;github&amp;utm_medium&#x3D;referral&amp;page&#x3D;fix-pr/settings)\n\n\ud83d\udcda [Read more about Snyk's upgrade and patch logic](https://support.snyk.io/hc/en-us/articles/360003891078-Snyk-patches-to-fix-vulnerabilities)\n\n[//]: # (snyk:metadata:{\"prId\":\"9eb852b2-f85a-4fbd-9163-44e70f04eeae\",\"prPublicId\":\"9eb852b2-f85a-4fbd-9163-44e70f04eeae\",\"dependencies\":[{\"name\":\"werkzeug\",\"from\":\"2.2.3\",\"to\":\"3.0.1\"}],\"packageManager\":\"pip\",\"projectPublicId\":\"0f2da737-9ae8-4b0c-bce6-075e016ac4f6\",\"projectUrl\":\"https://app.snyk.io/org/generall-jyq/project/0f2da737-9ae8-4b0c-bce6-075e016ac4f6?utm_source=github&utm_medium=referral&page=fix-pr\",\"type\":\"auto\",\"patch\":[],\"vulns\":[\"SNYK-PYTHON-WERKZEUG-6035177\"],\"upgrade\":[],\"isBreakingChange\":false,\"env\":\"prod\",\"prType\":\"fix\",\"templateVariants\":[\"updated-fix-title\",\"pr-warning-shown\",\"priorityScore\"],\"priorityScoreList\":[611],\"remediationStrategy\":\"vuln\"})\n\n---\n\n**Learn how to fix vulnerabilities with free interactive lessons:**\n\n \ud83e\udd89 [Learn about vulnerability in an interactive lesson of Snyk Learn.](https://learn.snyk.io/?loc&#x3D;fix-pr)\n",
                "created_at": "2023-10-27T00:12:08Z",
                "updated_at": "2023-10-27T00:12:08Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "ff7365909606aaeaebb39733c03b305f88a03d51",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2882/commits",
                "review_comments_url": "https://api.github.com/repos/qdrant/qdrant/pulls/2882/comments",
                "review_comment_url": "https://api.github.com/repos/qdrant/qdrant/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/qdrant/qdrant/issues/2882/comments",
                "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/cd67e9b7d4067aa4ac4f9c0711d87fed8530900f",
                "head": {
                    "label": "qdrant:snyk-fix-121673c4a7e8e66c3d1c11a76714ca79",
                    "ref": "snyk-fix-121673c4a7e8e66c3d1c11a76714ca79",
                    "sha": "cd67e9b7d4067aa4ac4f9c0711d87fed8530900f",
                    "user": {
                        "login": "qdrant",
                        "id": 73504361,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                        "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/qdrant",
                        "html_url": "https://github.com/qdrant",
                        "followers_url": "https://api.github.com/users/qdrant/followers",
                        "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                        "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                        "organizations_url": "https://api.github.com/users/qdrant/orgs",
                        "repos_url": "https://api.github.com/users/qdrant/repos",
                        "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/qdrant/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 268163609,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyNjgxNjM2MDk=",
                        "name": "qdrant",
                        "full_name": "qdrant/qdrant",
                        "private": false,
                        "owner": {
                            "login": "qdrant",
                            "id": 73504361,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/qdrant",
                            "html_url": "https://github.com/qdrant",
                            "followers_url": "https://api.github.com/users/qdrant/followers",
                            "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                            "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                            "organizations_url": "https://api.github.com/users/qdrant/orgs",
                            "repos_url": "https://api.github.com/users/qdrant/repos",
                            "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/qdrant/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/qdrant/qdrant",
                        "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                        "fork": false,
                        "url": "https://api.github.com/repos/qdrant/qdrant",
                        "forks_url": "https://api.github.com/repos/qdrant/qdrant/forks",
                        "keys_url": "https://api.github.com/repos/qdrant/qdrant/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/qdrant/qdrant/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/qdrant/qdrant/teams",
                        "hooks_url": "https://api.github.com/repos/qdrant/qdrant/hooks",
                        "issue_events_url": "https://api.github.com/repos/qdrant/qdrant/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/qdrant/qdrant/events",
                        "assignees_url": "https://api.github.com/repos/qdrant/qdrant/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/qdrant/qdrant/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/qdrant/qdrant/tags",
                        "blobs_url": "https://api.github.com/repos/qdrant/qdrant/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/qdrant/qdrant/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/qdrant/qdrant/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/qdrant/qdrant/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/qdrant/qdrant/languages",
                        "stargazers_url": "https://api.github.com/repos/qdrant/qdrant/stargazers",
                        "contributors_url": "https://api.github.com/repos/qdrant/qdrant/contributors",
                        "subscribers_url": "https://api.github.com/repos/qdrant/qdrant/subscribers",
                        "subscription_url": "https://api.github.com/repos/qdrant/qdrant/subscription",
                        "commits_url": "https://api.github.com/repos/qdrant/qdrant/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/qdrant/qdrant/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/qdrant/qdrant/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/qdrant/qdrant/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/qdrant/qdrant/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/qdrant/qdrant/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/qdrant/qdrant/merges",
                        "archive_url": "https://api.github.com/repos/qdrant/qdrant/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/qdrant/qdrant/downloads",
                        "issues_url": "https://api.github.com/repos/qdrant/qdrant/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/qdrant/qdrant/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/qdrant/qdrant/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/qdrant/qdrant/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/qdrant/qdrant/labels{/name}",
                        "releases_url": "https://api.github.com/repos/qdrant/qdrant/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/qdrant/qdrant/deployments",
                        "created_at": "2020-05-30T21:37:01Z",
                        "updated_at": "2023-10-26T21:45:17Z",
                        "pushed_at": "2023-10-27T00:12:09Z",
                        "git_url": "git://github.com/qdrant/qdrant.git",
                        "ssh_url": "git@github.com:qdrant/qdrant.git",
                        "clone_url": "https://github.com/qdrant/qdrant.git",
                        "svn_url": "https://github.com/qdrant/qdrant",
                        "homepage": "https://qdrant.tech",
                        "size": 14681,
                        "stargazers_count": 13412,
                        "watchers_count": 13412,
                        "language": "Rust",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 777,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 184,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "approximate-nearest-neighbor-search",
                            "embeddings-similarity",
                            "hacktoberfest",
                            "hnsw",
                            "image-search",
                            "knn-algorithm",
                            "machine-learning",
                            "matching",
                            "mlops",
                            "nearest-neighbor-search",
                            "neural-network",
                            "neural-search",
                            "recommender-system",
                            "search",
                            "search-engine",
                            "search-engines",
                            "similarity-search",
                            "vector-database",
                            "vector-search",
                            "vector-search-engine"
                        ],
                        "visibility": "public",
                        "forks": 777,
                        "open_issues": 184,
                        "watchers": 13412,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "qdrant:master",
                    "ref": "master",
                    "sha": "20cd26f3774107bd18ba5a6f32a60079a38852b2",
                    "user": {
                        "login": "qdrant",
                        "id": 73504361,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                        "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/qdrant",
                        "html_url": "https://github.com/qdrant",
                        "followers_url": "https://api.github.com/users/qdrant/followers",
                        "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                        "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                        "organizations_url": "https://api.github.com/users/qdrant/orgs",
                        "repos_url": "https://api.github.com/users/qdrant/repos",
                        "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/qdrant/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 268163609,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyNjgxNjM2MDk=",
                        "name": "qdrant",
                        "full_name": "qdrant/qdrant",
                        "private": false,
                        "owner": {
                            "login": "qdrant",
                            "id": 73504361,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjczNTA0MzYx",
                            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/qdrant",
                            "html_url": "https://github.com/qdrant",
                            "followers_url": "https://api.github.com/users/qdrant/followers",
                            "following_url": "https://api.github.com/users/qdrant/following{/other_user}",
                            "gists_url": "https://api.github.com/users/qdrant/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/qdrant/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/qdrant/subscriptions",
                            "organizations_url": "https://api.github.com/users/qdrant/orgs",
                            "repos_url": "https://api.github.com/users/qdrant/repos",
                            "events_url": "https://api.github.com/users/qdrant/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/qdrant/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/qdrant/qdrant",
                        "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
                        "fork": false,
                        "url": "https://api.github.com/repos/qdrant/qdrant",
                        "forks_url": "https://api.github.com/repos/qdrant/qdrant/forks",
                        "keys_url": "https://api.github.com/repos/qdrant/qdrant/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/qdrant/qdrant/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/qdrant/qdrant/teams",
                        "hooks_url": "https://api.github.com/repos/qdrant/qdrant/hooks",
                        "issue_events_url": "https://api.github.com/repos/qdrant/qdrant/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/qdrant/qdrant/events",
                        "assignees_url": "https://api.github.com/repos/qdrant/qdrant/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/qdrant/qdrant/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/qdrant/qdrant/tags",
                        "blobs_url": "https://api.github.com/repos/qdrant/qdrant/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/qdrant/qdrant/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/qdrant/qdrant/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/qdrant/qdrant/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/qdrant/qdrant/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/qdrant/qdrant/languages",
                        "stargazers_url": "https://api.github.com/repos/qdrant/qdrant/stargazers",
                        "contributors_url": "https://api.github.com/repos/qdrant/qdrant/contributors",
                        "subscribers_url": "https://api.github.com/repos/qdrant/qdrant/subscribers",
                        "subscription_url": "https://api.github.com/repos/qdrant/qdrant/subscription",
                        "commits_url": "https://api.github.com/repos/qdrant/qdrant/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/qdrant/qdrant/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/qdrant/qdrant/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/qdrant/qdrant/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/qdrant/qdrant/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/qdrant/qdrant/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/qdrant/qdrant/merges",
                        "archive_url": "https://api.github.com/repos/qdrant/qdrant/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/qdrant/qdrant/downloads",
                        "issues_url": "https://api.github.com/repos/qdrant/qdrant/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/qdrant/qdrant/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/qdrant/qdrant/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/qdrant/qdrant/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/qdrant/qdrant/labels{/name}",
                        "releases_url": "https://api.github.com/repos/qdrant/qdrant/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/qdrant/qdrant/deployments",
                        "created_at": "2020-05-30T21:37:01Z",
                        "updated_at": "2023-10-26T21:45:17Z",
                        "pushed_at": "2023-10-27T00:12:09Z",
                        "git_url": "git://github.com/qdrant/qdrant.git",
                        "ssh_url": "git@github.com:qdrant/qdrant.git",
                        "clone_url": "https://github.com/qdrant/qdrant.git",
                        "svn_url": "https://github.com/qdrant/qdrant",
                        "homepage": "https://qdrant.tech",
                        "size": 14681,
                        "stargazers_count": 13412,
                        "watchers_count": 13412,
                        "language": "Rust",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": true,
                        "has_discussions": true,
                        "forks_count": 777,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 184,
                        "license": {
                            "key": "apache-2.0",
                            "name": "Apache License 2.0",
                            "spdx_id": "Apache-2.0",
                            "url": "https://api.github.com/licenses/apache-2.0",
                            "node_id": "MDc6TGljZW5zZTI="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "approximate-nearest-neighbor-search",
                            "embeddings-similarity",
                            "hacktoberfest",
                            "hnsw",
                            "image-search",
                            "knn-algorithm",
                            "machine-learning",
                            "matching",
                            "mlops",
                            "nearest-neighbor-search",
                            "neural-network",
                            "neural-search",
                            "recommender-system",
                            "search",
                            "search-engine",
                            "search-engines",
                            "similarity-search",
                            "vector-database",
                            "vector-search",
                            "vector-search-engine"
                        ],
                        "visibility": "public",
                        "forks": 777,
                        "open_issues": 184,
                        "watchers": 13412,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2882"
                    },
                    "html": {
                        "href": "https://github.com/qdrant/qdrant/pull/2882"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/issues/2882"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/issues/2882/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2882/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/pulls/2882/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/qdrant/qdrant/statuses/cd67e9b7d4067aa4ac4f9c0711d87fed8530900f"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null,
                "merged": false,
                "mergeable": true,
                "rebaseable": true,
                "mergeable_state": "clean",
                "merged_by": null,
                "comments": 0,
                "review_comments": 0,
                "maintainer_can_modify": false,
                "commits": 1,
                "additions": 2,
                "deletions": 1,
                "changed_files": 1
            }
        },
        "public": true,
        "created_at": "2023-10-27T00:12:11Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32884721105",
        "type": "CreateEvent",
        "actor": {
            "id": 1935623,
            "login": "generall",
            "display_login": "generall",
            "gravatar_id": "",
            "url": "https://api.github.com/users/generall",
            "avatar_url": "https://avatars.githubusercontent.com/u/1935623?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "ref": "snyk-fix-121673c4a7e8e66c3d1c11a76714ca79",
            "ref_type": "branch",
            "master_branch": "master",
            "description": "Qdrant - High-performance, massive-scale Vector Database for the next generation of AI. Also available in the cloud https://cloud.qdrant.io/",
            "pusher_type": "user"
        },
        "public": true,
        "created_at": "2023-10-27T00:12:09Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32884721064",
        "type": "PushEvent",
        "actor": {
            "id": 1935623,
            "login": "generall",
            "display_login": "generall",
            "gravatar_id": "",
            "url": "https://api.github.com/users/generall",
            "avatar_url": "https://avatars.githubusercontent.com/u/1935623?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "repository_id": 268163609,
            "push_id": 15584636838,
            "size": 1,
            "distinct_size": 1,
            "ref": "refs/heads/snyk-fix-121673c4a7e8e66c3d1c11a76714ca79",
            "head": "cd67e9b7d4067aa4ac4f9c0711d87fed8530900f",
            "before": "20cd26f3774107bd18ba5a6f32a60079a38852b2",
            "commits": [
                {
                    "sha": "cd67e9b7d4067aa4ac4f9c0711d87fed8530900f",
                    "author": {
                        "email": "snyk-bot@snyk.io",
                        "name": "snyk-bot"
                    },
                    "message": "fix: openapi/tests/requirements.txt to reduce vulnerabilities\n\n\nThe following vulnerabilities are fixed by pinning transitive dependencies:\n- https://snyk.io/vuln/SNYK-PYTHON-WERKZEUG-6035177",
                    "distinct": true,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/cd67e9b7d4067aa4ac4f9c0711d87fed8530900f"
                }
            ]
        },
        "public": true,
        "created_at": "2023-10-27T00:12:08Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32884297846",
        "type": "PushEvent",
        "actor": {
            "id": 62079184,
            "login": "coszio",
            "display_login": "coszio",
            "gravatar_id": "",
            "url": "https://api.github.com/users/coszio",
            "avatar_url": "https://avatars.githubusercontent.com/u/62079184?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "repository_id": 268163609,
            "push_id": 15584414067,
            "size": 5,
            "distinct_size": 1,
            "ref": "refs/heads/discovery-preprocessing",
            "head": "3c4cd03d28cf880eb37de8c2570b204c0b8ede32",
            "before": "0b15f7abb897d60e97478777e9a2d44bce78041b",
            "commits": [
                {
                    "sha": "9c4d01e89a8cc32a942f71b4ba5e3c4899a57497",
                    "author": {
                        "email": "andreevlex.as@gmail.com",
                        "name": "Alexander A"
                    },
                    "message": "add update_rate_limit param into config file (#2848)",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/9c4d01e89a8cc32a942f71b4ba5e3c4899a57497"
                },
                {
                    "sha": "1462b3bebe9201aebea4b149760d676cfaf4dd30",
                    "author": {
                        "email": "tim+github@visee.me",
                        "name": "Tim Vis\u00e9e"
                    },
                    "message": "Remove `GetHttpPort` from gRPC API (#2843)",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/1462b3bebe9201aebea4b149760d676cfaf4dd30"
                },
                {
                    "sha": "65e79e45739b7d03dc77b68d66d32be5c96bb94b",
                    "author": {
                        "email": "tim+github@visee.me",
                        "name": "Tim Vis\u00e9e"
                    },
                    "message": "Clean up downloaded snapshot after snapshot recovery (#2846)\n\n* Clean up remote shard snapshot after recovery\r\n\r\n* Clean up remote collection snapshot after recovery\r\n\r\n* Improve logging\r\n\r\n* Refactor file cleaner into TempPath, fix double delete\r\n\r\nThis refactoring is done to better match the structures we use from\r\n`tempfile`. It also has a `TempPath` structure, but it only supports\r\nfiles.\r\n\r\nAlso fixes an issue where we'd try to delete a file twice when\r\n`delete()` was called, because the drop handler tried to delete a second\r\ntime.\r\n\r\n* Use TempFile interface to also clear downloaded snapshots on error\r\n\r\n* Replace our `TempPath` with `tempfile::TempPath`\r\n\r\n* Fix doc\r\n\r\n* Remove clone",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/65e79e45739b7d03dc77b68d66d32be5c96bb94b"
                },
                {
                    "sha": "3b17deb259463510df3c0fc6d33828e96a673c08",
                    "author": {
                        "email": "luis.cossio@qdrant.com",
                        "name": "Luis Coss\u00edo"
                    },
                    "message": "Discovery search handler at hnsw level (#2836)\n\n* add discovery_search_with_graph handler\r\n\r\n* add precision test\r\n\r\n* rename `DiscoveryPair` -> `ContextPair`\r\n\r\n* review fixes\r\n\r\n* renames + comments\r\n\r\n---------\r\n\r\nCo-authored-by: generall <andrey@vasnetsov.com>",
                    "distinct": false,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/3b17deb259463510df3c0fc6d33828e96a673c08"
                },
                {
                    "sha": "3c4cd03d28cf880eb37de8c2570b204c0b8ede32",
                    "author": {
                        "email": "luis.cossio@outlook.com",
                        "name": "Luis Coss\u00edo"
                    },
                    "message": "add `DiscoverRequest` and batch preprocessing logic",
                    "distinct": true,
                    "url": "https://api.github.com/repos/qdrant/qdrant/commits/3c4cd03d28cf880eb37de8c2570b204c0b8ede32"
                }
            ]
        },
        "public": true,
        "created_at": "2023-10-26T23:37:37Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    },
    {
        "id": "32884282221",
        "type": "DeleteEvent",
        "actor": {
            "id": 62079184,
            "login": "coszio",
            "display_login": "coszio",
            "gravatar_id": "",
            "url": "https://api.github.com/users/coszio",
            "avatar_url": "https://avatars.githubusercontent.com/u/62079184?"
        },
        "repo": {
            "id": 268163609,
            "name": "qdrant/qdrant",
            "url": "https://api.github.com/repos/qdrant/qdrant"
        },
        "payload": {
            "ref": "discovery-search",
            "ref_type": "branch",
            "pusher_type": "user"
        },
        "public": true,
        "created_at": "2023-10-26T23:36:18Z",
        "org": {
            "id": 73504361,
            "login": "qdrant",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/qdrant",
            "avatar_url": "https://avatars.githubusercontent.com/u/73504361?"
        }
    }
]