[
    {
        "id": "32895954555",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 3948069,
            "login": "Sawtaytoes",
            "display_login": "Sawtaytoes",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Sawtaytoes",
            "avatar_url": "https://avatars.githubusercontent.com/u/3948069?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/openzfs/zfs/issues/15413",
                "repository_url": "https://api.github.com/repos/openzfs/zfs",
                "labels_url": "https://api.github.com/repos/openzfs/zfs/issues/15413/labels{/name}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15413/comments",
                "events_url": "https://api.github.com/repos/openzfs/zfs/issues/15413/events",
                "html_url": "https://github.com/openzfs/zfs/issues/15413",
                "id": 1949211378,
                "node_id": "I_kwDOAAarE850Lpry",
                "number": 15413,
                "title": "[FEATURE] dRAID expansion",
                "user": {
                    "login": "Sawtaytoes",
                    "id": 3948069,
                    "node_id": "MDQ6VXNlcjM5NDgwNjk=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/3948069?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Sawtaytoes",
                    "html_url": "https://github.com/Sawtaytoes",
                    "followers_url": "https://api.github.com/users/Sawtaytoes/followers",
                    "following_url": "https://api.github.com/users/Sawtaytoes/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Sawtaytoes/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Sawtaytoes/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Sawtaytoes/subscriptions",
                    "organizations_url": "https://api.github.com/users/Sawtaytoes/orgs",
                    "repos_url": "https://api.github.com/users/Sawtaytoes/repos",
                    "events_url": "https://api.github.com/users/Sawtaytoes/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Sawtaytoes/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 40358,
                        "node_id": "MDU6TGFiZWw0MDM1OA==",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Feature",
                        "name": "Type: Feature",
                        "color": "02d7e1",
                        "default": false,
                        "description": "Feature request or new feature"
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 3,
                "created_at": "2023-10-18T08:50:00Z",
                "updated_at": "2023-10-27T10:40:16Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "<!--\r\nThank you for suggesting a feature.\r\n\r\nPlease check our issue tracker before opening a new feature request.\r\nFilling out the following template will help other contributors better understand your proposed feature.\r\n-->\r\n\r\n### Describe the feature would like to see added to OpenZFS\r\n\r\n<!--\r\nProvide a clear and concise description of the feature.\r\n-->\r\nI'd like to see the ability to expand dRAID vdevs. Since they used fixed-size stripes and since RAID-Z expansion is coming up soon, I'd like to see the same feature available for dRAID.\r\n\r\n### How will this feature improve OpenZFS?\r\n\r\n<!--\r\nWhat problem does this feature solve?\r\n-->\r\ndRAID is meant to contain hundreds of drives. Unlike RAID-Z, where you typically want smaller vdevs, dRAID is designed for scale.\r\n\r\nSince dRAID acts like its own zpool, you'll wanna throw a ton of drives at it. Let's say you have 100 drives in a single dRAID. If you want to expand this pool, the easiest way is to drop 10-50 more drives into the current dRAID.\r\n\r\nBut without dRAID expansion, you'll need to either add a separate dRAID or hold onto those drives until you have another 100 (or enough that you'd make another dRAID). Or worse yet, you'd need to get 200 drives, create a new pool with a 200-drive dRAID, and then move all your data over, then swap the pools without interrupting users and trash the existing 100 drives because you rendered them unusable.\r\n\r\nThe long-term scalability of a single dRAID vdev makes it perfect for expansion.\r\n\r\n### Additional context\r\n\r\n<!--\r\nAny additional information you can add about the proposal?\r\n-->\r\nPrior Art from IBM's dRAID implementation: https://barrywhytestorage.blog/2020/03/25/draid-expansion-the-important-details/\r\n\r\nIs it possible to use the existing RAID-Z expansion code for dRAID? From what I've seen, as soon as you expand a RAID-Z, it gets converted in a way that's very similar to dRAID.",
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/issues/15413/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/openzfs/zfs/issues/15413/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/openzfs/zfs/issues/comments/1782692674",
                "html_url": "https://github.com/openzfs/zfs/issues/15413#issuecomment-1782692674",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15413",
                "id": 1782692674,
                "node_id": "IC_kwDOAAarE85qQbtC",
                "user": {
                    "login": "Sawtaytoes",
                    "id": 3948069,
                    "node_id": "MDQ6VXNlcjM5NDgwNjk=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/3948069?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Sawtaytoes",
                    "html_url": "https://github.com/Sawtaytoes",
                    "followers_url": "https://api.github.com/users/Sawtaytoes/followers",
                    "following_url": "https://api.github.com/users/Sawtaytoes/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Sawtaytoes/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Sawtaytoes/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Sawtaytoes/subscriptions",
                    "organizations_url": "https://api.github.com/users/Sawtaytoes/orgs",
                    "repos_url": "https://api.github.com/users/Sawtaytoes/repos",
                    "events_url": "https://api.github.com/users/Sawtaytoes/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Sawtaytoes/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T10:40:15Z",
                "updated_at": "2023-10-27T10:40:15Z",
                "author_association": "NONE",
                "body": "Is it possible to donate, so I could sponsor this feature?\r\n\r\nWhat's something like this cost? $1K? $10K? $100K?",
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/issues/comments/1782692674/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T10:40:16Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32895830336",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 48889381,
            "login": "amigatomte",
            "display_login": "amigatomte",
            "gravatar_id": "",
            "url": "https://api.github.com/users/amigatomte",
            "avatar_url": "https://avatars.githubusercontent.com/u/48889381?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/openzfs/zfs/issues/15461",
                "repository_url": "https://api.github.com/repos/openzfs/zfs",
                "labels_url": "https://api.github.com/repos/openzfs/zfs/issues/15461/labels{/name}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15461/comments",
                "events_url": "https://api.github.com/repos/openzfs/zfs/issues/15461/events",
                "html_url": "https://github.com/openzfs/zfs/issues/15461",
                "id": 1965154479,
                "node_id": "I_kwDOAAarE851IeCv",
                "number": 15461,
                "title": "Builds for Ubuntu dont seem right (Version mismatch)",
                "user": {
                    "login": "EngineLessCC",
                    "id": 21315274,
                    "node_id": "MDQ6VXNlcjIxMzE1Mjc0",
                    "avatar_url": "https://avatars.githubusercontent.com/u/21315274?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/EngineLessCC",
                    "html_url": "https://github.com/EngineLessCC",
                    "followers_url": "https://api.github.com/users/EngineLessCC/followers",
                    "following_url": "https://api.github.com/users/EngineLessCC/following{/other_user}",
                    "gists_url": "https://api.github.com/users/EngineLessCC/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/EngineLessCC/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/EngineLessCC/subscriptions",
                    "organizations_url": "https://api.github.com/users/EngineLessCC/orgs",
                    "repos_url": "https://api.github.com/users/EngineLessCC/repos",
                    "events_url": "https://api.github.com/users/EngineLessCC/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/EngineLessCC/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 1224663571,
                        "node_id": "MDU6TGFiZWwxMjI0NjYzNTcx",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Defect",
                        "name": "Type: Defect",
                        "color": "f77eb8",
                        "default": false,
                        "description": "Incorrect behavior (e.g. crash, hang)"
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 2,
                "created_at": "2023-10-27T09:44:42Z",
                "updated_at": "2023-10-27T10:35:02Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "\r\n### System information\r\n<!--  add version after \"|\" character -->\r\nType | Version/Name\r\n --- | ---\r\nDistribution Name\t| Ubuntu 22.04\r\nDistribution Version\t| 22.04.3\r\nKernel Version\t| 5.15.0-87-generic\r\nArchitecture\t| x86_64\r\nOpenZFS Version\t| 2.2.0 .. and 2.1.5??\r\n\r\n### Describe the problem you're observing\r\n\r\nAfter building (and reboot) 2.2.0 i noticed `zpool version` shows mismatching entries:\r\n- zfs-2.2.0-1\r\n- zfs-kmod-2.1.5-1ubuntu6~22.04.1\r\n\r\nWhy does the kmod show version 2.1.5?\r\napt shows ive installed 2.2:\r\n\r\nlibzfs5/now 2.2.0-1 amd64 [installed,local]\r\nzfs-dkms/now 2.2.0-1 amd64 [installed,local]\r\nzfs/now 2.2.0-1 amd64 [installed,local]\r\n\r\n### Describe how to reproduce the problem\r\n\r\n- Download latest release from github\r\n- sh autogen.sh\r\n- ./configure\r\n- make -s -j12 deb\r\n- apt install ./libnvpair3_2.2.0-1_amd64.deb ./libzfs5_2.2.0-1_amd64.deb ./libuutil3_2.2.0-1_amd64.deb ./libzpool5_2.2.0-1_amd64.deb ./zfs_2.2.0-1_amd64.deb ./zfs-dkms_2.2.0-1_amd64.deb\r\n\r\n### Include any warning/errors/backtraces from the system logs\r\nn/a\r\n\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/issues/15461/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/openzfs/zfs/issues/15461/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/openzfs/zfs/issues/comments/1782686076",
                "html_url": "https://github.com/openzfs/zfs/issues/15461#issuecomment-1782686076",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15461",
                "id": 1782686076,
                "node_id": "IC_kwDOAAarE85qQaF8",
                "user": {
                    "login": "amigatomte",
                    "id": 48889381,
                    "node_id": "MDQ6VXNlcjQ4ODg5Mzgx",
                    "avatar_url": "https://avatars.githubusercontent.com/u/48889381?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/amigatomte",
                    "html_url": "https://github.com/amigatomte",
                    "followers_url": "https://api.github.com/users/amigatomte/followers",
                    "following_url": "https://api.github.com/users/amigatomte/following{/other_user}",
                    "gists_url": "https://api.github.com/users/amigatomte/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/amigatomte/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/amigatomte/subscriptions",
                    "organizations_url": "https://api.github.com/users/amigatomte/orgs",
                    "repos_url": "https://api.github.com/users/amigatomte/repos",
                    "events_url": "https://api.github.com/users/amigatomte/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/amigatomte/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T10:35:02Z",
                "updated_at": "2023-10-27T10:35:02Z",
                "author_association": "NONE",
                "body": "The zfs-dkms package is broken. See https://github.com/openzfs/zfs/issues/15328#issuecomment-1739826420\r\n`/usr/lib/dkms/common.postinst zfs 2.2.0` fixed it for me.",
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/issues/comments/1782686076/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T10:35:02Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32894853080",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 21315274,
            "login": "EngineLessCC",
            "display_login": "EngineLessCC",
            "gravatar_id": "",
            "url": "https://api.github.com/users/EngineLessCC",
            "avatar_url": "https://avatars.githubusercontent.com/u/21315274?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/openzfs/zfs/issues/15461",
                "repository_url": "https://api.github.com/repos/openzfs/zfs",
                "labels_url": "https://api.github.com/repos/openzfs/zfs/issues/15461/labels{/name}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15461/comments",
                "events_url": "https://api.github.com/repos/openzfs/zfs/issues/15461/events",
                "html_url": "https://github.com/openzfs/zfs/issues/15461",
                "id": 1965154479,
                "node_id": "I_kwDOAAarE851IeCv",
                "number": 15461,
                "title": "Builds for Ubuntu dont seem right (Version mismatch)",
                "user": {
                    "login": "EngineLessCC",
                    "id": 21315274,
                    "node_id": "MDQ6VXNlcjIxMzE1Mjc0",
                    "avatar_url": "https://avatars.githubusercontent.com/u/21315274?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/EngineLessCC",
                    "html_url": "https://github.com/EngineLessCC",
                    "followers_url": "https://api.github.com/users/EngineLessCC/followers",
                    "following_url": "https://api.github.com/users/EngineLessCC/following{/other_user}",
                    "gists_url": "https://api.github.com/users/EngineLessCC/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/EngineLessCC/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/EngineLessCC/subscriptions",
                    "organizations_url": "https://api.github.com/users/EngineLessCC/orgs",
                    "repos_url": "https://api.github.com/users/EngineLessCC/repos",
                    "events_url": "https://api.github.com/users/EngineLessCC/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/EngineLessCC/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 1224663571,
                        "node_id": "MDU6TGFiZWwxMjI0NjYzNTcx",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Defect",
                        "name": "Type: Defect",
                        "color": "f77eb8",
                        "default": false,
                        "description": "Incorrect behavior (e.g. crash, hang)"
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 1,
                "created_at": "2023-10-27T09:44:42Z",
                "updated_at": "2023-10-27T09:57:47Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "\r\n### System information\r\n<!--  add version after \"|\" character -->\r\nType | Version/Name\r\n --- | ---\r\nDistribution Name\t| Ubuntu 22.04\r\nDistribution Version\t| 22.04.3\r\nKernel Version\t| 5.15.0-87-generic\r\nArchitecture\t| x86_64\r\nOpenZFS Version\t| 2.2.0 .. and 2.1.5??\r\n\r\n### Describe the problem you're observing\r\n\r\nAfter building (and reboot) 2.2.0 i noticed `zpool version` shows mismatching entries:\r\n- zfs-2.2.0-1\r\n- zfs-kmod-2.1.5-1ubuntu6~22.04.1\r\n\r\nWhy does the kmod show version 2.1.5?\r\napt shows ive installed 2.2:\r\n\r\nlibzfs5/now 2.2.0-1 amd64 [installed,local]\r\nzfs-dkms/now 2.2.0-1 amd64 [installed,local]\r\nzfs/now 2.2.0-1 amd64 [installed,local]\r\n\r\n### Describe how to reproduce the problem\r\n\r\n- Download latest release from github\r\n- sh autogen.sh\r\n- ./configure\r\n- make -s -j12 deb\r\n- apt install ./libnvpair3_2.2.0-1_amd64.deb ./libzfs5_2.2.0-1_amd64.deb ./libuutil3_2.2.0-1_amd64.deb ./libzpool5_2.2.0-1_amd64.deb ./zfs_2.2.0-1_amd64.deb ./zfs-dkms_2.2.0-1_amd64.deb\r\n\r\n### Include any warning/errors/backtraces from the system logs\r\nn/a\r\n\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/issues/15461/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/openzfs/zfs/issues/15461/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/openzfs/zfs/issues/comments/1782636949",
                "html_url": "https://github.com/openzfs/zfs/issues/15461#issuecomment-1782636949",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15461",
                "id": 1782636949,
                "node_id": "IC_kwDOAAarE85qQOGV",
                "user": {
                    "login": "EngineLessCC",
                    "id": 21315274,
                    "node_id": "MDQ6VXNlcjIxMzE1Mjc0",
                    "avatar_url": "https://avatars.githubusercontent.com/u/21315274?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/EngineLessCC",
                    "html_url": "https://github.com/EngineLessCC",
                    "followers_url": "https://api.github.com/users/EngineLessCC/followers",
                    "following_url": "https://api.github.com/users/EngineLessCC/following{/other_user}",
                    "gists_url": "https://api.github.com/users/EngineLessCC/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/EngineLessCC/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/EngineLessCC/subscriptions",
                    "organizations_url": "https://api.github.com/users/EngineLessCC/orgs",
                    "repos_url": "https://api.github.com/users/EngineLessCC/repos",
                    "events_url": "https://api.github.com/users/EngineLessCC/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/EngineLessCC/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T09:57:47Z",
                "updated_at": "2023-10-27T09:57:47Z",
                "author_association": "NONE",
                "body": "Im not sure if this is an ubuntu or zfs repo issue, but:\r\nmanually doing:\r\n\r\n- dkms build -m zfs -v 2.2.0\r\n- dkms install -m zfs -v 2.2.0\r\n\r\nresolves this mismatch, but this shouldnt be done manually, dkms should automatically choose the correct module.\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/issues/comments/1782636949/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T09:57:48Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32894508117",
        "type": "IssuesEvent",
        "actor": {
            "id": 21315274,
            "login": "EngineLessCC",
            "display_login": "EngineLessCC",
            "gravatar_id": "",
            "url": "https://api.github.com/users/EngineLessCC",
            "avatar_url": "https://avatars.githubusercontent.com/u/21315274?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "opened",
            "issue": {
                "url": "https://api.github.com/repos/openzfs/zfs/issues/15461",
                "repository_url": "https://api.github.com/repos/openzfs/zfs",
                "labels_url": "https://api.github.com/repos/openzfs/zfs/issues/15461/labels{/name}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15461/comments",
                "events_url": "https://api.github.com/repos/openzfs/zfs/issues/15461/events",
                "html_url": "https://github.com/openzfs/zfs/issues/15461",
                "id": 1965154479,
                "node_id": "I_kwDOAAarE851IeCv",
                "number": 15461,
                "title": "Builds for Ubuntu dont seem right (Version mismatch)",
                "user": {
                    "login": "EngineLessCC",
                    "id": 21315274,
                    "node_id": "MDQ6VXNlcjIxMzE1Mjc0",
                    "avatar_url": "https://avatars.githubusercontent.com/u/21315274?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/EngineLessCC",
                    "html_url": "https://github.com/EngineLessCC",
                    "followers_url": "https://api.github.com/users/EngineLessCC/followers",
                    "following_url": "https://api.github.com/users/EngineLessCC/following{/other_user}",
                    "gists_url": "https://api.github.com/users/EngineLessCC/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/EngineLessCC/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/EngineLessCC/subscriptions",
                    "organizations_url": "https://api.github.com/users/EngineLessCC/orgs",
                    "repos_url": "https://api.github.com/users/EngineLessCC/repos",
                    "events_url": "https://api.github.com/users/EngineLessCC/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/EngineLessCC/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 1224663571,
                        "node_id": "MDU6TGFiZWwxMjI0NjYzNTcx",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Defect",
                        "name": "Type: Defect",
                        "color": "f77eb8",
                        "default": false,
                        "description": "Incorrect behavior (e.g. crash, hang)"
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 0,
                "created_at": "2023-10-27T09:44:42Z",
                "updated_at": "2023-10-27T09:44:42Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "\r\n### System information\r\n<!--  add version after \"|\" character -->\r\nType | Version/Name\r\n --- | ---\r\nDistribution Name\t| Ubuntu 22.04\r\nDistribution Version\t| 22.04.3\r\nKernel Version\t| 5.15.0-87-generic\r\nArchitecture\t| x86_64\r\nOpenZFS Version\t| 2.2.0 .. and 2.1.5??\r\n\r\n### Describe the problem you're observing\r\n\r\nAfter building (and reboot) 2.2.0 i noticed `zpool version` shows mismatching entries:\r\n- zfs-2.2.0-1\r\n- zfs-kmod-2.1.5-1ubuntu6~22.04.1\r\n\r\nWhy does the kmod show version 2.1.5?\r\napt shows ive installed 2.2:\r\n\r\nlibzfs5/now 2.2.0-1 amd64 [installed,local]\r\nzfs-dkms/now 2.2.0-1 amd64 [installed,local]\r\nzfs/now 2.2.0-1 amd64 [installed,local]\r\n\r\n### Describe how to reproduce the problem\r\n\r\n- Download latest release from github\r\n- sh autogen.sh\r\n- ./configure\r\n- make -s -j12 deb\r\n- apt install ./libnvpair3_2.2.0-1_amd64.deb ./libzfs5_2.2.0-1_amd64.deb ./libuutil3_2.2.0-1_amd64.deb ./libzpool5_2.2.0-1_amd64.deb ./zfs_2.2.0-1_amd64.deb ./zfs-dkms_2.2.0-1_amd64.deb\r\n\r\n### Include any warning/errors/backtraces from the system logs\r\nn/a\r\n\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/issues/15461/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/openzfs/zfs/issues/15461/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T09:44:44Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32894483098",
        "type": "PullRequestEvent",
        "actor": {
            "id": 526413,
            "login": "ThomasLamprecht",
            "display_login": "ThomasLamprecht",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ThomasLamprecht",
            "avatar_url": "https://avatars.githubusercontent.com/u/526413?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "opened",
            "number": 15460,
            "pull_request": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/15460",
                "id": 1576270991,
                "node_id": "PR_kwDOAAarE85d8_yP",
                "html_url": "https://github.com/openzfs/zfs/pull/15460",
                "diff_url": "https://github.com/openzfs/zfs/pull/15460.diff",
                "patch_url": "https://github.com/openzfs/zfs/pull/15460.patch",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15460",
                "number": 15460,
                "state": "open",
                "locked": false,
                "title": "avoid variable-length-array syntax that trip up strict-bound UBSAN",
                "user": {
                    "login": "ThomasLamprecht",
                    "id": 526413,
                    "node_id": "MDQ6VXNlcjUyNjQxMw==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/526413?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/ThomasLamprecht",
                    "html_url": "https://github.com/ThomasLamprecht",
                    "followers_url": "https://api.github.com/users/ThomasLamprecht/followers",
                    "following_url": "https://api.github.com/users/ThomasLamprecht/following{/other_user}",
                    "gists_url": "https://api.github.com/users/ThomasLamprecht/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/ThomasLamprecht/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/ThomasLamprecht/subscriptions",
                    "organizations_url": "https://api.github.com/users/ThomasLamprecht/orgs",
                    "repos_url": "https://api.github.com/users/ThomasLamprecht/repos",
                    "events_url": "https://api.github.com/users/ThomasLamprecht/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/ThomasLamprecht/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "### Motivation and Context\r\nThis fixes https://github.com/openzfs/zfs/issues/15145 i.e., a stricter bound checking when UBSAN is enabled for Linux since 6.5.\r\n\r\nDisabling UBSAN is not really an option for us, and the \"modern\" (C99) VLA syntax is so widely used, that using it makes IMO the code a tiny bit more readable as a side effect.\r\n\r\n### Description\r\nUse the more common C99 syntax to declare variable length arrays, while older ones, where a (fake) array length of one was declared, works too in C, it's making it impossible to distinguish an out-of-bound access for a variable array access.\r\n\r\n### How Has This Been Tested?\r\nI have built ZFS 2.2 with this patch for the 6.5 kernel, then I\r\n- booted in setups that used 6.2 kernel and ZFS 2.1.13 as root filesystem\r\n- did many ZFS syncs between that setup and an older still using ZFS 2.1.13, in both directions. \r\n- general usage of ZFS volumes/datasets for e.g., FS mounts for containers or directly for virtual machines\r\n- ran the ZFS Test Suite\r\n \r\nIn https://github.com/openzfs/zfs/issues/15145#issuecomment-1740315246 it's mentioned that there could be some potential regression due to change in size that the structs report through the `sizeof` operator, I tried to check the changed structs usage in-depth, and commented on them in the commit message, but as I'm not that familiar with the code base I might have missed some things.\r\n\r\nIf anybody knows better tests to ensure compatibility w.r.t. the structs touched I'd be glad to hear them, and try to execute/implement them.\r\n\r\n### Types of changes\r\n- [X] Bug fix (non-breaking change which fixes an issue)\r\n- [ ] New feature (non-breaking change which adds functionality)\r\n- [ ] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [X] My code follows the OpenZFS [code style requirements](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#coding-conventions).\r\n- [ ] I have updated the documentation accordingly.\r\n- [X] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [ ] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [X] I have run the ZFS Test Suite with this change applied.\r\n- [X] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n",
                "created_at": "2023-10-27T09:43:43Z",
                "updated_at": "2023-10-27T09:43:43Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": null,
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/openzfs/zfs/pulls/15460/commits",
                "review_comments_url": "https://api.github.com/repos/openzfs/zfs/pulls/15460/comments",
                "review_comment_url": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15460/comments",
                "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/7337d2e72dcdcdc9d1043ac345e015a120d493f2",
                "head": {
                    "label": "ThomasLamprecht:modern-vla-syntax",
                    "ref": "modern-vla-syntax",
                    "sha": "7337d2e72dcdcdc9d1043ac345e015a120d493f2",
                    "user": {
                        "login": "ThomasLamprecht",
                        "id": 526413,
                        "node_id": "MDQ6VXNlcjUyNjQxMw==",
                        "avatar_url": "https://avatars.githubusercontent.com/u/526413?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/ThomasLamprecht",
                        "html_url": "https://github.com/ThomasLamprecht",
                        "followers_url": "https://api.github.com/users/ThomasLamprecht/followers",
                        "following_url": "https://api.github.com/users/ThomasLamprecht/following{/other_user}",
                        "gists_url": "https://api.github.com/users/ThomasLamprecht/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/ThomasLamprecht/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/ThomasLamprecht/subscriptions",
                        "organizations_url": "https://api.github.com/users/ThomasLamprecht/orgs",
                        "repos_url": "https://api.github.com/users/ThomasLamprecht/repos",
                        "events_url": "https://api.github.com/users/ThomasLamprecht/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/ThomasLamprecht/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 343694991,
                        "node_id": "MDEwOlJlcG9zaXRvcnkzNDM2OTQ5OTE=",
                        "name": "zfs",
                        "full_name": "ThomasLamprecht/zfs",
                        "private": false,
                        "owner": {
                            "login": "ThomasLamprecht",
                            "id": 526413,
                            "node_id": "MDQ6VXNlcjUyNjQxMw==",
                            "avatar_url": "https://avatars.githubusercontent.com/u/526413?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/ThomasLamprecht",
                            "html_url": "https://github.com/ThomasLamprecht",
                            "followers_url": "https://api.github.com/users/ThomasLamprecht/followers",
                            "following_url": "https://api.github.com/users/ThomasLamprecht/following{/other_user}",
                            "gists_url": "https://api.github.com/users/ThomasLamprecht/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/ThomasLamprecht/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/ThomasLamprecht/subscriptions",
                            "organizations_url": "https://api.github.com/users/ThomasLamprecht/orgs",
                            "repos_url": "https://api.github.com/users/ThomasLamprecht/repos",
                            "events_url": "https://api.github.com/users/ThomasLamprecht/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/ThomasLamprecht/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/ThomasLamprecht/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": true,
                        "url": "https://api.github.com/repos/ThomasLamprecht/zfs",
                        "forks_url": "https://api.github.com/repos/ThomasLamprecht/zfs/forks",
                        "keys_url": "https://api.github.com/repos/ThomasLamprecht/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/ThomasLamprecht/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/ThomasLamprecht/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/ThomasLamprecht/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/ThomasLamprecht/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/ThomasLamprecht/zfs/events",
                        "assignees_url": "https://api.github.com/repos/ThomasLamprecht/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/ThomasLamprecht/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/ThomasLamprecht/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/ThomasLamprecht/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/ThomasLamprecht/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/ThomasLamprecht/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/ThomasLamprecht/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/ThomasLamprecht/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/ThomasLamprecht/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/ThomasLamprecht/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/ThomasLamprecht/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/ThomasLamprecht/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/ThomasLamprecht/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/ThomasLamprecht/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/ThomasLamprecht/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/ThomasLamprecht/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/ThomasLamprecht/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/ThomasLamprecht/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/ThomasLamprecht/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/ThomasLamprecht/zfs/merges",
                        "archive_url": "https://api.github.com/repos/ThomasLamprecht/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/ThomasLamprecht/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/ThomasLamprecht/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/ThomasLamprecht/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/ThomasLamprecht/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/ThomasLamprecht/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/ThomasLamprecht/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/ThomasLamprecht/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/ThomasLamprecht/zfs/deployments",
                        "created_at": "2021-03-02T08:13:10Z",
                        "updated_at": "2021-11-10T07:43:46Z",
                        "pushed_at": "2023-10-25T15:23:08Z",
                        "git_url": "git://github.com/ThomasLamprecht/zfs.git",
                        "ssh_url": "git@github.com:ThomasLamprecht/zfs.git",
                        "clone_url": "https://github.com/ThomasLamprecht/zfs.git",
                        "svn_url": "https://github.com/ThomasLamprecht/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 118983,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "C",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 0,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 0,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "openzfs:master",
                    "ref": "master",
                    "sha": "043c6ee3b6bfb55f8d36e1f048ff13128c279fb8",
                    "user": {
                        "login": "openzfs",
                        "id": 4510897,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/openzfs",
                        "html_url": "https://github.com/openzfs",
                        "followers_url": "https://api.github.com/users/openzfs/followers",
                        "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                        "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                        "organizations_url": "https://api.github.com/users/openzfs/orgs",
                        "repos_url": "https://api.github.com/users/openzfs/repos",
                        "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/openzfs/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 437011,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0MzcwMTE=",
                        "name": "zfs",
                        "full_name": "openzfs/zfs",
                        "private": false,
                        "owner": {
                            "login": "openzfs",
                            "id": 4510897,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/openzfs",
                            "html_url": "https://github.com/openzfs",
                            "followers_url": "https://api.github.com/users/openzfs/followers",
                            "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                            "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                            "organizations_url": "https://api.github.com/users/openzfs/orgs",
                            "repos_url": "https://api.github.com/users/openzfs/repos",
                            "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/openzfs/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/openzfs/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": false,
                        "url": "https://api.github.com/repos/openzfs/zfs",
                        "forks_url": "https://api.github.com/repos/openzfs/zfs/forks",
                        "keys_url": "https://api.github.com/repos/openzfs/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/openzfs/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/openzfs/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/openzfs/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/openzfs/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/openzfs/zfs/events",
                        "assignees_url": "https://api.github.com/repos/openzfs/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/openzfs/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/openzfs/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/openzfs/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/openzfs/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/openzfs/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/openzfs/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/openzfs/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/openzfs/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/openzfs/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/openzfs/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/openzfs/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/openzfs/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/openzfs/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/openzfs/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/openzfs/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/openzfs/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/openzfs/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/openzfs/zfs/merges",
                        "archive_url": "https://api.github.com/repos/openzfs/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/openzfs/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/openzfs/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/openzfs/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/openzfs/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/openzfs/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/openzfs/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/openzfs/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/openzfs/zfs/deployments",
                        "created_at": "2009-12-14T20:20:34Z",
                        "updated_at": "2023-10-27T06:11:04Z",
                        "pushed_at": "2023-10-27T09:43:44Z",
                        "git_url": "git://github.com/openzfs/zfs.git",
                        "ssh_url": "git@github.com:openzfs/zfs.git",
                        "clone_url": "https://github.com/openzfs/zfs.git",
                        "svn_url": "https://github.com/openzfs/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 124672,
                        "stargazers_count": 9637,
                        "watchers_count": 9637,
                        "language": "C",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": true,
                        "forks_count": 1668,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1196,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": true,
                        "topics": [
                            "file-system",
                            "openzfs",
                            "system-software"
                        ],
                        "visibility": "public",
                        "forks": 1668,
                        "open_issues": 1196,
                        "watchers": 9637,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15460"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15460"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15460"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15460/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15460/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15460/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/openzfs/zfs/statuses/7337d2e72dcdcdc9d1043ac345e015a120d493f2"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null,
                "merged": false,
                "mergeable": null,
                "rebaseable": null,
                "mergeable_state": "unknown",
                "merged_by": null,
                "comments": 0,
                "review_comments": 0,
                "maintainer_can_modify": true,
                "commits": 1,
                "additions": 4,
                "deletions": 4,
                "changed_files": 4
            }
        },
        "public": true,
        "created_at": "2023-10-27T09:43:45Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32890993669",
        "type": "PullRequestEvent",
        "actor": {
            "id": 97105857,
            "login": "usaleem-ix",
            "display_login": "usaleem-ix",
            "gravatar_id": "",
            "url": "https://api.github.com/users/usaleem-ix",
            "avatar_url": "https://avatars.githubusercontent.com/u/97105857?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "opened",
            "number": 15459,
            "pull_request": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/15459",
                "id": 1576075637,
                "node_id": "PR_kwDOAAarE85d8QF1",
                "html_url": "https://github.com/openzfs/zfs/pull/15459",
                "diff_url": "https://github.com/openzfs/zfs/pull/15459.diff",
                "patch_url": "https://github.com/openzfs/zfs/pull/15459.patch",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15459",
                "number": 15459,
                "state": "open",
                "locked": false,
                "title": "Add all read-only compatible zpool features to grub2 compatibility",
                "user": {
                    "login": "usaleem-ix",
                    "id": 97105857,
                    "node_id": "U_kgDOBcm3wQ",
                    "avatar_url": "https://avatars.githubusercontent.com/u/97105857?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/usaleem-ix",
                    "html_url": "https://github.com/usaleem-ix",
                    "followers_url": "https://api.github.com/users/usaleem-ix/followers",
                    "following_url": "https://api.github.com/users/usaleem-ix/following{/other_user}",
                    "gists_url": "https://api.github.com/users/usaleem-ix/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/usaleem-ix/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/usaleem-ix/subscriptions",
                    "organizations_url": "https://api.github.com/users/usaleem-ix/orgs",
                    "repos_url": "https://api.github.com/users/usaleem-ix/repos",
                    "events_url": "https://api.github.com/users/usaleem-ix/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/usaleem-ix/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "### Motivation and Context\r\nGRUB opens the boot-pool in read-only mode, but not all read-only compatible zpool\r\nfeatures are listed in grub2 compatibility file.\r\n\r\n### Description\r\nGRUB opens the boot pool in read-only mode. All read-only compatible features for zpool\r\ncan be enabled and added to grub2 compatibility, as GRUB does not open the boot-pool\r\nfor write.\r\n\r\n### How Has This Been Tested?\r\nTested by creating a boot-pool with all read-only compatible zpool features enabled and\r\nbooting from the boot-pool.\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [x] New feature (non-breaking change which adds functionality)\r\n- [x] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [x] My code follows the OpenZFS [code style requirements](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#coding-conventions).\r\n- [ ] I have updated the documentation accordingly.\r\n- [x] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [ ] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [x] I have run the ZFS Test Suite with this change applied.\r\n- [x] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n",
                "created_at": "2023-10-27T07:27:27Z",
                "updated_at": "2023-10-27T07:27:27Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": null,
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/openzfs/zfs/pulls/15459/commits",
                "review_comments_url": "https://api.github.com/repos/openzfs/zfs/pulls/15459/comments",
                "review_comment_url": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15459/comments",
                "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/8f4b42281a5852ac97606ae4e70dde2d86353c8f",
                "head": {
                    "label": "truenas:NAS-124771",
                    "ref": "NAS-124771",
                    "sha": "8f4b42281a5852ac97606ae4e70dde2d86353c8f",
                    "user": {
                        "login": "truenas",
                        "id": 53482242,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUzNDgyMjQy",
                        "avatar_url": "https://avatars.githubusercontent.com/u/53482242?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/truenas",
                        "html_url": "https://github.com/truenas",
                        "followers_url": "https://api.github.com/users/truenas/followers",
                        "following_url": "https://api.github.com/users/truenas/following{/other_user}",
                        "gists_url": "https://api.github.com/users/truenas/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/truenas/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/truenas/subscriptions",
                        "organizations_url": "https://api.github.com/users/truenas/orgs",
                        "repos_url": "https://api.github.com/users/truenas/repos",
                        "events_url": "https://api.github.com/users/truenas/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/truenas/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 298624292,
                        "node_id": "MDEwOlJlcG9zaXRvcnkyOTg2MjQyOTI=",
                        "name": "zfs",
                        "full_name": "truenas/zfs",
                        "private": false,
                        "owner": {
                            "login": "truenas",
                            "id": 53482242,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjUzNDgyMjQy",
                            "avatar_url": "https://avatars.githubusercontent.com/u/53482242?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/truenas",
                            "html_url": "https://github.com/truenas",
                            "followers_url": "https://api.github.com/users/truenas/followers",
                            "following_url": "https://api.github.com/users/truenas/following{/other_user}",
                            "gists_url": "https://api.github.com/users/truenas/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/truenas/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/truenas/subscriptions",
                            "organizations_url": "https://api.github.com/users/truenas/orgs",
                            "repos_url": "https://api.github.com/users/truenas/repos",
                            "events_url": "https://api.github.com/users/truenas/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/truenas/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/truenas/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": true,
                        "url": "https://api.github.com/repos/truenas/zfs",
                        "forks_url": "https://api.github.com/repos/truenas/zfs/forks",
                        "keys_url": "https://api.github.com/repos/truenas/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/truenas/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/truenas/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/truenas/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/truenas/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/truenas/zfs/events",
                        "assignees_url": "https://api.github.com/repos/truenas/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/truenas/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/truenas/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/truenas/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/truenas/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/truenas/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/truenas/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/truenas/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/truenas/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/truenas/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/truenas/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/truenas/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/truenas/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/truenas/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/truenas/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/truenas/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/truenas/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/truenas/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/truenas/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/truenas/zfs/merges",
                        "archive_url": "https://api.github.com/repos/truenas/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/truenas/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/truenas/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/truenas/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/truenas/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/truenas/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/truenas/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/truenas/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/truenas/zfs/deployments",
                        "created_at": "2020-09-25T16:25:16Z",
                        "updated_at": "2023-08-22T13:37:31Z",
                        "pushed_at": "2023-10-27T07:16:40Z",
                        "git_url": "git://github.com/truenas/zfs.git",
                        "ssh_url": "git@github.com:truenas/zfs.git",
                        "clone_url": "https://github.com/truenas/zfs.git",
                        "svn_url": "https://github.com/truenas/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 128879,
                        "stargazers_count": 13,
                        "watchers_count": 13,
                        "language": "C",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 3,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 3,
                        "open_issues": 1,
                        "watchers": 13,
                        "default_branch": "truenas/zfs-2.2-release"
                    }
                },
                "base": {
                    "label": "openzfs:master",
                    "ref": "master",
                    "sha": "043c6ee3b6bfb55f8d36e1f048ff13128c279fb8",
                    "user": {
                        "login": "openzfs",
                        "id": 4510897,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/openzfs",
                        "html_url": "https://github.com/openzfs",
                        "followers_url": "https://api.github.com/users/openzfs/followers",
                        "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                        "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                        "organizations_url": "https://api.github.com/users/openzfs/orgs",
                        "repos_url": "https://api.github.com/users/openzfs/repos",
                        "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/openzfs/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 437011,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0MzcwMTE=",
                        "name": "zfs",
                        "full_name": "openzfs/zfs",
                        "private": false,
                        "owner": {
                            "login": "openzfs",
                            "id": 4510897,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/openzfs",
                            "html_url": "https://github.com/openzfs",
                            "followers_url": "https://api.github.com/users/openzfs/followers",
                            "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                            "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                            "organizations_url": "https://api.github.com/users/openzfs/orgs",
                            "repos_url": "https://api.github.com/users/openzfs/repos",
                            "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/openzfs/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/openzfs/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": false,
                        "url": "https://api.github.com/repos/openzfs/zfs",
                        "forks_url": "https://api.github.com/repos/openzfs/zfs/forks",
                        "keys_url": "https://api.github.com/repos/openzfs/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/openzfs/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/openzfs/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/openzfs/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/openzfs/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/openzfs/zfs/events",
                        "assignees_url": "https://api.github.com/repos/openzfs/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/openzfs/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/openzfs/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/openzfs/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/openzfs/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/openzfs/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/openzfs/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/openzfs/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/openzfs/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/openzfs/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/openzfs/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/openzfs/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/openzfs/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/openzfs/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/openzfs/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/openzfs/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/openzfs/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/openzfs/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/openzfs/zfs/merges",
                        "archive_url": "https://api.github.com/repos/openzfs/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/openzfs/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/openzfs/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/openzfs/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/openzfs/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/openzfs/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/openzfs/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/openzfs/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/openzfs/zfs/deployments",
                        "created_at": "2009-12-14T20:20:34Z",
                        "updated_at": "2023-10-27T06:11:04Z",
                        "pushed_at": "2023-10-27T07:27:28Z",
                        "git_url": "git://github.com/openzfs/zfs.git",
                        "ssh_url": "git@github.com:openzfs/zfs.git",
                        "clone_url": "https://github.com/openzfs/zfs.git",
                        "svn_url": "https://github.com/openzfs/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 124672,
                        "stargazers_count": 9637,
                        "watchers_count": 9637,
                        "language": "C",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": true,
                        "forks_count": 1668,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1195,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": true,
                        "topics": [
                            "file-system",
                            "openzfs",
                            "system-software"
                        ],
                        "visibility": "public",
                        "forks": 1668,
                        "open_issues": 1195,
                        "watchers": 9637,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15459"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15459"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15459"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15459/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15459/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15459/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/openzfs/zfs/statuses/8f4b42281a5852ac97606ae4e70dde2d86353c8f"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null,
                "merged": false,
                "mergeable": null,
                "rebaseable": null,
                "mergeable_state": "unknown",
                "merged_by": null,
                "comments": 0,
                "review_comments": 0,
                "maintainer_can_modify": false,
                "commits": 1,
                "additions": 10,
                "deletions": 0,
                "changed_files": 1
            }
        },
        "public": true,
        "created_at": "2023-10-27T07:27:29Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32889438360",
        "type": "WatchEvent",
        "actor": {
            "id": 2776719,
            "login": "heppu",
            "display_login": "heppu",
            "gravatar_id": "",
            "url": "https://api.github.com/users/heppu",
            "avatar_url": "https://avatars.githubusercontent.com/u/2776719?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-27T06:11:04Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32889106574",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 192271,
            "login": "grahamperrin",
            "display_login": "grahamperrin",
            "gravatar_id": "",
            "url": "https://api.github.com/users/grahamperrin",
            "avatar_url": "https://avatars.githubusercontent.com/u/192271?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/openzfs/zfs/issues/15456",
                "repository_url": "https://api.github.com/repos/openzfs/zfs",
                "labels_url": "https://api.github.com/repos/openzfs/zfs/issues/15456/labels{/name}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15456/comments",
                "events_url": "https://api.github.com/repos/openzfs/zfs/issues/15456/events",
                "html_url": "https://github.com/openzfs/zfs/pull/15456",
                "id": 1964159493,
                "node_id": "PR_kwDOAAarE85d5ppH",
                "number": 15456,
                "title": "Unify arc_prune_async() code",
                "user": {
                    "login": "amotin",
                    "id": 5219480,
                    "node_id": "MDQ6VXNlcjUyMTk0ODA=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/5219480?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/amotin",
                    "html_url": "https://github.com/amotin",
                    "followers_url": "https://api.github.com/users/amotin/followers",
                    "following_url": "https://api.github.com/users/amotin/following{/other_user}",
                    "gists_url": "https://api.github.com/users/amotin/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/amotin/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/amotin/subscriptions",
                    "organizations_url": "https://api.github.com/users/amotin/orgs",
                    "repos_url": "https://api.github.com/users/amotin/repos",
                    "events_url": "https://api.github.com/users/amotin/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/amotin/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 1061515916,
                        "node_id": "MDU6TGFiZWwxMDYxNTE1OTE2",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Status:%20Code%20Review%20Needed",
                        "name": "Status: Code Review Needed",
                        "color": "e6e600",
                        "default": false,
                        "description": "Ready for review and testing"
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 4,
                "created_at": "2023-10-26T18:45:11Z",
                "updated_at": "2023-10-27T05:50:53Z",
                "closed_at": null,
                "author_association": "MEMBER",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/openzfs/zfs/pulls/15456",
                    "html_url": "https://github.com/openzfs/zfs/pull/15456",
                    "diff_url": "https://github.com/openzfs/zfs/pull/15456.diff",
                    "patch_url": "https://github.com/openzfs/zfs/pull/15456.patch",
                    "merged_at": null
                },
                "body": "There is no sense to have separate implementations for FreeBSD and Linux.  Make Linux code shared as more functional and just register FreeBSD-specific prune callback with arc_add_prune_callback() API.\r\n\r\nAside of code cleanup this should fix excessive pruning on FreeBSD:\r\nhttps://bugs.freebsd.org/bugzilla/show_bug.cgi?id=274698\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [x] Bug fix (non-breaking change which fixes an issue)\r\n- [ ] New feature (non-breaking change which adds functionality)\r\n- [ ] Performance enhancement (non-breaking change which improves efficiency)\r\n- [x] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [x] My code follows the OpenZFS [code style requirements](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#coding-conventions).\r\n- [ ] I have updated the documentation accordingly.\r\n- [ ] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [ ] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [x] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/issues/15456/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/openzfs/zfs/issues/15456/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/openzfs/zfs/issues/comments/1782335709",
                "html_url": "https://github.com/openzfs/zfs/pull/15456#issuecomment-1782335709",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15456",
                "id": 1782335709,
                "node_id": "IC_kwDOAAarE85qPEjd",
                "user": {
                    "login": "grahamperrin",
                    "id": 192271,
                    "node_id": "MDQ6VXNlcjE5MjI3MQ==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/192271?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/grahamperrin",
                    "html_url": "https://github.com/grahamperrin",
                    "followers_url": "https://api.github.com/users/grahamperrin/followers",
                    "following_url": "https://api.github.com/users/grahamperrin/following{/other_user}",
                    "gists_url": "https://api.github.com/users/grahamperrin/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/grahamperrin/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/grahamperrin/subscriptions",
                    "organizations_url": "https://api.github.com/users/grahamperrin/orgs",
                    "repos_url": "https://api.github.com/users/grahamperrin/repos",
                    "events_url": "https://api.github.com/users/grahamperrin/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/grahamperrin/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T05:50:53Z",
                "updated_at": "2023-10-27T05:50:53Z",
                "author_association": "CONTRIBUTOR",
                "body": "Thank you, \r\n\r\n> [bugs.freebsd.org/bugzilla/show_bug.cgi?id=274698](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=274698)\r\n\r\nShould MFC flags apply? \r\n\r\nBlocking _14.0r_, or not relevant? <https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=14.0r>",
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/issues/comments/1782335709/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T05:50:54Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32888994096",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 13137622,
            "login": "shodanshok",
            "display_login": "shodanshok",
            "gravatar_id": "",
            "url": "https://api.github.com/users/shodanshok",
            "avatar_url": "https://avatars.githubusercontent.com/u/13137622?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/openzfs/zfs/issues/15457",
                "repository_url": "https://api.github.com/repos/openzfs/zfs",
                "labels_url": "https://api.github.com/repos/openzfs/zfs/issues/15457/labels{/name}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15457/comments",
                "events_url": "https://api.github.com/repos/openzfs/zfs/issues/15457/events",
                "html_url": "https://github.com/openzfs/zfs/pull/15457",
                "id": 1964341505,
                "node_id": "PR_kwDOAAarE85d6Ruo",
                "number": 15457,
                "title": "Increase L2ARC write rate and headroom",
                "user": {
                    "login": "shodanshok",
                    "id": 13137622,
                    "node_id": "MDQ6VXNlcjEzMTM3NjIy",
                    "avatar_url": "https://avatars.githubusercontent.com/u/13137622?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/shodanshok",
                    "html_url": "https://github.com/shodanshok",
                    "followers_url": "https://api.github.com/users/shodanshok/followers",
                    "following_url": "https://api.github.com/users/shodanshok/following{/other_user}",
                    "gists_url": "https://api.github.com/users/shodanshok/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/shodanshok/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/shodanshok/subscriptions",
                    "organizations_url": "https://api.github.com/users/shodanshok/orgs",
                    "repos_url": "https://api.github.com/users/shodanshok/repos",
                    "events_url": "https://api.github.com/users/shodanshok/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/shodanshok/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 7,
                "created_at": "2023-10-26T20:43:29Z",
                "updated_at": "2023-10-27T05:43:24Z",
                "closed_at": null,
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "draft": true,
                "pull_request": {
                    "url": "https://api.github.com/repos/openzfs/zfs/pulls/15457",
                    "html_url": "https://github.com/openzfs/zfs/pull/15457",
                    "diff_url": "https://github.com/openzfs/zfs/pull/15457.diff",
                    "patch_url": "https://github.com/openzfs/zfs/pull/15457.patch",
                    "merged_at": null
                },
                "body": "Current L2ARC write rate and headroom parameters are very conservative: l2arc_write_max=8M and l2arc_headroom=2 (ie: a full L2ARC writes at 8 MB/s, scanning 16/32 MB of ARC tail each time; a warming L2ARC operates at 2x these rates).\r\n\r\nThese values were selected 15+ years ago based on then-current SSDs size, performance and endurance. Todays we have multi-TB, fast and cheap SSDs which can sustain much higher read/write rates.\r\n\r\nFor this reason, this patch increases l2arc_write_max to 32 MB and set l2arc_headroom to 0. The former option speed up L2ARC warming and renewal rate, while the latter instruct the L2ARC write thread to search into all ARC (rather than on a short tail) for eligible buffers.\r\n\r\nWith persistent L2ARC, l2arc_headroom=0 is especially valuable as it effectively enable a sort of \"persistent ARC\" - if/when the machine reboots, most of ARC is restored into L2ARC, providing a very tangible performance boost compared to an otherwise \"cold\" ARC/L2ARC.\r\n\r\n<!--- Please fill out the following template, which will help other contributors review your Pull Request. -->\r\n\r\n<!--- Provide a general summary of your changes in the Title above -->\r\n\r\n<!---\r\nDocumentation on ZFS Buildbot options can be found at\r\nhttps://openzfs.github.io/openzfs-docs/Developer%20Resources/Buildbot%20Options.html\r\n-->\r\n\r\n### Motivation and Context\r\n<!--- Why is this change required? What problem does it solve? -->\r\n<!--- If it fixes an open issue, please link to the issue here. -->\r\n\r\n### Description\r\n<!--- Describe your changes in detail -->\r\n\r\n### How Has This Been Tested?\r\n<!--- Please describe in detail how you tested your changes. -->\r\n<!--- Include details of your testing environment, and the tests you ran to -->\r\n<!--- see how your change affects other areas of the code, etc. -->\r\n<!--- If your change is a performance enhancement, please provide benchmarks here. -->\r\n<!--- Please think about using the draft PR feature if appropriate -->\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [ ] New feature (non-breaking change which adds functionality)\r\n- [x] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [x] My code follows the OpenZFS [code style requirements](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#coding-conventions).\r\n- [ ] I have updated the documentation accordingly.\r\n- [ ] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [ ] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [x] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/issues/15457/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/openzfs/zfs/issues/15457/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/openzfs/zfs/issues/comments/1782329772",
                "html_url": "https://github.com/openzfs/zfs/pull/15457#issuecomment-1782329772",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15457",
                "id": 1782329772,
                "node_id": "IC_kwDOAAarE85qPDGs",
                "user": {
                    "login": "shodanshok",
                    "id": 13137622,
                    "node_id": "MDQ6VXNlcjEzMTM3NjIy",
                    "avatar_url": "https://avatars.githubusercontent.com/u/13137622?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/shodanshok",
                    "html_url": "https://github.com/shodanshok",
                    "followers_url": "https://api.github.com/users/shodanshok/followers",
                    "following_url": "https://api.github.com/users/shodanshok/following{/other_user}",
                    "gists_url": "https://api.github.com/users/shodanshok/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/shodanshok/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/shodanshok/subscriptions",
                    "organizations_url": "https://api.github.com/users/shodanshok/orgs",
                    "repos_url": "https://api.github.com/users/shodanshok/repos",
                    "events_url": "https://api.github.com/users/shodanshok/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/shodanshok/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-27T05:43:24Z",
                "updated_at": "2023-10-27T05:43:24Z",
                "author_association": "CONTRIBUTOR",
                "body": "> Feed thread scans up to headroom, but skips ineligible buffers. If none of scanned buffers are eligible -- nothing will be written.\r\n\r\nOk, sure, I misunderstood the previous post.\r\n\r\n> The sublists contain buffers eligible for eviction. It does not mean they all are eligible for L2ARC -- some may already be in L2ARC, some may belong to a different pool, some are from dataset with disabled secondarycache, some are prefetches.\r\n\r\nYou are right.\r\n\r\nI agree that completely disabling headroom limit can be too much. At the same time, I am somewhat surprised that I did never see the feed thread to cause any significant load even on servers with `l2arc_headroom=0`. This is probably due to limited memory and default recordsize (128K).\r\n\r\nWhat about setting `l2arc_headroom=32`? If you feel that reasonable, I can update this patch.\r\n\r\nThanks.",
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/issues/comments/1782329772/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T05:43:24Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32888542955",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 12415697,
            "login": "don-brady",
            "display_login": "don-brady",
            "gravatar_id": "",
            "url": "https://api.github.com/users/don-brady",
            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1374080097",
                "pull_request_review_id": 1701009814,
                "id": 1374080097,
                "node_id": "PRRC_kwDOAAarE85R5sxh",
                "diff_hunk": "@@ -8195,6 +8207,102 @@ print_removal_status(zpool_handle_t *zhp, pool_removal_stat_t *prs)\n \t}\n }\n \n+/*\n+ * Print out detailed raidz expansion status.\n+ */\n+static void\n+print_raidz_expand_status(zpool_handle_t *zhp, pool_raidz_expand_stat_t *pres)\n+{\n+\tchar copied_buf[7];\n+\n+\tif (pres == NULL || pres->pres_state == DSS_NONE)\n+\t\treturn;\n+\n+\t/*\n+\t * Determine name of vdev.\n+\t */\n+\tnvlist_t *config = zpool_get_config(zhp, NULL);\n+\tnvlist_t *nvroot = fnvlist_lookup_nvlist(config,\n+\t    ZPOOL_CONFIG_VDEV_TREE);\n+\tnvlist_t **child;\n+\tuint_t children;\n+\tverify(nvlist_lookup_nvlist_array(nvroot, ZPOOL_CONFIG_CHILDREN,\n+\t    &child, &children) == 0);\n+\tassert(pres->pres_expanding_vdev < children);\n+\n+\tprintf_color(ANSI_BOLD, gettext(\"raidz expand: \"));\n+\n+\ttime_t start = pres->pres_start_time;\n+\ttime_t end = pres->pres_end_time;\n+\tchar *vname =\n+\t    zpool_vdev_name(g_zfs, zhp, child[pres->pres_expanding_vdev], 0);\n+\tzfs_nicenum(pres->pres_reflowed, copied_buf, sizeof (copied_buf));\n+\n+\t/*\n+\t * Expansion is finished or canceled.\n+\t */\n+\tif (pres->pres_state == DSS_FINISHED) {\n+\t\tuint64_t minutes_taken = (end - start) / 60;\n+\n+\t\t(void) printf(gettext(\"Expansion of %s-%u copied %s \"\n+\t\t    \"in %lluh%um, completed on %s\"),\n+\t\t    vname,\n+\t\t    (int)pres->pres_expanding_vdev,\n+\t\t    copied_buf,\n+\t\t    (u_longlong_t)(minutes_taken / 60),\n+\t\t    (uint_t)(minutes_taken % 60),\n+\t\t    ctime((time_t *)&end));\n+\t} else {\n+\t\tchar examined_buf[7], total_buf[7], rate_buf[7];\n+\t\tuint64_t copied, total, elapsed, secs_left;\n+\t\tdouble fraction_done;\n+\t\tuint_t rate;\n+\n+\t\tassert(pres->pres_state == DSS_SCANNING);\n+\n+\t\t/*\n+\t\t * Expansion is in progress.\n+\t\t */\n+\t\t(void) printf(gettext(\n+\t\t    \"Expansion of %s-%u in progress since %s\"),\n+\t\t    vname, (int)pres->pres_expanding_vdev, ctime(&start));\n+\n+\t\tcopied = pres->pres_reflowed > 0 ? pres->pres_reflowed : 1;\n+\t\ttotal = pres->pres_to_reflow;\n+\t\tfraction_done = (double)copied / total;\n+\n+\t\t/* elapsed time for this pass */\n+\t\telapsed = time(NULL) - pres->pres_start_time;\n+\t\telapsed = elapsed > 0 ? elapsed : 1;\n+\t\trate = copied / elapsed;\n+\t\trate = rate > 0 ? rate : 1;\n+\t\tsecs_left = (total - copied) / rate;\n+\n+\t\tzfs_nicenum(copied, examined_buf, sizeof (examined_buf));\n+\t\tzfs_nicenum(total, total_buf, sizeof (total_buf));\n+\t\tzfs_nicenum(rate, rate_buf, sizeof (rate_buf));\n+\n+\t\t/*\n+\t\t * do not print estimated time if hours_left is more than\n+\t\t * 30 days\n+\t\t */\n+\t\t(void) printf(gettext(\"\\t%s copied out of %s at %s/s, \"\n+\t\t    \"%.2f%% done\"),",
                "path": "cmd/zpool/zpool_main.c",
                "commit_id": "680f858f2cebcc12ad524c522ee14b838c0ab882",
                "original_commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "fixed",
                "created_at": "2023-10-27T05:13:37Z",
                "updated_at": "2023-10-27T05:13:38Z",
                "html_url": "https://github.com/openzfs/zfs/pull/15022#discussion_r1374080097",
                "pull_request_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1374080097"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022#discussion_r1374080097"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1374080097/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": null,
                "original_start_line": null,
                "start_side": null,
                "line": null,
                "original_line": 8290,
                "side": "RIGHT",
                "in_reply_to_id": 1373916143,
                "original_position": 133,
                "position": null,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "id": 1413536769,
                "node_id": "PR_kwDOAAarE85UQNwB",
                "html_url": "https://github.com/openzfs/zfs/pull/15022",
                "diff_url": "https://github.com/openzfs/zfs/pull/15022.diff",
                "patch_url": "https://github.com/openzfs/zfs/pull/15022.patch",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15022",
                "number": 15022,
                "state": "open",
                "locked": false,
                "title": "raidz expansion feature",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "### Motivation and Context\r\nThis feature allows disks to be added one at a time to a RAID-Z group, expanding its capacity incrementally. This feature is especially useful for small pools (typically with only one RAID-Z group), where there isn't sufficient hardware to add capacity by adding a whole new RAID-Z group (typically doubling the number of disks).\r\n\r\nFor additional context as well as a design overview, see Matt Ahrens' talk at the [2021 FreeBSD Developer Summit](https://wiki.freebsd.org/DevSummit/202106) ([video](https://youtu.be/3SUKJye54aI?t=6166)) ([slides](https://docs.google.com/presentation/d/1FeQgEwChrtNQBHfWSNsPK3Y53O5BnPh3Cz5nRa5GAQY/edit#slide=id.p)), and a [news article from Ars Technica](https://arstechnica.com/gadgets/2021/06/raidz-expansion-code-lands-in-openzfs-master/).\r\n\r\n### Description\r\n#### Initiating expansion\r\nA new device (disk) can be attached to an existing RAIDZ vdev, by running `zpool attach POOL raidzP-N NEW_DEVICE`, e.g. `zpool attach tank raidz2-0 sda`. The new device will become part of the RAIDZ group. A _raidz expansion_ will\r\nbe initiated, and the new device will contribute additional space to the RAIDZ group once the expansion completes.\r\n\r\nThe `feature@raidz_expansion` on-disk feature flag must be `enabled` to initiate an expansion, and it remains `active` for the life of the pool. In other words, pools with expanded RAIDZ vdevs can not be imported by older releases of the ZFS software.\r\n\r\n#### During expansion\r\nThe expansion entails reading all allocated space from existing disks in the RAIDZ group, and rewriting it to the new disks in the RAIDZ group (including the newly added device).\r\n\r\nThe expansion progress can be monitored with `zpool status`.\r\n\r\nData redundancy is maintained during (and after) the expansion. If a disk fails while the expansion is in progress, the expansion pauses until the health of the RAIDZ vdev is restored (e.g. by replacing the failed disk and waiting\r\nfor reconstruction to complete).\r\n\r\nThe pool remains accessible during expansion. Following a reboot or export/import, the expansion resumes where it left off.\r\n\r\n#### After expansion\r\nWhen the expansion completes, the additional space is available for use, and is reflected in the `available` zfs property (as seen in `zfs list`, `df`, etc).\r\n\r\nExpansion does not change the number of failures that can be tolerated without data loss (e.g. a RAIDZ2 is still a RAIDZ2 even after expansion).\r\n\r\nA RAIDZ vdev can be expanded multiple times.\r\n\r\nAfter the expansion completes, old blocks remain with their old data-to-parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distributed among the larger set of disks. New blocks will be written with the new data-to-parity\r\nratio (e.g. a 5-wide RAIDZ2 which has been expanded once to 6-wide, has 4 data to 2 parity). However, the RAIDZ vdev's \"assumed parity ratio\" does not change, so slightly less space than is expected may be reported for newly-written blocks, according to `zfs list`, `df`, `ls -s`, and similar tools.\r\n\r\n#### Manpage changes\r\nzpool-attach.8:\r\n```\r\nNAME\r\n     zpool-attach \u2014 attach new device to existing ZFS vdev\r\n\r\nSYNOPSIS\r\n     zpool attach [-fsw] [-o property=value] pool device new_device\r\n\r\nDESCRIPTION\r\n     Attaches new_device to the existing device.  The behavior differs depend\u2010\r\n     ing on if the existing device is a RAIDZ device, or a mirror/plain\r\n     device.\r\n\r\n     If the existing device is a mirror or plain device ...\r\n\r\n     If the existing device is a RAIDZ device (e.g. specified as \"raidz2-0\"),\r\n     the new device will become part of that RAIDZ group.  A \"raidz expansion\"\r\n     will be initiated, and the new device will contribute additional space to\r\n     the RAIDZ group once the expansion completes.  The expansion entails\r\n     reading all allocated space from existing disks in the RAIDZ group, and\r\n     rewriting it to the new disks in the RAIDZ group (including the newly\r\n     added device).  Its progress can be monitored with zpool status.\r\n\r\n     Data redundancy is maintained during and after the expansion.  If a disk\r\n     fails while the expansion is in progress, the expansion pauses until the\r\n     health of the RAIDZ vdev is restored (e.g. by replacing the failed disk\r\n     and waiting for reconstruction to complete).  Expansion does not change\r\n     the number of failures that can be tolerated without data loss (e.g. a\r\n     RAIDZ2 is still a RAIDZ2 even after expansion).  A RAIDZ vdev can be\r\n     expanded multiple times.\r\n\r\n     After the expansion completes, old blocks remain with their old data-to-\r\n     parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distrib\u2010\r\n     uted among the larger set of disks.  New blocks will be written with the\r\n     new data-to-parity ratio (e.g. a 5-wide RAIDZ2 which has been expanded\r\n     once to 6-wide, has 4 data to 2 parity).  However, the RAIDZ vdev's\r\n     \"assumed parity ratio\" does not change, so slightly less space than is\r\n     expected may be reported for newly-written blocks, according to zfs list,\r\n     df, ls -s, and similar tools.\r\n```\r\n#### Status\r\nMatt Ahrens' original pull request (#12225) has been rebased here to current master branch and updated to incorporate recent code cleanups in the OpenZFS codebase. This feature is believed to be complete. However, like all PR's, it is subject to change as part of the code review process. Since this PR includes on-disk changes, it shouldn't be used on production systems before it is integrated to the OpenZFS codebase. Tasks that still need to be done before integration:\r\n- [x] Additional code cleanup in `ztest` code\r\n- [x] `zloop` changes to drive coverage of this feature\r\n- [ ] Address test failures in `ztest` runs\r\n- [x] Document the high-level design in a \"big theory statement\" comment\r\n- [x] Remove verbose logging\r\n- [x] Detection of MBR partitions using reserved boot area (FreeBSD BTX boot loader)\r\n- [ ] Address any performance concerns\r\n\r\n### Acknowledgments\r\nThank you to the [FreeBSD Foundation](https://freebsdfoundation.org/) for commissioning this work in 2017 and continuing to sponsor it well past the original time estimates!\r\nThank you to [iXsystems](https://www.ixsystems.com/) for sponsoring the final push to land this feature into OpenZFS.\r\n\r\nThanks also to contributors @FedorUporovVstack, @stuartmaybee, @thorsteneb, and @Fmstrat for portions\r\nof the implementation.\r\n\r\nSponsored-by: The FreeBSD Foundation\r\nSponsored-by: iXsystems, Inc.\r\nSponsored-by: vStack\r\nContributions-by: Stuart Maybee [stuart.maybee@comcast.net](mailto:stuart.maybee@comcast.net)\r\nContributions-by: Fedor Uporov [fuporov.vstack@gmail.com](mailto:fuporov.vstack@gmail.com)\r\nContributions-by: Thorsten Behrens [tbehrens@outlook.com](mailto:tbehrens@outlook.com)\r\nContributions-by: Fmstrat [nospam@nowsci.com](mailto:nospam@nowsci.com)\r\nContributions-by: Don Brady <dev.fs.zfs@gmail.com>\r\n\r\n### How Has This Been Tested?\r\nTests added to the ZFS Test Suite (`functional/raidz`) and `ztest`, in addition to manual testing.\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [x] New feature (non-breaking change which adds functionality)\r\n- [ ] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n- [x] I have updated the documentation accordingly.\r\n- [x] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [x] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [ ] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n\r\n### Pull Request Comments\r\nPlease limit comments here to code review/feedback and testing questions/results.\r\n\r\nFor generic discussions about RAID-Z, or discussions on future enhancements to RAIDZ expansion, please use [RAIDZ Expansion feature discussions](https://github.com/openzfs/zfs/discussions/15232).",
                "created_at": "2023-06-29T15:15:15Z",
                "updated_at": "2023-10-27T05:13:37Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "d997f55586843c7466f6c98634170b93c03adb9c",
                "assignee": {
                    "login": "mmaybee",
                    "id": 44241648,
                    "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/mmaybee",
                    "html_url": "https://github.com/mmaybee",
                    "followers_url": "https://api.github.com/users/mmaybee/followers",
                    "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                    "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                    "repos_url": "https://api.github.com/users/mmaybee/repos",
                    "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "mmaybee",
                        "id": 44241648,
                        "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mmaybee",
                        "html_url": "https://github.com/mmaybee",
                        "followers_url": "https://api.github.com/users/mmaybee/followers",
                        "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                        "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                        "repos_url": "https://api.github.com/users/mmaybee/repos",
                        "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 40358,
                        "node_id": "MDU6TGFiZWw0MDM1OA==",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Feature",
                        "name": "Type: Feature",
                        "color": "02d7e1",
                        "default": false,
                        "description": "Feature request or new feature"
                    },
                    {
                        "id": 1007099007,
                        "node_id": "MDU6TGFiZWwxMDA3MDk5MDA3",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Status:%20Accepted",
                        "name": "Status: Accepted",
                        "color": "00b33c",
                        "default": false,
                        "description": "Ready to integrate (reviewed, tested)"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits",
                "review_comments_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments",
                "review_comment_url": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments",
                "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/680f858f2cebcc12ad524c522ee14b838c0ab882",
                "head": {
                    "label": "don-brady:raidz-expansion",
                    "ref": "raidz-expansion",
                    "sha": "680f858f2cebcc12ad524c522ee14b838c0ab882",
                    "user": {
                        "login": "don-brady",
                        "id": 12415697,
                        "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                        "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/don-brady",
                        "html_url": "https://github.com/don-brady",
                        "followers_url": "https://api.github.com/users/don-brady/followers",
                        "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                        "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                        "organizations_url": "https://api.github.com/users/don-brady/orgs",
                        "repos_url": "https://api.github.com/users/don-brady/repos",
                        "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/don-brady/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 425096697,
                        "node_id": "R_kgDOGVZ1-Q",
                        "name": "openzfs",
                        "full_name": "don-brady/openzfs",
                        "private": false,
                        "owner": {
                            "login": "don-brady",
                            "id": 12415697,
                            "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/don-brady",
                            "html_url": "https://github.com/don-brady",
                            "followers_url": "https://api.github.com/users/don-brady/followers",
                            "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                            "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                            "organizations_url": "https://api.github.com/users/don-brady/orgs",
                            "repos_url": "https://api.github.com/users/don-brady/repos",
                            "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/don-brady/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/don-brady/openzfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": true,
                        "url": "https://api.github.com/repos/don-brady/openzfs",
                        "forks_url": "https://api.github.com/repos/don-brady/openzfs/forks",
                        "keys_url": "https://api.github.com/repos/don-brady/openzfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/don-brady/openzfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/don-brady/openzfs/teams",
                        "hooks_url": "https://api.github.com/repos/don-brady/openzfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/don-brady/openzfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/don-brady/openzfs/events",
                        "assignees_url": "https://api.github.com/repos/don-brady/openzfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/don-brady/openzfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/don-brady/openzfs/tags",
                        "blobs_url": "https://api.github.com/repos/don-brady/openzfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/don-brady/openzfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/don-brady/openzfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/don-brady/openzfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/don-brady/openzfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/don-brady/openzfs/languages",
                        "stargazers_url": "https://api.github.com/repos/don-brady/openzfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/don-brady/openzfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/don-brady/openzfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/don-brady/openzfs/subscription",
                        "commits_url": "https://api.github.com/repos/don-brady/openzfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/don-brady/openzfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/don-brady/openzfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/don-brady/openzfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/don-brady/openzfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/don-brady/openzfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/don-brady/openzfs/merges",
                        "archive_url": "https://api.github.com/repos/don-brady/openzfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/don-brady/openzfs/downloads",
                        "issues_url": "https://api.github.com/repos/don-brady/openzfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/don-brady/openzfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/don-brady/openzfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/don-brady/openzfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/don-brady/openzfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/don-brady/openzfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/don-brady/openzfs/deployments",
                        "created_at": "2021-11-05T22:10:31Z",
                        "updated_at": "2023-04-19T17:10:15Z",
                        "pushed_at": "2023-10-27T04:31:55Z",
                        "git_url": "git://github.com/don-brady/openzfs.git",
                        "ssh_url": "git@github.com:don-brady/openzfs.git",
                        "clone_url": "https://github.com/don-brady/openzfs.git",
                        "svn_url": "https://github.com/don-brady/openzfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 120216,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "C",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 5,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 5,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "openzfs:master",
                    "ref": "master",
                    "sha": "9facf2d1ad0c4857de1d47a2a14e882a3fb78b89",
                    "user": {
                        "login": "openzfs",
                        "id": 4510897,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/openzfs",
                        "html_url": "https://github.com/openzfs",
                        "followers_url": "https://api.github.com/users/openzfs/followers",
                        "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                        "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                        "organizations_url": "https://api.github.com/users/openzfs/orgs",
                        "repos_url": "https://api.github.com/users/openzfs/repos",
                        "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/openzfs/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 437011,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0MzcwMTE=",
                        "name": "zfs",
                        "full_name": "openzfs/zfs",
                        "private": false,
                        "owner": {
                            "login": "openzfs",
                            "id": 4510897,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/openzfs",
                            "html_url": "https://github.com/openzfs",
                            "followers_url": "https://api.github.com/users/openzfs/followers",
                            "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                            "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                            "organizations_url": "https://api.github.com/users/openzfs/orgs",
                            "repos_url": "https://api.github.com/users/openzfs/repos",
                            "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/openzfs/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/openzfs/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": false,
                        "url": "https://api.github.com/repos/openzfs/zfs",
                        "forks_url": "https://api.github.com/repos/openzfs/zfs/forks",
                        "keys_url": "https://api.github.com/repos/openzfs/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/openzfs/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/openzfs/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/openzfs/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/openzfs/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/openzfs/zfs/events",
                        "assignees_url": "https://api.github.com/repos/openzfs/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/openzfs/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/openzfs/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/openzfs/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/openzfs/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/openzfs/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/openzfs/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/openzfs/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/openzfs/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/openzfs/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/openzfs/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/openzfs/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/openzfs/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/openzfs/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/openzfs/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/openzfs/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/openzfs/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/openzfs/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/openzfs/zfs/merges",
                        "archive_url": "https://api.github.com/repos/openzfs/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/openzfs/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/openzfs/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/openzfs/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/openzfs/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/openzfs/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/openzfs/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/openzfs/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/openzfs/zfs/deployments",
                        "created_at": "2009-12-14T20:20:34Z",
                        "updated_at": "2023-10-26T23:39:14Z",
                        "pushed_at": "2023-10-27T04:31:58Z",
                        "git_url": "git://github.com/openzfs/zfs.git",
                        "ssh_url": "git@github.com:openzfs/zfs.git",
                        "clone_url": "https://github.com/openzfs/zfs.git",
                        "svn_url": "https://github.com/openzfs/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 124672,
                        "stargazers_count": 9636,
                        "watchers_count": 9636,
                        "language": "C",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": true,
                        "forks_count": 1668,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1194,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": true,
                        "topics": [
                            "file-system",
                            "openzfs",
                            "system-software"
                        ],
                        "visibility": "public",
                        "forks": 1668,
                        "open_issues": 1194,
                        "watchers": 9636,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/openzfs/zfs/statuses/680f858f2cebcc12ad524c522ee14b838c0ab882"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T05:13:37Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32888542904",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 12415697,
            "login": "don-brady",
            "display_login": "don-brady",
            "gravatar_id": "",
            "url": "https://api.github.com/users/don-brady",
            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1701009814,
                "node_id": "PRR_kwDOAAarE85lY1mW",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "submitted_at": "2023-10-27T05:13:37Z",
                "state": "commented",
                "html_url": "https://github.com/openzfs/zfs/pull/15022#pullrequestreview-1701009814",
                "pull_request_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022#pullrequestreview-1701009814"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "id": 1413536769,
                "node_id": "PR_kwDOAAarE85UQNwB",
                "html_url": "https://github.com/openzfs/zfs/pull/15022",
                "diff_url": "https://github.com/openzfs/zfs/pull/15022.diff",
                "patch_url": "https://github.com/openzfs/zfs/pull/15022.patch",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15022",
                "number": 15022,
                "state": "open",
                "locked": false,
                "title": "raidz expansion feature",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "### Motivation and Context\r\nThis feature allows disks to be added one at a time to a RAID-Z group, expanding its capacity incrementally. This feature is especially useful for small pools (typically with only one RAID-Z group), where there isn't sufficient hardware to add capacity by adding a whole new RAID-Z group (typically doubling the number of disks).\r\n\r\nFor additional context as well as a design overview, see Matt Ahrens' talk at the [2021 FreeBSD Developer Summit](https://wiki.freebsd.org/DevSummit/202106) ([video](https://youtu.be/3SUKJye54aI?t=6166)) ([slides](https://docs.google.com/presentation/d/1FeQgEwChrtNQBHfWSNsPK3Y53O5BnPh3Cz5nRa5GAQY/edit#slide=id.p)), and a [news article from Ars Technica](https://arstechnica.com/gadgets/2021/06/raidz-expansion-code-lands-in-openzfs-master/).\r\n\r\n### Description\r\n#### Initiating expansion\r\nA new device (disk) can be attached to an existing RAIDZ vdev, by running `zpool attach POOL raidzP-N NEW_DEVICE`, e.g. `zpool attach tank raidz2-0 sda`. The new device will become part of the RAIDZ group. A _raidz expansion_ will\r\nbe initiated, and the new device will contribute additional space to the RAIDZ group once the expansion completes.\r\n\r\nThe `feature@raidz_expansion` on-disk feature flag must be `enabled` to initiate an expansion, and it remains `active` for the life of the pool. In other words, pools with expanded RAIDZ vdevs can not be imported by older releases of the ZFS software.\r\n\r\n#### During expansion\r\nThe expansion entails reading all allocated space from existing disks in the RAIDZ group, and rewriting it to the new disks in the RAIDZ group (including the newly added device).\r\n\r\nThe expansion progress can be monitored with `zpool status`.\r\n\r\nData redundancy is maintained during (and after) the expansion. If a disk fails while the expansion is in progress, the expansion pauses until the health of the RAIDZ vdev is restored (e.g. by replacing the failed disk and waiting\r\nfor reconstruction to complete).\r\n\r\nThe pool remains accessible during expansion. Following a reboot or export/import, the expansion resumes where it left off.\r\n\r\n#### After expansion\r\nWhen the expansion completes, the additional space is available for use, and is reflected in the `available` zfs property (as seen in `zfs list`, `df`, etc).\r\n\r\nExpansion does not change the number of failures that can be tolerated without data loss (e.g. a RAIDZ2 is still a RAIDZ2 even after expansion).\r\n\r\nA RAIDZ vdev can be expanded multiple times.\r\n\r\nAfter the expansion completes, old blocks remain with their old data-to-parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distributed among the larger set of disks. New blocks will be written with the new data-to-parity\r\nratio (e.g. a 5-wide RAIDZ2 which has been expanded once to 6-wide, has 4 data to 2 parity). However, the RAIDZ vdev's \"assumed parity ratio\" does not change, so slightly less space than is expected may be reported for newly-written blocks, according to `zfs list`, `df`, `ls -s`, and similar tools.\r\n\r\n#### Manpage changes\r\nzpool-attach.8:\r\n```\r\nNAME\r\n     zpool-attach \u2014 attach new device to existing ZFS vdev\r\n\r\nSYNOPSIS\r\n     zpool attach [-fsw] [-o property=value] pool device new_device\r\n\r\nDESCRIPTION\r\n     Attaches new_device to the existing device.  The behavior differs depend\u2010\r\n     ing on if the existing device is a RAIDZ device, or a mirror/plain\r\n     device.\r\n\r\n     If the existing device is a mirror or plain device ...\r\n\r\n     If the existing device is a RAIDZ device (e.g. specified as \"raidz2-0\"),\r\n     the new device will become part of that RAIDZ group.  A \"raidz expansion\"\r\n     will be initiated, and the new device will contribute additional space to\r\n     the RAIDZ group once the expansion completes.  The expansion entails\r\n     reading all allocated space from existing disks in the RAIDZ group, and\r\n     rewriting it to the new disks in the RAIDZ group (including the newly\r\n     added device).  Its progress can be monitored with zpool status.\r\n\r\n     Data redundancy is maintained during and after the expansion.  If a disk\r\n     fails while the expansion is in progress, the expansion pauses until the\r\n     health of the RAIDZ vdev is restored (e.g. by replacing the failed disk\r\n     and waiting for reconstruction to complete).  Expansion does not change\r\n     the number of failures that can be tolerated without data loss (e.g. a\r\n     RAIDZ2 is still a RAIDZ2 even after expansion).  A RAIDZ vdev can be\r\n     expanded multiple times.\r\n\r\n     After the expansion completes, old blocks remain with their old data-to-\r\n     parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distrib\u2010\r\n     uted among the larger set of disks.  New blocks will be written with the\r\n     new data-to-parity ratio (e.g. a 5-wide RAIDZ2 which has been expanded\r\n     once to 6-wide, has 4 data to 2 parity).  However, the RAIDZ vdev's\r\n     \"assumed parity ratio\" does not change, so slightly less space than is\r\n     expected may be reported for newly-written blocks, according to zfs list,\r\n     df, ls -s, and similar tools.\r\n```\r\n#### Status\r\nMatt Ahrens' original pull request (#12225) has been rebased here to current master branch and updated to incorporate recent code cleanups in the OpenZFS codebase. This feature is believed to be complete. However, like all PR's, it is subject to change as part of the code review process. Since this PR includes on-disk changes, it shouldn't be used on production systems before it is integrated to the OpenZFS codebase. Tasks that still need to be done before integration:\r\n- [x] Additional code cleanup in `ztest` code\r\n- [x] `zloop` changes to drive coverage of this feature\r\n- [ ] Address test failures in `ztest` runs\r\n- [x] Document the high-level design in a \"big theory statement\" comment\r\n- [x] Remove verbose logging\r\n- [x] Detection of MBR partitions using reserved boot area (FreeBSD BTX boot loader)\r\n- [ ] Address any performance concerns\r\n\r\n### Acknowledgments\r\nThank you to the [FreeBSD Foundation](https://freebsdfoundation.org/) for commissioning this work in 2017 and continuing to sponsor it well past the original time estimates!\r\nThank you to [iXsystems](https://www.ixsystems.com/) for sponsoring the final push to land this feature into OpenZFS.\r\n\r\nThanks also to contributors @FedorUporovVstack, @stuartmaybee, @thorsteneb, and @Fmstrat for portions\r\nof the implementation.\r\n\r\nSponsored-by: The FreeBSD Foundation\r\nSponsored-by: iXsystems, Inc.\r\nSponsored-by: vStack\r\nContributions-by: Stuart Maybee [stuart.maybee@comcast.net](mailto:stuart.maybee@comcast.net)\r\nContributions-by: Fedor Uporov [fuporov.vstack@gmail.com](mailto:fuporov.vstack@gmail.com)\r\nContributions-by: Thorsten Behrens [tbehrens@outlook.com](mailto:tbehrens@outlook.com)\r\nContributions-by: Fmstrat [nospam@nowsci.com](mailto:nospam@nowsci.com)\r\nContributions-by: Don Brady <dev.fs.zfs@gmail.com>\r\n\r\n### How Has This Been Tested?\r\nTests added to the ZFS Test Suite (`functional/raidz`) and `ztest`, in addition to manual testing.\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [x] New feature (non-breaking change which adds functionality)\r\n- [ ] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n- [x] I have updated the documentation accordingly.\r\n- [x] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [x] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [ ] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n\r\n### Pull Request Comments\r\nPlease limit comments here to code review/feedback and testing questions/results.\r\n\r\nFor generic discussions about RAID-Z, or discussions on future enhancements to RAIDZ expansion, please use [RAIDZ Expansion feature discussions](https://github.com/openzfs/zfs/discussions/15232).",
                "created_at": "2023-06-29T15:15:15Z",
                "updated_at": "2023-10-27T05:13:37Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "d997f55586843c7466f6c98634170b93c03adb9c",
                "assignee": {
                    "login": "mmaybee",
                    "id": 44241648,
                    "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/mmaybee",
                    "html_url": "https://github.com/mmaybee",
                    "followers_url": "https://api.github.com/users/mmaybee/followers",
                    "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                    "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                    "repos_url": "https://api.github.com/users/mmaybee/repos",
                    "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "mmaybee",
                        "id": 44241648,
                        "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mmaybee",
                        "html_url": "https://github.com/mmaybee",
                        "followers_url": "https://api.github.com/users/mmaybee/followers",
                        "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                        "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                        "repos_url": "https://api.github.com/users/mmaybee/repos",
                        "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 40358,
                        "node_id": "MDU6TGFiZWw0MDM1OA==",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Feature",
                        "name": "Type: Feature",
                        "color": "02d7e1",
                        "default": false,
                        "description": "Feature request or new feature"
                    },
                    {
                        "id": 1007099007,
                        "node_id": "MDU6TGFiZWwxMDA3MDk5MDA3",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Status:%20Accepted",
                        "name": "Status: Accepted",
                        "color": "00b33c",
                        "default": false,
                        "description": "Ready to integrate (reviewed, tested)"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits",
                "review_comments_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments",
                "review_comment_url": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments",
                "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/680f858f2cebcc12ad524c522ee14b838c0ab882",
                "head": {
                    "label": "don-brady:raidz-expansion",
                    "ref": "raidz-expansion",
                    "sha": "680f858f2cebcc12ad524c522ee14b838c0ab882",
                    "user": {
                        "login": "don-brady",
                        "id": 12415697,
                        "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                        "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/don-brady",
                        "html_url": "https://github.com/don-brady",
                        "followers_url": "https://api.github.com/users/don-brady/followers",
                        "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                        "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                        "organizations_url": "https://api.github.com/users/don-brady/orgs",
                        "repos_url": "https://api.github.com/users/don-brady/repos",
                        "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/don-brady/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 425096697,
                        "node_id": "R_kgDOGVZ1-Q",
                        "name": "openzfs",
                        "full_name": "don-brady/openzfs",
                        "private": false,
                        "owner": {
                            "login": "don-brady",
                            "id": 12415697,
                            "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/don-brady",
                            "html_url": "https://github.com/don-brady",
                            "followers_url": "https://api.github.com/users/don-brady/followers",
                            "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                            "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                            "organizations_url": "https://api.github.com/users/don-brady/orgs",
                            "repos_url": "https://api.github.com/users/don-brady/repos",
                            "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/don-brady/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/don-brady/openzfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": true,
                        "url": "https://api.github.com/repos/don-brady/openzfs",
                        "forks_url": "https://api.github.com/repos/don-brady/openzfs/forks",
                        "keys_url": "https://api.github.com/repos/don-brady/openzfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/don-brady/openzfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/don-brady/openzfs/teams",
                        "hooks_url": "https://api.github.com/repos/don-brady/openzfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/don-brady/openzfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/don-brady/openzfs/events",
                        "assignees_url": "https://api.github.com/repos/don-brady/openzfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/don-brady/openzfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/don-brady/openzfs/tags",
                        "blobs_url": "https://api.github.com/repos/don-brady/openzfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/don-brady/openzfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/don-brady/openzfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/don-brady/openzfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/don-brady/openzfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/don-brady/openzfs/languages",
                        "stargazers_url": "https://api.github.com/repos/don-brady/openzfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/don-brady/openzfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/don-brady/openzfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/don-brady/openzfs/subscription",
                        "commits_url": "https://api.github.com/repos/don-brady/openzfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/don-brady/openzfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/don-brady/openzfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/don-brady/openzfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/don-brady/openzfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/don-brady/openzfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/don-brady/openzfs/merges",
                        "archive_url": "https://api.github.com/repos/don-brady/openzfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/don-brady/openzfs/downloads",
                        "issues_url": "https://api.github.com/repos/don-brady/openzfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/don-brady/openzfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/don-brady/openzfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/don-brady/openzfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/don-brady/openzfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/don-brady/openzfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/don-brady/openzfs/deployments",
                        "created_at": "2021-11-05T22:10:31Z",
                        "updated_at": "2023-04-19T17:10:15Z",
                        "pushed_at": "2023-10-27T04:31:55Z",
                        "git_url": "git://github.com/don-brady/openzfs.git",
                        "ssh_url": "git@github.com:don-brady/openzfs.git",
                        "clone_url": "https://github.com/don-brady/openzfs.git",
                        "svn_url": "https://github.com/don-brady/openzfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 120216,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "C",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 5,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 5,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "openzfs:master",
                    "ref": "master",
                    "sha": "9facf2d1ad0c4857de1d47a2a14e882a3fb78b89",
                    "user": {
                        "login": "openzfs",
                        "id": 4510897,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/openzfs",
                        "html_url": "https://github.com/openzfs",
                        "followers_url": "https://api.github.com/users/openzfs/followers",
                        "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                        "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                        "organizations_url": "https://api.github.com/users/openzfs/orgs",
                        "repos_url": "https://api.github.com/users/openzfs/repos",
                        "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/openzfs/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 437011,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0MzcwMTE=",
                        "name": "zfs",
                        "full_name": "openzfs/zfs",
                        "private": false,
                        "owner": {
                            "login": "openzfs",
                            "id": 4510897,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/openzfs",
                            "html_url": "https://github.com/openzfs",
                            "followers_url": "https://api.github.com/users/openzfs/followers",
                            "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                            "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                            "organizations_url": "https://api.github.com/users/openzfs/orgs",
                            "repos_url": "https://api.github.com/users/openzfs/repos",
                            "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/openzfs/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/openzfs/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": false,
                        "url": "https://api.github.com/repos/openzfs/zfs",
                        "forks_url": "https://api.github.com/repos/openzfs/zfs/forks",
                        "keys_url": "https://api.github.com/repos/openzfs/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/openzfs/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/openzfs/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/openzfs/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/openzfs/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/openzfs/zfs/events",
                        "assignees_url": "https://api.github.com/repos/openzfs/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/openzfs/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/openzfs/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/openzfs/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/openzfs/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/openzfs/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/openzfs/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/openzfs/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/openzfs/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/openzfs/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/openzfs/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/openzfs/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/openzfs/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/openzfs/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/openzfs/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/openzfs/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/openzfs/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/openzfs/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/openzfs/zfs/merges",
                        "archive_url": "https://api.github.com/repos/openzfs/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/openzfs/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/openzfs/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/openzfs/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/openzfs/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/openzfs/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/openzfs/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/openzfs/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/openzfs/zfs/deployments",
                        "created_at": "2009-12-14T20:20:34Z",
                        "updated_at": "2023-10-26T23:39:14Z",
                        "pushed_at": "2023-10-27T04:31:58Z",
                        "git_url": "git://github.com/openzfs/zfs.git",
                        "ssh_url": "git@github.com:openzfs/zfs.git",
                        "clone_url": "https://github.com/openzfs/zfs.git",
                        "svn_url": "https://github.com/openzfs/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 124672,
                        "stargazers_count": 9636,
                        "watchers_count": 9636,
                        "language": "C",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": true,
                        "forks_count": 1668,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1194,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": true,
                        "topics": [
                            "file-system",
                            "openzfs",
                            "system-software"
                        ],
                        "visibility": "public",
                        "forks": 1668,
                        "open_issues": 1194,
                        "watchers": 9636,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/openzfs/zfs/statuses/680f858f2cebcc12ad524c522ee14b838c0ab882"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T05:13:38Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32888002553",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 12415697,
            "login": "don-brady",
            "display_login": "don-brady",
            "gravatar_id": "",
            "url": "https://api.github.com/users/don-brady",
            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1374060795",
                "pull_request_review_id": 1700982074,
                "id": 1374060795,
                "node_id": "PRRC_kwDOAAarE85R5oD7",
                "diff_hunk": "@@ -8195,6 +8207,102 @@ print_removal_status(zpool_handle_t *zhp, pool_removal_stat_t *prs)\n \t}\n }\n \n+/*\n+ * Print out detailed raidz expansion status.\n+ */\n+static void\n+print_raidz_expand_status(zpool_handle_t *zhp, pool_raidz_expand_stat_t *pres)\n+{\n+\tchar copied_buf[7];\n+\n+\tif (pres == NULL || pres->pres_state == DSS_NONE)\n+\t\treturn;\n+\n+\t/*\n+\t * Determine name of vdev.\n+\t */\n+\tnvlist_t *config = zpool_get_config(zhp, NULL);\n+\tnvlist_t *nvroot = fnvlist_lookup_nvlist(config,\n+\t    ZPOOL_CONFIG_VDEV_TREE);\n+\tnvlist_t **child;\n+\tuint_t children;\n+\tverify(nvlist_lookup_nvlist_array(nvroot, ZPOOL_CONFIG_CHILDREN,\n+\t    &child, &children) == 0);\n+\tassert(pres->pres_expanding_vdev < children);\n+\n+\tprintf_color(ANSI_BOLD, gettext(\"raidz expand: \"));\n+\n+\ttime_t start = pres->pres_start_time;\n+\ttime_t end = pres->pres_end_time;\n+\tchar *vname =\n+\t    zpool_vdev_name(g_zfs, zhp, child[pres->pres_expanding_vdev], 0);\n+\tzfs_nicenum(pres->pres_reflowed, copied_buf, sizeof (copied_buf));\n+\n+\t/*\n+\t * Expansion is finished or canceled.\n+\t */\n+\tif (pres->pres_state == DSS_FINISHED) {\n+\t\tuint64_t minutes_taken = (end - start) / 60;\n+\n+\t\t(void) printf(gettext(\"Expansion of %s-%u copied %s \"\n+\t\t    \"in %lluh%um, completed on %s\"),\n+\t\t    vname,\n+\t\t    (int)pres->pres_expanding_vdev,\n+\t\t    copied_buf,\n+\t\t    (u_longlong_t)(minutes_taken / 60),\n+\t\t    (uint_t)(minutes_taken % 60),\n+\t\t    ctime((time_t *)&end));\n+\t} else {\n+\t\tchar examined_buf[7], total_buf[7], rate_buf[7];\n+\t\tuint64_t copied, total, elapsed, secs_left;\n+\t\tdouble fraction_done;\n+\t\tuint_t rate;\n+\n+\t\tassert(pres->pres_state == DSS_SCANNING);\n+\n+\t\t/*\n+\t\t * Expansion is in progress.\n+\t\t */\n+\t\t(void) printf(gettext(\n+\t\t    \"Expansion of %s-%u in progress since %s\"),",
                "path": "cmd/zpool/zpool_main.c",
                "commit_id": "680f858f2cebcc12ad524c522ee14b838c0ab882",
                "original_commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "fixed",
                "created_at": "2023-10-27T04:32:44Z",
                "updated_at": "2023-10-27T04:32:45Z",
                "html_url": "https://github.com/openzfs/zfs/pull/15022#discussion_r1374060795",
                "pull_request_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1374060795"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022#discussion_r1374060795"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1374060795/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": null,
                "original_start_line": null,
                "start_side": null,
                "line": null,
                "original_line": 8267,
                "side": "RIGHT",
                "in_reply_to_id": 1373930386,
                "original_position": 110,
                "position": null,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "id": 1413536769,
                "node_id": "PR_kwDOAAarE85UQNwB",
                "html_url": "https://github.com/openzfs/zfs/pull/15022",
                "diff_url": "https://github.com/openzfs/zfs/pull/15022.diff",
                "patch_url": "https://github.com/openzfs/zfs/pull/15022.patch",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15022",
                "number": 15022,
                "state": "open",
                "locked": false,
                "title": "raidz expansion feature",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "### Motivation and Context\r\nThis feature allows disks to be added one at a time to a RAID-Z group, expanding its capacity incrementally. This feature is especially useful for small pools (typically with only one RAID-Z group), where there isn't sufficient hardware to add capacity by adding a whole new RAID-Z group (typically doubling the number of disks).\r\n\r\nFor additional context as well as a design overview, see Matt Ahrens' talk at the [2021 FreeBSD Developer Summit](https://wiki.freebsd.org/DevSummit/202106) ([video](https://youtu.be/3SUKJye54aI?t=6166)) ([slides](https://docs.google.com/presentation/d/1FeQgEwChrtNQBHfWSNsPK3Y53O5BnPh3Cz5nRa5GAQY/edit#slide=id.p)), and a [news article from Ars Technica](https://arstechnica.com/gadgets/2021/06/raidz-expansion-code-lands-in-openzfs-master/).\r\n\r\n### Description\r\n#### Initiating expansion\r\nA new device (disk) can be attached to an existing RAIDZ vdev, by running `zpool attach POOL raidzP-N NEW_DEVICE`, e.g. `zpool attach tank raidz2-0 sda`. The new device will become part of the RAIDZ group. A _raidz expansion_ will\r\nbe initiated, and the new device will contribute additional space to the RAIDZ group once the expansion completes.\r\n\r\nThe `feature@raidz_expansion` on-disk feature flag must be `enabled` to initiate an expansion, and it remains `active` for the life of the pool. In other words, pools with expanded RAIDZ vdevs can not be imported by older releases of the ZFS software.\r\n\r\n#### During expansion\r\nThe expansion entails reading all allocated space from existing disks in the RAIDZ group, and rewriting it to the new disks in the RAIDZ group (including the newly added device).\r\n\r\nThe expansion progress can be monitored with `zpool status`.\r\n\r\nData redundancy is maintained during (and after) the expansion. If a disk fails while the expansion is in progress, the expansion pauses until the health of the RAIDZ vdev is restored (e.g. by replacing the failed disk and waiting\r\nfor reconstruction to complete).\r\n\r\nThe pool remains accessible during expansion. Following a reboot or export/import, the expansion resumes where it left off.\r\n\r\n#### After expansion\r\nWhen the expansion completes, the additional space is available for use, and is reflected in the `available` zfs property (as seen in `zfs list`, `df`, etc).\r\n\r\nExpansion does not change the number of failures that can be tolerated without data loss (e.g. a RAIDZ2 is still a RAIDZ2 even after expansion).\r\n\r\nA RAIDZ vdev can be expanded multiple times.\r\n\r\nAfter the expansion completes, old blocks remain with their old data-to-parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distributed among the larger set of disks. New blocks will be written with the new data-to-parity\r\nratio (e.g. a 5-wide RAIDZ2 which has been expanded once to 6-wide, has 4 data to 2 parity). However, the RAIDZ vdev's \"assumed parity ratio\" does not change, so slightly less space than is expected may be reported for newly-written blocks, according to `zfs list`, `df`, `ls -s`, and similar tools.\r\n\r\n#### Manpage changes\r\nzpool-attach.8:\r\n```\r\nNAME\r\n     zpool-attach \u2014 attach new device to existing ZFS vdev\r\n\r\nSYNOPSIS\r\n     zpool attach [-fsw] [-o property=value] pool device new_device\r\n\r\nDESCRIPTION\r\n     Attaches new_device to the existing device.  The behavior differs depend\u2010\r\n     ing on if the existing device is a RAIDZ device, or a mirror/plain\r\n     device.\r\n\r\n     If the existing device is a mirror or plain device ...\r\n\r\n     If the existing device is a RAIDZ device (e.g. specified as \"raidz2-0\"),\r\n     the new device will become part of that RAIDZ group.  A \"raidz expansion\"\r\n     will be initiated, and the new device will contribute additional space to\r\n     the RAIDZ group once the expansion completes.  The expansion entails\r\n     reading all allocated space from existing disks in the RAIDZ group, and\r\n     rewriting it to the new disks in the RAIDZ group (including the newly\r\n     added device).  Its progress can be monitored with zpool status.\r\n\r\n     Data redundancy is maintained during and after the expansion.  If a disk\r\n     fails while the expansion is in progress, the expansion pauses until the\r\n     health of the RAIDZ vdev is restored (e.g. by replacing the failed disk\r\n     and waiting for reconstruction to complete).  Expansion does not change\r\n     the number of failures that can be tolerated without data loss (e.g. a\r\n     RAIDZ2 is still a RAIDZ2 even after expansion).  A RAIDZ vdev can be\r\n     expanded multiple times.\r\n\r\n     After the expansion completes, old blocks remain with their old data-to-\r\n     parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distrib\u2010\r\n     uted among the larger set of disks.  New blocks will be written with the\r\n     new data-to-parity ratio (e.g. a 5-wide RAIDZ2 which has been expanded\r\n     once to 6-wide, has 4 data to 2 parity).  However, the RAIDZ vdev's\r\n     \"assumed parity ratio\" does not change, so slightly less space than is\r\n     expected may be reported for newly-written blocks, according to zfs list,\r\n     df, ls -s, and similar tools.\r\n```\r\n#### Status\r\nMatt Ahrens' original pull request (#12225) has been rebased here to current master branch and updated to incorporate recent code cleanups in the OpenZFS codebase. This feature is believed to be complete. However, like all PR's, it is subject to change as part of the code review process. Since this PR includes on-disk changes, it shouldn't be used on production systems before it is integrated to the OpenZFS codebase. Tasks that still need to be done before integration:\r\n- [x] Additional code cleanup in `ztest` code\r\n- [x] `zloop` changes to drive coverage of this feature\r\n- [ ] Address test failures in `ztest` runs\r\n- [x] Document the high-level design in a \"big theory statement\" comment\r\n- [x] Remove verbose logging\r\n- [x] Detection of MBR partitions using reserved boot area (FreeBSD BTX boot loader)\r\n- [ ] Address any performance concerns\r\n\r\n### Acknowledgments\r\nThank you to the [FreeBSD Foundation](https://freebsdfoundation.org/) for commissioning this work in 2017 and continuing to sponsor it well past the original time estimates!\r\nThank you to [iXsystems](https://www.ixsystems.com/) for sponsoring the final push to land this feature into OpenZFS.\r\n\r\nThanks also to contributors @FedorUporovVstack, @stuartmaybee, @thorsteneb, and @Fmstrat for portions\r\nof the implementation.\r\n\r\nSponsored-by: The FreeBSD Foundation\r\nSponsored-by: iXsystems, Inc.\r\nSponsored-by: vStack\r\nContributions-by: Stuart Maybee [stuart.maybee@comcast.net](mailto:stuart.maybee@comcast.net)\r\nContributions-by: Fedor Uporov [fuporov.vstack@gmail.com](mailto:fuporov.vstack@gmail.com)\r\nContributions-by: Thorsten Behrens [tbehrens@outlook.com](mailto:tbehrens@outlook.com)\r\nContributions-by: Fmstrat [nospam@nowsci.com](mailto:nospam@nowsci.com)\r\nContributions-by: Don Brady <dev.fs.zfs@gmail.com>\r\n\r\n### How Has This Been Tested?\r\nTests added to the ZFS Test Suite (`functional/raidz`) and `ztest`, in addition to manual testing.\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [x] New feature (non-breaking change which adds functionality)\r\n- [ ] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n- [x] I have updated the documentation accordingly.\r\n- [x] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [x] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [ ] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n\r\n### Pull Request Comments\r\nPlease limit comments here to code review/feedback and testing questions/results.\r\n\r\nFor generic discussions about RAID-Z, or discussions on future enhancements to RAIDZ expansion, please use [RAIDZ Expansion feature discussions](https://github.com/openzfs/zfs/discussions/15232).",
                "created_at": "2023-06-29T15:15:15Z",
                "updated_at": "2023-10-27T04:32:45Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "d997f55586843c7466f6c98634170b93c03adb9c",
                "assignee": {
                    "login": "mmaybee",
                    "id": 44241648,
                    "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/mmaybee",
                    "html_url": "https://github.com/mmaybee",
                    "followers_url": "https://api.github.com/users/mmaybee/followers",
                    "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                    "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                    "repos_url": "https://api.github.com/users/mmaybee/repos",
                    "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "mmaybee",
                        "id": 44241648,
                        "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mmaybee",
                        "html_url": "https://github.com/mmaybee",
                        "followers_url": "https://api.github.com/users/mmaybee/followers",
                        "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                        "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                        "repos_url": "https://api.github.com/users/mmaybee/repos",
                        "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 40358,
                        "node_id": "MDU6TGFiZWw0MDM1OA==",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Feature",
                        "name": "Type: Feature",
                        "color": "02d7e1",
                        "default": false,
                        "description": "Feature request or new feature"
                    },
                    {
                        "id": 1007099007,
                        "node_id": "MDU6TGFiZWwxMDA3MDk5MDA3",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Status:%20Accepted",
                        "name": "Status: Accepted",
                        "color": "00b33c",
                        "default": false,
                        "description": "Ready to integrate (reviewed, tested)"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits",
                "review_comments_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments",
                "review_comment_url": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments",
                "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/680f858f2cebcc12ad524c522ee14b838c0ab882",
                "head": {
                    "label": "don-brady:raidz-expansion",
                    "ref": "raidz-expansion",
                    "sha": "680f858f2cebcc12ad524c522ee14b838c0ab882",
                    "user": {
                        "login": "don-brady",
                        "id": 12415697,
                        "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                        "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/don-brady",
                        "html_url": "https://github.com/don-brady",
                        "followers_url": "https://api.github.com/users/don-brady/followers",
                        "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                        "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                        "organizations_url": "https://api.github.com/users/don-brady/orgs",
                        "repos_url": "https://api.github.com/users/don-brady/repos",
                        "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/don-brady/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 425096697,
                        "node_id": "R_kgDOGVZ1-Q",
                        "name": "openzfs",
                        "full_name": "don-brady/openzfs",
                        "private": false,
                        "owner": {
                            "login": "don-brady",
                            "id": 12415697,
                            "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/don-brady",
                            "html_url": "https://github.com/don-brady",
                            "followers_url": "https://api.github.com/users/don-brady/followers",
                            "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                            "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                            "organizations_url": "https://api.github.com/users/don-brady/orgs",
                            "repos_url": "https://api.github.com/users/don-brady/repos",
                            "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/don-brady/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/don-brady/openzfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": true,
                        "url": "https://api.github.com/repos/don-brady/openzfs",
                        "forks_url": "https://api.github.com/repos/don-brady/openzfs/forks",
                        "keys_url": "https://api.github.com/repos/don-brady/openzfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/don-brady/openzfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/don-brady/openzfs/teams",
                        "hooks_url": "https://api.github.com/repos/don-brady/openzfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/don-brady/openzfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/don-brady/openzfs/events",
                        "assignees_url": "https://api.github.com/repos/don-brady/openzfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/don-brady/openzfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/don-brady/openzfs/tags",
                        "blobs_url": "https://api.github.com/repos/don-brady/openzfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/don-brady/openzfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/don-brady/openzfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/don-brady/openzfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/don-brady/openzfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/don-brady/openzfs/languages",
                        "stargazers_url": "https://api.github.com/repos/don-brady/openzfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/don-brady/openzfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/don-brady/openzfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/don-brady/openzfs/subscription",
                        "commits_url": "https://api.github.com/repos/don-brady/openzfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/don-brady/openzfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/don-brady/openzfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/don-brady/openzfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/don-brady/openzfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/don-brady/openzfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/don-brady/openzfs/merges",
                        "archive_url": "https://api.github.com/repos/don-brady/openzfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/don-brady/openzfs/downloads",
                        "issues_url": "https://api.github.com/repos/don-brady/openzfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/don-brady/openzfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/don-brady/openzfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/don-brady/openzfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/don-brady/openzfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/don-brady/openzfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/don-brady/openzfs/deployments",
                        "created_at": "2021-11-05T22:10:31Z",
                        "updated_at": "2023-04-19T17:10:15Z",
                        "pushed_at": "2023-10-27T04:31:55Z",
                        "git_url": "git://github.com/don-brady/openzfs.git",
                        "ssh_url": "git@github.com:don-brady/openzfs.git",
                        "clone_url": "https://github.com/don-brady/openzfs.git",
                        "svn_url": "https://github.com/don-brady/openzfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 120216,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "C",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 5,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 5,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "openzfs:master",
                    "ref": "master",
                    "sha": "9facf2d1ad0c4857de1d47a2a14e882a3fb78b89",
                    "user": {
                        "login": "openzfs",
                        "id": 4510897,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/openzfs",
                        "html_url": "https://github.com/openzfs",
                        "followers_url": "https://api.github.com/users/openzfs/followers",
                        "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                        "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                        "organizations_url": "https://api.github.com/users/openzfs/orgs",
                        "repos_url": "https://api.github.com/users/openzfs/repos",
                        "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/openzfs/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 437011,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0MzcwMTE=",
                        "name": "zfs",
                        "full_name": "openzfs/zfs",
                        "private": false,
                        "owner": {
                            "login": "openzfs",
                            "id": 4510897,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/openzfs",
                            "html_url": "https://github.com/openzfs",
                            "followers_url": "https://api.github.com/users/openzfs/followers",
                            "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                            "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                            "organizations_url": "https://api.github.com/users/openzfs/orgs",
                            "repos_url": "https://api.github.com/users/openzfs/repos",
                            "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/openzfs/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/openzfs/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": false,
                        "url": "https://api.github.com/repos/openzfs/zfs",
                        "forks_url": "https://api.github.com/repos/openzfs/zfs/forks",
                        "keys_url": "https://api.github.com/repos/openzfs/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/openzfs/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/openzfs/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/openzfs/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/openzfs/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/openzfs/zfs/events",
                        "assignees_url": "https://api.github.com/repos/openzfs/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/openzfs/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/openzfs/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/openzfs/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/openzfs/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/openzfs/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/openzfs/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/openzfs/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/openzfs/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/openzfs/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/openzfs/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/openzfs/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/openzfs/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/openzfs/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/openzfs/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/openzfs/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/openzfs/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/openzfs/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/openzfs/zfs/merges",
                        "archive_url": "https://api.github.com/repos/openzfs/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/openzfs/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/openzfs/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/openzfs/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/openzfs/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/openzfs/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/openzfs/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/openzfs/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/openzfs/zfs/deployments",
                        "created_at": "2009-12-14T20:20:34Z",
                        "updated_at": "2023-10-26T23:39:14Z",
                        "pushed_at": "2023-10-27T04:31:58Z",
                        "git_url": "git://github.com/openzfs/zfs.git",
                        "ssh_url": "git@github.com:openzfs/zfs.git",
                        "clone_url": "https://github.com/openzfs/zfs.git",
                        "svn_url": "https://github.com/openzfs/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 124672,
                        "stargazers_count": 9636,
                        "watchers_count": 9636,
                        "language": "C",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": true,
                        "forks_count": 1668,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1194,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": true,
                        "topics": [
                            "file-system",
                            "openzfs",
                            "system-software"
                        ],
                        "visibility": "public",
                        "forks": 1668,
                        "open_issues": 1194,
                        "watchers": 9636,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/openzfs/zfs/statuses/680f858f2cebcc12ad524c522ee14b838c0ab882"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T04:32:44Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32888002521",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 12415697,
            "login": "don-brady",
            "display_login": "don-brady",
            "gravatar_id": "",
            "url": "https://api.github.com/users/don-brady",
            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1700982074,
                "node_id": "PRR_kwDOAAarE85lYu06",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "submitted_at": "2023-10-27T04:32:45Z",
                "state": "commented",
                "html_url": "https://github.com/openzfs/zfs/pull/15022#pullrequestreview-1700982074",
                "pull_request_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022#pullrequestreview-1700982074"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "id": 1413536769,
                "node_id": "PR_kwDOAAarE85UQNwB",
                "html_url": "https://github.com/openzfs/zfs/pull/15022",
                "diff_url": "https://github.com/openzfs/zfs/pull/15022.diff",
                "patch_url": "https://github.com/openzfs/zfs/pull/15022.patch",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15022",
                "number": 15022,
                "state": "open",
                "locked": false,
                "title": "raidz expansion feature",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "### Motivation and Context\r\nThis feature allows disks to be added one at a time to a RAID-Z group, expanding its capacity incrementally. This feature is especially useful for small pools (typically with only one RAID-Z group), where there isn't sufficient hardware to add capacity by adding a whole new RAID-Z group (typically doubling the number of disks).\r\n\r\nFor additional context as well as a design overview, see Matt Ahrens' talk at the [2021 FreeBSD Developer Summit](https://wiki.freebsd.org/DevSummit/202106) ([video](https://youtu.be/3SUKJye54aI?t=6166)) ([slides](https://docs.google.com/presentation/d/1FeQgEwChrtNQBHfWSNsPK3Y53O5BnPh3Cz5nRa5GAQY/edit#slide=id.p)), and a [news article from Ars Technica](https://arstechnica.com/gadgets/2021/06/raidz-expansion-code-lands-in-openzfs-master/).\r\n\r\n### Description\r\n#### Initiating expansion\r\nA new device (disk) can be attached to an existing RAIDZ vdev, by running `zpool attach POOL raidzP-N NEW_DEVICE`, e.g. `zpool attach tank raidz2-0 sda`. The new device will become part of the RAIDZ group. A _raidz expansion_ will\r\nbe initiated, and the new device will contribute additional space to the RAIDZ group once the expansion completes.\r\n\r\nThe `feature@raidz_expansion` on-disk feature flag must be `enabled` to initiate an expansion, and it remains `active` for the life of the pool. In other words, pools with expanded RAIDZ vdevs can not be imported by older releases of the ZFS software.\r\n\r\n#### During expansion\r\nThe expansion entails reading all allocated space from existing disks in the RAIDZ group, and rewriting it to the new disks in the RAIDZ group (including the newly added device).\r\n\r\nThe expansion progress can be monitored with `zpool status`.\r\n\r\nData redundancy is maintained during (and after) the expansion. If a disk fails while the expansion is in progress, the expansion pauses until the health of the RAIDZ vdev is restored (e.g. by replacing the failed disk and waiting\r\nfor reconstruction to complete).\r\n\r\nThe pool remains accessible during expansion. Following a reboot or export/import, the expansion resumes where it left off.\r\n\r\n#### After expansion\r\nWhen the expansion completes, the additional space is available for use, and is reflected in the `available` zfs property (as seen in `zfs list`, `df`, etc).\r\n\r\nExpansion does not change the number of failures that can be tolerated without data loss (e.g. a RAIDZ2 is still a RAIDZ2 even after expansion).\r\n\r\nA RAIDZ vdev can be expanded multiple times.\r\n\r\nAfter the expansion completes, old blocks remain with their old data-to-parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distributed among the larger set of disks. New blocks will be written with the new data-to-parity\r\nratio (e.g. a 5-wide RAIDZ2 which has been expanded once to 6-wide, has 4 data to 2 parity). However, the RAIDZ vdev's \"assumed parity ratio\" does not change, so slightly less space than is expected may be reported for newly-written blocks, according to `zfs list`, `df`, `ls -s`, and similar tools.\r\n\r\n#### Manpage changes\r\nzpool-attach.8:\r\n```\r\nNAME\r\n     zpool-attach \u2014 attach new device to existing ZFS vdev\r\n\r\nSYNOPSIS\r\n     zpool attach [-fsw] [-o property=value] pool device new_device\r\n\r\nDESCRIPTION\r\n     Attaches new_device to the existing device.  The behavior differs depend\u2010\r\n     ing on if the existing device is a RAIDZ device, or a mirror/plain\r\n     device.\r\n\r\n     If the existing device is a mirror or plain device ...\r\n\r\n     If the existing device is a RAIDZ device (e.g. specified as \"raidz2-0\"),\r\n     the new device will become part of that RAIDZ group.  A \"raidz expansion\"\r\n     will be initiated, and the new device will contribute additional space to\r\n     the RAIDZ group once the expansion completes.  The expansion entails\r\n     reading all allocated space from existing disks in the RAIDZ group, and\r\n     rewriting it to the new disks in the RAIDZ group (including the newly\r\n     added device).  Its progress can be monitored with zpool status.\r\n\r\n     Data redundancy is maintained during and after the expansion.  If a disk\r\n     fails while the expansion is in progress, the expansion pauses until the\r\n     health of the RAIDZ vdev is restored (e.g. by replacing the failed disk\r\n     and waiting for reconstruction to complete).  Expansion does not change\r\n     the number of failures that can be tolerated without data loss (e.g. a\r\n     RAIDZ2 is still a RAIDZ2 even after expansion).  A RAIDZ vdev can be\r\n     expanded multiple times.\r\n\r\n     After the expansion completes, old blocks remain with their old data-to-\r\n     parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distrib\u2010\r\n     uted among the larger set of disks.  New blocks will be written with the\r\n     new data-to-parity ratio (e.g. a 5-wide RAIDZ2 which has been expanded\r\n     once to 6-wide, has 4 data to 2 parity).  However, the RAIDZ vdev's\r\n     \"assumed parity ratio\" does not change, so slightly less space than is\r\n     expected may be reported for newly-written blocks, according to zfs list,\r\n     df, ls -s, and similar tools.\r\n```\r\n#### Status\r\nMatt Ahrens' original pull request (#12225) has been rebased here to current master branch and updated to incorporate recent code cleanups in the OpenZFS codebase. This feature is believed to be complete. However, like all PR's, it is subject to change as part of the code review process. Since this PR includes on-disk changes, it shouldn't be used on production systems before it is integrated to the OpenZFS codebase. Tasks that still need to be done before integration:\r\n- [x] Additional code cleanup in `ztest` code\r\n- [x] `zloop` changes to drive coverage of this feature\r\n- [ ] Address test failures in `ztest` runs\r\n- [x] Document the high-level design in a \"big theory statement\" comment\r\n- [x] Remove verbose logging\r\n- [x] Detection of MBR partitions using reserved boot area (FreeBSD BTX boot loader)\r\n- [ ] Address any performance concerns\r\n\r\n### Acknowledgments\r\nThank you to the [FreeBSD Foundation](https://freebsdfoundation.org/) for commissioning this work in 2017 and continuing to sponsor it well past the original time estimates!\r\nThank you to [iXsystems](https://www.ixsystems.com/) for sponsoring the final push to land this feature into OpenZFS.\r\n\r\nThanks also to contributors @FedorUporovVstack, @stuartmaybee, @thorsteneb, and @Fmstrat for portions\r\nof the implementation.\r\n\r\nSponsored-by: The FreeBSD Foundation\r\nSponsored-by: iXsystems, Inc.\r\nSponsored-by: vStack\r\nContributions-by: Stuart Maybee [stuart.maybee@comcast.net](mailto:stuart.maybee@comcast.net)\r\nContributions-by: Fedor Uporov [fuporov.vstack@gmail.com](mailto:fuporov.vstack@gmail.com)\r\nContributions-by: Thorsten Behrens [tbehrens@outlook.com](mailto:tbehrens@outlook.com)\r\nContributions-by: Fmstrat [nospam@nowsci.com](mailto:nospam@nowsci.com)\r\nContributions-by: Don Brady <dev.fs.zfs@gmail.com>\r\n\r\n### How Has This Been Tested?\r\nTests added to the ZFS Test Suite (`functional/raidz`) and `ztest`, in addition to manual testing.\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [x] New feature (non-breaking change which adds functionality)\r\n- [ ] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n- [x] I have updated the documentation accordingly.\r\n- [x] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [x] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [ ] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n\r\n### Pull Request Comments\r\nPlease limit comments here to code review/feedback and testing questions/results.\r\n\r\nFor generic discussions about RAID-Z, or discussions on future enhancements to RAIDZ expansion, please use [RAIDZ Expansion feature discussions](https://github.com/openzfs/zfs/discussions/15232).",
                "created_at": "2023-06-29T15:15:15Z",
                "updated_at": "2023-10-27T04:32:45Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "d997f55586843c7466f6c98634170b93c03adb9c",
                "assignee": {
                    "login": "mmaybee",
                    "id": 44241648,
                    "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/mmaybee",
                    "html_url": "https://github.com/mmaybee",
                    "followers_url": "https://api.github.com/users/mmaybee/followers",
                    "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                    "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                    "repos_url": "https://api.github.com/users/mmaybee/repos",
                    "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "mmaybee",
                        "id": 44241648,
                        "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mmaybee",
                        "html_url": "https://github.com/mmaybee",
                        "followers_url": "https://api.github.com/users/mmaybee/followers",
                        "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                        "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                        "repos_url": "https://api.github.com/users/mmaybee/repos",
                        "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 40358,
                        "node_id": "MDU6TGFiZWw0MDM1OA==",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Feature",
                        "name": "Type: Feature",
                        "color": "02d7e1",
                        "default": false,
                        "description": "Feature request or new feature"
                    },
                    {
                        "id": 1007099007,
                        "node_id": "MDU6TGFiZWwxMDA3MDk5MDA3",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Status:%20Accepted",
                        "name": "Status: Accepted",
                        "color": "00b33c",
                        "default": false,
                        "description": "Ready to integrate (reviewed, tested)"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits",
                "review_comments_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments",
                "review_comment_url": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments",
                "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/680f858f2cebcc12ad524c522ee14b838c0ab882",
                "head": {
                    "label": "don-brady:raidz-expansion",
                    "ref": "raidz-expansion",
                    "sha": "680f858f2cebcc12ad524c522ee14b838c0ab882",
                    "user": {
                        "login": "don-brady",
                        "id": 12415697,
                        "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                        "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/don-brady",
                        "html_url": "https://github.com/don-brady",
                        "followers_url": "https://api.github.com/users/don-brady/followers",
                        "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                        "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                        "organizations_url": "https://api.github.com/users/don-brady/orgs",
                        "repos_url": "https://api.github.com/users/don-brady/repos",
                        "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/don-brady/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 425096697,
                        "node_id": "R_kgDOGVZ1-Q",
                        "name": "openzfs",
                        "full_name": "don-brady/openzfs",
                        "private": false,
                        "owner": {
                            "login": "don-brady",
                            "id": 12415697,
                            "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/don-brady",
                            "html_url": "https://github.com/don-brady",
                            "followers_url": "https://api.github.com/users/don-brady/followers",
                            "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                            "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                            "organizations_url": "https://api.github.com/users/don-brady/orgs",
                            "repos_url": "https://api.github.com/users/don-brady/repos",
                            "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/don-brady/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/don-brady/openzfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": true,
                        "url": "https://api.github.com/repos/don-brady/openzfs",
                        "forks_url": "https://api.github.com/repos/don-brady/openzfs/forks",
                        "keys_url": "https://api.github.com/repos/don-brady/openzfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/don-brady/openzfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/don-brady/openzfs/teams",
                        "hooks_url": "https://api.github.com/repos/don-brady/openzfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/don-brady/openzfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/don-brady/openzfs/events",
                        "assignees_url": "https://api.github.com/repos/don-brady/openzfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/don-brady/openzfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/don-brady/openzfs/tags",
                        "blobs_url": "https://api.github.com/repos/don-brady/openzfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/don-brady/openzfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/don-brady/openzfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/don-brady/openzfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/don-brady/openzfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/don-brady/openzfs/languages",
                        "stargazers_url": "https://api.github.com/repos/don-brady/openzfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/don-brady/openzfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/don-brady/openzfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/don-brady/openzfs/subscription",
                        "commits_url": "https://api.github.com/repos/don-brady/openzfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/don-brady/openzfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/don-brady/openzfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/don-brady/openzfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/don-brady/openzfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/don-brady/openzfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/don-brady/openzfs/merges",
                        "archive_url": "https://api.github.com/repos/don-brady/openzfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/don-brady/openzfs/downloads",
                        "issues_url": "https://api.github.com/repos/don-brady/openzfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/don-brady/openzfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/don-brady/openzfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/don-brady/openzfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/don-brady/openzfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/don-brady/openzfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/don-brady/openzfs/deployments",
                        "created_at": "2021-11-05T22:10:31Z",
                        "updated_at": "2023-04-19T17:10:15Z",
                        "pushed_at": "2023-10-27T04:31:55Z",
                        "git_url": "git://github.com/don-brady/openzfs.git",
                        "ssh_url": "git@github.com:don-brady/openzfs.git",
                        "clone_url": "https://github.com/don-brady/openzfs.git",
                        "svn_url": "https://github.com/don-brady/openzfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 120216,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "C",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 5,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 5,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "openzfs:master",
                    "ref": "master",
                    "sha": "9facf2d1ad0c4857de1d47a2a14e882a3fb78b89",
                    "user": {
                        "login": "openzfs",
                        "id": 4510897,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/openzfs",
                        "html_url": "https://github.com/openzfs",
                        "followers_url": "https://api.github.com/users/openzfs/followers",
                        "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                        "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                        "organizations_url": "https://api.github.com/users/openzfs/orgs",
                        "repos_url": "https://api.github.com/users/openzfs/repos",
                        "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/openzfs/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 437011,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0MzcwMTE=",
                        "name": "zfs",
                        "full_name": "openzfs/zfs",
                        "private": false,
                        "owner": {
                            "login": "openzfs",
                            "id": 4510897,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/openzfs",
                            "html_url": "https://github.com/openzfs",
                            "followers_url": "https://api.github.com/users/openzfs/followers",
                            "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                            "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                            "organizations_url": "https://api.github.com/users/openzfs/orgs",
                            "repos_url": "https://api.github.com/users/openzfs/repos",
                            "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/openzfs/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/openzfs/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": false,
                        "url": "https://api.github.com/repos/openzfs/zfs",
                        "forks_url": "https://api.github.com/repos/openzfs/zfs/forks",
                        "keys_url": "https://api.github.com/repos/openzfs/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/openzfs/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/openzfs/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/openzfs/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/openzfs/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/openzfs/zfs/events",
                        "assignees_url": "https://api.github.com/repos/openzfs/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/openzfs/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/openzfs/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/openzfs/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/openzfs/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/openzfs/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/openzfs/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/openzfs/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/openzfs/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/openzfs/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/openzfs/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/openzfs/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/openzfs/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/openzfs/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/openzfs/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/openzfs/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/openzfs/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/openzfs/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/openzfs/zfs/merges",
                        "archive_url": "https://api.github.com/repos/openzfs/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/openzfs/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/openzfs/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/openzfs/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/openzfs/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/openzfs/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/openzfs/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/openzfs/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/openzfs/zfs/deployments",
                        "created_at": "2009-12-14T20:20:34Z",
                        "updated_at": "2023-10-26T23:39:14Z",
                        "pushed_at": "2023-10-27T04:31:58Z",
                        "git_url": "git://github.com/openzfs/zfs.git",
                        "ssh_url": "git@github.com:openzfs/zfs.git",
                        "clone_url": "https://github.com/openzfs/zfs.git",
                        "svn_url": "https://github.com/openzfs/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 124672,
                        "stargazers_count": 9636,
                        "watchers_count": 9636,
                        "language": "C",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": true,
                        "forks_count": 1668,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1194,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": true,
                        "topics": [
                            "file-system",
                            "openzfs",
                            "system-software"
                        ],
                        "visibility": "public",
                        "forks": 1668,
                        "open_issues": 1194,
                        "watchers": 9636,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/openzfs/zfs/statuses/680f858f2cebcc12ad524c522ee14b838c0ab882"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T04:32:45Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32888000725",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 12415697,
            "login": "don-brady",
            "display_login": "don-brady",
            "gravatar_id": "",
            "url": "https://api.github.com/users/don-brady",
            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1374060730",
                "pull_request_review_id": 1700981984,
                "id": 1374060730,
                "node_id": "PRRC_kwDOAAarE85R5oC6",
                "diff_hunk": "@@ -8195,6 +8207,102 @@ print_removal_status(zpool_handle_t *zhp, pool_removal_stat_t *prs)\n \t}\n }\n \n+/*\n+ * Print out detailed raidz expansion status.\n+ */\n+static void\n+print_raidz_expand_status(zpool_handle_t *zhp, pool_raidz_expand_stat_t *pres)\n+{\n+\tchar copied_buf[7];\n+\n+\tif (pres == NULL || pres->pres_state == DSS_NONE)\n+\t\treturn;\n+\n+\t/*\n+\t * Determine name of vdev.\n+\t */\n+\tnvlist_t *config = zpool_get_config(zhp, NULL);\n+\tnvlist_t *nvroot = fnvlist_lookup_nvlist(config,\n+\t    ZPOOL_CONFIG_VDEV_TREE);\n+\tnvlist_t **child;\n+\tuint_t children;\n+\tverify(nvlist_lookup_nvlist_array(nvroot, ZPOOL_CONFIG_CHILDREN,\n+\t    &child, &children) == 0);\n+\tassert(pres->pres_expanding_vdev < children);\n+\n+\tprintf_color(ANSI_BOLD, gettext(\"raidz expand: \"));\n+\n+\ttime_t start = pres->pres_start_time;\n+\ttime_t end = pres->pres_end_time;\n+\tchar *vname =\n+\t    zpool_vdev_name(g_zfs, zhp, child[pres->pres_expanding_vdev], 0);\n+\tzfs_nicenum(pres->pres_reflowed, copied_buf, sizeof (copied_buf));\n+\n+\t/*\n+\t * Expansion is finished or canceled.\n+\t */\n+\tif (pres->pres_state == DSS_FINISHED) {\n+\t\tuint64_t minutes_taken = (end - start) / 60;\n+\n+\t\t(void) printf(gettext(\"Expansion of %s-%u copied %s \"\n+\t\t    \"in %lluh%um, completed on %s\"),\n+\t\t    vname,\n+\t\t    (int)pres->pres_expanding_vdev,\n+\t\t    copied_buf,\n+\t\t    (u_longlong_t)(minutes_taken / 60),\n+\t\t    (uint_t)(minutes_taken % 60),\n+\t\t    ctime((time_t *)&end));\n+\t} else {\n+\t\tchar examined_buf[7], total_buf[7], rate_buf[7];\n+\t\tuint64_t copied, total, elapsed, secs_left;\n+\t\tdouble fraction_done;\n+\t\tuint_t rate;\n+\n+\t\tassert(pres->pres_state == DSS_SCANNING);\n+\n+\t\t/*\n+\t\t * Expansion is in progress.\n+\t\t */\n+\t\t(void) printf(gettext(\n+\t\t    \"Expansion of %s-%u in progress since %s\"),\n+\t\t    vname, (int)pres->pres_expanding_vdev, ctime(&start));\n+\n+\t\tcopied = pres->pres_reflowed > 0 ? pres->pres_reflowed : 1;\n+\t\ttotal = pres->pres_to_reflow;\n+\t\tfraction_done = (double)copied / total;\n+\n+\t\t/* elapsed time for this pass */\n+\t\telapsed = time(NULL) - pres->pres_start_time;\n+\t\telapsed = elapsed > 0 ? elapsed : 1;\n+\t\trate = copied / elapsed;\n+\t\trate = rate > 0 ? rate : 1;\n+\t\tsecs_left = (total - copied) / rate;\n+\n+\t\tzfs_nicenum(copied, examined_buf, sizeof (examined_buf));\n+\t\tzfs_nicenum(total, total_buf, sizeof (total_buf));\n+\t\tzfs_nicenum(rate, rate_buf, sizeof (rate_buf));\n+\n+\t\t/*\n+\t\t * do not print estimated time if hours_left is more than\n+\t\t * 30 days\n+\t\t */\n+\t\t(void) printf(gettext(\"\\t%s copied out of %s at %s/s, \"\n+\t\t    \"%.2f%% done\"),\n+\t\t    examined_buf, total_buf, rate_buf, 100 * fraction_done);\n+\t\tif (pres->pres_waiting_for_resilver) {\n+\t\t\t(void) printf(gettext(\", paused due to io errors, \"\n+\t\t\t    \"waiting for resilver or clear\\n\"));",
                "path": "cmd/zpool/zpool_main.c",
                "commit_id": "680f858f2cebcc12ad524c522ee14b838c0ab882",
                "original_commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "fixed",
                "created_at": "2023-10-27T04:32:36Z",
                "updated_at": "2023-10-27T04:32:36Z",
                "html_url": "https://github.com/openzfs/zfs/pull/15022#discussion_r1374060730",
                "pull_request_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1374060730"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022#discussion_r1374060730"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1374060730/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": null,
                "original_start_line": null,
                "start_side": null,
                "line": null,
                "original_line": 8294,
                "side": "RIGHT",
                "in_reply_to_id": 1373916445,
                "original_position": 137,
                "position": null,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "id": 1413536769,
                "node_id": "PR_kwDOAAarE85UQNwB",
                "html_url": "https://github.com/openzfs/zfs/pull/15022",
                "diff_url": "https://github.com/openzfs/zfs/pull/15022.diff",
                "patch_url": "https://github.com/openzfs/zfs/pull/15022.patch",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15022",
                "number": 15022,
                "state": "open",
                "locked": false,
                "title": "raidz expansion feature",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "### Motivation and Context\r\nThis feature allows disks to be added one at a time to a RAID-Z group, expanding its capacity incrementally. This feature is especially useful for small pools (typically with only one RAID-Z group), where there isn't sufficient hardware to add capacity by adding a whole new RAID-Z group (typically doubling the number of disks).\r\n\r\nFor additional context as well as a design overview, see Matt Ahrens' talk at the [2021 FreeBSD Developer Summit](https://wiki.freebsd.org/DevSummit/202106) ([video](https://youtu.be/3SUKJye54aI?t=6166)) ([slides](https://docs.google.com/presentation/d/1FeQgEwChrtNQBHfWSNsPK3Y53O5BnPh3Cz5nRa5GAQY/edit#slide=id.p)), and a [news article from Ars Technica](https://arstechnica.com/gadgets/2021/06/raidz-expansion-code-lands-in-openzfs-master/).\r\n\r\n### Description\r\n#### Initiating expansion\r\nA new device (disk) can be attached to an existing RAIDZ vdev, by running `zpool attach POOL raidzP-N NEW_DEVICE`, e.g. `zpool attach tank raidz2-0 sda`. The new device will become part of the RAIDZ group. A _raidz expansion_ will\r\nbe initiated, and the new device will contribute additional space to the RAIDZ group once the expansion completes.\r\n\r\nThe `feature@raidz_expansion` on-disk feature flag must be `enabled` to initiate an expansion, and it remains `active` for the life of the pool. In other words, pools with expanded RAIDZ vdevs can not be imported by older releases of the ZFS software.\r\n\r\n#### During expansion\r\nThe expansion entails reading all allocated space from existing disks in the RAIDZ group, and rewriting it to the new disks in the RAIDZ group (including the newly added device).\r\n\r\nThe expansion progress can be monitored with `zpool status`.\r\n\r\nData redundancy is maintained during (and after) the expansion. If a disk fails while the expansion is in progress, the expansion pauses until the health of the RAIDZ vdev is restored (e.g. by replacing the failed disk and waiting\r\nfor reconstruction to complete).\r\n\r\nThe pool remains accessible during expansion. Following a reboot or export/import, the expansion resumes where it left off.\r\n\r\n#### After expansion\r\nWhen the expansion completes, the additional space is available for use, and is reflected in the `available` zfs property (as seen in `zfs list`, `df`, etc).\r\n\r\nExpansion does not change the number of failures that can be tolerated without data loss (e.g. a RAIDZ2 is still a RAIDZ2 even after expansion).\r\n\r\nA RAIDZ vdev can be expanded multiple times.\r\n\r\nAfter the expansion completes, old blocks remain with their old data-to-parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distributed among the larger set of disks. New blocks will be written with the new data-to-parity\r\nratio (e.g. a 5-wide RAIDZ2 which has been expanded once to 6-wide, has 4 data to 2 parity). However, the RAIDZ vdev's \"assumed parity ratio\" does not change, so slightly less space than is expected may be reported for newly-written blocks, according to `zfs list`, `df`, `ls -s`, and similar tools.\r\n\r\n#### Manpage changes\r\nzpool-attach.8:\r\n```\r\nNAME\r\n     zpool-attach \u2014 attach new device to existing ZFS vdev\r\n\r\nSYNOPSIS\r\n     zpool attach [-fsw] [-o property=value] pool device new_device\r\n\r\nDESCRIPTION\r\n     Attaches new_device to the existing device.  The behavior differs depend\u2010\r\n     ing on if the existing device is a RAIDZ device, or a mirror/plain\r\n     device.\r\n\r\n     If the existing device is a mirror or plain device ...\r\n\r\n     If the existing device is a RAIDZ device (e.g. specified as \"raidz2-0\"),\r\n     the new device will become part of that RAIDZ group.  A \"raidz expansion\"\r\n     will be initiated, and the new device will contribute additional space to\r\n     the RAIDZ group once the expansion completes.  The expansion entails\r\n     reading all allocated space from existing disks in the RAIDZ group, and\r\n     rewriting it to the new disks in the RAIDZ group (including the newly\r\n     added device).  Its progress can be monitored with zpool status.\r\n\r\n     Data redundancy is maintained during and after the expansion.  If a disk\r\n     fails while the expansion is in progress, the expansion pauses until the\r\n     health of the RAIDZ vdev is restored (e.g. by replacing the failed disk\r\n     and waiting for reconstruction to complete).  Expansion does not change\r\n     the number of failures that can be tolerated without data loss (e.g. a\r\n     RAIDZ2 is still a RAIDZ2 even after expansion).  A RAIDZ vdev can be\r\n     expanded multiple times.\r\n\r\n     After the expansion completes, old blocks remain with their old data-to-\r\n     parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distrib\u2010\r\n     uted among the larger set of disks.  New blocks will be written with the\r\n     new data-to-parity ratio (e.g. a 5-wide RAIDZ2 which has been expanded\r\n     once to 6-wide, has 4 data to 2 parity).  However, the RAIDZ vdev's\r\n     \"assumed parity ratio\" does not change, so slightly less space than is\r\n     expected may be reported for newly-written blocks, according to zfs list,\r\n     df, ls -s, and similar tools.\r\n```\r\n#### Status\r\nMatt Ahrens' original pull request (#12225) has been rebased here to current master branch and updated to incorporate recent code cleanups in the OpenZFS codebase. This feature is believed to be complete. However, like all PR's, it is subject to change as part of the code review process. Since this PR includes on-disk changes, it shouldn't be used on production systems before it is integrated to the OpenZFS codebase. Tasks that still need to be done before integration:\r\n- [x] Additional code cleanup in `ztest` code\r\n- [x] `zloop` changes to drive coverage of this feature\r\n- [ ] Address test failures in `ztest` runs\r\n- [x] Document the high-level design in a \"big theory statement\" comment\r\n- [x] Remove verbose logging\r\n- [x] Detection of MBR partitions using reserved boot area (FreeBSD BTX boot loader)\r\n- [ ] Address any performance concerns\r\n\r\n### Acknowledgments\r\nThank you to the [FreeBSD Foundation](https://freebsdfoundation.org/) for commissioning this work in 2017 and continuing to sponsor it well past the original time estimates!\r\nThank you to [iXsystems](https://www.ixsystems.com/) for sponsoring the final push to land this feature into OpenZFS.\r\n\r\nThanks also to contributors @FedorUporovVstack, @stuartmaybee, @thorsteneb, and @Fmstrat for portions\r\nof the implementation.\r\n\r\nSponsored-by: The FreeBSD Foundation\r\nSponsored-by: iXsystems, Inc.\r\nSponsored-by: vStack\r\nContributions-by: Stuart Maybee [stuart.maybee@comcast.net](mailto:stuart.maybee@comcast.net)\r\nContributions-by: Fedor Uporov [fuporov.vstack@gmail.com](mailto:fuporov.vstack@gmail.com)\r\nContributions-by: Thorsten Behrens [tbehrens@outlook.com](mailto:tbehrens@outlook.com)\r\nContributions-by: Fmstrat [nospam@nowsci.com](mailto:nospam@nowsci.com)\r\nContributions-by: Don Brady <dev.fs.zfs@gmail.com>\r\n\r\n### How Has This Been Tested?\r\nTests added to the ZFS Test Suite (`functional/raidz`) and `ztest`, in addition to manual testing.\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [x] New feature (non-breaking change which adds functionality)\r\n- [ ] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n- [x] I have updated the documentation accordingly.\r\n- [x] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [x] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [ ] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n\r\n### Pull Request Comments\r\nPlease limit comments here to code review/feedback and testing questions/results.\r\n\r\nFor generic discussions about RAID-Z, or discussions on future enhancements to RAIDZ expansion, please use [RAIDZ Expansion feature discussions](https://github.com/openzfs/zfs/discussions/15232).",
                "created_at": "2023-06-29T15:15:15Z",
                "updated_at": "2023-10-27T04:32:36Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "d997f55586843c7466f6c98634170b93c03adb9c",
                "assignee": {
                    "login": "mmaybee",
                    "id": 44241648,
                    "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/mmaybee",
                    "html_url": "https://github.com/mmaybee",
                    "followers_url": "https://api.github.com/users/mmaybee/followers",
                    "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                    "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                    "repos_url": "https://api.github.com/users/mmaybee/repos",
                    "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "mmaybee",
                        "id": 44241648,
                        "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mmaybee",
                        "html_url": "https://github.com/mmaybee",
                        "followers_url": "https://api.github.com/users/mmaybee/followers",
                        "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                        "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                        "repos_url": "https://api.github.com/users/mmaybee/repos",
                        "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 40358,
                        "node_id": "MDU6TGFiZWw0MDM1OA==",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Feature",
                        "name": "Type: Feature",
                        "color": "02d7e1",
                        "default": false,
                        "description": "Feature request or new feature"
                    },
                    {
                        "id": 1007099007,
                        "node_id": "MDU6TGFiZWwxMDA3MDk5MDA3",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Status:%20Accepted",
                        "name": "Status: Accepted",
                        "color": "00b33c",
                        "default": false,
                        "description": "Ready to integrate (reviewed, tested)"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits",
                "review_comments_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments",
                "review_comment_url": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments",
                "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/680f858f2cebcc12ad524c522ee14b838c0ab882",
                "head": {
                    "label": "don-brady:raidz-expansion",
                    "ref": "raidz-expansion",
                    "sha": "680f858f2cebcc12ad524c522ee14b838c0ab882",
                    "user": {
                        "login": "don-brady",
                        "id": 12415697,
                        "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                        "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/don-brady",
                        "html_url": "https://github.com/don-brady",
                        "followers_url": "https://api.github.com/users/don-brady/followers",
                        "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                        "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                        "organizations_url": "https://api.github.com/users/don-brady/orgs",
                        "repos_url": "https://api.github.com/users/don-brady/repos",
                        "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/don-brady/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 425096697,
                        "node_id": "R_kgDOGVZ1-Q",
                        "name": "openzfs",
                        "full_name": "don-brady/openzfs",
                        "private": false,
                        "owner": {
                            "login": "don-brady",
                            "id": 12415697,
                            "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/don-brady",
                            "html_url": "https://github.com/don-brady",
                            "followers_url": "https://api.github.com/users/don-brady/followers",
                            "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                            "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                            "organizations_url": "https://api.github.com/users/don-brady/orgs",
                            "repos_url": "https://api.github.com/users/don-brady/repos",
                            "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/don-brady/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/don-brady/openzfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": true,
                        "url": "https://api.github.com/repos/don-brady/openzfs",
                        "forks_url": "https://api.github.com/repos/don-brady/openzfs/forks",
                        "keys_url": "https://api.github.com/repos/don-brady/openzfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/don-brady/openzfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/don-brady/openzfs/teams",
                        "hooks_url": "https://api.github.com/repos/don-brady/openzfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/don-brady/openzfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/don-brady/openzfs/events",
                        "assignees_url": "https://api.github.com/repos/don-brady/openzfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/don-brady/openzfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/don-brady/openzfs/tags",
                        "blobs_url": "https://api.github.com/repos/don-brady/openzfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/don-brady/openzfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/don-brady/openzfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/don-brady/openzfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/don-brady/openzfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/don-brady/openzfs/languages",
                        "stargazers_url": "https://api.github.com/repos/don-brady/openzfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/don-brady/openzfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/don-brady/openzfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/don-brady/openzfs/subscription",
                        "commits_url": "https://api.github.com/repos/don-brady/openzfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/don-brady/openzfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/don-brady/openzfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/don-brady/openzfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/don-brady/openzfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/don-brady/openzfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/don-brady/openzfs/merges",
                        "archive_url": "https://api.github.com/repos/don-brady/openzfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/don-brady/openzfs/downloads",
                        "issues_url": "https://api.github.com/repos/don-brady/openzfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/don-brady/openzfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/don-brady/openzfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/don-brady/openzfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/don-brady/openzfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/don-brady/openzfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/don-brady/openzfs/deployments",
                        "created_at": "2021-11-05T22:10:31Z",
                        "updated_at": "2023-04-19T17:10:15Z",
                        "pushed_at": "2023-10-27T04:31:55Z",
                        "git_url": "git://github.com/don-brady/openzfs.git",
                        "ssh_url": "git@github.com:don-brady/openzfs.git",
                        "clone_url": "https://github.com/don-brady/openzfs.git",
                        "svn_url": "https://github.com/don-brady/openzfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 120216,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "C",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 5,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 5,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "openzfs:master",
                    "ref": "master",
                    "sha": "9facf2d1ad0c4857de1d47a2a14e882a3fb78b89",
                    "user": {
                        "login": "openzfs",
                        "id": 4510897,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/openzfs",
                        "html_url": "https://github.com/openzfs",
                        "followers_url": "https://api.github.com/users/openzfs/followers",
                        "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                        "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                        "organizations_url": "https://api.github.com/users/openzfs/orgs",
                        "repos_url": "https://api.github.com/users/openzfs/repos",
                        "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/openzfs/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 437011,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0MzcwMTE=",
                        "name": "zfs",
                        "full_name": "openzfs/zfs",
                        "private": false,
                        "owner": {
                            "login": "openzfs",
                            "id": 4510897,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/openzfs",
                            "html_url": "https://github.com/openzfs",
                            "followers_url": "https://api.github.com/users/openzfs/followers",
                            "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                            "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                            "organizations_url": "https://api.github.com/users/openzfs/orgs",
                            "repos_url": "https://api.github.com/users/openzfs/repos",
                            "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/openzfs/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/openzfs/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": false,
                        "url": "https://api.github.com/repos/openzfs/zfs",
                        "forks_url": "https://api.github.com/repos/openzfs/zfs/forks",
                        "keys_url": "https://api.github.com/repos/openzfs/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/openzfs/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/openzfs/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/openzfs/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/openzfs/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/openzfs/zfs/events",
                        "assignees_url": "https://api.github.com/repos/openzfs/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/openzfs/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/openzfs/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/openzfs/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/openzfs/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/openzfs/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/openzfs/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/openzfs/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/openzfs/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/openzfs/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/openzfs/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/openzfs/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/openzfs/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/openzfs/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/openzfs/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/openzfs/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/openzfs/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/openzfs/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/openzfs/zfs/merges",
                        "archive_url": "https://api.github.com/repos/openzfs/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/openzfs/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/openzfs/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/openzfs/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/openzfs/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/openzfs/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/openzfs/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/openzfs/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/openzfs/zfs/deployments",
                        "created_at": "2009-12-14T20:20:34Z",
                        "updated_at": "2023-10-26T23:39:14Z",
                        "pushed_at": "2023-10-27T04:31:58Z",
                        "git_url": "git://github.com/openzfs/zfs.git",
                        "ssh_url": "git@github.com:openzfs/zfs.git",
                        "clone_url": "https://github.com/openzfs/zfs.git",
                        "svn_url": "https://github.com/openzfs/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 124672,
                        "stargazers_count": 9636,
                        "watchers_count": 9636,
                        "language": "C",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": true,
                        "forks_count": 1668,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1194,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": true,
                        "topics": [
                            "file-system",
                            "openzfs",
                            "system-software"
                        ],
                        "visibility": "public",
                        "forks": 1668,
                        "open_issues": 1194,
                        "watchers": 9636,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/openzfs/zfs/statuses/680f858f2cebcc12ad524c522ee14b838c0ab882"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T04:32:36Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32888000699",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 12415697,
            "login": "don-brady",
            "display_login": "don-brady",
            "gravatar_id": "",
            "url": "https://api.github.com/users/don-brady",
            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1700981984,
                "node_id": "PRR_kwDOAAarE85lYuzg",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "submitted_at": "2023-10-27T04:32:36Z",
                "state": "commented",
                "html_url": "https://github.com/openzfs/zfs/pull/15022#pullrequestreview-1700981984",
                "pull_request_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022#pullrequestreview-1700981984"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "id": 1413536769,
                "node_id": "PR_kwDOAAarE85UQNwB",
                "html_url": "https://github.com/openzfs/zfs/pull/15022",
                "diff_url": "https://github.com/openzfs/zfs/pull/15022.diff",
                "patch_url": "https://github.com/openzfs/zfs/pull/15022.patch",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15022",
                "number": 15022,
                "state": "open",
                "locked": false,
                "title": "raidz expansion feature",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "### Motivation and Context\r\nThis feature allows disks to be added one at a time to a RAID-Z group, expanding its capacity incrementally. This feature is especially useful for small pools (typically with only one RAID-Z group), where there isn't sufficient hardware to add capacity by adding a whole new RAID-Z group (typically doubling the number of disks).\r\n\r\nFor additional context as well as a design overview, see Matt Ahrens' talk at the [2021 FreeBSD Developer Summit](https://wiki.freebsd.org/DevSummit/202106) ([video](https://youtu.be/3SUKJye54aI?t=6166)) ([slides](https://docs.google.com/presentation/d/1FeQgEwChrtNQBHfWSNsPK3Y53O5BnPh3Cz5nRa5GAQY/edit#slide=id.p)), and a [news article from Ars Technica](https://arstechnica.com/gadgets/2021/06/raidz-expansion-code-lands-in-openzfs-master/).\r\n\r\n### Description\r\n#### Initiating expansion\r\nA new device (disk) can be attached to an existing RAIDZ vdev, by running `zpool attach POOL raidzP-N NEW_DEVICE`, e.g. `zpool attach tank raidz2-0 sda`. The new device will become part of the RAIDZ group. A _raidz expansion_ will\r\nbe initiated, and the new device will contribute additional space to the RAIDZ group once the expansion completes.\r\n\r\nThe `feature@raidz_expansion` on-disk feature flag must be `enabled` to initiate an expansion, and it remains `active` for the life of the pool. In other words, pools with expanded RAIDZ vdevs can not be imported by older releases of the ZFS software.\r\n\r\n#### During expansion\r\nThe expansion entails reading all allocated space from existing disks in the RAIDZ group, and rewriting it to the new disks in the RAIDZ group (including the newly added device).\r\n\r\nThe expansion progress can be monitored with `zpool status`.\r\n\r\nData redundancy is maintained during (and after) the expansion. If a disk fails while the expansion is in progress, the expansion pauses until the health of the RAIDZ vdev is restored (e.g. by replacing the failed disk and waiting\r\nfor reconstruction to complete).\r\n\r\nThe pool remains accessible during expansion. Following a reboot or export/import, the expansion resumes where it left off.\r\n\r\n#### After expansion\r\nWhen the expansion completes, the additional space is available for use, and is reflected in the `available` zfs property (as seen in `zfs list`, `df`, etc).\r\n\r\nExpansion does not change the number of failures that can be tolerated without data loss (e.g. a RAIDZ2 is still a RAIDZ2 even after expansion).\r\n\r\nA RAIDZ vdev can be expanded multiple times.\r\n\r\nAfter the expansion completes, old blocks remain with their old data-to-parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distributed among the larger set of disks. New blocks will be written with the new data-to-parity\r\nratio (e.g. a 5-wide RAIDZ2 which has been expanded once to 6-wide, has 4 data to 2 parity). However, the RAIDZ vdev's \"assumed parity ratio\" does not change, so slightly less space than is expected may be reported for newly-written blocks, according to `zfs list`, `df`, `ls -s`, and similar tools.\r\n\r\n#### Manpage changes\r\nzpool-attach.8:\r\n```\r\nNAME\r\n     zpool-attach \u2014 attach new device to existing ZFS vdev\r\n\r\nSYNOPSIS\r\n     zpool attach [-fsw] [-o property=value] pool device new_device\r\n\r\nDESCRIPTION\r\n     Attaches new_device to the existing device.  The behavior differs depend\u2010\r\n     ing on if the existing device is a RAIDZ device, or a mirror/plain\r\n     device.\r\n\r\n     If the existing device is a mirror or plain device ...\r\n\r\n     If the existing device is a RAIDZ device (e.g. specified as \"raidz2-0\"),\r\n     the new device will become part of that RAIDZ group.  A \"raidz expansion\"\r\n     will be initiated, and the new device will contribute additional space to\r\n     the RAIDZ group once the expansion completes.  The expansion entails\r\n     reading all allocated space from existing disks in the RAIDZ group, and\r\n     rewriting it to the new disks in the RAIDZ group (including the newly\r\n     added device).  Its progress can be monitored with zpool status.\r\n\r\n     Data redundancy is maintained during and after the expansion.  If a disk\r\n     fails while the expansion is in progress, the expansion pauses until the\r\n     health of the RAIDZ vdev is restored (e.g. by replacing the failed disk\r\n     and waiting for reconstruction to complete).  Expansion does not change\r\n     the number of failures that can be tolerated without data loss (e.g. a\r\n     RAIDZ2 is still a RAIDZ2 even after expansion).  A RAIDZ vdev can be\r\n     expanded multiple times.\r\n\r\n     After the expansion completes, old blocks remain with their old data-to-\r\n     parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distrib\u2010\r\n     uted among the larger set of disks.  New blocks will be written with the\r\n     new data-to-parity ratio (e.g. a 5-wide RAIDZ2 which has been expanded\r\n     once to 6-wide, has 4 data to 2 parity).  However, the RAIDZ vdev's\r\n     \"assumed parity ratio\" does not change, so slightly less space than is\r\n     expected may be reported for newly-written blocks, according to zfs list,\r\n     df, ls -s, and similar tools.\r\n```\r\n#### Status\r\nMatt Ahrens' original pull request (#12225) has been rebased here to current master branch and updated to incorporate recent code cleanups in the OpenZFS codebase. This feature is believed to be complete. However, like all PR's, it is subject to change as part of the code review process. Since this PR includes on-disk changes, it shouldn't be used on production systems before it is integrated to the OpenZFS codebase. Tasks that still need to be done before integration:\r\n- [x] Additional code cleanup in `ztest` code\r\n- [x] `zloop` changes to drive coverage of this feature\r\n- [ ] Address test failures in `ztest` runs\r\n- [x] Document the high-level design in a \"big theory statement\" comment\r\n- [x] Remove verbose logging\r\n- [x] Detection of MBR partitions using reserved boot area (FreeBSD BTX boot loader)\r\n- [ ] Address any performance concerns\r\n\r\n### Acknowledgments\r\nThank you to the [FreeBSD Foundation](https://freebsdfoundation.org/) for commissioning this work in 2017 and continuing to sponsor it well past the original time estimates!\r\nThank you to [iXsystems](https://www.ixsystems.com/) for sponsoring the final push to land this feature into OpenZFS.\r\n\r\nThanks also to contributors @FedorUporovVstack, @stuartmaybee, @thorsteneb, and @Fmstrat for portions\r\nof the implementation.\r\n\r\nSponsored-by: The FreeBSD Foundation\r\nSponsored-by: iXsystems, Inc.\r\nSponsored-by: vStack\r\nContributions-by: Stuart Maybee [stuart.maybee@comcast.net](mailto:stuart.maybee@comcast.net)\r\nContributions-by: Fedor Uporov [fuporov.vstack@gmail.com](mailto:fuporov.vstack@gmail.com)\r\nContributions-by: Thorsten Behrens [tbehrens@outlook.com](mailto:tbehrens@outlook.com)\r\nContributions-by: Fmstrat [nospam@nowsci.com](mailto:nospam@nowsci.com)\r\nContributions-by: Don Brady <dev.fs.zfs@gmail.com>\r\n\r\n### How Has This Been Tested?\r\nTests added to the ZFS Test Suite (`functional/raidz`) and `ztest`, in addition to manual testing.\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [x] New feature (non-breaking change which adds functionality)\r\n- [ ] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n- [x] I have updated the documentation accordingly.\r\n- [x] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [x] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [ ] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n\r\n### Pull Request Comments\r\nPlease limit comments here to code review/feedback and testing questions/results.\r\n\r\nFor generic discussions about RAID-Z, or discussions on future enhancements to RAIDZ expansion, please use [RAIDZ Expansion feature discussions](https://github.com/openzfs/zfs/discussions/15232).",
                "created_at": "2023-06-29T15:15:15Z",
                "updated_at": "2023-10-27T04:32:36Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "d997f55586843c7466f6c98634170b93c03adb9c",
                "assignee": {
                    "login": "mmaybee",
                    "id": 44241648,
                    "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/mmaybee",
                    "html_url": "https://github.com/mmaybee",
                    "followers_url": "https://api.github.com/users/mmaybee/followers",
                    "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                    "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                    "repos_url": "https://api.github.com/users/mmaybee/repos",
                    "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "mmaybee",
                        "id": 44241648,
                        "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mmaybee",
                        "html_url": "https://github.com/mmaybee",
                        "followers_url": "https://api.github.com/users/mmaybee/followers",
                        "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                        "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                        "repos_url": "https://api.github.com/users/mmaybee/repos",
                        "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 40358,
                        "node_id": "MDU6TGFiZWw0MDM1OA==",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Feature",
                        "name": "Type: Feature",
                        "color": "02d7e1",
                        "default": false,
                        "description": "Feature request or new feature"
                    },
                    {
                        "id": 1007099007,
                        "node_id": "MDU6TGFiZWwxMDA3MDk5MDA3",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Status:%20Accepted",
                        "name": "Status: Accepted",
                        "color": "00b33c",
                        "default": false,
                        "description": "Ready to integrate (reviewed, tested)"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits",
                "review_comments_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments",
                "review_comment_url": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments",
                "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/680f858f2cebcc12ad524c522ee14b838c0ab882",
                "head": {
                    "label": "don-brady:raidz-expansion",
                    "ref": "raidz-expansion",
                    "sha": "680f858f2cebcc12ad524c522ee14b838c0ab882",
                    "user": {
                        "login": "don-brady",
                        "id": 12415697,
                        "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                        "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/don-brady",
                        "html_url": "https://github.com/don-brady",
                        "followers_url": "https://api.github.com/users/don-brady/followers",
                        "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                        "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                        "organizations_url": "https://api.github.com/users/don-brady/orgs",
                        "repos_url": "https://api.github.com/users/don-brady/repos",
                        "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/don-brady/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 425096697,
                        "node_id": "R_kgDOGVZ1-Q",
                        "name": "openzfs",
                        "full_name": "don-brady/openzfs",
                        "private": false,
                        "owner": {
                            "login": "don-brady",
                            "id": 12415697,
                            "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/don-brady",
                            "html_url": "https://github.com/don-brady",
                            "followers_url": "https://api.github.com/users/don-brady/followers",
                            "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                            "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                            "organizations_url": "https://api.github.com/users/don-brady/orgs",
                            "repos_url": "https://api.github.com/users/don-brady/repos",
                            "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/don-brady/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/don-brady/openzfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": true,
                        "url": "https://api.github.com/repos/don-brady/openzfs",
                        "forks_url": "https://api.github.com/repos/don-brady/openzfs/forks",
                        "keys_url": "https://api.github.com/repos/don-brady/openzfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/don-brady/openzfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/don-brady/openzfs/teams",
                        "hooks_url": "https://api.github.com/repos/don-brady/openzfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/don-brady/openzfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/don-brady/openzfs/events",
                        "assignees_url": "https://api.github.com/repos/don-brady/openzfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/don-brady/openzfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/don-brady/openzfs/tags",
                        "blobs_url": "https://api.github.com/repos/don-brady/openzfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/don-brady/openzfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/don-brady/openzfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/don-brady/openzfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/don-brady/openzfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/don-brady/openzfs/languages",
                        "stargazers_url": "https://api.github.com/repos/don-brady/openzfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/don-brady/openzfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/don-brady/openzfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/don-brady/openzfs/subscription",
                        "commits_url": "https://api.github.com/repos/don-brady/openzfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/don-brady/openzfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/don-brady/openzfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/don-brady/openzfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/don-brady/openzfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/don-brady/openzfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/don-brady/openzfs/merges",
                        "archive_url": "https://api.github.com/repos/don-brady/openzfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/don-brady/openzfs/downloads",
                        "issues_url": "https://api.github.com/repos/don-brady/openzfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/don-brady/openzfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/don-brady/openzfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/don-brady/openzfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/don-brady/openzfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/don-brady/openzfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/don-brady/openzfs/deployments",
                        "created_at": "2021-11-05T22:10:31Z",
                        "updated_at": "2023-04-19T17:10:15Z",
                        "pushed_at": "2023-10-27T04:31:55Z",
                        "git_url": "git://github.com/don-brady/openzfs.git",
                        "ssh_url": "git@github.com:don-brady/openzfs.git",
                        "clone_url": "https://github.com/don-brady/openzfs.git",
                        "svn_url": "https://github.com/don-brady/openzfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 120216,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "C",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 5,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 5,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "openzfs:master",
                    "ref": "master",
                    "sha": "9facf2d1ad0c4857de1d47a2a14e882a3fb78b89",
                    "user": {
                        "login": "openzfs",
                        "id": 4510897,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/openzfs",
                        "html_url": "https://github.com/openzfs",
                        "followers_url": "https://api.github.com/users/openzfs/followers",
                        "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                        "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                        "organizations_url": "https://api.github.com/users/openzfs/orgs",
                        "repos_url": "https://api.github.com/users/openzfs/repos",
                        "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/openzfs/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 437011,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0MzcwMTE=",
                        "name": "zfs",
                        "full_name": "openzfs/zfs",
                        "private": false,
                        "owner": {
                            "login": "openzfs",
                            "id": 4510897,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/openzfs",
                            "html_url": "https://github.com/openzfs",
                            "followers_url": "https://api.github.com/users/openzfs/followers",
                            "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                            "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                            "organizations_url": "https://api.github.com/users/openzfs/orgs",
                            "repos_url": "https://api.github.com/users/openzfs/repos",
                            "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/openzfs/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/openzfs/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": false,
                        "url": "https://api.github.com/repos/openzfs/zfs",
                        "forks_url": "https://api.github.com/repos/openzfs/zfs/forks",
                        "keys_url": "https://api.github.com/repos/openzfs/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/openzfs/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/openzfs/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/openzfs/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/openzfs/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/openzfs/zfs/events",
                        "assignees_url": "https://api.github.com/repos/openzfs/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/openzfs/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/openzfs/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/openzfs/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/openzfs/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/openzfs/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/openzfs/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/openzfs/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/openzfs/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/openzfs/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/openzfs/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/openzfs/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/openzfs/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/openzfs/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/openzfs/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/openzfs/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/openzfs/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/openzfs/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/openzfs/zfs/merges",
                        "archive_url": "https://api.github.com/repos/openzfs/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/openzfs/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/openzfs/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/openzfs/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/openzfs/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/openzfs/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/openzfs/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/openzfs/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/openzfs/zfs/deployments",
                        "created_at": "2009-12-14T20:20:34Z",
                        "updated_at": "2023-10-26T23:39:14Z",
                        "pushed_at": "2023-10-27T04:31:58Z",
                        "git_url": "git://github.com/openzfs/zfs.git",
                        "ssh_url": "git@github.com:openzfs/zfs.git",
                        "clone_url": "https://github.com/openzfs/zfs.git",
                        "svn_url": "https://github.com/openzfs/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 124672,
                        "stargazers_count": 9636,
                        "watchers_count": 9636,
                        "language": "C",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": true,
                        "forks_count": 1668,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1194,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": true,
                        "topics": [
                            "file-system",
                            "openzfs",
                            "system-software"
                        ],
                        "visibility": "public",
                        "forks": 1668,
                        "open_issues": 1194,
                        "watchers": 9636,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/openzfs/zfs/statuses/680f858f2cebcc12ad524c522ee14b838c0ab882"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T04:32:37Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32887996679",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 12415697,
            "login": "don-brady",
            "display_login": "don-brady",
            "gravatar_id": "",
            "url": "https://api.github.com/users/don-brady",
            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1374060574",
                "pull_request_review_id": 1700981791,
                "id": 1374060574,
                "node_id": "PRRC_kwDOAAarE85R5oAe",
                "diff_hunk": "@@ -8195,6 +8207,102 @@ print_removal_status(zpool_handle_t *zhp, pool_removal_stat_t *prs)\n \t}\n }\n \n+/*\n+ * Print out detailed raidz expansion status.\n+ */\n+static void\n+print_raidz_expand_status(zpool_handle_t *zhp, pool_raidz_expand_stat_t *pres)\n+{\n+\tchar copied_buf[7];\n+\n+\tif (pres == NULL || pres->pres_state == DSS_NONE)\n+\t\treturn;\n+\n+\t/*\n+\t * Determine name of vdev.\n+\t */\n+\tnvlist_t *config = zpool_get_config(zhp, NULL);\n+\tnvlist_t *nvroot = fnvlist_lookup_nvlist(config,\n+\t    ZPOOL_CONFIG_VDEV_TREE);\n+\tnvlist_t **child;\n+\tuint_t children;\n+\tverify(nvlist_lookup_nvlist_array(nvroot, ZPOOL_CONFIG_CHILDREN,\n+\t    &child, &children) == 0);\n+\tassert(pres->pres_expanding_vdev < children);\n+\n+\tprintf_color(ANSI_BOLD, gettext(\"raidz expand: \"));\n+\n+\ttime_t start = pres->pres_start_time;\n+\ttime_t end = pres->pres_end_time;\n+\tchar *vname =\n+\t    zpool_vdev_name(g_zfs, zhp, child[pres->pres_expanding_vdev], 0);\n+\tzfs_nicenum(pres->pres_reflowed, copied_buf, sizeof (copied_buf));\n+\n+\t/*\n+\t * Expansion is finished or canceled.\n+\t */\n+\tif (pres->pres_state == DSS_FINISHED) {\n+\t\tuint64_t minutes_taken = (end - start) / 60;\n+\n+\t\t(void) printf(gettext(\"Expansion of %s-%u copied %s \"",
                "path": "cmd/zpool/zpool_main.c",
                "commit_id": "680f858f2cebcc12ad524c522ee14b838c0ab882",
                "original_commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "fixed",
                "created_at": "2023-10-27T04:32:17Z",
                "updated_at": "2023-10-27T04:32:18Z",
                "html_url": "https://github.com/openzfs/zfs/pull/15022#discussion_r1374060574",
                "pull_request_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1374060574"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022#discussion_r1374060574"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1374060574/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": null,
                "original_start_line": null,
                "start_side": null,
                "line": null,
                "original_line": 8247,
                "side": "RIGHT",
                "in_reply_to_id": 1373915721,
                "original_position": 90,
                "position": null,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "id": 1413536769,
                "node_id": "PR_kwDOAAarE85UQNwB",
                "html_url": "https://github.com/openzfs/zfs/pull/15022",
                "diff_url": "https://github.com/openzfs/zfs/pull/15022.diff",
                "patch_url": "https://github.com/openzfs/zfs/pull/15022.patch",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15022",
                "number": 15022,
                "state": "open",
                "locked": false,
                "title": "raidz expansion feature",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "### Motivation and Context\r\nThis feature allows disks to be added one at a time to a RAID-Z group, expanding its capacity incrementally. This feature is especially useful for small pools (typically with only one RAID-Z group), where there isn't sufficient hardware to add capacity by adding a whole new RAID-Z group (typically doubling the number of disks).\r\n\r\nFor additional context as well as a design overview, see Matt Ahrens' talk at the [2021 FreeBSD Developer Summit](https://wiki.freebsd.org/DevSummit/202106) ([video](https://youtu.be/3SUKJye54aI?t=6166)) ([slides](https://docs.google.com/presentation/d/1FeQgEwChrtNQBHfWSNsPK3Y53O5BnPh3Cz5nRa5GAQY/edit#slide=id.p)), and a [news article from Ars Technica](https://arstechnica.com/gadgets/2021/06/raidz-expansion-code-lands-in-openzfs-master/).\r\n\r\n### Description\r\n#### Initiating expansion\r\nA new device (disk) can be attached to an existing RAIDZ vdev, by running `zpool attach POOL raidzP-N NEW_DEVICE`, e.g. `zpool attach tank raidz2-0 sda`. The new device will become part of the RAIDZ group. A _raidz expansion_ will\r\nbe initiated, and the new device will contribute additional space to the RAIDZ group once the expansion completes.\r\n\r\nThe `feature@raidz_expansion` on-disk feature flag must be `enabled` to initiate an expansion, and it remains `active` for the life of the pool. In other words, pools with expanded RAIDZ vdevs can not be imported by older releases of the ZFS software.\r\n\r\n#### During expansion\r\nThe expansion entails reading all allocated space from existing disks in the RAIDZ group, and rewriting it to the new disks in the RAIDZ group (including the newly added device).\r\n\r\nThe expansion progress can be monitored with `zpool status`.\r\n\r\nData redundancy is maintained during (and after) the expansion. If a disk fails while the expansion is in progress, the expansion pauses until the health of the RAIDZ vdev is restored (e.g. by replacing the failed disk and waiting\r\nfor reconstruction to complete).\r\n\r\nThe pool remains accessible during expansion. Following a reboot or export/import, the expansion resumes where it left off.\r\n\r\n#### After expansion\r\nWhen the expansion completes, the additional space is available for use, and is reflected in the `available` zfs property (as seen in `zfs list`, `df`, etc).\r\n\r\nExpansion does not change the number of failures that can be tolerated without data loss (e.g. a RAIDZ2 is still a RAIDZ2 even after expansion).\r\n\r\nA RAIDZ vdev can be expanded multiple times.\r\n\r\nAfter the expansion completes, old blocks remain with their old data-to-parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distributed among the larger set of disks. New blocks will be written with the new data-to-parity\r\nratio (e.g. a 5-wide RAIDZ2 which has been expanded once to 6-wide, has 4 data to 2 parity). However, the RAIDZ vdev's \"assumed parity ratio\" does not change, so slightly less space than is expected may be reported for newly-written blocks, according to `zfs list`, `df`, `ls -s`, and similar tools.\r\n\r\n#### Manpage changes\r\nzpool-attach.8:\r\n```\r\nNAME\r\n     zpool-attach \u2014 attach new device to existing ZFS vdev\r\n\r\nSYNOPSIS\r\n     zpool attach [-fsw] [-o property=value] pool device new_device\r\n\r\nDESCRIPTION\r\n     Attaches new_device to the existing device.  The behavior differs depend\u2010\r\n     ing on if the existing device is a RAIDZ device, or a mirror/plain\r\n     device.\r\n\r\n     If the existing device is a mirror or plain device ...\r\n\r\n     If the existing device is a RAIDZ device (e.g. specified as \"raidz2-0\"),\r\n     the new device will become part of that RAIDZ group.  A \"raidz expansion\"\r\n     will be initiated, and the new device will contribute additional space to\r\n     the RAIDZ group once the expansion completes.  The expansion entails\r\n     reading all allocated space from existing disks in the RAIDZ group, and\r\n     rewriting it to the new disks in the RAIDZ group (including the newly\r\n     added device).  Its progress can be monitored with zpool status.\r\n\r\n     Data redundancy is maintained during and after the expansion.  If a disk\r\n     fails while the expansion is in progress, the expansion pauses until the\r\n     health of the RAIDZ vdev is restored (e.g. by replacing the failed disk\r\n     and waiting for reconstruction to complete).  Expansion does not change\r\n     the number of failures that can be tolerated without data loss (e.g. a\r\n     RAIDZ2 is still a RAIDZ2 even after expansion).  A RAIDZ vdev can be\r\n     expanded multiple times.\r\n\r\n     After the expansion completes, old blocks remain with their old data-to-\r\n     parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distrib\u2010\r\n     uted among the larger set of disks.  New blocks will be written with the\r\n     new data-to-parity ratio (e.g. a 5-wide RAIDZ2 which has been expanded\r\n     once to 6-wide, has 4 data to 2 parity).  However, the RAIDZ vdev's\r\n     \"assumed parity ratio\" does not change, so slightly less space than is\r\n     expected may be reported for newly-written blocks, according to zfs list,\r\n     df, ls -s, and similar tools.\r\n```\r\n#### Status\r\nMatt Ahrens' original pull request (#12225) has been rebased here to current master branch and updated to incorporate recent code cleanups in the OpenZFS codebase. This feature is believed to be complete. However, like all PR's, it is subject to change as part of the code review process. Since this PR includes on-disk changes, it shouldn't be used on production systems before it is integrated to the OpenZFS codebase. Tasks that still need to be done before integration:\r\n- [x] Additional code cleanup in `ztest` code\r\n- [x] `zloop` changes to drive coverage of this feature\r\n- [ ] Address test failures in `ztest` runs\r\n- [x] Document the high-level design in a \"big theory statement\" comment\r\n- [x] Remove verbose logging\r\n- [x] Detection of MBR partitions using reserved boot area (FreeBSD BTX boot loader)\r\n- [ ] Address any performance concerns\r\n\r\n### Acknowledgments\r\nThank you to the [FreeBSD Foundation](https://freebsdfoundation.org/) for commissioning this work in 2017 and continuing to sponsor it well past the original time estimates!\r\nThank you to [iXsystems](https://www.ixsystems.com/) for sponsoring the final push to land this feature into OpenZFS.\r\n\r\nThanks also to contributors @FedorUporovVstack, @stuartmaybee, @thorsteneb, and @Fmstrat for portions\r\nof the implementation.\r\n\r\nSponsored-by: The FreeBSD Foundation\r\nSponsored-by: iXsystems, Inc.\r\nSponsored-by: vStack\r\nContributions-by: Stuart Maybee [stuart.maybee@comcast.net](mailto:stuart.maybee@comcast.net)\r\nContributions-by: Fedor Uporov [fuporov.vstack@gmail.com](mailto:fuporov.vstack@gmail.com)\r\nContributions-by: Thorsten Behrens [tbehrens@outlook.com](mailto:tbehrens@outlook.com)\r\nContributions-by: Fmstrat [nospam@nowsci.com](mailto:nospam@nowsci.com)\r\nContributions-by: Don Brady <dev.fs.zfs@gmail.com>\r\n\r\n### How Has This Been Tested?\r\nTests added to the ZFS Test Suite (`functional/raidz`) and `ztest`, in addition to manual testing.\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [x] New feature (non-breaking change which adds functionality)\r\n- [ ] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n- [x] I have updated the documentation accordingly.\r\n- [x] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [x] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [ ] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n\r\n### Pull Request Comments\r\nPlease limit comments here to code review/feedback and testing questions/results.\r\n\r\nFor generic discussions about RAID-Z, or discussions on future enhancements to RAIDZ expansion, please use [RAIDZ Expansion feature discussions](https://github.com/openzfs/zfs/discussions/15232).",
                "created_at": "2023-06-29T15:15:15Z",
                "updated_at": "2023-10-27T04:32:18Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "d997f55586843c7466f6c98634170b93c03adb9c",
                "assignee": {
                    "login": "mmaybee",
                    "id": 44241648,
                    "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/mmaybee",
                    "html_url": "https://github.com/mmaybee",
                    "followers_url": "https://api.github.com/users/mmaybee/followers",
                    "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                    "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                    "repos_url": "https://api.github.com/users/mmaybee/repos",
                    "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "mmaybee",
                        "id": 44241648,
                        "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mmaybee",
                        "html_url": "https://github.com/mmaybee",
                        "followers_url": "https://api.github.com/users/mmaybee/followers",
                        "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                        "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                        "repos_url": "https://api.github.com/users/mmaybee/repos",
                        "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 40358,
                        "node_id": "MDU6TGFiZWw0MDM1OA==",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Feature",
                        "name": "Type: Feature",
                        "color": "02d7e1",
                        "default": false,
                        "description": "Feature request or new feature"
                    },
                    {
                        "id": 1007099007,
                        "node_id": "MDU6TGFiZWwxMDA3MDk5MDA3",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Status:%20Accepted",
                        "name": "Status: Accepted",
                        "color": "00b33c",
                        "default": false,
                        "description": "Ready to integrate (reviewed, tested)"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits",
                "review_comments_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments",
                "review_comment_url": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments",
                "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/680f858f2cebcc12ad524c522ee14b838c0ab882",
                "head": {
                    "label": "don-brady:raidz-expansion",
                    "ref": "raidz-expansion",
                    "sha": "680f858f2cebcc12ad524c522ee14b838c0ab882",
                    "user": {
                        "login": "don-brady",
                        "id": 12415697,
                        "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                        "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/don-brady",
                        "html_url": "https://github.com/don-brady",
                        "followers_url": "https://api.github.com/users/don-brady/followers",
                        "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                        "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                        "organizations_url": "https://api.github.com/users/don-brady/orgs",
                        "repos_url": "https://api.github.com/users/don-brady/repos",
                        "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/don-brady/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 425096697,
                        "node_id": "R_kgDOGVZ1-Q",
                        "name": "openzfs",
                        "full_name": "don-brady/openzfs",
                        "private": false,
                        "owner": {
                            "login": "don-brady",
                            "id": 12415697,
                            "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/don-brady",
                            "html_url": "https://github.com/don-brady",
                            "followers_url": "https://api.github.com/users/don-brady/followers",
                            "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                            "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                            "organizations_url": "https://api.github.com/users/don-brady/orgs",
                            "repos_url": "https://api.github.com/users/don-brady/repos",
                            "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/don-brady/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/don-brady/openzfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": true,
                        "url": "https://api.github.com/repos/don-brady/openzfs",
                        "forks_url": "https://api.github.com/repos/don-brady/openzfs/forks",
                        "keys_url": "https://api.github.com/repos/don-brady/openzfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/don-brady/openzfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/don-brady/openzfs/teams",
                        "hooks_url": "https://api.github.com/repos/don-brady/openzfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/don-brady/openzfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/don-brady/openzfs/events",
                        "assignees_url": "https://api.github.com/repos/don-brady/openzfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/don-brady/openzfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/don-brady/openzfs/tags",
                        "blobs_url": "https://api.github.com/repos/don-brady/openzfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/don-brady/openzfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/don-brady/openzfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/don-brady/openzfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/don-brady/openzfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/don-brady/openzfs/languages",
                        "stargazers_url": "https://api.github.com/repos/don-brady/openzfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/don-brady/openzfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/don-brady/openzfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/don-brady/openzfs/subscription",
                        "commits_url": "https://api.github.com/repos/don-brady/openzfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/don-brady/openzfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/don-brady/openzfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/don-brady/openzfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/don-brady/openzfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/don-brady/openzfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/don-brady/openzfs/merges",
                        "archive_url": "https://api.github.com/repos/don-brady/openzfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/don-brady/openzfs/downloads",
                        "issues_url": "https://api.github.com/repos/don-brady/openzfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/don-brady/openzfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/don-brady/openzfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/don-brady/openzfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/don-brady/openzfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/don-brady/openzfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/don-brady/openzfs/deployments",
                        "created_at": "2021-11-05T22:10:31Z",
                        "updated_at": "2023-04-19T17:10:15Z",
                        "pushed_at": "2023-10-27T04:31:55Z",
                        "git_url": "git://github.com/don-brady/openzfs.git",
                        "ssh_url": "git@github.com:don-brady/openzfs.git",
                        "clone_url": "https://github.com/don-brady/openzfs.git",
                        "svn_url": "https://github.com/don-brady/openzfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 120216,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "C",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 5,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 5,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "openzfs:master",
                    "ref": "master",
                    "sha": "9facf2d1ad0c4857de1d47a2a14e882a3fb78b89",
                    "user": {
                        "login": "openzfs",
                        "id": 4510897,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/openzfs",
                        "html_url": "https://github.com/openzfs",
                        "followers_url": "https://api.github.com/users/openzfs/followers",
                        "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                        "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                        "organizations_url": "https://api.github.com/users/openzfs/orgs",
                        "repos_url": "https://api.github.com/users/openzfs/repos",
                        "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/openzfs/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 437011,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0MzcwMTE=",
                        "name": "zfs",
                        "full_name": "openzfs/zfs",
                        "private": false,
                        "owner": {
                            "login": "openzfs",
                            "id": 4510897,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/openzfs",
                            "html_url": "https://github.com/openzfs",
                            "followers_url": "https://api.github.com/users/openzfs/followers",
                            "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                            "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                            "organizations_url": "https://api.github.com/users/openzfs/orgs",
                            "repos_url": "https://api.github.com/users/openzfs/repos",
                            "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/openzfs/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/openzfs/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": false,
                        "url": "https://api.github.com/repos/openzfs/zfs",
                        "forks_url": "https://api.github.com/repos/openzfs/zfs/forks",
                        "keys_url": "https://api.github.com/repos/openzfs/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/openzfs/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/openzfs/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/openzfs/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/openzfs/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/openzfs/zfs/events",
                        "assignees_url": "https://api.github.com/repos/openzfs/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/openzfs/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/openzfs/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/openzfs/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/openzfs/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/openzfs/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/openzfs/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/openzfs/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/openzfs/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/openzfs/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/openzfs/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/openzfs/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/openzfs/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/openzfs/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/openzfs/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/openzfs/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/openzfs/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/openzfs/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/openzfs/zfs/merges",
                        "archive_url": "https://api.github.com/repos/openzfs/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/openzfs/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/openzfs/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/openzfs/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/openzfs/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/openzfs/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/openzfs/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/openzfs/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/openzfs/zfs/deployments",
                        "created_at": "2009-12-14T20:20:34Z",
                        "updated_at": "2023-10-26T23:39:14Z",
                        "pushed_at": "2023-10-27T04:31:58Z",
                        "git_url": "git://github.com/openzfs/zfs.git",
                        "ssh_url": "git@github.com:openzfs/zfs.git",
                        "clone_url": "https://github.com/openzfs/zfs.git",
                        "svn_url": "https://github.com/openzfs/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 124672,
                        "stargazers_count": 9636,
                        "watchers_count": 9636,
                        "language": "C",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": true,
                        "forks_count": 1668,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1194,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": true,
                        "topics": [
                            "file-system",
                            "openzfs",
                            "system-software"
                        ],
                        "visibility": "public",
                        "forks": 1668,
                        "open_issues": 1194,
                        "watchers": 9636,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/openzfs/zfs/statuses/680f858f2cebcc12ad524c522ee14b838c0ab882"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T04:32:17Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32887996632",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 12415697,
            "login": "don-brady",
            "display_login": "don-brady",
            "gravatar_id": "",
            "url": "https://api.github.com/users/don-brady",
            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1700981791,
                "node_id": "PRR_kwDOAAarE85lYuwf",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "submitted_at": "2023-10-27T04:32:17Z",
                "state": "commented",
                "html_url": "https://github.com/openzfs/zfs/pull/15022#pullrequestreview-1700981791",
                "pull_request_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022#pullrequestreview-1700981791"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "id": 1413536769,
                "node_id": "PR_kwDOAAarE85UQNwB",
                "html_url": "https://github.com/openzfs/zfs/pull/15022",
                "diff_url": "https://github.com/openzfs/zfs/pull/15022.diff",
                "patch_url": "https://github.com/openzfs/zfs/pull/15022.patch",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15022",
                "number": 15022,
                "state": "open",
                "locked": false,
                "title": "raidz expansion feature",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "### Motivation and Context\r\nThis feature allows disks to be added one at a time to a RAID-Z group, expanding its capacity incrementally. This feature is especially useful for small pools (typically with only one RAID-Z group), where there isn't sufficient hardware to add capacity by adding a whole new RAID-Z group (typically doubling the number of disks).\r\n\r\nFor additional context as well as a design overview, see Matt Ahrens' talk at the [2021 FreeBSD Developer Summit](https://wiki.freebsd.org/DevSummit/202106) ([video](https://youtu.be/3SUKJye54aI?t=6166)) ([slides](https://docs.google.com/presentation/d/1FeQgEwChrtNQBHfWSNsPK3Y53O5BnPh3Cz5nRa5GAQY/edit#slide=id.p)), and a [news article from Ars Technica](https://arstechnica.com/gadgets/2021/06/raidz-expansion-code-lands-in-openzfs-master/).\r\n\r\n### Description\r\n#### Initiating expansion\r\nA new device (disk) can be attached to an existing RAIDZ vdev, by running `zpool attach POOL raidzP-N NEW_DEVICE`, e.g. `zpool attach tank raidz2-0 sda`. The new device will become part of the RAIDZ group. A _raidz expansion_ will\r\nbe initiated, and the new device will contribute additional space to the RAIDZ group once the expansion completes.\r\n\r\nThe `feature@raidz_expansion` on-disk feature flag must be `enabled` to initiate an expansion, and it remains `active` for the life of the pool. In other words, pools with expanded RAIDZ vdevs can not be imported by older releases of the ZFS software.\r\n\r\n#### During expansion\r\nThe expansion entails reading all allocated space from existing disks in the RAIDZ group, and rewriting it to the new disks in the RAIDZ group (including the newly added device).\r\n\r\nThe expansion progress can be monitored with `zpool status`.\r\n\r\nData redundancy is maintained during (and after) the expansion. If a disk fails while the expansion is in progress, the expansion pauses until the health of the RAIDZ vdev is restored (e.g. by replacing the failed disk and waiting\r\nfor reconstruction to complete).\r\n\r\nThe pool remains accessible during expansion. Following a reboot or export/import, the expansion resumes where it left off.\r\n\r\n#### After expansion\r\nWhen the expansion completes, the additional space is available for use, and is reflected in the `available` zfs property (as seen in `zfs list`, `df`, etc).\r\n\r\nExpansion does not change the number of failures that can be tolerated without data loss (e.g. a RAIDZ2 is still a RAIDZ2 even after expansion).\r\n\r\nA RAIDZ vdev can be expanded multiple times.\r\n\r\nAfter the expansion completes, old blocks remain with their old data-to-parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distributed among the larger set of disks. New blocks will be written with the new data-to-parity\r\nratio (e.g. a 5-wide RAIDZ2 which has been expanded once to 6-wide, has 4 data to 2 parity). However, the RAIDZ vdev's \"assumed parity ratio\" does not change, so slightly less space than is expected may be reported for newly-written blocks, according to `zfs list`, `df`, `ls -s`, and similar tools.\r\n\r\n#### Manpage changes\r\nzpool-attach.8:\r\n```\r\nNAME\r\n     zpool-attach \u2014 attach new device to existing ZFS vdev\r\n\r\nSYNOPSIS\r\n     zpool attach [-fsw] [-o property=value] pool device new_device\r\n\r\nDESCRIPTION\r\n     Attaches new_device to the existing device.  The behavior differs depend\u2010\r\n     ing on if the existing device is a RAIDZ device, or a mirror/plain\r\n     device.\r\n\r\n     If the existing device is a mirror or plain device ...\r\n\r\n     If the existing device is a RAIDZ device (e.g. specified as \"raidz2-0\"),\r\n     the new device will become part of that RAIDZ group.  A \"raidz expansion\"\r\n     will be initiated, and the new device will contribute additional space to\r\n     the RAIDZ group once the expansion completes.  The expansion entails\r\n     reading all allocated space from existing disks in the RAIDZ group, and\r\n     rewriting it to the new disks in the RAIDZ group (including the newly\r\n     added device).  Its progress can be monitored with zpool status.\r\n\r\n     Data redundancy is maintained during and after the expansion.  If a disk\r\n     fails while the expansion is in progress, the expansion pauses until the\r\n     health of the RAIDZ vdev is restored (e.g. by replacing the failed disk\r\n     and waiting for reconstruction to complete).  Expansion does not change\r\n     the number of failures that can be tolerated without data loss (e.g. a\r\n     RAIDZ2 is still a RAIDZ2 even after expansion).  A RAIDZ vdev can be\r\n     expanded multiple times.\r\n\r\n     After the expansion completes, old blocks remain with their old data-to-\r\n     parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distrib\u2010\r\n     uted among the larger set of disks.  New blocks will be written with the\r\n     new data-to-parity ratio (e.g. a 5-wide RAIDZ2 which has been expanded\r\n     once to 6-wide, has 4 data to 2 parity).  However, the RAIDZ vdev's\r\n     \"assumed parity ratio\" does not change, so slightly less space than is\r\n     expected may be reported for newly-written blocks, according to zfs list,\r\n     df, ls -s, and similar tools.\r\n```\r\n#### Status\r\nMatt Ahrens' original pull request (#12225) has been rebased here to current master branch and updated to incorporate recent code cleanups in the OpenZFS codebase. This feature is believed to be complete. However, like all PR's, it is subject to change as part of the code review process. Since this PR includes on-disk changes, it shouldn't be used on production systems before it is integrated to the OpenZFS codebase. Tasks that still need to be done before integration:\r\n- [x] Additional code cleanup in `ztest` code\r\n- [x] `zloop` changes to drive coverage of this feature\r\n- [ ] Address test failures in `ztest` runs\r\n- [x] Document the high-level design in a \"big theory statement\" comment\r\n- [x] Remove verbose logging\r\n- [x] Detection of MBR partitions using reserved boot area (FreeBSD BTX boot loader)\r\n- [ ] Address any performance concerns\r\n\r\n### Acknowledgments\r\nThank you to the [FreeBSD Foundation](https://freebsdfoundation.org/) for commissioning this work in 2017 and continuing to sponsor it well past the original time estimates!\r\nThank you to [iXsystems](https://www.ixsystems.com/) for sponsoring the final push to land this feature into OpenZFS.\r\n\r\nThanks also to contributors @FedorUporovVstack, @stuartmaybee, @thorsteneb, and @Fmstrat for portions\r\nof the implementation.\r\n\r\nSponsored-by: The FreeBSD Foundation\r\nSponsored-by: iXsystems, Inc.\r\nSponsored-by: vStack\r\nContributions-by: Stuart Maybee [stuart.maybee@comcast.net](mailto:stuart.maybee@comcast.net)\r\nContributions-by: Fedor Uporov [fuporov.vstack@gmail.com](mailto:fuporov.vstack@gmail.com)\r\nContributions-by: Thorsten Behrens [tbehrens@outlook.com](mailto:tbehrens@outlook.com)\r\nContributions-by: Fmstrat [nospam@nowsci.com](mailto:nospam@nowsci.com)\r\nContributions-by: Don Brady <dev.fs.zfs@gmail.com>\r\n\r\n### How Has This Been Tested?\r\nTests added to the ZFS Test Suite (`functional/raidz`) and `ztest`, in addition to manual testing.\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [x] New feature (non-breaking change which adds functionality)\r\n- [ ] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n- [x] I have updated the documentation accordingly.\r\n- [x] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [x] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [ ] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n\r\n### Pull Request Comments\r\nPlease limit comments here to code review/feedback and testing questions/results.\r\n\r\nFor generic discussions about RAID-Z, or discussions on future enhancements to RAIDZ expansion, please use [RAIDZ Expansion feature discussions](https://github.com/openzfs/zfs/discussions/15232).",
                "created_at": "2023-06-29T15:15:15Z",
                "updated_at": "2023-10-27T04:32:18Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "d997f55586843c7466f6c98634170b93c03adb9c",
                "assignee": {
                    "login": "mmaybee",
                    "id": 44241648,
                    "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/mmaybee",
                    "html_url": "https://github.com/mmaybee",
                    "followers_url": "https://api.github.com/users/mmaybee/followers",
                    "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                    "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                    "repos_url": "https://api.github.com/users/mmaybee/repos",
                    "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "mmaybee",
                        "id": 44241648,
                        "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mmaybee",
                        "html_url": "https://github.com/mmaybee",
                        "followers_url": "https://api.github.com/users/mmaybee/followers",
                        "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                        "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                        "repos_url": "https://api.github.com/users/mmaybee/repos",
                        "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 40358,
                        "node_id": "MDU6TGFiZWw0MDM1OA==",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Feature",
                        "name": "Type: Feature",
                        "color": "02d7e1",
                        "default": false,
                        "description": "Feature request or new feature"
                    },
                    {
                        "id": 1007099007,
                        "node_id": "MDU6TGFiZWwxMDA3MDk5MDA3",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Status:%20Accepted",
                        "name": "Status: Accepted",
                        "color": "00b33c",
                        "default": false,
                        "description": "Ready to integrate (reviewed, tested)"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits",
                "review_comments_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments",
                "review_comment_url": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments",
                "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/680f858f2cebcc12ad524c522ee14b838c0ab882",
                "head": {
                    "label": "don-brady:raidz-expansion",
                    "ref": "raidz-expansion",
                    "sha": "680f858f2cebcc12ad524c522ee14b838c0ab882",
                    "user": {
                        "login": "don-brady",
                        "id": 12415697,
                        "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                        "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/don-brady",
                        "html_url": "https://github.com/don-brady",
                        "followers_url": "https://api.github.com/users/don-brady/followers",
                        "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                        "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                        "organizations_url": "https://api.github.com/users/don-brady/orgs",
                        "repos_url": "https://api.github.com/users/don-brady/repos",
                        "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/don-brady/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 425096697,
                        "node_id": "R_kgDOGVZ1-Q",
                        "name": "openzfs",
                        "full_name": "don-brady/openzfs",
                        "private": false,
                        "owner": {
                            "login": "don-brady",
                            "id": 12415697,
                            "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/don-brady",
                            "html_url": "https://github.com/don-brady",
                            "followers_url": "https://api.github.com/users/don-brady/followers",
                            "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                            "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                            "organizations_url": "https://api.github.com/users/don-brady/orgs",
                            "repos_url": "https://api.github.com/users/don-brady/repos",
                            "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/don-brady/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/don-brady/openzfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": true,
                        "url": "https://api.github.com/repos/don-brady/openzfs",
                        "forks_url": "https://api.github.com/repos/don-brady/openzfs/forks",
                        "keys_url": "https://api.github.com/repos/don-brady/openzfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/don-brady/openzfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/don-brady/openzfs/teams",
                        "hooks_url": "https://api.github.com/repos/don-brady/openzfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/don-brady/openzfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/don-brady/openzfs/events",
                        "assignees_url": "https://api.github.com/repos/don-brady/openzfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/don-brady/openzfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/don-brady/openzfs/tags",
                        "blobs_url": "https://api.github.com/repos/don-brady/openzfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/don-brady/openzfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/don-brady/openzfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/don-brady/openzfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/don-brady/openzfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/don-brady/openzfs/languages",
                        "stargazers_url": "https://api.github.com/repos/don-brady/openzfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/don-brady/openzfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/don-brady/openzfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/don-brady/openzfs/subscription",
                        "commits_url": "https://api.github.com/repos/don-brady/openzfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/don-brady/openzfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/don-brady/openzfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/don-brady/openzfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/don-brady/openzfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/don-brady/openzfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/don-brady/openzfs/merges",
                        "archive_url": "https://api.github.com/repos/don-brady/openzfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/don-brady/openzfs/downloads",
                        "issues_url": "https://api.github.com/repos/don-brady/openzfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/don-brady/openzfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/don-brady/openzfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/don-brady/openzfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/don-brady/openzfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/don-brady/openzfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/don-brady/openzfs/deployments",
                        "created_at": "2021-11-05T22:10:31Z",
                        "updated_at": "2023-04-19T17:10:15Z",
                        "pushed_at": "2023-10-27T04:31:55Z",
                        "git_url": "git://github.com/don-brady/openzfs.git",
                        "ssh_url": "git@github.com:don-brady/openzfs.git",
                        "clone_url": "https://github.com/don-brady/openzfs.git",
                        "svn_url": "https://github.com/don-brady/openzfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 120216,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "C",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 5,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 5,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "openzfs:master",
                    "ref": "master",
                    "sha": "9facf2d1ad0c4857de1d47a2a14e882a3fb78b89",
                    "user": {
                        "login": "openzfs",
                        "id": 4510897,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/openzfs",
                        "html_url": "https://github.com/openzfs",
                        "followers_url": "https://api.github.com/users/openzfs/followers",
                        "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                        "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                        "organizations_url": "https://api.github.com/users/openzfs/orgs",
                        "repos_url": "https://api.github.com/users/openzfs/repos",
                        "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/openzfs/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 437011,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0MzcwMTE=",
                        "name": "zfs",
                        "full_name": "openzfs/zfs",
                        "private": false,
                        "owner": {
                            "login": "openzfs",
                            "id": 4510897,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/openzfs",
                            "html_url": "https://github.com/openzfs",
                            "followers_url": "https://api.github.com/users/openzfs/followers",
                            "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                            "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                            "organizations_url": "https://api.github.com/users/openzfs/orgs",
                            "repos_url": "https://api.github.com/users/openzfs/repos",
                            "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/openzfs/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/openzfs/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": false,
                        "url": "https://api.github.com/repos/openzfs/zfs",
                        "forks_url": "https://api.github.com/repos/openzfs/zfs/forks",
                        "keys_url": "https://api.github.com/repos/openzfs/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/openzfs/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/openzfs/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/openzfs/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/openzfs/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/openzfs/zfs/events",
                        "assignees_url": "https://api.github.com/repos/openzfs/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/openzfs/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/openzfs/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/openzfs/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/openzfs/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/openzfs/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/openzfs/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/openzfs/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/openzfs/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/openzfs/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/openzfs/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/openzfs/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/openzfs/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/openzfs/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/openzfs/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/openzfs/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/openzfs/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/openzfs/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/openzfs/zfs/merges",
                        "archive_url": "https://api.github.com/repos/openzfs/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/openzfs/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/openzfs/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/openzfs/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/openzfs/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/openzfs/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/openzfs/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/openzfs/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/openzfs/zfs/deployments",
                        "created_at": "2009-12-14T20:20:34Z",
                        "updated_at": "2023-10-26T23:39:14Z",
                        "pushed_at": "2023-10-27T04:31:58Z",
                        "git_url": "git://github.com/openzfs/zfs.git",
                        "ssh_url": "git@github.com:openzfs/zfs.git",
                        "clone_url": "https://github.com/openzfs/zfs.git",
                        "svn_url": "https://github.com/openzfs/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 124672,
                        "stargazers_count": 9636,
                        "watchers_count": 9636,
                        "language": "C",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": true,
                        "forks_count": 1668,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1194,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": true,
                        "topics": [
                            "file-system",
                            "openzfs",
                            "system-software"
                        ],
                        "visibility": "public",
                        "forks": 1668,
                        "open_issues": 1194,
                        "watchers": 9636,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/openzfs/zfs/statuses/680f858f2cebcc12ad524c522ee14b838c0ab882"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T04:32:18Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32887994587",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 12415697,
            "login": "don-brady",
            "display_login": "don-brady",
            "gravatar_id": "",
            "url": "https://api.github.com/users/don-brady",
            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1374060512",
                "pull_request_review_id": 1700981706,
                "id": 1374060512,
                "node_id": "PRRC_kwDOAAarE85R5n_g",
                "diff_hunk": "@@ -4368,6 +4368,17 @@ vdev_raidz_reflow_copy_scratch(spa_t *spa)\n \tspa_config_exit(spa, SCL_STATE, FTAG);\n }\n \n+static boolean_t\n+vdev_raidz_expand_child_replacing(vdev_t *raidz_vd)\n+{\n+\tfor (int i = 0; i < raidz_vd->vdev_children; i++) {\n+\t\t/* Quick check if a child is being replace */",
                "path": "module/zfs/vdev_raidz.c",
                "commit_id": "680f858f2cebcc12ad524c522ee14b838c0ab882",
                "original_commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "fixed",
                "created_at": "2023-10-27T04:32:07Z",
                "updated_at": "2023-10-27T04:32:08Z",
                "html_url": "https://github.com/openzfs/zfs/pull/15022#discussion_r1374060512",
                "pull_request_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1374060512"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022#discussion_r1374060512"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1374060512/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": null,
                "original_start_line": null,
                "start_side": null,
                "line": null,
                "original_line": 4375,
                "side": "RIGHT",
                "in_reply_to_id": 1373840764,
                "original_position": 8,
                "position": null,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "id": 1413536769,
                "node_id": "PR_kwDOAAarE85UQNwB",
                "html_url": "https://github.com/openzfs/zfs/pull/15022",
                "diff_url": "https://github.com/openzfs/zfs/pull/15022.diff",
                "patch_url": "https://github.com/openzfs/zfs/pull/15022.patch",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15022",
                "number": 15022,
                "state": "open",
                "locked": false,
                "title": "raidz expansion feature",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "### Motivation and Context\r\nThis feature allows disks to be added one at a time to a RAID-Z group, expanding its capacity incrementally. This feature is especially useful for small pools (typically with only one RAID-Z group), where there isn't sufficient hardware to add capacity by adding a whole new RAID-Z group (typically doubling the number of disks).\r\n\r\nFor additional context as well as a design overview, see Matt Ahrens' talk at the [2021 FreeBSD Developer Summit](https://wiki.freebsd.org/DevSummit/202106) ([video](https://youtu.be/3SUKJye54aI?t=6166)) ([slides](https://docs.google.com/presentation/d/1FeQgEwChrtNQBHfWSNsPK3Y53O5BnPh3Cz5nRa5GAQY/edit#slide=id.p)), and a [news article from Ars Technica](https://arstechnica.com/gadgets/2021/06/raidz-expansion-code-lands-in-openzfs-master/).\r\n\r\n### Description\r\n#### Initiating expansion\r\nA new device (disk) can be attached to an existing RAIDZ vdev, by running `zpool attach POOL raidzP-N NEW_DEVICE`, e.g. `zpool attach tank raidz2-0 sda`. The new device will become part of the RAIDZ group. A _raidz expansion_ will\r\nbe initiated, and the new device will contribute additional space to the RAIDZ group once the expansion completes.\r\n\r\nThe `feature@raidz_expansion` on-disk feature flag must be `enabled` to initiate an expansion, and it remains `active` for the life of the pool. In other words, pools with expanded RAIDZ vdevs can not be imported by older releases of the ZFS software.\r\n\r\n#### During expansion\r\nThe expansion entails reading all allocated space from existing disks in the RAIDZ group, and rewriting it to the new disks in the RAIDZ group (including the newly added device).\r\n\r\nThe expansion progress can be monitored with `zpool status`.\r\n\r\nData redundancy is maintained during (and after) the expansion. If a disk fails while the expansion is in progress, the expansion pauses until the health of the RAIDZ vdev is restored (e.g. by replacing the failed disk and waiting\r\nfor reconstruction to complete).\r\n\r\nThe pool remains accessible during expansion. Following a reboot or export/import, the expansion resumes where it left off.\r\n\r\n#### After expansion\r\nWhen the expansion completes, the additional space is available for use, and is reflected in the `available` zfs property (as seen in `zfs list`, `df`, etc).\r\n\r\nExpansion does not change the number of failures that can be tolerated without data loss (e.g. a RAIDZ2 is still a RAIDZ2 even after expansion).\r\n\r\nA RAIDZ vdev can be expanded multiple times.\r\n\r\nAfter the expansion completes, old blocks remain with their old data-to-parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distributed among the larger set of disks. New blocks will be written with the new data-to-parity\r\nratio (e.g. a 5-wide RAIDZ2 which has been expanded once to 6-wide, has 4 data to 2 parity). However, the RAIDZ vdev's \"assumed parity ratio\" does not change, so slightly less space than is expected may be reported for newly-written blocks, according to `zfs list`, `df`, `ls -s`, and similar tools.\r\n\r\n#### Manpage changes\r\nzpool-attach.8:\r\n```\r\nNAME\r\n     zpool-attach \u2014 attach new device to existing ZFS vdev\r\n\r\nSYNOPSIS\r\n     zpool attach [-fsw] [-o property=value] pool device new_device\r\n\r\nDESCRIPTION\r\n     Attaches new_device to the existing device.  The behavior differs depend\u2010\r\n     ing on if the existing device is a RAIDZ device, or a mirror/plain\r\n     device.\r\n\r\n     If the existing device is a mirror or plain device ...\r\n\r\n     If the existing device is a RAIDZ device (e.g. specified as \"raidz2-0\"),\r\n     the new device will become part of that RAIDZ group.  A \"raidz expansion\"\r\n     will be initiated, and the new device will contribute additional space to\r\n     the RAIDZ group once the expansion completes.  The expansion entails\r\n     reading all allocated space from existing disks in the RAIDZ group, and\r\n     rewriting it to the new disks in the RAIDZ group (including the newly\r\n     added device).  Its progress can be monitored with zpool status.\r\n\r\n     Data redundancy is maintained during and after the expansion.  If a disk\r\n     fails while the expansion is in progress, the expansion pauses until the\r\n     health of the RAIDZ vdev is restored (e.g. by replacing the failed disk\r\n     and waiting for reconstruction to complete).  Expansion does not change\r\n     the number of failures that can be tolerated without data loss (e.g. a\r\n     RAIDZ2 is still a RAIDZ2 even after expansion).  A RAIDZ vdev can be\r\n     expanded multiple times.\r\n\r\n     After the expansion completes, old blocks remain with their old data-to-\r\n     parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distrib\u2010\r\n     uted among the larger set of disks.  New blocks will be written with the\r\n     new data-to-parity ratio (e.g. a 5-wide RAIDZ2 which has been expanded\r\n     once to 6-wide, has 4 data to 2 parity).  However, the RAIDZ vdev's\r\n     \"assumed parity ratio\" does not change, so slightly less space than is\r\n     expected may be reported for newly-written blocks, according to zfs list,\r\n     df, ls -s, and similar tools.\r\n```\r\n#### Status\r\nMatt Ahrens' original pull request (#12225) has been rebased here to current master branch and updated to incorporate recent code cleanups in the OpenZFS codebase. This feature is believed to be complete. However, like all PR's, it is subject to change as part of the code review process. Since this PR includes on-disk changes, it shouldn't be used on production systems before it is integrated to the OpenZFS codebase. Tasks that still need to be done before integration:\r\n- [x] Additional code cleanup in `ztest` code\r\n- [x] `zloop` changes to drive coverage of this feature\r\n- [ ] Address test failures in `ztest` runs\r\n- [x] Document the high-level design in a \"big theory statement\" comment\r\n- [x] Remove verbose logging\r\n- [x] Detection of MBR partitions using reserved boot area (FreeBSD BTX boot loader)\r\n- [ ] Address any performance concerns\r\n\r\n### Acknowledgments\r\nThank you to the [FreeBSD Foundation](https://freebsdfoundation.org/) for commissioning this work in 2017 and continuing to sponsor it well past the original time estimates!\r\nThank you to [iXsystems](https://www.ixsystems.com/) for sponsoring the final push to land this feature into OpenZFS.\r\n\r\nThanks also to contributors @FedorUporovVstack, @stuartmaybee, @thorsteneb, and @Fmstrat for portions\r\nof the implementation.\r\n\r\nSponsored-by: The FreeBSD Foundation\r\nSponsored-by: iXsystems, Inc.\r\nSponsored-by: vStack\r\nContributions-by: Stuart Maybee [stuart.maybee@comcast.net](mailto:stuart.maybee@comcast.net)\r\nContributions-by: Fedor Uporov [fuporov.vstack@gmail.com](mailto:fuporov.vstack@gmail.com)\r\nContributions-by: Thorsten Behrens [tbehrens@outlook.com](mailto:tbehrens@outlook.com)\r\nContributions-by: Fmstrat [nospam@nowsci.com](mailto:nospam@nowsci.com)\r\nContributions-by: Don Brady <dev.fs.zfs@gmail.com>\r\n\r\n### How Has This Been Tested?\r\nTests added to the ZFS Test Suite (`functional/raidz`) and `ztest`, in addition to manual testing.\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [x] New feature (non-breaking change which adds functionality)\r\n- [ ] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n- [x] I have updated the documentation accordingly.\r\n- [x] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [x] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [ ] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n\r\n### Pull Request Comments\r\nPlease limit comments here to code review/feedback and testing questions/results.\r\n\r\nFor generic discussions about RAID-Z, or discussions on future enhancements to RAIDZ expansion, please use [RAIDZ Expansion feature discussions](https://github.com/openzfs/zfs/discussions/15232).",
                "created_at": "2023-06-29T15:15:15Z",
                "updated_at": "2023-10-27T04:32:07Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "d997f55586843c7466f6c98634170b93c03adb9c",
                "assignee": {
                    "login": "mmaybee",
                    "id": 44241648,
                    "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/mmaybee",
                    "html_url": "https://github.com/mmaybee",
                    "followers_url": "https://api.github.com/users/mmaybee/followers",
                    "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                    "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                    "repos_url": "https://api.github.com/users/mmaybee/repos",
                    "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "mmaybee",
                        "id": 44241648,
                        "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mmaybee",
                        "html_url": "https://github.com/mmaybee",
                        "followers_url": "https://api.github.com/users/mmaybee/followers",
                        "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                        "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                        "repos_url": "https://api.github.com/users/mmaybee/repos",
                        "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 40358,
                        "node_id": "MDU6TGFiZWw0MDM1OA==",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Feature",
                        "name": "Type: Feature",
                        "color": "02d7e1",
                        "default": false,
                        "description": "Feature request or new feature"
                    },
                    {
                        "id": 1007099007,
                        "node_id": "MDU6TGFiZWwxMDA3MDk5MDA3",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Status:%20Accepted",
                        "name": "Status: Accepted",
                        "color": "00b33c",
                        "default": false,
                        "description": "Ready to integrate (reviewed, tested)"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits",
                "review_comments_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments",
                "review_comment_url": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments",
                "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/680f858f2cebcc12ad524c522ee14b838c0ab882",
                "head": {
                    "label": "don-brady:raidz-expansion",
                    "ref": "raidz-expansion",
                    "sha": "680f858f2cebcc12ad524c522ee14b838c0ab882",
                    "user": {
                        "login": "don-brady",
                        "id": 12415697,
                        "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                        "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/don-brady",
                        "html_url": "https://github.com/don-brady",
                        "followers_url": "https://api.github.com/users/don-brady/followers",
                        "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                        "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                        "organizations_url": "https://api.github.com/users/don-brady/orgs",
                        "repos_url": "https://api.github.com/users/don-brady/repos",
                        "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/don-brady/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 425096697,
                        "node_id": "R_kgDOGVZ1-Q",
                        "name": "openzfs",
                        "full_name": "don-brady/openzfs",
                        "private": false,
                        "owner": {
                            "login": "don-brady",
                            "id": 12415697,
                            "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/don-brady",
                            "html_url": "https://github.com/don-brady",
                            "followers_url": "https://api.github.com/users/don-brady/followers",
                            "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                            "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                            "organizations_url": "https://api.github.com/users/don-brady/orgs",
                            "repos_url": "https://api.github.com/users/don-brady/repos",
                            "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/don-brady/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/don-brady/openzfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": true,
                        "url": "https://api.github.com/repos/don-brady/openzfs",
                        "forks_url": "https://api.github.com/repos/don-brady/openzfs/forks",
                        "keys_url": "https://api.github.com/repos/don-brady/openzfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/don-brady/openzfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/don-brady/openzfs/teams",
                        "hooks_url": "https://api.github.com/repos/don-brady/openzfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/don-brady/openzfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/don-brady/openzfs/events",
                        "assignees_url": "https://api.github.com/repos/don-brady/openzfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/don-brady/openzfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/don-brady/openzfs/tags",
                        "blobs_url": "https://api.github.com/repos/don-brady/openzfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/don-brady/openzfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/don-brady/openzfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/don-brady/openzfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/don-brady/openzfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/don-brady/openzfs/languages",
                        "stargazers_url": "https://api.github.com/repos/don-brady/openzfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/don-brady/openzfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/don-brady/openzfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/don-brady/openzfs/subscription",
                        "commits_url": "https://api.github.com/repos/don-brady/openzfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/don-brady/openzfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/don-brady/openzfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/don-brady/openzfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/don-brady/openzfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/don-brady/openzfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/don-brady/openzfs/merges",
                        "archive_url": "https://api.github.com/repos/don-brady/openzfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/don-brady/openzfs/downloads",
                        "issues_url": "https://api.github.com/repos/don-brady/openzfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/don-brady/openzfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/don-brady/openzfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/don-brady/openzfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/don-brady/openzfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/don-brady/openzfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/don-brady/openzfs/deployments",
                        "created_at": "2021-11-05T22:10:31Z",
                        "updated_at": "2023-04-19T17:10:15Z",
                        "pushed_at": "2023-10-27T04:31:55Z",
                        "git_url": "git://github.com/don-brady/openzfs.git",
                        "ssh_url": "git@github.com:don-brady/openzfs.git",
                        "clone_url": "https://github.com/don-brady/openzfs.git",
                        "svn_url": "https://github.com/don-brady/openzfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 120216,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "C",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 5,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 5,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "openzfs:master",
                    "ref": "master",
                    "sha": "9facf2d1ad0c4857de1d47a2a14e882a3fb78b89",
                    "user": {
                        "login": "openzfs",
                        "id": 4510897,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/openzfs",
                        "html_url": "https://github.com/openzfs",
                        "followers_url": "https://api.github.com/users/openzfs/followers",
                        "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                        "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                        "organizations_url": "https://api.github.com/users/openzfs/orgs",
                        "repos_url": "https://api.github.com/users/openzfs/repos",
                        "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/openzfs/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 437011,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0MzcwMTE=",
                        "name": "zfs",
                        "full_name": "openzfs/zfs",
                        "private": false,
                        "owner": {
                            "login": "openzfs",
                            "id": 4510897,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/openzfs",
                            "html_url": "https://github.com/openzfs",
                            "followers_url": "https://api.github.com/users/openzfs/followers",
                            "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                            "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                            "organizations_url": "https://api.github.com/users/openzfs/orgs",
                            "repos_url": "https://api.github.com/users/openzfs/repos",
                            "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/openzfs/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/openzfs/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": false,
                        "url": "https://api.github.com/repos/openzfs/zfs",
                        "forks_url": "https://api.github.com/repos/openzfs/zfs/forks",
                        "keys_url": "https://api.github.com/repos/openzfs/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/openzfs/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/openzfs/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/openzfs/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/openzfs/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/openzfs/zfs/events",
                        "assignees_url": "https://api.github.com/repos/openzfs/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/openzfs/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/openzfs/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/openzfs/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/openzfs/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/openzfs/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/openzfs/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/openzfs/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/openzfs/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/openzfs/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/openzfs/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/openzfs/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/openzfs/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/openzfs/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/openzfs/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/openzfs/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/openzfs/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/openzfs/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/openzfs/zfs/merges",
                        "archive_url": "https://api.github.com/repos/openzfs/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/openzfs/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/openzfs/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/openzfs/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/openzfs/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/openzfs/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/openzfs/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/openzfs/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/openzfs/zfs/deployments",
                        "created_at": "2009-12-14T20:20:34Z",
                        "updated_at": "2023-10-26T23:39:14Z",
                        "pushed_at": "2023-10-27T04:31:58Z",
                        "git_url": "git://github.com/openzfs/zfs.git",
                        "ssh_url": "git@github.com:openzfs/zfs.git",
                        "clone_url": "https://github.com/openzfs/zfs.git",
                        "svn_url": "https://github.com/openzfs/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 124672,
                        "stargazers_count": 9636,
                        "watchers_count": 9636,
                        "language": "C",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": true,
                        "forks_count": 1668,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1194,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": true,
                        "topics": [
                            "file-system",
                            "openzfs",
                            "system-software"
                        ],
                        "visibility": "public",
                        "forks": 1668,
                        "open_issues": 1194,
                        "watchers": 9636,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/openzfs/zfs/statuses/680f858f2cebcc12ad524c522ee14b838c0ab882"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T04:32:07Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32887994529",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 12415697,
            "login": "don-brady",
            "display_login": "don-brady",
            "gravatar_id": "",
            "url": "https://api.github.com/users/don-brady",
            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1700981706,
                "node_id": "PRR_kwDOAAarE85lYuvK",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "submitted_at": "2023-10-27T04:32:07Z",
                "state": "commented",
                "html_url": "https://github.com/openzfs/zfs/pull/15022#pullrequestreview-1700981706",
                "pull_request_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022#pullrequestreview-1700981706"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "id": 1413536769,
                "node_id": "PR_kwDOAAarE85UQNwB",
                "html_url": "https://github.com/openzfs/zfs/pull/15022",
                "diff_url": "https://github.com/openzfs/zfs/pull/15022.diff",
                "patch_url": "https://github.com/openzfs/zfs/pull/15022.patch",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15022",
                "number": 15022,
                "state": "open",
                "locked": false,
                "title": "raidz expansion feature",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "### Motivation and Context\r\nThis feature allows disks to be added one at a time to a RAID-Z group, expanding its capacity incrementally. This feature is especially useful for small pools (typically with only one RAID-Z group), where there isn't sufficient hardware to add capacity by adding a whole new RAID-Z group (typically doubling the number of disks).\r\n\r\nFor additional context as well as a design overview, see Matt Ahrens' talk at the [2021 FreeBSD Developer Summit](https://wiki.freebsd.org/DevSummit/202106) ([video](https://youtu.be/3SUKJye54aI?t=6166)) ([slides](https://docs.google.com/presentation/d/1FeQgEwChrtNQBHfWSNsPK3Y53O5BnPh3Cz5nRa5GAQY/edit#slide=id.p)), and a [news article from Ars Technica](https://arstechnica.com/gadgets/2021/06/raidz-expansion-code-lands-in-openzfs-master/).\r\n\r\n### Description\r\n#### Initiating expansion\r\nA new device (disk) can be attached to an existing RAIDZ vdev, by running `zpool attach POOL raidzP-N NEW_DEVICE`, e.g. `zpool attach tank raidz2-0 sda`. The new device will become part of the RAIDZ group. A _raidz expansion_ will\r\nbe initiated, and the new device will contribute additional space to the RAIDZ group once the expansion completes.\r\n\r\nThe `feature@raidz_expansion` on-disk feature flag must be `enabled` to initiate an expansion, and it remains `active` for the life of the pool. In other words, pools with expanded RAIDZ vdevs can not be imported by older releases of the ZFS software.\r\n\r\n#### During expansion\r\nThe expansion entails reading all allocated space from existing disks in the RAIDZ group, and rewriting it to the new disks in the RAIDZ group (including the newly added device).\r\n\r\nThe expansion progress can be monitored with `zpool status`.\r\n\r\nData redundancy is maintained during (and after) the expansion. If a disk fails while the expansion is in progress, the expansion pauses until the health of the RAIDZ vdev is restored (e.g. by replacing the failed disk and waiting\r\nfor reconstruction to complete).\r\n\r\nThe pool remains accessible during expansion. Following a reboot or export/import, the expansion resumes where it left off.\r\n\r\n#### After expansion\r\nWhen the expansion completes, the additional space is available for use, and is reflected in the `available` zfs property (as seen in `zfs list`, `df`, etc).\r\n\r\nExpansion does not change the number of failures that can be tolerated without data loss (e.g. a RAIDZ2 is still a RAIDZ2 even after expansion).\r\n\r\nA RAIDZ vdev can be expanded multiple times.\r\n\r\nAfter the expansion completes, old blocks remain with their old data-to-parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distributed among the larger set of disks. New blocks will be written with the new data-to-parity\r\nratio (e.g. a 5-wide RAIDZ2 which has been expanded once to 6-wide, has 4 data to 2 parity). However, the RAIDZ vdev's \"assumed parity ratio\" does not change, so slightly less space than is expected may be reported for newly-written blocks, according to `zfs list`, `df`, `ls -s`, and similar tools.\r\n\r\n#### Manpage changes\r\nzpool-attach.8:\r\n```\r\nNAME\r\n     zpool-attach \u2014 attach new device to existing ZFS vdev\r\n\r\nSYNOPSIS\r\n     zpool attach [-fsw] [-o property=value] pool device new_device\r\n\r\nDESCRIPTION\r\n     Attaches new_device to the existing device.  The behavior differs depend\u2010\r\n     ing on if the existing device is a RAIDZ device, or a mirror/plain\r\n     device.\r\n\r\n     If the existing device is a mirror or plain device ...\r\n\r\n     If the existing device is a RAIDZ device (e.g. specified as \"raidz2-0\"),\r\n     the new device will become part of that RAIDZ group.  A \"raidz expansion\"\r\n     will be initiated, and the new device will contribute additional space to\r\n     the RAIDZ group once the expansion completes.  The expansion entails\r\n     reading all allocated space from existing disks in the RAIDZ group, and\r\n     rewriting it to the new disks in the RAIDZ group (including the newly\r\n     added device).  Its progress can be monitored with zpool status.\r\n\r\n     Data redundancy is maintained during and after the expansion.  If a disk\r\n     fails while the expansion is in progress, the expansion pauses until the\r\n     health of the RAIDZ vdev is restored (e.g. by replacing the failed disk\r\n     and waiting for reconstruction to complete).  Expansion does not change\r\n     the number of failures that can be tolerated without data loss (e.g. a\r\n     RAIDZ2 is still a RAIDZ2 even after expansion).  A RAIDZ vdev can be\r\n     expanded multiple times.\r\n\r\n     After the expansion completes, old blocks remain with their old data-to-\r\n     parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distrib\u2010\r\n     uted among the larger set of disks.  New blocks will be written with the\r\n     new data-to-parity ratio (e.g. a 5-wide RAIDZ2 which has been expanded\r\n     once to 6-wide, has 4 data to 2 parity).  However, the RAIDZ vdev's\r\n     \"assumed parity ratio\" does not change, so slightly less space than is\r\n     expected may be reported for newly-written blocks, according to zfs list,\r\n     df, ls -s, and similar tools.\r\n```\r\n#### Status\r\nMatt Ahrens' original pull request (#12225) has been rebased here to current master branch and updated to incorporate recent code cleanups in the OpenZFS codebase. This feature is believed to be complete. However, like all PR's, it is subject to change as part of the code review process. Since this PR includes on-disk changes, it shouldn't be used on production systems before it is integrated to the OpenZFS codebase. Tasks that still need to be done before integration:\r\n- [x] Additional code cleanup in `ztest` code\r\n- [x] `zloop` changes to drive coverage of this feature\r\n- [ ] Address test failures in `ztest` runs\r\n- [x] Document the high-level design in a \"big theory statement\" comment\r\n- [x] Remove verbose logging\r\n- [x] Detection of MBR partitions using reserved boot area (FreeBSD BTX boot loader)\r\n- [ ] Address any performance concerns\r\n\r\n### Acknowledgments\r\nThank you to the [FreeBSD Foundation](https://freebsdfoundation.org/) for commissioning this work in 2017 and continuing to sponsor it well past the original time estimates!\r\nThank you to [iXsystems](https://www.ixsystems.com/) for sponsoring the final push to land this feature into OpenZFS.\r\n\r\nThanks also to contributors @FedorUporovVstack, @stuartmaybee, @thorsteneb, and @Fmstrat for portions\r\nof the implementation.\r\n\r\nSponsored-by: The FreeBSD Foundation\r\nSponsored-by: iXsystems, Inc.\r\nSponsored-by: vStack\r\nContributions-by: Stuart Maybee [stuart.maybee@comcast.net](mailto:stuart.maybee@comcast.net)\r\nContributions-by: Fedor Uporov [fuporov.vstack@gmail.com](mailto:fuporov.vstack@gmail.com)\r\nContributions-by: Thorsten Behrens [tbehrens@outlook.com](mailto:tbehrens@outlook.com)\r\nContributions-by: Fmstrat [nospam@nowsci.com](mailto:nospam@nowsci.com)\r\nContributions-by: Don Brady <dev.fs.zfs@gmail.com>\r\n\r\n### How Has This Been Tested?\r\nTests added to the ZFS Test Suite (`functional/raidz`) and `ztest`, in addition to manual testing.\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [x] New feature (non-breaking change which adds functionality)\r\n- [ ] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n- [x] I have updated the documentation accordingly.\r\n- [x] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [x] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [ ] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n\r\n### Pull Request Comments\r\nPlease limit comments here to code review/feedback and testing questions/results.\r\n\r\nFor generic discussions about RAID-Z, or discussions on future enhancements to RAIDZ expansion, please use [RAIDZ Expansion feature discussions](https://github.com/openzfs/zfs/discussions/15232).",
                "created_at": "2023-06-29T15:15:15Z",
                "updated_at": "2023-10-27T04:32:07Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "d997f55586843c7466f6c98634170b93c03adb9c",
                "assignee": {
                    "login": "mmaybee",
                    "id": 44241648,
                    "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/mmaybee",
                    "html_url": "https://github.com/mmaybee",
                    "followers_url": "https://api.github.com/users/mmaybee/followers",
                    "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                    "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                    "repos_url": "https://api.github.com/users/mmaybee/repos",
                    "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "mmaybee",
                        "id": 44241648,
                        "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mmaybee",
                        "html_url": "https://github.com/mmaybee",
                        "followers_url": "https://api.github.com/users/mmaybee/followers",
                        "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                        "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                        "repos_url": "https://api.github.com/users/mmaybee/repos",
                        "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 40358,
                        "node_id": "MDU6TGFiZWw0MDM1OA==",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Feature",
                        "name": "Type: Feature",
                        "color": "02d7e1",
                        "default": false,
                        "description": "Feature request or new feature"
                    },
                    {
                        "id": 1007099007,
                        "node_id": "MDU6TGFiZWwxMDA3MDk5MDA3",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Status:%20Accepted",
                        "name": "Status: Accepted",
                        "color": "00b33c",
                        "default": false,
                        "description": "Ready to integrate (reviewed, tested)"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits",
                "review_comments_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments",
                "review_comment_url": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments",
                "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/680f858f2cebcc12ad524c522ee14b838c0ab882",
                "head": {
                    "label": "don-brady:raidz-expansion",
                    "ref": "raidz-expansion",
                    "sha": "680f858f2cebcc12ad524c522ee14b838c0ab882",
                    "user": {
                        "login": "don-brady",
                        "id": 12415697,
                        "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                        "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/don-brady",
                        "html_url": "https://github.com/don-brady",
                        "followers_url": "https://api.github.com/users/don-brady/followers",
                        "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                        "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                        "organizations_url": "https://api.github.com/users/don-brady/orgs",
                        "repos_url": "https://api.github.com/users/don-brady/repos",
                        "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/don-brady/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 425096697,
                        "node_id": "R_kgDOGVZ1-Q",
                        "name": "openzfs",
                        "full_name": "don-brady/openzfs",
                        "private": false,
                        "owner": {
                            "login": "don-brady",
                            "id": 12415697,
                            "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/don-brady",
                            "html_url": "https://github.com/don-brady",
                            "followers_url": "https://api.github.com/users/don-brady/followers",
                            "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                            "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                            "organizations_url": "https://api.github.com/users/don-brady/orgs",
                            "repos_url": "https://api.github.com/users/don-brady/repos",
                            "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/don-brady/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/don-brady/openzfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": true,
                        "url": "https://api.github.com/repos/don-brady/openzfs",
                        "forks_url": "https://api.github.com/repos/don-brady/openzfs/forks",
                        "keys_url": "https://api.github.com/repos/don-brady/openzfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/don-brady/openzfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/don-brady/openzfs/teams",
                        "hooks_url": "https://api.github.com/repos/don-brady/openzfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/don-brady/openzfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/don-brady/openzfs/events",
                        "assignees_url": "https://api.github.com/repos/don-brady/openzfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/don-brady/openzfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/don-brady/openzfs/tags",
                        "blobs_url": "https://api.github.com/repos/don-brady/openzfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/don-brady/openzfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/don-brady/openzfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/don-brady/openzfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/don-brady/openzfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/don-brady/openzfs/languages",
                        "stargazers_url": "https://api.github.com/repos/don-brady/openzfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/don-brady/openzfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/don-brady/openzfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/don-brady/openzfs/subscription",
                        "commits_url": "https://api.github.com/repos/don-brady/openzfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/don-brady/openzfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/don-brady/openzfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/don-brady/openzfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/don-brady/openzfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/don-brady/openzfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/don-brady/openzfs/merges",
                        "archive_url": "https://api.github.com/repos/don-brady/openzfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/don-brady/openzfs/downloads",
                        "issues_url": "https://api.github.com/repos/don-brady/openzfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/don-brady/openzfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/don-brady/openzfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/don-brady/openzfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/don-brady/openzfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/don-brady/openzfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/don-brady/openzfs/deployments",
                        "created_at": "2021-11-05T22:10:31Z",
                        "updated_at": "2023-04-19T17:10:15Z",
                        "pushed_at": "2023-10-27T04:31:55Z",
                        "git_url": "git://github.com/don-brady/openzfs.git",
                        "ssh_url": "git@github.com:don-brady/openzfs.git",
                        "clone_url": "https://github.com/don-brady/openzfs.git",
                        "svn_url": "https://github.com/don-brady/openzfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 120216,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "C",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 5,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 5,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "openzfs:master",
                    "ref": "master",
                    "sha": "9facf2d1ad0c4857de1d47a2a14e882a3fb78b89",
                    "user": {
                        "login": "openzfs",
                        "id": 4510897,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/openzfs",
                        "html_url": "https://github.com/openzfs",
                        "followers_url": "https://api.github.com/users/openzfs/followers",
                        "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                        "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                        "organizations_url": "https://api.github.com/users/openzfs/orgs",
                        "repos_url": "https://api.github.com/users/openzfs/repos",
                        "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/openzfs/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 437011,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0MzcwMTE=",
                        "name": "zfs",
                        "full_name": "openzfs/zfs",
                        "private": false,
                        "owner": {
                            "login": "openzfs",
                            "id": 4510897,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/openzfs",
                            "html_url": "https://github.com/openzfs",
                            "followers_url": "https://api.github.com/users/openzfs/followers",
                            "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                            "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                            "organizations_url": "https://api.github.com/users/openzfs/orgs",
                            "repos_url": "https://api.github.com/users/openzfs/repos",
                            "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/openzfs/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/openzfs/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": false,
                        "url": "https://api.github.com/repos/openzfs/zfs",
                        "forks_url": "https://api.github.com/repos/openzfs/zfs/forks",
                        "keys_url": "https://api.github.com/repos/openzfs/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/openzfs/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/openzfs/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/openzfs/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/openzfs/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/openzfs/zfs/events",
                        "assignees_url": "https://api.github.com/repos/openzfs/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/openzfs/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/openzfs/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/openzfs/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/openzfs/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/openzfs/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/openzfs/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/openzfs/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/openzfs/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/openzfs/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/openzfs/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/openzfs/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/openzfs/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/openzfs/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/openzfs/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/openzfs/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/openzfs/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/openzfs/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/openzfs/zfs/merges",
                        "archive_url": "https://api.github.com/repos/openzfs/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/openzfs/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/openzfs/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/openzfs/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/openzfs/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/openzfs/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/openzfs/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/openzfs/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/openzfs/zfs/deployments",
                        "created_at": "2009-12-14T20:20:34Z",
                        "updated_at": "2023-10-26T23:39:14Z",
                        "pushed_at": "2023-10-27T04:31:58Z",
                        "git_url": "git://github.com/openzfs/zfs.git",
                        "ssh_url": "git@github.com:openzfs/zfs.git",
                        "clone_url": "https://github.com/openzfs/zfs.git",
                        "svn_url": "https://github.com/openzfs/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 124672,
                        "stargazers_count": 9636,
                        "watchers_count": 9636,
                        "language": "C",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": true,
                        "forks_count": 1668,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1194,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": true,
                        "topics": [
                            "file-system",
                            "openzfs",
                            "system-software"
                        ],
                        "visibility": "public",
                        "forks": 1668,
                        "open_issues": 1194,
                        "watchers": 9636,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/openzfs/zfs/statuses/680f858f2cebcc12ad524c522ee14b838c0ab882"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T04:32:08Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32884726708",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 148917,
            "login": "behlendorf",
            "display_login": "behlendorf",
            "gravatar_id": "",
            "url": "https://api.github.com/users/behlendorf",
            "avatar_url": "https://avatars.githubusercontent.com/u/148917?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1373930386",
                "pull_request_review_id": 1700679135,
                "id": 1373930386,
                "node_id": "PRRC_kwDOAAarE85R5IOS",
                "diff_hunk": "@@ -8195,6 +8207,102 @@ print_removal_status(zpool_handle_t *zhp, pool_removal_stat_t *prs)\n \t}\n }\n \n+/*\n+ * Print out detailed raidz expansion status.\n+ */\n+static void\n+print_raidz_expand_status(zpool_handle_t *zhp, pool_raidz_expand_stat_t *pres)\n+{\n+\tchar copied_buf[7];\n+\n+\tif (pres == NULL || pres->pres_state == DSS_NONE)\n+\t\treturn;\n+\n+\t/*\n+\t * Determine name of vdev.\n+\t */\n+\tnvlist_t *config = zpool_get_config(zhp, NULL);\n+\tnvlist_t *nvroot = fnvlist_lookup_nvlist(config,\n+\t    ZPOOL_CONFIG_VDEV_TREE);\n+\tnvlist_t **child;\n+\tuint_t children;\n+\tverify(nvlist_lookup_nvlist_array(nvroot, ZPOOL_CONFIG_CHILDREN,\n+\t    &child, &children) == 0);\n+\tassert(pres->pres_expanding_vdev < children);\n+\n+\tprintf_color(ANSI_BOLD, gettext(\"raidz expand: \"));\n+\n+\ttime_t start = pres->pres_start_time;\n+\ttime_t end = pres->pres_end_time;\n+\tchar *vname =\n+\t    zpool_vdev_name(g_zfs, zhp, child[pres->pres_expanding_vdev], 0);\n+\tzfs_nicenum(pres->pres_reflowed, copied_buf, sizeof (copied_buf));\n+\n+\t/*\n+\t * Expansion is finished or canceled.\n+\t */\n+\tif (pres->pres_state == DSS_FINISHED) {\n+\t\tuint64_t minutes_taken = (end - start) / 60;\n+\n+\t\t(void) printf(gettext(\"Expansion of %s-%u copied %s \"\n+\t\t    \"in %lluh%um, completed on %s\"),\n+\t\t    vname,\n+\t\t    (int)pres->pres_expanding_vdev,\n+\t\t    copied_buf,\n+\t\t    (u_longlong_t)(minutes_taken / 60),\n+\t\t    (uint_t)(minutes_taken % 60),\n+\t\t    ctime((time_t *)&end));\n+\t} else {\n+\t\tchar examined_buf[7], total_buf[7], rate_buf[7];\n+\t\tuint64_t copied, total, elapsed, secs_left;\n+\t\tdouble fraction_done;\n+\t\tuint_t rate;\n+\n+\t\tassert(pres->pres_state == DSS_SCANNING);\n+\n+\t\t/*\n+\t\t * Expansion is in progress.\n+\t\t */\n+\t\t(void) printf(gettext(\n+\t\t    \"Expansion of %s-%u in progress since %s\"),",
                "path": "cmd/zpool/zpool_main.c",
                "commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "original_commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "user": {
                    "login": "behlendorf",
                    "id": 148917,
                    "node_id": "MDQ6VXNlcjE0ODkxNw==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/148917?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/behlendorf",
                    "html_url": "https://github.com/behlendorf",
                    "followers_url": "https://api.github.com/users/behlendorf/followers",
                    "following_url": "https://api.github.com/users/behlendorf/following{/other_user}",
                    "gists_url": "https://api.github.com/users/behlendorf/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/behlendorf/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/behlendorf/subscriptions",
                    "organizations_url": "https://api.github.com/users/behlendorf/orgs",
                    "repos_url": "https://api.github.com/users/behlendorf/repos",
                    "events_url": "https://api.github.com/users/behlendorf/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/behlendorf/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "```suggestion\r\n\t\t    \"expansion of %s-%u in progress since %s\"),\r\n```\r\n\r\nnit: I'd rather this be capitalized as well, but switching it to lower cause is consistent with the existing resilver and scrub scan status output.",
                "created_at": "2023-10-26T23:47:38Z",
                "updated_at": "2023-10-27T00:12:33Z",
                "html_url": "https://github.com/openzfs/zfs/pull/15022#discussion_r1373930386",
                "pull_request_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1373930386"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022#discussion_r1373930386"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1373930386/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": null,
                "original_start_line": null,
                "start_side": null,
                "line": 8267,
                "original_line": 8267,
                "side": "RIGHT",
                "original_position": 110,
                "position": 110,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "id": 1413536769,
                "node_id": "PR_kwDOAAarE85UQNwB",
                "html_url": "https://github.com/openzfs/zfs/pull/15022",
                "diff_url": "https://github.com/openzfs/zfs/pull/15022.diff",
                "patch_url": "https://github.com/openzfs/zfs/pull/15022.patch",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15022",
                "number": 15022,
                "state": "open",
                "locked": false,
                "title": "raidz expansion feature",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "### Motivation and Context\r\nThis feature allows disks to be added one at a time to a RAID-Z group, expanding its capacity incrementally. This feature is especially useful for small pools (typically with only one RAID-Z group), where there isn't sufficient hardware to add capacity by adding a whole new RAID-Z group (typically doubling the number of disks).\r\n\r\nFor additional context as well as a design overview, see Matt Ahrens' talk at the [2021 FreeBSD Developer Summit](https://wiki.freebsd.org/DevSummit/202106) ([video](https://youtu.be/3SUKJye54aI?t=6166)) ([slides](https://docs.google.com/presentation/d/1FeQgEwChrtNQBHfWSNsPK3Y53O5BnPh3Cz5nRa5GAQY/edit#slide=id.p)), and a [news article from Ars Technica](https://arstechnica.com/gadgets/2021/06/raidz-expansion-code-lands-in-openzfs-master/).\r\n\r\n### Description\r\n#### Initiating expansion\r\nA new device (disk) can be attached to an existing RAIDZ vdev, by running `zpool attach POOL raidzP-N NEW_DEVICE`, e.g. `zpool attach tank raidz2-0 sda`. The new device will become part of the RAIDZ group. A _raidz expansion_ will\r\nbe initiated, and the new device will contribute additional space to the RAIDZ group once the expansion completes.\r\n\r\nThe `feature@raidz_expansion` on-disk feature flag must be `enabled` to initiate an expansion, and it remains `active` for the life of the pool. In other words, pools with expanded RAIDZ vdevs can not be imported by older releases of the ZFS software.\r\n\r\n#### During expansion\r\nThe expansion entails reading all allocated space from existing disks in the RAIDZ group, and rewriting it to the new disks in the RAIDZ group (including the newly added device).\r\n\r\nThe expansion progress can be monitored with `zpool status`.\r\n\r\nData redundancy is maintained during (and after) the expansion. If a disk fails while the expansion is in progress, the expansion pauses until the health of the RAIDZ vdev is restored (e.g. by replacing the failed disk and waiting\r\nfor reconstruction to complete).\r\n\r\nThe pool remains accessible during expansion. Following a reboot or export/import, the expansion resumes where it left off.\r\n\r\n#### After expansion\r\nWhen the expansion completes, the additional space is available for use, and is reflected in the `available` zfs property (as seen in `zfs list`, `df`, etc).\r\n\r\nExpansion does not change the number of failures that can be tolerated without data loss (e.g. a RAIDZ2 is still a RAIDZ2 even after expansion).\r\n\r\nA RAIDZ vdev can be expanded multiple times.\r\n\r\nAfter the expansion completes, old blocks remain with their old data-to-parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distributed among the larger set of disks. New blocks will be written with the new data-to-parity\r\nratio (e.g. a 5-wide RAIDZ2 which has been expanded once to 6-wide, has 4 data to 2 parity). However, the RAIDZ vdev's \"assumed parity ratio\" does not change, so slightly less space than is expected may be reported for newly-written blocks, according to `zfs list`, `df`, `ls -s`, and similar tools.\r\n\r\n#### Manpage changes\r\nzpool-attach.8:\r\n```\r\nNAME\r\n     zpool-attach \u2014 attach new device to existing ZFS vdev\r\n\r\nSYNOPSIS\r\n     zpool attach [-fsw] [-o property=value] pool device new_device\r\n\r\nDESCRIPTION\r\n     Attaches new_device to the existing device.  The behavior differs depend\u2010\r\n     ing on if the existing device is a RAIDZ device, or a mirror/plain\r\n     device.\r\n\r\n     If the existing device is a mirror or plain device ...\r\n\r\n     If the existing device is a RAIDZ device (e.g. specified as \"raidz2-0\"),\r\n     the new device will become part of that RAIDZ group.  A \"raidz expansion\"\r\n     will be initiated, and the new device will contribute additional space to\r\n     the RAIDZ group once the expansion completes.  The expansion entails\r\n     reading all allocated space from existing disks in the RAIDZ group, and\r\n     rewriting it to the new disks in the RAIDZ group (including the newly\r\n     added device).  Its progress can be monitored with zpool status.\r\n\r\n     Data redundancy is maintained during and after the expansion.  If a disk\r\n     fails while the expansion is in progress, the expansion pauses until the\r\n     health of the RAIDZ vdev is restored (e.g. by replacing the failed disk\r\n     and waiting for reconstruction to complete).  Expansion does not change\r\n     the number of failures that can be tolerated without data loss (e.g. a\r\n     RAIDZ2 is still a RAIDZ2 even after expansion).  A RAIDZ vdev can be\r\n     expanded multiple times.\r\n\r\n     After the expansion completes, old blocks remain with their old data-to-\r\n     parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distrib\u2010\r\n     uted among the larger set of disks.  New blocks will be written with the\r\n     new data-to-parity ratio (e.g. a 5-wide RAIDZ2 which has been expanded\r\n     once to 6-wide, has 4 data to 2 parity).  However, the RAIDZ vdev's\r\n     \"assumed parity ratio\" does not change, so slightly less space than is\r\n     expected may be reported for newly-written blocks, according to zfs list,\r\n     df, ls -s, and similar tools.\r\n```\r\n#### Status\r\nMatt Ahrens' original pull request (#12225) has been rebased here to current master branch and updated to incorporate recent code cleanups in the OpenZFS codebase. This feature is believed to be complete. However, like all PR's, it is subject to change as part of the code review process. Since this PR includes on-disk changes, it shouldn't be used on production systems before it is integrated to the OpenZFS codebase. Tasks that still need to be done before integration:\r\n- [x] Additional code cleanup in `ztest` code\r\n- [x] `zloop` changes to drive coverage of this feature\r\n- [ ] Address test failures in `ztest` runs\r\n- [x] Document the high-level design in a \"big theory statement\" comment\r\n- [x] Remove verbose logging\r\n- [x] Detection of MBR partitions using reserved boot area (FreeBSD BTX boot loader)\r\n- [ ] Address any performance concerns\r\n\r\n### Acknowledgments\r\nThank you to the [FreeBSD Foundation](https://freebsdfoundation.org/) for commissioning this work in 2017 and continuing to sponsor it well past the original time estimates!\r\nThank you to [iXsystems](https://www.ixsystems.com/) for sponsoring the final push to land this feature into OpenZFS.\r\n\r\nThanks also to contributors @FedorUporovVstack, @stuartmaybee, @thorsteneb, and @Fmstrat for portions\r\nof the implementation.\r\n\r\nSponsored-by: The FreeBSD Foundation\r\nSponsored-by: iXsystems, Inc.\r\nSponsored-by: vStack\r\nContributions-by: Stuart Maybee [stuart.maybee@comcast.net](mailto:stuart.maybee@comcast.net)\r\nContributions-by: Fedor Uporov [fuporov.vstack@gmail.com](mailto:fuporov.vstack@gmail.com)\r\nContributions-by: Thorsten Behrens [tbehrens@outlook.com](mailto:tbehrens@outlook.com)\r\nContributions-by: Fmstrat [nospam@nowsci.com](mailto:nospam@nowsci.com)\r\nContributions-by: Don Brady <dev.fs.zfs@gmail.com>\r\n\r\n### How Has This Been Tested?\r\nTests added to the ZFS Test Suite (`functional/raidz`) and `ztest`, in addition to manual testing.\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [x] New feature (non-breaking change which adds functionality)\r\n- [ ] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n- [x] I have updated the documentation accordingly.\r\n- [x] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [x] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [ ] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n\r\n### Pull Request Comments\r\nPlease limit comments here to code review/feedback and testing questions/results.\r\n\r\nFor generic discussions about RAID-Z, or discussions on future enhancements to RAIDZ expansion, please use [RAIDZ Expansion feature discussions](https://github.com/openzfs/zfs/discussions/15232).",
                "created_at": "2023-06-29T15:15:15Z",
                "updated_at": "2023-10-27T00:12:33Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "6fdafbf6e37585581adb097631ff652a5ec35d1d",
                "assignee": {
                    "login": "mmaybee",
                    "id": 44241648,
                    "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/mmaybee",
                    "html_url": "https://github.com/mmaybee",
                    "followers_url": "https://api.github.com/users/mmaybee/followers",
                    "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                    "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                    "repos_url": "https://api.github.com/users/mmaybee/repos",
                    "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "mmaybee",
                        "id": 44241648,
                        "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mmaybee",
                        "html_url": "https://github.com/mmaybee",
                        "followers_url": "https://api.github.com/users/mmaybee/followers",
                        "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                        "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                        "repos_url": "https://api.github.com/users/mmaybee/repos",
                        "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 40358,
                        "node_id": "MDU6TGFiZWw0MDM1OA==",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Feature",
                        "name": "Type: Feature",
                        "color": "02d7e1",
                        "default": false,
                        "description": "Feature request or new feature"
                    },
                    {
                        "id": 1007099007,
                        "node_id": "MDU6TGFiZWwxMDA3MDk5MDA3",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Status:%20Accepted",
                        "name": "Status: Accepted",
                        "color": "00b33c",
                        "default": false,
                        "description": "Ready to integrate (reviewed, tested)"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits",
                "review_comments_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments",
                "review_comment_url": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments",
                "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "head": {
                    "label": "don-brady:raidz-expansion",
                    "ref": "raidz-expansion",
                    "sha": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                    "user": {
                        "login": "don-brady",
                        "id": 12415697,
                        "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                        "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/don-brady",
                        "html_url": "https://github.com/don-brady",
                        "followers_url": "https://api.github.com/users/don-brady/followers",
                        "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                        "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                        "organizations_url": "https://api.github.com/users/don-brady/orgs",
                        "repos_url": "https://api.github.com/users/don-brady/repos",
                        "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/don-brady/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 425096697,
                        "node_id": "R_kgDOGVZ1-Q",
                        "name": "openzfs",
                        "full_name": "don-brady/openzfs",
                        "private": false,
                        "owner": {
                            "login": "don-brady",
                            "id": 12415697,
                            "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/don-brady",
                            "html_url": "https://github.com/don-brady",
                            "followers_url": "https://api.github.com/users/don-brady/followers",
                            "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                            "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                            "organizations_url": "https://api.github.com/users/don-brady/orgs",
                            "repos_url": "https://api.github.com/users/don-brady/repos",
                            "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/don-brady/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/don-brady/openzfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": true,
                        "url": "https://api.github.com/repos/don-brady/openzfs",
                        "forks_url": "https://api.github.com/repos/don-brady/openzfs/forks",
                        "keys_url": "https://api.github.com/repos/don-brady/openzfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/don-brady/openzfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/don-brady/openzfs/teams",
                        "hooks_url": "https://api.github.com/repos/don-brady/openzfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/don-brady/openzfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/don-brady/openzfs/events",
                        "assignees_url": "https://api.github.com/repos/don-brady/openzfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/don-brady/openzfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/don-brady/openzfs/tags",
                        "blobs_url": "https://api.github.com/repos/don-brady/openzfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/don-brady/openzfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/don-brady/openzfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/don-brady/openzfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/don-brady/openzfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/don-brady/openzfs/languages",
                        "stargazers_url": "https://api.github.com/repos/don-brady/openzfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/don-brady/openzfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/don-brady/openzfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/don-brady/openzfs/subscription",
                        "commits_url": "https://api.github.com/repos/don-brady/openzfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/don-brady/openzfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/don-brady/openzfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/don-brady/openzfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/don-brady/openzfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/don-brady/openzfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/don-brady/openzfs/merges",
                        "archive_url": "https://api.github.com/repos/don-brady/openzfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/don-brady/openzfs/downloads",
                        "issues_url": "https://api.github.com/repos/don-brady/openzfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/don-brady/openzfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/don-brady/openzfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/don-brady/openzfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/don-brady/openzfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/don-brady/openzfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/don-brady/openzfs/deployments",
                        "created_at": "2021-11-05T22:10:31Z",
                        "updated_at": "2023-04-19T17:10:15Z",
                        "pushed_at": "2023-10-26T19:13:59Z",
                        "git_url": "git://github.com/don-brady/openzfs.git",
                        "ssh_url": "git@github.com:don-brady/openzfs.git",
                        "clone_url": "https://github.com/don-brady/openzfs.git",
                        "svn_url": "https://github.com/don-brady/openzfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 120216,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "C",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 5,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 5,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "openzfs:master",
                    "ref": "master",
                    "sha": "9facf2d1ad0c4857de1d47a2a14e882a3fb78b89",
                    "user": {
                        "login": "openzfs",
                        "id": 4510897,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/openzfs",
                        "html_url": "https://github.com/openzfs",
                        "followers_url": "https://api.github.com/users/openzfs/followers",
                        "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                        "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                        "organizations_url": "https://api.github.com/users/openzfs/orgs",
                        "repos_url": "https://api.github.com/users/openzfs/repos",
                        "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/openzfs/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 437011,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0MzcwMTE=",
                        "name": "zfs",
                        "full_name": "openzfs/zfs",
                        "private": false,
                        "owner": {
                            "login": "openzfs",
                            "id": 4510897,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/openzfs",
                            "html_url": "https://github.com/openzfs",
                            "followers_url": "https://api.github.com/users/openzfs/followers",
                            "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                            "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                            "organizations_url": "https://api.github.com/users/openzfs/orgs",
                            "repos_url": "https://api.github.com/users/openzfs/repos",
                            "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/openzfs/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/openzfs/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": false,
                        "url": "https://api.github.com/repos/openzfs/zfs",
                        "forks_url": "https://api.github.com/repos/openzfs/zfs/forks",
                        "keys_url": "https://api.github.com/repos/openzfs/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/openzfs/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/openzfs/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/openzfs/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/openzfs/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/openzfs/zfs/events",
                        "assignees_url": "https://api.github.com/repos/openzfs/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/openzfs/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/openzfs/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/openzfs/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/openzfs/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/openzfs/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/openzfs/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/openzfs/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/openzfs/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/openzfs/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/openzfs/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/openzfs/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/openzfs/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/openzfs/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/openzfs/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/openzfs/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/openzfs/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/openzfs/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/openzfs/zfs/merges",
                        "archive_url": "https://api.github.com/repos/openzfs/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/openzfs/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/openzfs/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/openzfs/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/openzfs/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/openzfs/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/openzfs/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/openzfs/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/openzfs/zfs/deployments",
                        "created_at": "2009-12-14T20:20:34Z",
                        "updated_at": "2023-10-26T23:39:14Z",
                        "pushed_at": "2023-10-26T21:09:37Z",
                        "git_url": "git://github.com/openzfs/zfs.git",
                        "ssh_url": "git@github.com:openzfs/zfs.git",
                        "clone_url": "https://github.com/openzfs/zfs.git",
                        "svn_url": "https://github.com/openzfs/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 124672,
                        "stargazers_count": 9636,
                        "watchers_count": 9636,
                        "language": "C",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": true,
                        "forks_count": 1668,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1194,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": true,
                        "topics": [
                            "file-system",
                            "openzfs",
                            "system-software"
                        ],
                        "visibility": "public",
                        "forks": 1668,
                        "open_issues": 1194,
                        "watchers": 9636,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/openzfs/zfs/statuses/1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-26T23:47:38Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32884726693",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 148917,
            "login": "behlendorf",
            "display_login": "behlendorf",
            "gravatar_id": "",
            "url": "https://api.github.com/users/behlendorf",
            "avatar_url": "https://avatars.githubusercontent.com/u/148917?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1373916445",
                "pull_request_review_id": 1700679135,
                "id": 1373916445,
                "node_id": "PRRC_kwDOAAarE85R5E0d",
                "diff_hunk": "@@ -8195,6 +8207,102 @@ print_removal_status(zpool_handle_t *zhp, pool_removal_stat_t *prs)\n \t}\n }\n \n+/*\n+ * Print out detailed raidz expansion status.\n+ */\n+static void\n+print_raidz_expand_status(zpool_handle_t *zhp, pool_raidz_expand_stat_t *pres)\n+{\n+\tchar copied_buf[7];\n+\n+\tif (pres == NULL || pres->pres_state == DSS_NONE)\n+\t\treturn;\n+\n+\t/*\n+\t * Determine name of vdev.\n+\t */\n+\tnvlist_t *config = zpool_get_config(zhp, NULL);\n+\tnvlist_t *nvroot = fnvlist_lookup_nvlist(config,\n+\t    ZPOOL_CONFIG_VDEV_TREE);\n+\tnvlist_t **child;\n+\tuint_t children;\n+\tverify(nvlist_lookup_nvlist_array(nvroot, ZPOOL_CONFIG_CHILDREN,\n+\t    &child, &children) == 0);\n+\tassert(pres->pres_expanding_vdev < children);\n+\n+\tprintf_color(ANSI_BOLD, gettext(\"raidz expand: \"));\n+\n+\ttime_t start = pres->pres_start_time;\n+\ttime_t end = pres->pres_end_time;\n+\tchar *vname =\n+\t    zpool_vdev_name(g_zfs, zhp, child[pres->pres_expanding_vdev], 0);\n+\tzfs_nicenum(pres->pres_reflowed, copied_buf, sizeof (copied_buf));\n+\n+\t/*\n+\t * Expansion is finished or canceled.\n+\t */\n+\tif (pres->pres_state == DSS_FINISHED) {\n+\t\tuint64_t minutes_taken = (end - start) / 60;\n+\n+\t\t(void) printf(gettext(\"Expansion of %s-%u copied %s \"\n+\t\t    \"in %lluh%um, completed on %s\"),\n+\t\t    vname,\n+\t\t    (int)pres->pres_expanding_vdev,\n+\t\t    copied_buf,\n+\t\t    (u_longlong_t)(minutes_taken / 60),\n+\t\t    (uint_t)(minutes_taken % 60),\n+\t\t    ctime((time_t *)&end));\n+\t} else {\n+\t\tchar examined_buf[7], total_buf[7], rate_buf[7];\n+\t\tuint64_t copied, total, elapsed, secs_left;\n+\t\tdouble fraction_done;\n+\t\tuint_t rate;\n+\n+\t\tassert(pres->pres_state == DSS_SCANNING);\n+\n+\t\t/*\n+\t\t * Expansion is in progress.\n+\t\t */\n+\t\t(void) printf(gettext(\n+\t\t    \"Expansion of %s-%u in progress since %s\"),\n+\t\t    vname, (int)pres->pres_expanding_vdev, ctime(&start));\n+\n+\t\tcopied = pres->pres_reflowed > 0 ? pres->pres_reflowed : 1;\n+\t\ttotal = pres->pres_to_reflow;\n+\t\tfraction_done = (double)copied / total;\n+\n+\t\t/* elapsed time for this pass */\n+\t\telapsed = time(NULL) - pres->pres_start_time;\n+\t\telapsed = elapsed > 0 ? elapsed : 1;\n+\t\trate = copied / elapsed;\n+\t\trate = rate > 0 ? rate : 1;\n+\t\tsecs_left = (total - copied) / rate;\n+\n+\t\tzfs_nicenum(copied, examined_buf, sizeof (examined_buf));\n+\t\tzfs_nicenum(total, total_buf, sizeof (total_buf));\n+\t\tzfs_nicenum(rate, rate_buf, sizeof (rate_buf));\n+\n+\t\t/*\n+\t\t * do not print estimated time if hours_left is more than\n+\t\t * 30 days\n+\t\t */\n+\t\t(void) printf(gettext(\"\\t%s copied out of %s at %s/s, \"\n+\t\t    \"%.2f%% done\"),\n+\t\t    examined_buf, total_buf, rate_buf, 100 * fraction_done);\n+\t\tif (pres->pres_waiting_for_resilver) {\n+\t\t\t(void) printf(gettext(\", paused due to io errors, \"\n+\t\t\t    \"waiting for resilver or clear\\n\"));",
                "path": "cmd/zpool/zpool_main.c",
                "commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "original_commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "user": {
                    "login": "behlendorf",
                    "id": 148917,
                    "node_id": "MDQ6VXNlcjE0ODkxNw==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/148917?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/behlendorf",
                    "html_url": "https://github.com/behlendorf",
                    "followers_url": "https://api.github.com/users/behlendorf/followers",
                    "following_url": "https://api.github.com/users/behlendorf/following{/other_user}",
                    "gists_url": "https://api.github.com/users/behlendorf/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/behlendorf/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/behlendorf/subscriptions",
                    "organizations_url": "https://api.github.com/users/behlendorf/orgs",
                    "repos_url": "https://api.github.com/users/behlendorf/repos",
                    "events_url": "https://api.github.com/users/behlendorf/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/behlendorf/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "```c\r\n                       (void) printf(gettext(\", paused for resilver \"\r\n                           \"or clear\\n\"));\r\n```\r\nnit: Again this is to make the output more consistent with resilver and try mind the 80 column.\r\n\r\nHere's updated example output:\r\n\r\n```\r\n  pool: dozer\r\n state: ONLINE\r\nstatus: One or more devices is currently being resilvered.  The pool will\r\n\tcontinue to function, possibly in a degraded state.\r\naction: Wait for the resilver to complete.\r\n  scan: resilver in progress since Thu Oct 26 15:30:13 2023\r\n\t1.52T / 1.52T scanned, 1.32T / 1.52T issued at 1.75G/s\r\n\t125G resilvered, 86.68% done, 00:01:58 to go\r\nraidz expand: expansion of raidz2-0 in progress since Thu Oct 26 15:18:54 2023\r\n\t519G / 783G copied at 149M/s, 66.32% done, paused for resilver or clear\r\n```\r\n",
                "created_at": "2023-10-26T23:21:41Z",
                "updated_at": "2023-10-27T00:12:33Z",
                "html_url": "https://github.com/openzfs/zfs/pull/15022#discussion_r1373916445",
                "pull_request_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1373916445"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022#discussion_r1373916445"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1373916445/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": null,
                "original_start_line": null,
                "start_side": null,
                "line": 8294,
                "original_line": 8294,
                "side": "RIGHT",
                "original_position": 137,
                "position": 137,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "id": 1413536769,
                "node_id": "PR_kwDOAAarE85UQNwB",
                "html_url": "https://github.com/openzfs/zfs/pull/15022",
                "diff_url": "https://github.com/openzfs/zfs/pull/15022.diff",
                "patch_url": "https://github.com/openzfs/zfs/pull/15022.patch",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15022",
                "number": 15022,
                "state": "open",
                "locked": false,
                "title": "raidz expansion feature",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "### Motivation and Context\r\nThis feature allows disks to be added one at a time to a RAID-Z group, expanding its capacity incrementally. This feature is especially useful for small pools (typically with only one RAID-Z group), where there isn't sufficient hardware to add capacity by adding a whole new RAID-Z group (typically doubling the number of disks).\r\n\r\nFor additional context as well as a design overview, see Matt Ahrens' talk at the [2021 FreeBSD Developer Summit](https://wiki.freebsd.org/DevSummit/202106) ([video](https://youtu.be/3SUKJye54aI?t=6166)) ([slides](https://docs.google.com/presentation/d/1FeQgEwChrtNQBHfWSNsPK3Y53O5BnPh3Cz5nRa5GAQY/edit#slide=id.p)), and a [news article from Ars Technica](https://arstechnica.com/gadgets/2021/06/raidz-expansion-code-lands-in-openzfs-master/).\r\n\r\n### Description\r\n#### Initiating expansion\r\nA new device (disk) can be attached to an existing RAIDZ vdev, by running `zpool attach POOL raidzP-N NEW_DEVICE`, e.g. `zpool attach tank raidz2-0 sda`. The new device will become part of the RAIDZ group. A _raidz expansion_ will\r\nbe initiated, and the new device will contribute additional space to the RAIDZ group once the expansion completes.\r\n\r\nThe `feature@raidz_expansion` on-disk feature flag must be `enabled` to initiate an expansion, and it remains `active` for the life of the pool. In other words, pools with expanded RAIDZ vdevs can not be imported by older releases of the ZFS software.\r\n\r\n#### During expansion\r\nThe expansion entails reading all allocated space from existing disks in the RAIDZ group, and rewriting it to the new disks in the RAIDZ group (including the newly added device).\r\n\r\nThe expansion progress can be monitored with `zpool status`.\r\n\r\nData redundancy is maintained during (and after) the expansion. If a disk fails while the expansion is in progress, the expansion pauses until the health of the RAIDZ vdev is restored (e.g. by replacing the failed disk and waiting\r\nfor reconstruction to complete).\r\n\r\nThe pool remains accessible during expansion. Following a reboot or export/import, the expansion resumes where it left off.\r\n\r\n#### After expansion\r\nWhen the expansion completes, the additional space is available for use, and is reflected in the `available` zfs property (as seen in `zfs list`, `df`, etc).\r\n\r\nExpansion does not change the number of failures that can be tolerated without data loss (e.g. a RAIDZ2 is still a RAIDZ2 even after expansion).\r\n\r\nA RAIDZ vdev can be expanded multiple times.\r\n\r\nAfter the expansion completes, old blocks remain with their old data-to-parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distributed among the larger set of disks. New blocks will be written with the new data-to-parity\r\nratio (e.g. a 5-wide RAIDZ2 which has been expanded once to 6-wide, has 4 data to 2 parity). However, the RAIDZ vdev's \"assumed parity ratio\" does not change, so slightly less space than is expected may be reported for newly-written blocks, according to `zfs list`, `df`, `ls -s`, and similar tools.\r\n\r\n#### Manpage changes\r\nzpool-attach.8:\r\n```\r\nNAME\r\n     zpool-attach \u2014 attach new device to existing ZFS vdev\r\n\r\nSYNOPSIS\r\n     zpool attach [-fsw] [-o property=value] pool device new_device\r\n\r\nDESCRIPTION\r\n     Attaches new_device to the existing device.  The behavior differs depend\u2010\r\n     ing on if the existing device is a RAIDZ device, or a mirror/plain\r\n     device.\r\n\r\n     If the existing device is a mirror or plain device ...\r\n\r\n     If the existing device is a RAIDZ device (e.g. specified as \"raidz2-0\"),\r\n     the new device will become part of that RAIDZ group.  A \"raidz expansion\"\r\n     will be initiated, and the new device will contribute additional space to\r\n     the RAIDZ group once the expansion completes.  The expansion entails\r\n     reading all allocated space from existing disks in the RAIDZ group, and\r\n     rewriting it to the new disks in the RAIDZ group (including the newly\r\n     added device).  Its progress can be monitored with zpool status.\r\n\r\n     Data redundancy is maintained during and after the expansion.  If a disk\r\n     fails while the expansion is in progress, the expansion pauses until the\r\n     health of the RAIDZ vdev is restored (e.g. by replacing the failed disk\r\n     and waiting for reconstruction to complete).  Expansion does not change\r\n     the number of failures that can be tolerated without data loss (e.g. a\r\n     RAIDZ2 is still a RAIDZ2 even after expansion).  A RAIDZ vdev can be\r\n     expanded multiple times.\r\n\r\n     After the expansion completes, old blocks remain with their old data-to-\r\n     parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distrib\u2010\r\n     uted among the larger set of disks.  New blocks will be written with the\r\n     new data-to-parity ratio (e.g. a 5-wide RAIDZ2 which has been expanded\r\n     once to 6-wide, has 4 data to 2 parity).  However, the RAIDZ vdev's\r\n     \"assumed parity ratio\" does not change, so slightly less space than is\r\n     expected may be reported for newly-written blocks, according to zfs list,\r\n     df, ls -s, and similar tools.\r\n```\r\n#### Status\r\nMatt Ahrens' original pull request (#12225) has been rebased here to current master branch and updated to incorporate recent code cleanups in the OpenZFS codebase. This feature is believed to be complete. However, like all PR's, it is subject to change as part of the code review process. Since this PR includes on-disk changes, it shouldn't be used on production systems before it is integrated to the OpenZFS codebase. Tasks that still need to be done before integration:\r\n- [x] Additional code cleanup in `ztest` code\r\n- [x] `zloop` changes to drive coverage of this feature\r\n- [ ] Address test failures in `ztest` runs\r\n- [x] Document the high-level design in a \"big theory statement\" comment\r\n- [x] Remove verbose logging\r\n- [x] Detection of MBR partitions using reserved boot area (FreeBSD BTX boot loader)\r\n- [ ] Address any performance concerns\r\n\r\n### Acknowledgments\r\nThank you to the [FreeBSD Foundation](https://freebsdfoundation.org/) for commissioning this work in 2017 and continuing to sponsor it well past the original time estimates!\r\nThank you to [iXsystems](https://www.ixsystems.com/) for sponsoring the final push to land this feature into OpenZFS.\r\n\r\nThanks also to contributors @FedorUporovVstack, @stuartmaybee, @thorsteneb, and @Fmstrat for portions\r\nof the implementation.\r\n\r\nSponsored-by: The FreeBSD Foundation\r\nSponsored-by: iXsystems, Inc.\r\nSponsored-by: vStack\r\nContributions-by: Stuart Maybee [stuart.maybee@comcast.net](mailto:stuart.maybee@comcast.net)\r\nContributions-by: Fedor Uporov [fuporov.vstack@gmail.com](mailto:fuporov.vstack@gmail.com)\r\nContributions-by: Thorsten Behrens [tbehrens@outlook.com](mailto:tbehrens@outlook.com)\r\nContributions-by: Fmstrat [nospam@nowsci.com](mailto:nospam@nowsci.com)\r\nContributions-by: Don Brady <dev.fs.zfs@gmail.com>\r\n\r\n### How Has This Been Tested?\r\nTests added to the ZFS Test Suite (`functional/raidz`) and `ztest`, in addition to manual testing.\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [x] New feature (non-breaking change which adds functionality)\r\n- [ ] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n- [x] I have updated the documentation accordingly.\r\n- [x] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [x] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [ ] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n\r\n### Pull Request Comments\r\nPlease limit comments here to code review/feedback and testing questions/results.\r\n\r\nFor generic discussions about RAID-Z, or discussions on future enhancements to RAIDZ expansion, please use [RAIDZ Expansion feature discussions](https://github.com/openzfs/zfs/discussions/15232).",
                "created_at": "2023-06-29T15:15:15Z",
                "updated_at": "2023-10-27T00:12:33Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "6fdafbf6e37585581adb097631ff652a5ec35d1d",
                "assignee": {
                    "login": "mmaybee",
                    "id": 44241648,
                    "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/mmaybee",
                    "html_url": "https://github.com/mmaybee",
                    "followers_url": "https://api.github.com/users/mmaybee/followers",
                    "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                    "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                    "repos_url": "https://api.github.com/users/mmaybee/repos",
                    "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "mmaybee",
                        "id": 44241648,
                        "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mmaybee",
                        "html_url": "https://github.com/mmaybee",
                        "followers_url": "https://api.github.com/users/mmaybee/followers",
                        "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                        "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                        "repos_url": "https://api.github.com/users/mmaybee/repos",
                        "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 40358,
                        "node_id": "MDU6TGFiZWw0MDM1OA==",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Feature",
                        "name": "Type: Feature",
                        "color": "02d7e1",
                        "default": false,
                        "description": "Feature request or new feature"
                    },
                    {
                        "id": 1007099007,
                        "node_id": "MDU6TGFiZWwxMDA3MDk5MDA3",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Status:%20Accepted",
                        "name": "Status: Accepted",
                        "color": "00b33c",
                        "default": false,
                        "description": "Ready to integrate (reviewed, tested)"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits",
                "review_comments_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments",
                "review_comment_url": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments",
                "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "head": {
                    "label": "don-brady:raidz-expansion",
                    "ref": "raidz-expansion",
                    "sha": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                    "user": {
                        "login": "don-brady",
                        "id": 12415697,
                        "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                        "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/don-brady",
                        "html_url": "https://github.com/don-brady",
                        "followers_url": "https://api.github.com/users/don-brady/followers",
                        "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                        "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                        "organizations_url": "https://api.github.com/users/don-brady/orgs",
                        "repos_url": "https://api.github.com/users/don-brady/repos",
                        "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/don-brady/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 425096697,
                        "node_id": "R_kgDOGVZ1-Q",
                        "name": "openzfs",
                        "full_name": "don-brady/openzfs",
                        "private": false,
                        "owner": {
                            "login": "don-brady",
                            "id": 12415697,
                            "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/don-brady",
                            "html_url": "https://github.com/don-brady",
                            "followers_url": "https://api.github.com/users/don-brady/followers",
                            "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                            "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                            "organizations_url": "https://api.github.com/users/don-brady/orgs",
                            "repos_url": "https://api.github.com/users/don-brady/repos",
                            "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/don-brady/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/don-brady/openzfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": true,
                        "url": "https://api.github.com/repos/don-brady/openzfs",
                        "forks_url": "https://api.github.com/repos/don-brady/openzfs/forks",
                        "keys_url": "https://api.github.com/repos/don-brady/openzfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/don-brady/openzfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/don-brady/openzfs/teams",
                        "hooks_url": "https://api.github.com/repos/don-brady/openzfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/don-brady/openzfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/don-brady/openzfs/events",
                        "assignees_url": "https://api.github.com/repos/don-brady/openzfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/don-brady/openzfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/don-brady/openzfs/tags",
                        "blobs_url": "https://api.github.com/repos/don-brady/openzfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/don-brady/openzfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/don-brady/openzfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/don-brady/openzfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/don-brady/openzfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/don-brady/openzfs/languages",
                        "stargazers_url": "https://api.github.com/repos/don-brady/openzfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/don-brady/openzfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/don-brady/openzfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/don-brady/openzfs/subscription",
                        "commits_url": "https://api.github.com/repos/don-brady/openzfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/don-brady/openzfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/don-brady/openzfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/don-brady/openzfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/don-brady/openzfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/don-brady/openzfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/don-brady/openzfs/merges",
                        "archive_url": "https://api.github.com/repos/don-brady/openzfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/don-brady/openzfs/downloads",
                        "issues_url": "https://api.github.com/repos/don-brady/openzfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/don-brady/openzfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/don-brady/openzfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/don-brady/openzfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/don-brady/openzfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/don-brady/openzfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/don-brady/openzfs/deployments",
                        "created_at": "2021-11-05T22:10:31Z",
                        "updated_at": "2023-04-19T17:10:15Z",
                        "pushed_at": "2023-10-26T19:13:59Z",
                        "git_url": "git://github.com/don-brady/openzfs.git",
                        "ssh_url": "git@github.com:don-brady/openzfs.git",
                        "clone_url": "https://github.com/don-brady/openzfs.git",
                        "svn_url": "https://github.com/don-brady/openzfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 120216,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "C",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 5,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 5,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "openzfs:master",
                    "ref": "master",
                    "sha": "9facf2d1ad0c4857de1d47a2a14e882a3fb78b89",
                    "user": {
                        "login": "openzfs",
                        "id": 4510897,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/openzfs",
                        "html_url": "https://github.com/openzfs",
                        "followers_url": "https://api.github.com/users/openzfs/followers",
                        "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                        "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                        "organizations_url": "https://api.github.com/users/openzfs/orgs",
                        "repos_url": "https://api.github.com/users/openzfs/repos",
                        "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/openzfs/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 437011,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0MzcwMTE=",
                        "name": "zfs",
                        "full_name": "openzfs/zfs",
                        "private": false,
                        "owner": {
                            "login": "openzfs",
                            "id": 4510897,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/openzfs",
                            "html_url": "https://github.com/openzfs",
                            "followers_url": "https://api.github.com/users/openzfs/followers",
                            "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                            "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                            "organizations_url": "https://api.github.com/users/openzfs/orgs",
                            "repos_url": "https://api.github.com/users/openzfs/repos",
                            "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/openzfs/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/openzfs/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": false,
                        "url": "https://api.github.com/repos/openzfs/zfs",
                        "forks_url": "https://api.github.com/repos/openzfs/zfs/forks",
                        "keys_url": "https://api.github.com/repos/openzfs/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/openzfs/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/openzfs/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/openzfs/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/openzfs/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/openzfs/zfs/events",
                        "assignees_url": "https://api.github.com/repos/openzfs/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/openzfs/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/openzfs/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/openzfs/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/openzfs/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/openzfs/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/openzfs/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/openzfs/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/openzfs/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/openzfs/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/openzfs/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/openzfs/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/openzfs/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/openzfs/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/openzfs/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/openzfs/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/openzfs/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/openzfs/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/openzfs/zfs/merges",
                        "archive_url": "https://api.github.com/repos/openzfs/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/openzfs/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/openzfs/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/openzfs/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/openzfs/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/openzfs/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/openzfs/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/openzfs/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/openzfs/zfs/deployments",
                        "created_at": "2009-12-14T20:20:34Z",
                        "updated_at": "2023-10-26T23:39:14Z",
                        "pushed_at": "2023-10-26T21:09:37Z",
                        "git_url": "git://github.com/openzfs/zfs.git",
                        "ssh_url": "git@github.com:openzfs/zfs.git",
                        "clone_url": "https://github.com/openzfs/zfs.git",
                        "svn_url": "https://github.com/openzfs/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 124672,
                        "stargazers_count": 9636,
                        "watchers_count": 9636,
                        "language": "C",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": true,
                        "forks_count": 1668,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1194,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": true,
                        "topics": [
                            "file-system",
                            "openzfs",
                            "system-software"
                        ],
                        "visibility": "public",
                        "forks": 1668,
                        "open_issues": 1194,
                        "watchers": 9636,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/openzfs/zfs/statuses/1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-26T23:21:41Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32884726682",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 148917,
            "login": "behlendorf",
            "display_login": "behlendorf",
            "gravatar_id": "",
            "url": "https://api.github.com/users/behlendorf",
            "avatar_url": "https://avatars.githubusercontent.com/u/148917?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1373915721",
                "pull_request_review_id": 1700679135,
                "id": 1373915721,
                "node_id": "PRRC_kwDOAAarE85R5EpJ",
                "diff_hunk": "@@ -8195,6 +8207,102 @@ print_removal_status(zpool_handle_t *zhp, pool_removal_stat_t *prs)\n \t}\n }\n \n+/*\n+ * Print out detailed raidz expansion status.\n+ */\n+static void\n+print_raidz_expand_status(zpool_handle_t *zhp, pool_raidz_expand_stat_t *pres)\n+{\n+\tchar copied_buf[7];\n+\n+\tif (pres == NULL || pres->pres_state == DSS_NONE)\n+\t\treturn;\n+\n+\t/*\n+\t * Determine name of vdev.\n+\t */\n+\tnvlist_t *config = zpool_get_config(zhp, NULL);\n+\tnvlist_t *nvroot = fnvlist_lookup_nvlist(config,\n+\t    ZPOOL_CONFIG_VDEV_TREE);\n+\tnvlist_t **child;\n+\tuint_t children;\n+\tverify(nvlist_lookup_nvlist_array(nvroot, ZPOOL_CONFIG_CHILDREN,\n+\t    &child, &children) == 0);\n+\tassert(pres->pres_expanding_vdev < children);\n+\n+\tprintf_color(ANSI_BOLD, gettext(\"raidz expand: \"));\n+\n+\ttime_t start = pres->pres_start_time;\n+\ttime_t end = pres->pres_end_time;\n+\tchar *vname =\n+\t    zpool_vdev_name(g_zfs, zhp, child[pres->pres_expanding_vdev], 0);\n+\tzfs_nicenum(pres->pres_reflowed, copied_buf, sizeof (copied_buf));\n+\n+\t/*\n+\t * Expansion is finished or canceled.\n+\t */\n+\tif (pres->pres_state == DSS_FINISHED) {\n+\t\tuint64_t minutes_taken = (end - start) / 60;\n+\n+\t\t(void) printf(gettext(\"Expansion of %s-%u copied %s \"",
                "path": "cmd/zpool/zpool_main.c",
                "commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "original_commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "user": {
                    "login": "behlendorf",
                    "id": 148917,
                    "node_id": "MDQ6VXNlcjE0ODkxNw==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/148917?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/behlendorf",
                    "html_url": "https://github.com/behlendorf",
                    "followers_url": "https://api.github.com/users/behlendorf/followers",
                    "following_url": "https://api.github.com/users/behlendorf/following{/other_user}",
                    "gists_url": "https://api.github.com/users/behlendorf/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/behlendorf/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/behlendorf/subscriptions",
                    "organizations_url": "https://api.github.com/users/behlendorf/orgs",
                    "repos_url": "https://api.github.com/users/behlendorf/repos",
                    "events_url": "https://api.github.com/users/behlendorf/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/behlendorf/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "We should use `secs_to_dhms()` so the time is output consistently.  How about reformatting the output like this:\r\n\r\n```c\r\n        if (pres->pres_state == DSS_FINISHED) {\r\n                char time_buf[32];\r\n                secs_to_dhms(end - start, time_buf);\r\n\r\n                (void) printf(gettext(\"expanded %s-%u copied %s \"\r\n                    \"in %s, completed on %s\"), vname,\r\n                    (int)pres->pres_expanding_vdev,\r\n                    copied_buf, time_buf, ctime((time_t *)&end));\r\n```\r\n\r\nExample completion output:\r\n\r\n```\r\n  scan: scrub repaired 44K in 00:07:45 with 0 errors on Thu Oct 26 16:52:48 2023\r\n  scan: resilvered 70.2G in 00:14:30 with 0 errors on Thu Oct 26 16:35:12 2023\r\nraidz expand: expanded raidz2-0 786G copied in 01:26:09, on Thu Oct 26 16:45:03 2023\r\n```\r\n\r\n",
                "created_at": "2023-10-26T23:19:59Z",
                "updated_at": "2023-10-27T00:12:33Z",
                "html_url": "https://github.com/openzfs/zfs/pull/15022#discussion_r1373915721",
                "pull_request_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1373915721"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022#discussion_r1373915721"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1373915721/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": null,
                "original_start_line": null,
                "start_side": null,
                "line": 8247,
                "original_line": 8247,
                "side": "RIGHT",
                "original_position": 90,
                "position": 90,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "id": 1413536769,
                "node_id": "PR_kwDOAAarE85UQNwB",
                "html_url": "https://github.com/openzfs/zfs/pull/15022",
                "diff_url": "https://github.com/openzfs/zfs/pull/15022.diff",
                "patch_url": "https://github.com/openzfs/zfs/pull/15022.patch",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15022",
                "number": 15022,
                "state": "open",
                "locked": false,
                "title": "raidz expansion feature",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "### Motivation and Context\r\nThis feature allows disks to be added one at a time to a RAID-Z group, expanding its capacity incrementally. This feature is especially useful for small pools (typically with only one RAID-Z group), where there isn't sufficient hardware to add capacity by adding a whole new RAID-Z group (typically doubling the number of disks).\r\n\r\nFor additional context as well as a design overview, see Matt Ahrens' talk at the [2021 FreeBSD Developer Summit](https://wiki.freebsd.org/DevSummit/202106) ([video](https://youtu.be/3SUKJye54aI?t=6166)) ([slides](https://docs.google.com/presentation/d/1FeQgEwChrtNQBHfWSNsPK3Y53O5BnPh3Cz5nRa5GAQY/edit#slide=id.p)), and a [news article from Ars Technica](https://arstechnica.com/gadgets/2021/06/raidz-expansion-code-lands-in-openzfs-master/).\r\n\r\n### Description\r\n#### Initiating expansion\r\nA new device (disk) can be attached to an existing RAIDZ vdev, by running `zpool attach POOL raidzP-N NEW_DEVICE`, e.g. `zpool attach tank raidz2-0 sda`. The new device will become part of the RAIDZ group. A _raidz expansion_ will\r\nbe initiated, and the new device will contribute additional space to the RAIDZ group once the expansion completes.\r\n\r\nThe `feature@raidz_expansion` on-disk feature flag must be `enabled` to initiate an expansion, and it remains `active` for the life of the pool. In other words, pools with expanded RAIDZ vdevs can not be imported by older releases of the ZFS software.\r\n\r\n#### During expansion\r\nThe expansion entails reading all allocated space from existing disks in the RAIDZ group, and rewriting it to the new disks in the RAIDZ group (including the newly added device).\r\n\r\nThe expansion progress can be monitored with `zpool status`.\r\n\r\nData redundancy is maintained during (and after) the expansion. If a disk fails while the expansion is in progress, the expansion pauses until the health of the RAIDZ vdev is restored (e.g. by replacing the failed disk and waiting\r\nfor reconstruction to complete).\r\n\r\nThe pool remains accessible during expansion. Following a reboot or export/import, the expansion resumes where it left off.\r\n\r\n#### After expansion\r\nWhen the expansion completes, the additional space is available for use, and is reflected in the `available` zfs property (as seen in `zfs list`, `df`, etc).\r\n\r\nExpansion does not change the number of failures that can be tolerated without data loss (e.g. a RAIDZ2 is still a RAIDZ2 even after expansion).\r\n\r\nA RAIDZ vdev can be expanded multiple times.\r\n\r\nAfter the expansion completes, old blocks remain with their old data-to-parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distributed among the larger set of disks. New blocks will be written with the new data-to-parity\r\nratio (e.g. a 5-wide RAIDZ2 which has been expanded once to 6-wide, has 4 data to 2 parity). However, the RAIDZ vdev's \"assumed parity ratio\" does not change, so slightly less space than is expected may be reported for newly-written blocks, according to `zfs list`, `df`, `ls -s`, and similar tools.\r\n\r\n#### Manpage changes\r\nzpool-attach.8:\r\n```\r\nNAME\r\n     zpool-attach \u2014 attach new device to existing ZFS vdev\r\n\r\nSYNOPSIS\r\n     zpool attach [-fsw] [-o property=value] pool device new_device\r\n\r\nDESCRIPTION\r\n     Attaches new_device to the existing device.  The behavior differs depend\u2010\r\n     ing on if the existing device is a RAIDZ device, or a mirror/plain\r\n     device.\r\n\r\n     If the existing device is a mirror or plain device ...\r\n\r\n     If the existing device is a RAIDZ device (e.g. specified as \"raidz2-0\"),\r\n     the new device will become part of that RAIDZ group.  A \"raidz expansion\"\r\n     will be initiated, and the new device will contribute additional space to\r\n     the RAIDZ group once the expansion completes.  The expansion entails\r\n     reading all allocated space from existing disks in the RAIDZ group, and\r\n     rewriting it to the new disks in the RAIDZ group (including the newly\r\n     added device).  Its progress can be monitored with zpool status.\r\n\r\n     Data redundancy is maintained during and after the expansion.  If a disk\r\n     fails while the expansion is in progress, the expansion pauses until the\r\n     health of the RAIDZ vdev is restored (e.g. by replacing the failed disk\r\n     and waiting for reconstruction to complete).  Expansion does not change\r\n     the number of failures that can be tolerated without data loss (e.g. a\r\n     RAIDZ2 is still a RAIDZ2 even after expansion).  A RAIDZ vdev can be\r\n     expanded multiple times.\r\n\r\n     After the expansion completes, old blocks remain with their old data-to-\r\n     parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distrib\u2010\r\n     uted among the larger set of disks.  New blocks will be written with the\r\n     new data-to-parity ratio (e.g. a 5-wide RAIDZ2 which has been expanded\r\n     once to 6-wide, has 4 data to 2 parity).  However, the RAIDZ vdev's\r\n     \"assumed parity ratio\" does not change, so slightly less space than is\r\n     expected may be reported for newly-written blocks, according to zfs list,\r\n     df, ls -s, and similar tools.\r\n```\r\n#### Status\r\nMatt Ahrens' original pull request (#12225) has been rebased here to current master branch and updated to incorporate recent code cleanups in the OpenZFS codebase. This feature is believed to be complete. However, like all PR's, it is subject to change as part of the code review process. Since this PR includes on-disk changes, it shouldn't be used on production systems before it is integrated to the OpenZFS codebase. Tasks that still need to be done before integration:\r\n- [x] Additional code cleanup in `ztest` code\r\n- [x] `zloop` changes to drive coverage of this feature\r\n- [ ] Address test failures in `ztest` runs\r\n- [x] Document the high-level design in a \"big theory statement\" comment\r\n- [x] Remove verbose logging\r\n- [x] Detection of MBR partitions using reserved boot area (FreeBSD BTX boot loader)\r\n- [ ] Address any performance concerns\r\n\r\n### Acknowledgments\r\nThank you to the [FreeBSD Foundation](https://freebsdfoundation.org/) for commissioning this work in 2017 and continuing to sponsor it well past the original time estimates!\r\nThank you to [iXsystems](https://www.ixsystems.com/) for sponsoring the final push to land this feature into OpenZFS.\r\n\r\nThanks also to contributors @FedorUporovVstack, @stuartmaybee, @thorsteneb, and @Fmstrat for portions\r\nof the implementation.\r\n\r\nSponsored-by: The FreeBSD Foundation\r\nSponsored-by: iXsystems, Inc.\r\nSponsored-by: vStack\r\nContributions-by: Stuart Maybee [stuart.maybee@comcast.net](mailto:stuart.maybee@comcast.net)\r\nContributions-by: Fedor Uporov [fuporov.vstack@gmail.com](mailto:fuporov.vstack@gmail.com)\r\nContributions-by: Thorsten Behrens [tbehrens@outlook.com](mailto:tbehrens@outlook.com)\r\nContributions-by: Fmstrat [nospam@nowsci.com](mailto:nospam@nowsci.com)\r\nContributions-by: Don Brady <dev.fs.zfs@gmail.com>\r\n\r\n### How Has This Been Tested?\r\nTests added to the ZFS Test Suite (`functional/raidz`) and `ztest`, in addition to manual testing.\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [x] New feature (non-breaking change which adds functionality)\r\n- [ ] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n- [x] I have updated the documentation accordingly.\r\n- [x] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [x] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [ ] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n\r\n### Pull Request Comments\r\nPlease limit comments here to code review/feedback and testing questions/results.\r\n\r\nFor generic discussions about RAID-Z, or discussions on future enhancements to RAIDZ expansion, please use [RAIDZ Expansion feature discussions](https://github.com/openzfs/zfs/discussions/15232).",
                "created_at": "2023-06-29T15:15:15Z",
                "updated_at": "2023-10-27T00:12:33Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "6fdafbf6e37585581adb097631ff652a5ec35d1d",
                "assignee": {
                    "login": "mmaybee",
                    "id": 44241648,
                    "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/mmaybee",
                    "html_url": "https://github.com/mmaybee",
                    "followers_url": "https://api.github.com/users/mmaybee/followers",
                    "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                    "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                    "repos_url": "https://api.github.com/users/mmaybee/repos",
                    "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "mmaybee",
                        "id": 44241648,
                        "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mmaybee",
                        "html_url": "https://github.com/mmaybee",
                        "followers_url": "https://api.github.com/users/mmaybee/followers",
                        "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                        "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                        "repos_url": "https://api.github.com/users/mmaybee/repos",
                        "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 40358,
                        "node_id": "MDU6TGFiZWw0MDM1OA==",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Feature",
                        "name": "Type: Feature",
                        "color": "02d7e1",
                        "default": false,
                        "description": "Feature request or new feature"
                    },
                    {
                        "id": 1007099007,
                        "node_id": "MDU6TGFiZWwxMDA3MDk5MDA3",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Status:%20Accepted",
                        "name": "Status: Accepted",
                        "color": "00b33c",
                        "default": false,
                        "description": "Ready to integrate (reviewed, tested)"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits",
                "review_comments_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments",
                "review_comment_url": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments",
                "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "head": {
                    "label": "don-brady:raidz-expansion",
                    "ref": "raidz-expansion",
                    "sha": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                    "user": {
                        "login": "don-brady",
                        "id": 12415697,
                        "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                        "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/don-brady",
                        "html_url": "https://github.com/don-brady",
                        "followers_url": "https://api.github.com/users/don-brady/followers",
                        "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                        "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                        "organizations_url": "https://api.github.com/users/don-brady/orgs",
                        "repos_url": "https://api.github.com/users/don-brady/repos",
                        "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/don-brady/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 425096697,
                        "node_id": "R_kgDOGVZ1-Q",
                        "name": "openzfs",
                        "full_name": "don-brady/openzfs",
                        "private": false,
                        "owner": {
                            "login": "don-brady",
                            "id": 12415697,
                            "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/don-brady",
                            "html_url": "https://github.com/don-brady",
                            "followers_url": "https://api.github.com/users/don-brady/followers",
                            "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                            "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                            "organizations_url": "https://api.github.com/users/don-brady/orgs",
                            "repos_url": "https://api.github.com/users/don-brady/repos",
                            "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/don-brady/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/don-brady/openzfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": true,
                        "url": "https://api.github.com/repos/don-brady/openzfs",
                        "forks_url": "https://api.github.com/repos/don-brady/openzfs/forks",
                        "keys_url": "https://api.github.com/repos/don-brady/openzfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/don-brady/openzfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/don-brady/openzfs/teams",
                        "hooks_url": "https://api.github.com/repos/don-brady/openzfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/don-brady/openzfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/don-brady/openzfs/events",
                        "assignees_url": "https://api.github.com/repos/don-brady/openzfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/don-brady/openzfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/don-brady/openzfs/tags",
                        "blobs_url": "https://api.github.com/repos/don-brady/openzfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/don-brady/openzfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/don-brady/openzfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/don-brady/openzfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/don-brady/openzfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/don-brady/openzfs/languages",
                        "stargazers_url": "https://api.github.com/repos/don-brady/openzfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/don-brady/openzfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/don-brady/openzfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/don-brady/openzfs/subscription",
                        "commits_url": "https://api.github.com/repos/don-brady/openzfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/don-brady/openzfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/don-brady/openzfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/don-brady/openzfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/don-brady/openzfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/don-brady/openzfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/don-brady/openzfs/merges",
                        "archive_url": "https://api.github.com/repos/don-brady/openzfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/don-brady/openzfs/downloads",
                        "issues_url": "https://api.github.com/repos/don-brady/openzfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/don-brady/openzfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/don-brady/openzfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/don-brady/openzfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/don-brady/openzfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/don-brady/openzfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/don-brady/openzfs/deployments",
                        "created_at": "2021-11-05T22:10:31Z",
                        "updated_at": "2023-04-19T17:10:15Z",
                        "pushed_at": "2023-10-26T19:13:59Z",
                        "git_url": "git://github.com/don-brady/openzfs.git",
                        "ssh_url": "git@github.com:don-brady/openzfs.git",
                        "clone_url": "https://github.com/don-brady/openzfs.git",
                        "svn_url": "https://github.com/don-brady/openzfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 120216,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "C",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 5,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 5,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "openzfs:master",
                    "ref": "master",
                    "sha": "9facf2d1ad0c4857de1d47a2a14e882a3fb78b89",
                    "user": {
                        "login": "openzfs",
                        "id": 4510897,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/openzfs",
                        "html_url": "https://github.com/openzfs",
                        "followers_url": "https://api.github.com/users/openzfs/followers",
                        "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                        "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                        "organizations_url": "https://api.github.com/users/openzfs/orgs",
                        "repos_url": "https://api.github.com/users/openzfs/repos",
                        "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/openzfs/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 437011,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0MzcwMTE=",
                        "name": "zfs",
                        "full_name": "openzfs/zfs",
                        "private": false,
                        "owner": {
                            "login": "openzfs",
                            "id": 4510897,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/openzfs",
                            "html_url": "https://github.com/openzfs",
                            "followers_url": "https://api.github.com/users/openzfs/followers",
                            "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                            "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                            "organizations_url": "https://api.github.com/users/openzfs/orgs",
                            "repos_url": "https://api.github.com/users/openzfs/repos",
                            "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/openzfs/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/openzfs/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": false,
                        "url": "https://api.github.com/repos/openzfs/zfs",
                        "forks_url": "https://api.github.com/repos/openzfs/zfs/forks",
                        "keys_url": "https://api.github.com/repos/openzfs/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/openzfs/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/openzfs/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/openzfs/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/openzfs/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/openzfs/zfs/events",
                        "assignees_url": "https://api.github.com/repos/openzfs/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/openzfs/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/openzfs/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/openzfs/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/openzfs/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/openzfs/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/openzfs/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/openzfs/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/openzfs/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/openzfs/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/openzfs/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/openzfs/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/openzfs/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/openzfs/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/openzfs/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/openzfs/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/openzfs/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/openzfs/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/openzfs/zfs/merges",
                        "archive_url": "https://api.github.com/repos/openzfs/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/openzfs/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/openzfs/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/openzfs/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/openzfs/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/openzfs/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/openzfs/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/openzfs/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/openzfs/zfs/deployments",
                        "created_at": "2009-12-14T20:20:34Z",
                        "updated_at": "2023-10-26T23:39:14Z",
                        "pushed_at": "2023-10-26T21:09:37Z",
                        "git_url": "git://github.com/openzfs/zfs.git",
                        "ssh_url": "git@github.com:openzfs/zfs.git",
                        "clone_url": "https://github.com/openzfs/zfs.git",
                        "svn_url": "https://github.com/openzfs/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 124672,
                        "stargazers_count": 9636,
                        "watchers_count": 9636,
                        "language": "C",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": true,
                        "forks_count": 1668,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1194,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": true,
                        "topics": [
                            "file-system",
                            "openzfs",
                            "system-software"
                        ],
                        "visibility": "public",
                        "forks": 1668,
                        "open_issues": 1194,
                        "watchers": 9636,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/openzfs/zfs/statuses/1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-26T23:19:59Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32884726676",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 148917,
            "login": "behlendorf",
            "display_login": "behlendorf",
            "gravatar_id": "",
            "url": "https://api.github.com/users/behlendorf",
            "avatar_url": "https://avatars.githubusercontent.com/u/148917?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1373840764",
                "pull_request_review_id": 1700679135,
                "id": 1373840764,
                "node_id": "PRRC_kwDOAAarE85R4yV8",
                "diff_hunk": "@@ -4368,6 +4368,17 @@ vdev_raidz_reflow_copy_scratch(spa_t *spa)\n \tspa_config_exit(spa, SCL_STATE, FTAG);\n }\n \n+static boolean_t\n+vdev_raidz_expand_child_replacing(vdev_t *raidz_vd)\n+{\n+\tfor (int i = 0; i < raidz_vd->vdev_children; i++) {\n+\t\t/* Quick check if a child is being replace */",
                "path": "module/zfs/vdev_raidz.c",
                "commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "original_commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "user": {
                    "login": "behlendorf",
                    "id": 148917,
                    "node_id": "MDQ6VXNlcjE0ODkxNw==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/148917?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/behlendorf",
                    "html_url": "https://github.com/behlendorf",
                    "followers_url": "https://api.github.com/users/behlendorf/followers",
                    "following_url": "https://api.github.com/users/behlendorf/following{/other_user}",
                    "gists_url": "https://api.github.com/users/behlendorf/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/behlendorf/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/behlendorf/subscriptions",
                    "organizations_url": "https://api.github.com/users/behlendorf/orgs",
                    "repos_url": "https://api.github.com/users/behlendorf/repos",
                    "events_url": "https://api.github.com/users/behlendorf/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/behlendorf/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "```suggestion\r\n\t\t/* Quick check if a child is being replaced */\r\n```",
                "created_at": "2023-10-26T21:35:53Z",
                "updated_at": "2023-10-27T00:12:33Z",
                "html_url": "https://github.com/openzfs/zfs/pull/15022#discussion_r1373840764",
                "pull_request_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1373840764"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022#discussion_r1373840764"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1373840764/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": null,
                "original_start_line": null,
                "start_side": null,
                "line": 4375,
                "original_line": 4375,
                "side": "RIGHT",
                "original_position": 8,
                "position": 8,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "id": 1413536769,
                "node_id": "PR_kwDOAAarE85UQNwB",
                "html_url": "https://github.com/openzfs/zfs/pull/15022",
                "diff_url": "https://github.com/openzfs/zfs/pull/15022.diff",
                "patch_url": "https://github.com/openzfs/zfs/pull/15022.patch",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15022",
                "number": 15022,
                "state": "open",
                "locked": false,
                "title": "raidz expansion feature",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "### Motivation and Context\r\nThis feature allows disks to be added one at a time to a RAID-Z group, expanding its capacity incrementally. This feature is especially useful for small pools (typically with only one RAID-Z group), where there isn't sufficient hardware to add capacity by adding a whole new RAID-Z group (typically doubling the number of disks).\r\n\r\nFor additional context as well as a design overview, see Matt Ahrens' talk at the [2021 FreeBSD Developer Summit](https://wiki.freebsd.org/DevSummit/202106) ([video](https://youtu.be/3SUKJye54aI?t=6166)) ([slides](https://docs.google.com/presentation/d/1FeQgEwChrtNQBHfWSNsPK3Y53O5BnPh3Cz5nRa5GAQY/edit#slide=id.p)), and a [news article from Ars Technica](https://arstechnica.com/gadgets/2021/06/raidz-expansion-code-lands-in-openzfs-master/).\r\n\r\n### Description\r\n#### Initiating expansion\r\nA new device (disk) can be attached to an existing RAIDZ vdev, by running `zpool attach POOL raidzP-N NEW_DEVICE`, e.g. `zpool attach tank raidz2-0 sda`. The new device will become part of the RAIDZ group. A _raidz expansion_ will\r\nbe initiated, and the new device will contribute additional space to the RAIDZ group once the expansion completes.\r\n\r\nThe `feature@raidz_expansion` on-disk feature flag must be `enabled` to initiate an expansion, and it remains `active` for the life of the pool. In other words, pools with expanded RAIDZ vdevs can not be imported by older releases of the ZFS software.\r\n\r\n#### During expansion\r\nThe expansion entails reading all allocated space from existing disks in the RAIDZ group, and rewriting it to the new disks in the RAIDZ group (including the newly added device).\r\n\r\nThe expansion progress can be monitored with `zpool status`.\r\n\r\nData redundancy is maintained during (and after) the expansion. If a disk fails while the expansion is in progress, the expansion pauses until the health of the RAIDZ vdev is restored (e.g. by replacing the failed disk and waiting\r\nfor reconstruction to complete).\r\n\r\nThe pool remains accessible during expansion. Following a reboot or export/import, the expansion resumes where it left off.\r\n\r\n#### After expansion\r\nWhen the expansion completes, the additional space is available for use, and is reflected in the `available` zfs property (as seen in `zfs list`, `df`, etc).\r\n\r\nExpansion does not change the number of failures that can be tolerated without data loss (e.g. a RAIDZ2 is still a RAIDZ2 even after expansion).\r\n\r\nA RAIDZ vdev can be expanded multiple times.\r\n\r\nAfter the expansion completes, old blocks remain with their old data-to-parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distributed among the larger set of disks. New blocks will be written with the new data-to-parity\r\nratio (e.g. a 5-wide RAIDZ2 which has been expanded once to 6-wide, has 4 data to 2 parity). However, the RAIDZ vdev's \"assumed parity ratio\" does not change, so slightly less space than is expected may be reported for newly-written blocks, according to `zfs list`, `df`, `ls -s`, and similar tools.\r\n\r\n#### Manpage changes\r\nzpool-attach.8:\r\n```\r\nNAME\r\n     zpool-attach \u2014 attach new device to existing ZFS vdev\r\n\r\nSYNOPSIS\r\n     zpool attach [-fsw] [-o property=value] pool device new_device\r\n\r\nDESCRIPTION\r\n     Attaches new_device to the existing device.  The behavior differs depend\u2010\r\n     ing on if the existing device is a RAIDZ device, or a mirror/plain\r\n     device.\r\n\r\n     If the existing device is a mirror or plain device ...\r\n\r\n     If the existing device is a RAIDZ device (e.g. specified as \"raidz2-0\"),\r\n     the new device will become part of that RAIDZ group.  A \"raidz expansion\"\r\n     will be initiated, and the new device will contribute additional space to\r\n     the RAIDZ group once the expansion completes.  The expansion entails\r\n     reading all allocated space from existing disks in the RAIDZ group, and\r\n     rewriting it to the new disks in the RAIDZ group (including the newly\r\n     added device).  Its progress can be monitored with zpool status.\r\n\r\n     Data redundancy is maintained during and after the expansion.  If a disk\r\n     fails while the expansion is in progress, the expansion pauses until the\r\n     health of the RAIDZ vdev is restored (e.g. by replacing the failed disk\r\n     and waiting for reconstruction to complete).  Expansion does not change\r\n     the number of failures that can be tolerated without data loss (e.g. a\r\n     RAIDZ2 is still a RAIDZ2 even after expansion).  A RAIDZ vdev can be\r\n     expanded multiple times.\r\n\r\n     After the expansion completes, old blocks remain with their old data-to-\r\n     parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distrib\u2010\r\n     uted among the larger set of disks.  New blocks will be written with the\r\n     new data-to-parity ratio (e.g. a 5-wide RAIDZ2 which has been expanded\r\n     once to 6-wide, has 4 data to 2 parity).  However, the RAIDZ vdev's\r\n     \"assumed parity ratio\" does not change, so slightly less space than is\r\n     expected may be reported for newly-written blocks, according to zfs list,\r\n     df, ls -s, and similar tools.\r\n```\r\n#### Status\r\nMatt Ahrens' original pull request (#12225) has been rebased here to current master branch and updated to incorporate recent code cleanups in the OpenZFS codebase. This feature is believed to be complete. However, like all PR's, it is subject to change as part of the code review process. Since this PR includes on-disk changes, it shouldn't be used on production systems before it is integrated to the OpenZFS codebase. Tasks that still need to be done before integration:\r\n- [x] Additional code cleanup in `ztest` code\r\n- [x] `zloop` changes to drive coverage of this feature\r\n- [ ] Address test failures in `ztest` runs\r\n- [x] Document the high-level design in a \"big theory statement\" comment\r\n- [x] Remove verbose logging\r\n- [x] Detection of MBR partitions using reserved boot area (FreeBSD BTX boot loader)\r\n- [ ] Address any performance concerns\r\n\r\n### Acknowledgments\r\nThank you to the [FreeBSD Foundation](https://freebsdfoundation.org/) for commissioning this work in 2017 and continuing to sponsor it well past the original time estimates!\r\nThank you to [iXsystems](https://www.ixsystems.com/) for sponsoring the final push to land this feature into OpenZFS.\r\n\r\nThanks also to contributors @FedorUporovVstack, @stuartmaybee, @thorsteneb, and @Fmstrat for portions\r\nof the implementation.\r\n\r\nSponsored-by: The FreeBSD Foundation\r\nSponsored-by: iXsystems, Inc.\r\nSponsored-by: vStack\r\nContributions-by: Stuart Maybee [stuart.maybee@comcast.net](mailto:stuart.maybee@comcast.net)\r\nContributions-by: Fedor Uporov [fuporov.vstack@gmail.com](mailto:fuporov.vstack@gmail.com)\r\nContributions-by: Thorsten Behrens [tbehrens@outlook.com](mailto:tbehrens@outlook.com)\r\nContributions-by: Fmstrat [nospam@nowsci.com](mailto:nospam@nowsci.com)\r\nContributions-by: Don Brady <dev.fs.zfs@gmail.com>\r\n\r\n### How Has This Been Tested?\r\nTests added to the ZFS Test Suite (`functional/raidz`) and `ztest`, in addition to manual testing.\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [x] New feature (non-breaking change which adds functionality)\r\n- [ ] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n- [x] I have updated the documentation accordingly.\r\n- [x] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [x] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [ ] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n\r\n### Pull Request Comments\r\nPlease limit comments here to code review/feedback and testing questions/results.\r\n\r\nFor generic discussions about RAID-Z, or discussions on future enhancements to RAIDZ expansion, please use [RAIDZ Expansion feature discussions](https://github.com/openzfs/zfs/discussions/15232).",
                "created_at": "2023-06-29T15:15:15Z",
                "updated_at": "2023-10-27T00:12:33Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "6fdafbf6e37585581adb097631ff652a5ec35d1d",
                "assignee": {
                    "login": "mmaybee",
                    "id": 44241648,
                    "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/mmaybee",
                    "html_url": "https://github.com/mmaybee",
                    "followers_url": "https://api.github.com/users/mmaybee/followers",
                    "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                    "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                    "repos_url": "https://api.github.com/users/mmaybee/repos",
                    "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "mmaybee",
                        "id": 44241648,
                        "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mmaybee",
                        "html_url": "https://github.com/mmaybee",
                        "followers_url": "https://api.github.com/users/mmaybee/followers",
                        "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                        "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                        "repos_url": "https://api.github.com/users/mmaybee/repos",
                        "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 40358,
                        "node_id": "MDU6TGFiZWw0MDM1OA==",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Feature",
                        "name": "Type: Feature",
                        "color": "02d7e1",
                        "default": false,
                        "description": "Feature request or new feature"
                    },
                    {
                        "id": 1007099007,
                        "node_id": "MDU6TGFiZWwxMDA3MDk5MDA3",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Status:%20Accepted",
                        "name": "Status: Accepted",
                        "color": "00b33c",
                        "default": false,
                        "description": "Ready to integrate (reviewed, tested)"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits",
                "review_comments_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments",
                "review_comment_url": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments",
                "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "head": {
                    "label": "don-brady:raidz-expansion",
                    "ref": "raidz-expansion",
                    "sha": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                    "user": {
                        "login": "don-brady",
                        "id": 12415697,
                        "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                        "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/don-brady",
                        "html_url": "https://github.com/don-brady",
                        "followers_url": "https://api.github.com/users/don-brady/followers",
                        "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                        "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                        "organizations_url": "https://api.github.com/users/don-brady/orgs",
                        "repos_url": "https://api.github.com/users/don-brady/repos",
                        "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/don-brady/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 425096697,
                        "node_id": "R_kgDOGVZ1-Q",
                        "name": "openzfs",
                        "full_name": "don-brady/openzfs",
                        "private": false,
                        "owner": {
                            "login": "don-brady",
                            "id": 12415697,
                            "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/don-brady",
                            "html_url": "https://github.com/don-brady",
                            "followers_url": "https://api.github.com/users/don-brady/followers",
                            "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                            "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                            "organizations_url": "https://api.github.com/users/don-brady/orgs",
                            "repos_url": "https://api.github.com/users/don-brady/repos",
                            "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/don-brady/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/don-brady/openzfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": true,
                        "url": "https://api.github.com/repos/don-brady/openzfs",
                        "forks_url": "https://api.github.com/repos/don-brady/openzfs/forks",
                        "keys_url": "https://api.github.com/repos/don-brady/openzfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/don-brady/openzfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/don-brady/openzfs/teams",
                        "hooks_url": "https://api.github.com/repos/don-brady/openzfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/don-brady/openzfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/don-brady/openzfs/events",
                        "assignees_url": "https://api.github.com/repos/don-brady/openzfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/don-brady/openzfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/don-brady/openzfs/tags",
                        "blobs_url": "https://api.github.com/repos/don-brady/openzfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/don-brady/openzfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/don-brady/openzfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/don-brady/openzfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/don-brady/openzfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/don-brady/openzfs/languages",
                        "stargazers_url": "https://api.github.com/repos/don-brady/openzfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/don-brady/openzfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/don-brady/openzfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/don-brady/openzfs/subscription",
                        "commits_url": "https://api.github.com/repos/don-brady/openzfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/don-brady/openzfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/don-brady/openzfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/don-brady/openzfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/don-brady/openzfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/don-brady/openzfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/don-brady/openzfs/merges",
                        "archive_url": "https://api.github.com/repos/don-brady/openzfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/don-brady/openzfs/downloads",
                        "issues_url": "https://api.github.com/repos/don-brady/openzfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/don-brady/openzfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/don-brady/openzfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/don-brady/openzfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/don-brady/openzfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/don-brady/openzfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/don-brady/openzfs/deployments",
                        "created_at": "2021-11-05T22:10:31Z",
                        "updated_at": "2023-04-19T17:10:15Z",
                        "pushed_at": "2023-10-26T19:13:59Z",
                        "git_url": "git://github.com/don-brady/openzfs.git",
                        "ssh_url": "git@github.com:don-brady/openzfs.git",
                        "clone_url": "https://github.com/don-brady/openzfs.git",
                        "svn_url": "https://github.com/don-brady/openzfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 120216,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "C",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 5,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 5,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "openzfs:master",
                    "ref": "master",
                    "sha": "9facf2d1ad0c4857de1d47a2a14e882a3fb78b89",
                    "user": {
                        "login": "openzfs",
                        "id": 4510897,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/openzfs",
                        "html_url": "https://github.com/openzfs",
                        "followers_url": "https://api.github.com/users/openzfs/followers",
                        "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                        "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                        "organizations_url": "https://api.github.com/users/openzfs/orgs",
                        "repos_url": "https://api.github.com/users/openzfs/repos",
                        "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/openzfs/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 437011,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0MzcwMTE=",
                        "name": "zfs",
                        "full_name": "openzfs/zfs",
                        "private": false,
                        "owner": {
                            "login": "openzfs",
                            "id": 4510897,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/openzfs",
                            "html_url": "https://github.com/openzfs",
                            "followers_url": "https://api.github.com/users/openzfs/followers",
                            "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                            "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                            "organizations_url": "https://api.github.com/users/openzfs/orgs",
                            "repos_url": "https://api.github.com/users/openzfs/repos",
                            "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/openzfs/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/openzfs/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": false,
                        "url": "https://api.github.com/repos/openzfs/zfs",
                        "forks_url": "https://api.github.com/repos/openzfs/zfs/forks",
                        "keys_url": "https://api.github.com/repos/openzfs/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/openzfs/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/openzfs/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/openzfs/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/openzfs/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/openzfs/zfs/events",
                        "assignees_url": "https://api.github.com/repos/openzfs/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/openzfs/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/openzfs/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/openzfs/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/openzfs/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/openzfs/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/openzfs/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/openzfs/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/openzfs/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/openzfs/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/openzfs/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/openzfs/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/openzfs/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/openzfs/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/openzfs/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/openzfs/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/openzfs/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/openzfs/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/openzfs/zfs/merges",
                        "archive_url": "https://api.github.com/repos/openzfs/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/openzfs/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/openzfs/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/openzfs/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/openzfs/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/openzfs/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/openzfs/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/openzfs/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/openzfs/zfs/deployments",
                        "created_at": "2009-12-14T20:20:34Z",
                        "updated_at": "2023-10-26T23:39:14Z",
                        "pushed_at": "2023-10-26T21:09:37Z",
                        "git_url": "git://github.com/openzfs/zfs.git",
                        "ssh_url": "git@github.com:openzfs/zfs.git",
                        "clone_url": "https://github.com/openzfs/zfs.git",
                        "svn_url": "https://github.com/openzfs/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 124672,
                        "stargazers_count": 9636,
                        "watchers_count": 9636,
                        "language": "C",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": true,
                        "forks_count": 1668,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1194,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": true,
                        "topics": [
                            "file-system",
                            "openzfs",
                            "system-software"
                        ],
                        "visibility": "public",
                        "forks": 1668,
                        "open_issues": 1194,
                        "watchers": 9636,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/openzfs/zfs/statuses/1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-26T21:35:53Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32884726679",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 148917,
            "login": "behlendorf",
            "display_login": "behlendorf",
            "gravatar_id": "",
            "url": "https://api.github.com/users/behlendorf",
            "avatar_url": "https://avatars.githubusercontent.com/u/148917?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1373916143",
                "pull_request_review_id": 1700679135,
                "id": 1373916143,
                "node_id": "PRRC_kwDOAAarE85R5Evv",
                "diff_hunk": "@@ -8195,6 +8207,102 @@ print_removal_status(zpool_handle_t *zhp, pool_removal_stat_t *prs)\n \t}\n }\n \n+/*\n+ * Print out detailed raidz expansion status.\n+ */\n+static void\n+print_raidz_expand_status(zpool_handle_t *zhp, pool_raidz_expand_stat_t *pres)\n+{\n+\tchar copied_buf[7];\n+\n+\tif (pres == NULL || pres->pres_state == DSS_NONE)\n+\t\treturn;\n+\n+\t/*\n+\t * Determine name of vdev.\n+\t */\n+\tnvlist_t *config = zpool_get_config(zhp, NULL);\n+\tnvlist_t *nvroot = fnvlist_lookup_nvlist(config,\n+\t    ZPOOL_CONFIG_VDEV_TREE);\n+\tnvlist_t **child;\n+\tuint_t children;\n+\tverify(nvlist_lookup_nvlist_array(nvroot, ZPOOL_CONFIG_CHILDREN,\n+\t    &child, &children) == 0);\n+\tassert(pres->pres_expanding_vdev < children);\n+\n+\tprintf_color(ANSI_BOLD, gettext(\"raidz expand: \"));\n+\n+\ttime_t start = pres->pres_start_time;\n+\ttime_t end = pres->pres_end_time;\n+\tchar *vname =\n+\t    zpool_vdev_name(g_zfs, zhp, child[pres->pres_expanding_vdev], 0);\n+\tzfs_nicenum(pres->pres_reflowed, copied_buf, sizeof (copied_buf));\n+\n+\t/*\n+\t * Expansion is finished or canceled.\n+\t */\n+\tif (pres->pres_state == DSS_FINISHED) {\n+\t\tuint64_t minutes_taken = (end - start) / 60;\n+\n+\t\t(void) printf(gettext(\"Expansion of %s-%u copied %s \"\n+\t\t    \"in %lluh%um, completed on %s\"),\n+\t\t    vname,\n+\t\t    (int)pres->pres_expanding_vdev,\n+\t\t    copied_buf,\n+\t\t    (u_longlong_t)(minutes_taken / 60),\n+\t\t    (uint_t)(minutes_taken % 60),\n+\t\t    ctime((time_t *)&end));\n+\t} else {\n+\t\tchar examined_buf[7], total_buf[7], rate_buf[7];\n+\t\tuint64_t copied, total, elapsed, secs_left;\n+\t\tdouble fraction_done;\n+\t\tuint_t rate;\n+\n+\t\tassert(pres->pres_state == DSS_SCANNING);\n+\n+\t\t/*\n+\t\t * Expansion is in progress.\n+\t\t */\n+\t\t(void) printf(gettext(\n+\t\t    \"Expansion of %s-%u in progress since %s\"),\n+\t\t    vname, (int)pres->pres_expanding_vdev, ctime(&start));\n+\n+\t\tcopied = pres->pres_reflowed > 0 ? pres->pres_reflowed : 1;\n+\t\ttotal = pres->pres_to_reflow;\n+\t\tfraction_done = (double)copied / total;\n+\n+\t\t/* elapsed time for this pass */\n+\t\telapsed = time(NULL) - pres->pres_start_time;\n+\t\telapsed = elapsed > 0 ? elapsed : 1;\n+\t\trate = copied / elapsed;\n+\t\trate = rate > 0 ? rate : 1;\n+\t\tsecs_left = (total - copied) / rate;\n+\n+\t\tzfs_nicenum(copied, examined_buf, sizeof (examined_buf));\n+\t\tzfs_nicenum(total, total_buf, sizeof (total_buf));\n+\t\tzfs_nicenum(rate, rate_buf, sizeof (rate_buf));\n+\n+\t\t/*\n+\t\t * do not print estimated time if hours_left is more than\n+\t\t * 30 days\n+\t\t */\n+\t\t(void) printf(gettext(\"\\t%s copied out of %s at %s/s, \"\n+\t\t    \"%.2f%% done\"),",
                "path": "cmd/zpool/zpool_main.c",
                "commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "original_commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "user": {
                    "login": "behlendorf",
                    "id": 148917,
                    "node_id": "MDQ6VXNlcjE0ODkxNw==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/148917?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/behlendorf",
                    "html_url": "https://github.com/behlendorf",
                    "followers_url": "https://api.github.com/users/behlendorf/followers",
                    "following_url": "https://api.github.com/users/behlendorf/following{/other_user}",
                    "gists_url": "https://api.github.com/users/behlendorf/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/behlendorf/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/behlendorf/subscriptions",
                    "organizations_url": "https://api.github.com/users/behlendorf/orgs",
                    "repos_url": "https://api.github.com/users/behlendorf/repos",
                    "events_url": "https://api.github.com/users/behlendorf/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/behlendorf/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "```c\r\n               (void) printf(gettext(\"\\t%s / %s copied at %s/s, %.2f%% done\"),\r\n```",
                "created_at": "2023-10-26T23:20:53Z",
                "updated_at": "2023-10-27T00:12:33Z",
                "html_url": "https://github.com/openzfs/zfs/pull/15022#discussion_r1373916143",
                "pull_request_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1373916143"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022#discussion_r1373916143"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/pulls/comments/1373916143/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": null,
                "original_start_line": null,
                "start_side": null,
                "line": 8290,
                "original_line": 8290,
                "side": "RIGHT",
                "original_position": 133,
                "position": 133,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "id": 1413536769,
                "node_id": "PR_kwDOAAarE85UQNwB",
                "html_url": "https://github.com/openzfs/zfs/pull/15022",
                "diff_url": "https://github.com/openzfs/zfs/pull/15022.diff",
                "patch_url": "https://github.com/openzfs/zfs/pull/15022.patch",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15022",
                "number": 15022,
                "state": "open",
                "locked": false,
                "title": "raidz expansion feature",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "### Motivation and Context\r\nThis feature allows disks to be added one at a time to a RAID-Z group, expanding its capacity incrementally. This feature is especially useful for small pools (typically with only one RAID-Z group), where there isn't sufficient hardware to add capacity by adding a whole new RAID-Z group (typically doubling the number of disks).\r\n\r\nFor additional context as well as a design overview, see Matt Ahrens' talk at the [2021 FreeBSD Developer Summit](https://wiki.freebsd.org/DevSummit/202106) ([video](https://youtu.be/3SUKJye54aI?t=6166)) ([slides](https://docs.google.com/presentation/d/1FeQgEwChrtNQBHfWSNsPK3Y53O5BnPh3Cz5nRa5GAQY/edit#slide=id.p)), and a [news article from Ars Technica](https://arstechnica.com/gadgets/2021/06/raidz-expansion-code-lands-in-openzfs-master/).\r\n\r\n### Description\r\n#### Initiating expansion\r\nA new device (disk) can be attached to an existing RAIDZ vdev, by running `zpool attach POOL raidzP-N NEW_DEVICE`, e.g. `zpool attach tank raidz2-0 sda`. The new device will become part of the RAIDZ group. A _raidz expansion_ will\r\nbe initiated, and the new device will contribute additional space to the RAIDZ group once the expansion completes.\r\n\r\nThe `feature@raidz_expansion` on-disk feature flag must be `enabled` to initiate an expansion, and it remains `active` for the life of the pool. In other words, pools with expanded RAIDZ vdevs can not be imported by older releases of the ZFS software.\r\n\r\n#### During expansion\r\nThe expansion entails reading all allocated space from existing disks in the RAIDZ group, and rewriting it to the new disks in the RAIDZ group (including the newly added device).\r\n\r\nThe expansion progress can be monitored with `zpool status`.\r\n\r\nData redundancy is maintained during (and after) the expansion. If a disk fails while the expansion is in progress, the expansion pauses until the health of the RAIDZ vdev is restored (e.g. by replacing the failed disk and waiting\r\nfor reconstruction to complete).\r\n\r\nThe pool remains accessible during expansion. Following a reboot or export/import, the expansion resumes where it left off.\r\n\r\n#### After expansion\r\nWhen the expansion completes, the additional space is available for use, and is reflected in the `available` zfs property (as seen in `zfs list`, `df`, etc).\r\n\r\nExpansion does not change the number of failures that can be tolerated without data loss (e.g. a RAIDZ2 is still a RAIDZ2 even after expansion).\r\n\r\nA RAIDZ vdev can be expanded multiple times.\r\n\r\nAfter the expansion completes, old blocks remain with their old data-to-parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distributed among the larger set of disks. New blocks will be written with the new data-to-parity\r\nratio (e.g. a 5-wide RAIDZ2 which has been expanded once to 6-wide, has 4 data to 2 parity). However, the RAIDZ vdev's \"assumed parity ratio\" does not change, so slightly less space than is expected may be reported for newly-written blocks, according to `zfs list`, `df`, `ls -s`, and similar tools.\r\n\r\n#### Manpage changes\r\nzpool-attach.8:\r\n```\r\nNAME\r\n     zpool-attach \u2014 attach new device to existing ZFS vdev\r\n\r\nSYNOPSIS\r\n     zpool attach [-fsw] [-o property=value] pool device new_device\r\n\r\nDESCRIPTION\r\n     Attaches new_device to the existing device.  The behavior differs depend\u2010\r\n     ing on if the existing device is a RAIDZ device, or a mirror/plain\r\n     device.\r\n\r\n     If the existing device is a mirror or plain device ...\r\n\r\n     If the existing device is a RAIDZ device (e.g. specified as \"raidz2-0\"),\r\n     the new device will become part of that RAIDZ group.  A \"raidz expansion\"\r\n     will be initiated, and the new device will contribute additional space to\r\n     the RAIDZ group once the expansion completes.  The expansion entails\r\n     reading all allocated space from existing disks in the RAIDZ group, and\r\n     rewriting it to the new disks in the RAIDZ group (including the newly\r\n     added device).  Its progress can be monitored with zpool status.\r\n\r\n     Data redundancy is maintained during and after the expansion.  If a disk\r\n     fails while the expansion is in progress, the expansion pauses until the\r\n     health of the RAIDZ vdev is restored (e.g. by replacing the failed disk\r\n     and waiting for reconstruction to complete).  Expansion does not change\r\n     the number of failures that can be tolerated without data loss (e.g. a\r\n     RAIDZ2 is still a RAIDZ2 even after expansion).  A RAIDZ vdev can be\r\n     expanded multiple times.\r\n\r\n     After the expansion completes, old blocks remain with their old data-to-\r\n     parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distrib\u2010\r\n     uted among the larger set of disks.  New blocks will be written with the\r\n     new data-to-parity ratio (e.g. a 5-wide RAIDZ2 which has been expanded\r\n     once to 6-wide, has 4 data to 2 parity).  However, the RAIDZ vdev's\r\n     \"assumed parity ratio\" does not change, so slightly less space than is\r\n     expected may be reported for newly-written blocks, according to zfs list,\r\n     df, ls -s, and similar tools.\r\n```\r\n#### Status\r\nMatt Ahrens' original pull request (#12225) has been rebased here to current master branch and updated to incorporate recent code cleanups in the OpenZFS codebase. This feature is believed to be complete. However, like all PR's, it is subject to change as part of the code review process. Since this PR includes on-disk changes, it shouldn't be used on production systems before it is integrated to the OpenZFS codebase. Tasks that still need to be done before integration:\r\n- [x] Additional code cleanup in `ztest` code\r\n- [x] `zloop` changes to drive coverage of this feature\r\n- [ ] Address test failures in `ztest` runs\r\n- [x] Document the high-level design in a \"big theory statement\" comment\r\n- [x] Remove verbose logging\r\n- [x] Detection of MBR partitions using reserved boot area (FreeBSD BTX boot loader)\r\n- [ ] Address any performance concerns\r\n\r\n### Acknowledgments\r\nThank you to the [FreeBSD Foundation](https://freebsdfoundation.org/) for commissioning this work in 2017 and continuing to sponsor it well past the original time estimates!\r\nThank you to [iXsystems](https://www.ixsystems.com/) for sponsoring the final push to land this feature into OpenZFS.\r\n\r\nThanks also to contributors @FedorUporovVstack, @stuartmaybee, @thorsteneb, and @Fmstrat for portions\r\nof the implementation.\r\n\r\nSponsored-by: The FreeBSD Foundation\r\nSponsored-by: iXsystems, Inc.\r\nSponsored-by: vStack\r\nContributions-by: Stuart Maybee [stuart.maybee@comcast.net](mailto:stuart.maybee@comcast.net)\r\nContributions-by: Fedor Uporov [fuporov.vstack@gmail.com](mailto:fuporov.vstack@gmail.com)\r\nContributions-by: Thorsten Behrens [tbehrens@outlook.com](mailto:tbehrens@outlook.com)\r\nContributions-by: Fmstrat [nospam@nowsci.com](mailto:nospam@nowsci.com)\r\nContributions-by: Don Brady <dev.fs.zfs@gmail.com>\r\n\r\n### How Has This Been Tested?\r\nTests added to the ZFS Test Suite (`functional/raidz`) and `ztest`, in addition to manual testing.\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [x] New feature (non-breaking change which adds functionality)\r\n- [ ] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n- [x] I have updated the documentation accordingly.\r\n- [x] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [x] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [ ] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n\r\n### Pull Request Comments\r\nPlease limit comments here to code review/feedback and testing questions/results.\r\n\r\nFor generic discussions about RAID-Z, or discussions on future enhancements to RAIDZ expansion, please use [RAIDZ Expansion feature discussions](https://github.com/openzfs/zfs/discussions/15232).",
                "created_at": "2023-06-29T15:15:15Z",
                "updated_at": "2023-10-27T00:12:33Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "6fdafbf6e37585581adb097631ff652a5ec35d1d",
                "assignee": {
                    "login": "mmaybee",
                    "id": 44241648,
                    "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/mmaybee",
                    "html_url": "https://github.com/mmaybee",
                    "followers_url": "https://api.github.com/users/mmaybee/followers",
                    "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                    "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                    "repos_url": "https://api.github.com/users/mmaybee/repos",
                    "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "mmaybee",
                        "id": 44241648,
                        "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mmaybee",
                        "html_url": "https://github.com/mmaybee",
                        "followers_url": "https://api.github.com/users/mmaybee/followers",
                        "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                        "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                        "repos_url": "https://api.github.com/users/mmaybee/repos",
                        "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 40358,
                        "node_id": "MDU6TGFiZWw0MDM1OA==",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Feature",
                        "name": "Type: Feature",
                        "color": "02d7e1",
                        "default": false,
                        "description": "Feature request or new feature"
                    },
                    {
                        "id": 1007099007,
                        "node_id": "MDU6TGFiZWwxMDA3MDk5MDA3",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Status:%20Accepted",
                        "name": "Status: Accepted",
                        "color": "00b33c",
                        "default": false,
                        "description": "Ready to integrate (reviewed, tested)"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits",
                "review_comments_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments",
                "review_comment_url": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments",
                "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "head": {
                    "label": "don-brady:raidz-expansion",
                    "ref": "raidz-expansion",
                    "sha": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                    "user": {
                        "login": "don-brady",
                        "id": 12415697,
                        "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                        "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/don-brady",
                        "html_url": "https://github.com/don-brady",
                        "followers_url": "https://api.github.com/users/don-brady/followers",
                        "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                        "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                        "organizations_url": "https://api.github.com/users/don-brady/orgs",
                        "repos_url": "https://api.github.com/users/don-brady/repos",
                        "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/don-brady/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 425096697,
                        "node_id": "R_kgDOGVZ1-Q",
                        "name": "openzfs",
                        "full_name": "don-brady/openzfs",
                        "private": false,
                        "owner": {
                            "login": "don-brady",
                            "id": 12415697,
                            "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/don-brady",
                            "html_url": "https://github.com/don-brady",
                            "followers_url": "https://api.github.com/users/don-brady/followers",
                            "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                            "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                            "organizations_url": "https://api.github.com/users/don-brady/orgs",
                            "repos_url": "https://api.github.com/users/don-brady/repos",
                            "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/don-brady/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/don-brady/openzfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": true,
                        "url": "https://api.github.com/repos/don-brady/openzfs",
                        "forks_url": "https://api.github.com/repos/don-brady/openzfs/forks",
                        "keys_url": "https://api.github.com/repos/don-brady/openzfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/don-brady/openzfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/don-brady/openzfs/teams",
                        "hooks_url": "https://api.github.com/repos/don-brady/openzfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/don-brady/openzfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/don-brady/openzfs/events",
                        "assignees_url": "https://api.github.com/repos/don-brady/openzfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/don-brady/openzfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/don-brady/openzfs/tags",
                        "blobs_url": "https://api.github.com/repos/don-brady/openzfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/don-brady/openzfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/don-brady/openzfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/don-brady/openzfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/don-brady/openzfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/don-brady/openzfs/languages",
                        "stargazers_url": "https://api.github.com/repos/don-brady/openzfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/don-brady/openzfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/don-brady/openzfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/don-brady/openzfs/subscription",
                        "commits_url": "https://api.github.com/repos/don-brady/openzfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/don-brady/openzfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/don-brady/openzfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/don-brady/openzfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/don-brady/openzfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/don-brady/openzfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/don-brady/openzfs/merges",
                        "archive_url": "https://api.github.com/repos/don-brady/openzfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/don-brady/openzfs/downloads",
                        "issues_url": "https://api.github.com/repos/don-brady/openzfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/don-brady/openzfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/don-brady/openzfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/don-brady/openzfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/don-brady/openzfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/don-brady/openzfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/don-brady/openzfs/deployments",
                        "created_at": "2021-11-05T22:10:31Z",
                        "updated_at": "2023-04-19T17:10:15Z",
                        "pushed_at": "2023-10-26T19:13:59Z",
                        "git_url": "git://github.com/don-brady/openzfs.git",
                        "ssh_url": "git@github.com:don-brady/openzfs.git",
                        "clone_url": "https://github.com/don-brady/openzfs.git",
                        "svn_url": "https://github.com/don-brady/openzfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 120216,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "C",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 5,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 5,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "openzfs:master",
                    "ref": "master",
                    "sha": "9facf2d1ad0c4857de1d47a2a14e882a3fb78b89",
                    "user": {
                        "login": "openzfs",
                        "id": 4510897,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/openzfs",
                        "html_url": "https://github.com/openzfs",
                        "followers_url": "https://api.github.com/users/openzfs/followers",
                        "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                        "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                        "organizations_url": "https://api.github.com/users/openzfs/orgs",
                        "repos_url": "https://api.github.com/users/openzfs/repos",
                        "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/openzfs/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 437011,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0MzcwMTE=",
                        "name": "zfs",
                        "full_name": "openzfs/zfs",
                        "private": false,
                        "owner": {
                            "login": "openzfs",
                            "id": 4510897,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/openzfs",
                            "html_url": "https://github.com/openzfs",
                            "followers_url": "https://api.github.com/users/openzfs/followers",
                            "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                            "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                            "organizations_url": "https://api.github.com/users/openzfs/orgs",
                            "repos_url": "https://api.github.com/users/openzfs/repos",
                            "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/openzfs/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/openzfs/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": false,
                        "url": "https://api.github.com/repos/openzfs/zfs",
                        "forks_url": "https://api.github.com/repos/openzfs/zfs/forks",
                        "keys_url": "https://api.github.com/repos/openzfs/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/openzfs/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/openzfs/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/openzfs/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/openzfs/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/openzfs/zfs/events",
                        "assignees_url": "https://api.github.com/repos/openzfs/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/openzfs/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/openzfs/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/openzfs/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/openzfs/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/openzfs/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/openzfs/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/openzfs/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/openzfs/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/openzfs/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/openzfs/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/openzfs/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/openzfs/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/openzfs/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/openzfs/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/openzfs/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/openzfs/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/openzfs/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/openzfs/zfs/merges",
                        "archive_url": "https://api.github.com/repos/openzfs/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/openzfs/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/openzfs/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/openzfs/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/openzfs/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/openzfs/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/openzfs/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/openzfs/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/openzfs/zfs/deployments",
                        "created_at": "2009-12-14T20:20:34Z",
                        "updated_at": "2023-10-26T23:39:14Z",
                        "pushed_at": "2023-10-26T21:09:37Z",
                        "git_url": "git://github.com/openzfs/zfs.git",
                        "ssh_url": "git@github.com:openzfs/zfs.git",
                        "clone_url": "https://github.com/openzfs/zfs.git",
                        "svn_url": "https://github.com/openzfs/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 124672,
                        "stargazers_count": 9636,
                        "watchers_count": 9636,
                        "language": "C",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": true,
                        "forks_count": 1668,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1194,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": true,
                        "topics": [
                            "file-system",
                            "openzfs",
                            "system-software"
                        ],
                        "visibility": "public",
                        "forks": 1668,
                        "open_issues": 1194,
                        "watchers": 9636,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/openzfs/zfs/statuses/1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-26T23:20:53Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32884726650",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 148917,
            "login": "behlendorf",
            "display_login": "behlendorf",
            "gravatar_id": "",
            "url": "https://api.github.com/users/behlendorf",
            "avatar_url": "https://avatars.githubusercontent.com/u/148917?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1700679135,
                "node_id": "PRR_kwDOAAarE85lXk3f",
                "user": {
                    "login": "behlendorf",
                    "id": 148917,
                    "node_id": "MDQ6VXNlcjE0ODkxNw==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/148917?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/behlendorf",
                    "html_url": "https://github.com/behlendorf",
                    "followers_url": "https://api.github.com/users/behlendorf/followers",
                    "following_url": "https://api.github.com/users/behlendorf/following{/other_user}",
                    "gists_url": "https://api.github.com/users/behlendorf/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/behlendorf/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/behlendorf/subscriptions",
                    "organizations_url": "https://api.github.com/users/behlendorf/orgs",
                    "repos_url": "https://api.github.com/users/behlendorf/repos",
                    "events_url": "https://api.github.com/users/behlendorf/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/behlendorf/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "",
                "commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "submitted_at": "2023-10-27T00:12:33Z",
                "state": "commented",
                "html_url": "https://github.com/openzfs/zfs/pull/15022#pullrequestreview-1700679135",
                "pull_request_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022#pullrequestreview-1700679135"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "id": 1413536769,
                "node_id": "PR_kwDOAAarE85UQNwB",
                "html_url": "https://github.com/openzfs/zfs/pull/15022",
                "diff_url": "https://github.com/openzfs/zfs/pull/15022.diff",
                "patch_url": "https://github.com/openzfs/zfs/pull/15022.patch",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15022",
                "number": 15022,
                "state": "open",
                "locked": false,
                "title": "raidz expansion feature",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "### Motivation and Context\r\nThis feature allows disks to be added one at a time to a RAID-Z group, expanding its capacity incrementally. This feature is especially useful for small pools (typically with only one RAID-Z group), where there isn't sufficient hardware to add capacity by adding a whole new RAID-Z group (typically doubling the number of disks).\r\n\r\nFor additional context as well as a design overview, see Matt Ahrens' talk at the [2021 FreeBSD Developer Summit](https://wiki.freebsd.org/DevSummit/202106) ([video](https://youtu.be/3SUKJye54aI?t=6166)) ([slides](https://docs.google.com/presentation/d/1FeQgEwChrtNQBHfWSNsPK3Y53O5BnPh3Cz5nRa5GAQY/edit#slide=id.p)), and a [news article from Ars Technica](https://arstechnica.com/gadgets/2021/06/raidz-expansion-code-lands-in-openzfs-master/).\r\n\r\n### Description\r\n#### Initiating expansion\r\nA new device (disk) can be attached to an existing RAIDZ vdev, by running `zpool attach POOL raidzP-N NEW_DEVICE`, e.g. `zpool attach tank raidz2-0 sda`. The new device will become part of the RAIDZ group. A _raidz expansion_ will\r\nbe initiated, and the new device will contribute additional space to the RAIDZ group once the expansion completes.\r\n\r\nThe `feature@raidz_expansion` on-disk feature flag must be `enabled` to initiate an expansion, and it remains `active` for the life of the pool. In other words, pools with expanded RAIDZ vdevs can not be imported by older releases of the ZFS software.\r\n\r\n#### During expansion\r\nThe expansion entails reading all allocated space from existing disks in the RAIDZ group, and rewriting it to the new disks in the RAIDZ group (including the newly added device).\r\n\r\nThe expansion progress can be monitored with `zpool status`.\r\n\r\nData redundancy is maintained during (and after) the expansion. If a disk fails while the expansion is in progress, the expansion pauses until the health of the RAIDZ vdev is restored (e.g. by replacing the failed disk and waiting\r\nfor reconstruction to complete).\r\n\r\nThe pool remains accessible during expansion. Following a reboot or export/import, the expansion resumes where it left off.\r\n\r\n#### After expansion\r\nWhen the expansion completes, the additional space is available for use, and is reflected in the `available` zfs property (as seen in `zfs list`, `df`, etc).\r\n\r\nExpansion does not change the number of failures that can be tolerated without data loss (e.g. a RAIDZ2 is still a RAIDZ2 even after expansion).\r\n\r\nA RAIDZ vdev can be expanded multiple times.\r\n\r\nAfter the expansion completes, old blocks remain with their old data-to-parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distributed among the larger set of disks. New blocks will be written with the new data-to-parity\r\nratio (e.g. a 5-wide RAIDZ2 which has been expanded once to 6-wide, has 4 data to 2 parity). However, the RAIDZ vdev's \"assumed parity ratio\" does not change, so slightly less space than is expected may be reported for newly-written blocks, according to `zfs list`, `df`, `ls -s`, and similar tools.\r\n\r\n#### Manpage changes\r\nzpool-attach.8:\r\n```\r\nNAME\r\n     zpool-attach \u2014 attach new device to existing ZFS vdev\r\n\r\nSYNOPSIS\r\n     zpool attach [-fsw] [-o property=value] pool device new_device\r\n\r\nDESCRIPTION\r\n     Attaches new_device to the existing device.  The behavior differs depend\u2010\r\n     ing on if the existing device is a RAIDZ device, or a mirror/plain\r\n     device.\r\n\r\n     If the existing device is a mirror or plain device ...\r\n\r\n     If the existing device is a RAIDZ device (e.g. specified as \"raidz2-0\"),\r\n     the new device will become part of that RAIDZ group.  A \"raidz expansion\"\r\n     will be initiated, and the new device will contribute additional space to\r\n     the RAIDZ group once the expansion completes.  The expansion entails\r\n     reading all allocated space from existing disks in the RAIDZ group, and\r\n     rewriting it to the new disks in the RAIDZ group (including the newly\r\n     added device).  Its progress can be monitored with zpool status.\r\n\r\n     Data redundancy is maintained during and after the expansion.  If a disk\r\n     fails while the expansion is in progress, the expansion pauses until the\r\n     health of the RAIDZ vdev is restored (e.g. by replacing the failed disk\r\n     and waiting for reconstruction to complete).  Expansion does not change\r\n     the number of failures that can be tolerated without data loss (e.g. a\r\n     RAIDZ2 is still a RAIDZ2 even after expansion).  A RAIDZ vdev can be\r\n     expanded multiple times.\r\n\r\n     After the expansion completes, old blocks remain with their old data-to-\r\n     parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distrib\u2010\r\n     uted among the larger set of disks.  New blocks will be written with the\r\n     new data-to-parity ratio (e.g. a 5-wide RAIDZ2 which has been expanded\r\n     once to 6-wide, has 4 data to 2 parity).  However, the RAIDZ vdev's\r\n     \"assumed parity ratio\" does not change, so slightly less space than is\r\n     expected may be reported for newly-written blocks, according to zfs list,\r\n     df, ls -s, and similar tools.\r\n```\r\n#### Status\r\nMatt Ahrens' original pull request (#12225) has been rebased here to current master branch and updated to incorporate recent code cleanups in the OpenZFS codebase. This feature is believed to be complete. However, like all PR's, it is subject to change as part of the code review process. Since this PR includes on-disk changes, it shouldn't be used on production systems before it is integrated to the OpenZFS codebase. Tasks that still need to be done before integration:\r\n- [x] Additional code cleanup in `ztest` code\r\n- [x] `zloop` changes to drive coverage of this feature\r\n- [ ] Address test failures in `ztest` runs\r\n- [x] Document the high-level design in a \"big theory statement\" comment\r\n- [x] Remove verbose logging\r\n- [x] Detection of MBR partitions using reserved boot area (FreeBSD BTX boot loader)\r\n- [ ] Address any performance concerns\r\n\r\n### Acknowledgments\r\nThank you to the [FreeBSD Foundation](https://freebsdfoundation.org/) for commissioning this work in 2017 and continuing to sponsor it well past the original time estimates!\r\nThank you to [iXsystems](https://www.ixsystems.com/) for sponsoring the final push to land this feature into OpenZFS.\r\n\r\nThanks also to contributors @FedorUporovVstack, @stuartmaybee, @thorsteneb, and @Fmstrat for portions\r\nof the implementation.\r\n\r\nSponsored-by: The FreeBSD Foundation\r\nSponsored-by: iXsystems, Inc.\r\nSponsored-by: vStack\r\nContributions-by: Stuart Maybee [stuart.maybee@comcast.net](mailto:stuart.maybee@comcast.net)\r\nContributions-by: Fedor Uporov [fuporov.vstack@gmail.com](mailto:fuporov.vstack@gmail.com)\r\nContributions-by: Thorsten Behrens [tbehrens@outlook.com](mailto:tbehrens@outlook.com)\r\nContributions-by: Fmstrat [nospam@nowsci.com](mailto:nospam@nowsci.com)\r\nContributions-by: Don Brady <dev.fs.zfs@gmail.com>\r\n\r\n### How Has This Been Tested?\r\nTests added to the ZFS Test Suite (`functional/raidz`) and `ztest`, in addition to manual testing.\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [x] New feature (non-breaking change which adds functionality)\r\n- [ ] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n- [x] I have updated the documentation accordingly.\r\n- [x] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [x] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [ ] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n\r\n### Pull Request Comments\r\nPlease limit comments here to code review/feedback and testing questions/results.\r\n\r\nFor generic discussions about RAID-Z, or discussions on future enhancements to RAIDZ expansion, please use [RAIDZ Expansion feature discussions](https://github.com/openzfs/zfs/discussions/15232).",
                "created_at": "2023-06-29T15:15:15Z",
                "updated_at": "2023-10-27T00:12:33Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "6fdafbf6e37585581adb097631ff652a5ec35d1d",
                "assignee": {
                    "login": "mmaybee",
                    "id": 44241648,
                    "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/mmaybee",
                    "html_url": "https://github.com/mmaybee",
                    "followers_url": "https://api.github.com/users/mmaybee/followers",
                    "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                    "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                    "repos_url": "https://api.github.com/users/mmaybee/repos",
                    "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "mmaybee",
                        "id": 44241648,
                        "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mmaybee",
                        "html_url": "https://github.com/mmaybee",
                        "followers_url": "https://api.github.com/users/mmaybee/followers",
                        "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                        "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                        "repos_url": "https://api.github.com/users/mmaybee/repos",
                        "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 40358,
                        "node_id": "MDU6TGFiZWw0MDM1OA==",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Feature",
                        "name": "Type: Feature",
                        "color": "02d7e1",
                        "default": false,
                        "description": "Feature request or new feature"
                    },
                    {
                        "id": 1007099007,
                        "node_id": "MDU6TGFiZWwxMDA3MDk5MDA3",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Status:%20Accepted",
                        "name": "Status: Accepted",
                        "color": "00b33c",
                        "default": false,
                        "description": "Ready to integrate (reviewed, tested)"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits",
                "review_comments_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments",
                "review_comment_url": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments",
                "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "head": {
                    "label": "don-brady:raidz-expansion",
                    "ref": "raidz-expansion",
                    "sha": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                    "user": {
                        "login": "don-brady",
                        "id": 12415697,
                        "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                        "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/don-brady",
                        "html_url": "https://github.com/don-brady",
                        "followers_url": "https://api.github.com/users/don-brady/followers",
                        "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                        "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                        "organizations_url": "https://api.github.com/users/don-brady/orgs",
                        "repos_url": "https://api.github.com/users/don-brady/repos",
                        "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/don-brady/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 425096697,
                        "node_id": "R_kgDOGVZ1-Q",
                        "name": "openzfs",
                        "full_name": "don-brady/openzfs",
                        "private": false,
                        "owner": {
                            "login": "don-brady",
                            "id": 12415697,
                            "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/don-brady",
                            "html_url": "https://github.com/don-brady",
                            "followers_url": "https://api.github.com/users/don-brady/followers",
                            "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                            "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                            "organizations_url": "https://api.github.com/users/don-brady/orgs",
                            "repos_url": "https://api.github.com/users/don-brady/repos",
                            "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/don-brady/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/don-brady/openzfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": true,
                        "url": "https://api.github.com/repos/don-brady/openzfs",
                        "forks_url": "https://api.github.com/repos/don-brady/openzfs/forks",
                        "keys_url": "https://api.github.com/repos/don-brady/openzfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/don-brady/openzfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/don-brady/openzfs/teams",
                        "hooks_url": "https://api.github.com/repos/don-brady/openzfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/don-brady/openzfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/don-brady/openzfs/events",
                        "assignees_url": "https://api.github.com/repos/don-brady/openzfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/don-brady/openzfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/don-brady/openzfs/tags",
                        "blobs_url": "https://api.github.com/repos/don-brady/openzfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/don-brady/openzfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/don-brady/openzfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/don-brady/openzfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/don-brady/openzfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/don-brady/openzfs/languages",
                        "stargazers_url": "https://api.github.com/repos/don-brady/openzfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/don-brady/openzfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/don-brady/openzfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/don-brady/openzfs/subscription",
                        "commits_url": "https://api.github.com/repos/don-brady/openzfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/don-brady/openzfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/don-brady/openzfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/don-brady/openzfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/don-brady/openzfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/don-brady/openzfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/don-brady/openzfs/merges",
                        "archive_url": "https://api.github.com/repos/don-brady/openzfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/don-brady/openzfs/downloads",
                        "issues_url": "https://api.github.com/repos/don-brady/openzfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/don-brady/openzfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/don-brady/openzfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/don-brady/openzfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/don-brady/openzfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/don-brady/openzfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/don-brady/openzfs/deployments",
                        "created_at": "2021-11-05T22:10:31Z",
                        "updated_at": "2023-04-19T17:10:15Z",
                        "pushed_at": "2023-10-26T19:13:59Z",
                        "git_url": "git://github.com/don-brady/openzfs.git",
                        "ssh_url": "git@github.com:don-brady/openzfs.git",
                        "clone_url": "https://github.com/don-brady/openzfs.git",
                        "svn_url": "https://github.com/don-brady/openzfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 120216,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "C",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 5,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 5,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "openzfs:master",
                    "ref": "master",
                    "sha": "9facf2d1ad0c4857de1d47a2a14e882a3fb78b89",
                    "user": {
                        "login": "openzfs",
                        "id": 4510897,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/openzfs",
                        "html_url": "https://github.com/openzfs",
                        "followers_url": "https://api.github.com/users/openzfs/followers",
                        "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                        "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                        "organizations_url": "https://api.github.com/users/openzfs/orgs",
                        "repos_url": "https://api.github.com/users/openzfs/repos",
                        "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/openzfs/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 437011,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0MzcwMTE=",
                        "name": "zfs",
                        "full_name": "openzfs/zfs",
                        "private": false,
                        "owner": {
                            "login": "openzfs",
                            "id": 4510897,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/openzfs",
                            "html_url": "https://github.com/openzfs",
                            "followers_url": "https://api.github.com/users/openzfs/followers",
                            "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                            "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                            "organizations_url": "https://api.github.com/users/openzfs/orgs",
                            "repos_url": "https://api.github.com/users/openzfs/repos",
                            "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/openzfs/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/openzfs/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": false,
                        "url": "https://api.github.com/repos/openzfs/zfs",
                        "forks_url": "https://api.github.com/repos/openzfs/zfs/forks",
                        "keys_url": "https://api.github.com/repos/openzfs/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/openzfs/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/openzfs/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/openzfs/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/openzfs/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/openzfs/zfs/events",
                        "assignees_url": "https://api.github.com/repos/openzfs/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/openzfs/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/openzfs/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/openzfs/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/openzfs/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/openzfs/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/openzfs/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/openzfs/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/openzfs/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/openzfs/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/openzfs/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/openzfs/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/openzfs/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/openzfs/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/openzfs/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/openzfs/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/openzfs/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/openzfs/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/openzfs/zfs/merges",
                        "archive_url": "https://api.github.com/repos/openzfs/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/openzfs/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/openzfs/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/openzfs/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/openzfs/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/openzfs/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/openzfs/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/openzfs/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/openzfs/zfs/deployments",
                        "created_at": "2009-12-14T20:20:34Z",
                        "updated_at": "2023-10-26T23:39:14Z",
                        "pushed_at": "2023-10-26T21:09:37Z",
                        "git_url": "git://github.com/openzfs/zfs.git",
                        "ssh_url": "git@github.com:openzfs/zfs.git",
                        "clone_url": "https://github.com/openzfs/zfs.git",
                        "svn_url": "https://github.com/openzfs/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 124672,
                        "stargazers_count": 9636,
                        "watchers_count": 9636,
                        "language": "C",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": true,
                        "forks_count": 1668,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1194,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": true,
                        "topics": [
                            "file-system",
                            "openzfs",
                            "system-software"
                        ],
                        "visibility": "public",
                        "forks": 1668,
                        "open_issues": 1194,
                        "watchers": 9636,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/openzfs/zfs/statuses/1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T00:12:33Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32884726598",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 148917,
            "login": "behlendorf",
            "display_login": "behlendorf",
            "gravatar_id": "",
            "url": "https://api.github.com/users/behlendorf",
            "avatar_url": "https://avatars.githubusercontent.com/u/148917?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1700679135,
                "node_id": "PRR_kwDOAAarE85lXk3f",
                "user": {
                    "login": "behlendorf",
                    "id": 148917,
                    "node_id": "MDQ6VXNlcjE0ODkxNw==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/148917?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/behlendorf",
                    "html_url": "https://github.com/behlendorf",
                    "followers_url": "https://api.github.com/users/behlendorf/followers",
                    "following_url": "https://api.github.com/users/behlendorf/following{/other_user}",
                    "gists_url": "https://api.github.com/users/behlendorf/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/behlendorf/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/behlendorf/subscriptions",
                    "organizations_url": "https://api.github.com/users/behlendorf/orgs",
                    "repos_url": "https://api.github.com/users/behlendorf/repos",
                    "events_url": "https://api.github.com/users/behlendorf/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/behlendorf/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "",
                "commit_id": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "submitted_at": "2023-10-27T00:12:33Z",
                "state": "commented",
                "html_url": "https://github.com/openzfs/zfs/pull/15022#pullrequestreview-1700679135",
                "pull_request_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022#pullrequestreview-1700679135"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/15022",
                "id": 1413536769,
                "node_id": "PR_kwDOAAarE85UQNwB",
                "html_url": "https://github.com/openzfs/zfs/pull/15022",
                "diff_url": "https://github.com/openzfs/zfs/pull/15022.diff",
                "patch_url": "https://github.com/openzfs/zfs/pull/15022.patch",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15022",
                "number": 15022,
                "state": "open",
                "locked": false,
                "title": "raidz expansion feature",
                "user": {
                    "login": "don-brady",
                    "id": 12415697,
                    "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                    "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/don-brady",
                    "html_url": "https://github.com/don-brady",
                    "followers_url": "https://api.github.com/users/don-brady/followers",
                    "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                    "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                    "organizations_url": "https://api.github.com/users/don-brady/orgs",
                    "repos_url": "https://api.github.com/users/don-brady/repos",
                    "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/don-brady/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "### Motivation and Context\r\nThis feature allows disks to be added one at a time to a RAID-Z group, expanding its capacity incrementally. This feature is especially useful for small pools (typically with only one RAID-Z group), where there isn't sufficient hardware to add capacity by adding a whole new RAID-Z group (typically doubling the number of disks).\r\n\r\nFor additional context as well as a design overview, see Matt Ahrens' talk at the [2021 FreeBSD Developer Summit](https://wiki.freebsd.org/DevSummit/202106) ([video](https://youtu.be/3SUKJye54aI?t=6166)) ([slides](https://docs.google.com/presentation/d/1FeQgEwChrtNQBHfWSNsPK3Y53O5BnPh3Cz5nRa5GAQY/edit#slide=id.p)), and a [news article from Ars Technica](https://arstechnica.com/gadgets/2021/06/raidz-expansion-code-lands-in-openzfs-master/).\r\n\r\n### Description\r\n#### Initiating expansion\r\nA new device (disk) can be attached to an existing RAIDZ vdev, by running `zpool attach POOL raidzP-N NEW_DEVICE`, e.g. `zpool attach tank raidz2-0 sda`. The new device will become part of the RAIDZ group. A _raidz expansion_ will\r\nbe initiated, and the new device will contribute additional space to the RAIDZ group once the expansion completes.\r\n\r\nThe `feature@raidz_expansion` on-disk feature flag must be `enabled` to initiate an expansion, and it remains `active` for the life of the pool. In other words, pools with expanded RAIDZ vdevs can not be imported by older releases of the ZFS software.\r\n\r\n#### During expansion\r\nThe expansion entails reading all allocated space from existing disks in the RAIDZ group, and rewriting it to the new disks in the RAIDZ group (including the newly added device).\r\n\r\nThe expansion progress can be monitored with `zpool status`.\r\n\r\nData redundancy is maintained during (and after) the expansion. If a disk fails while the expansion is in progress, the expansion pauses until the health of the RAIDZ vdev is restored (e.g. by replacing the failed disk and waiting\r\nfor reconstruction to complete).\r\n\r\nThe pool remains accessible during expansion. Following a reboot or export/import, the expansion resumes where it left off.\r\n\r\n#### After expansion\r\nWhen the expansion completes, the additional space is available for use, and is reflected in the `available` zfs property (as seen in `zfs list`, `df`, etc).\r\n\r\nExpansion does not change the number of failures that can be tolerated without data loss (e.g. a RAIDZ2 is still a RAIDZ2 even after expansion).\r\n\r\nA RAIDZ vdev can be expanded multiple times.\r\n\r\nAfter the expansion completes, old blocks remain with their old data-to-parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distributed among the larger set of disks. New blocks will be written with the new data-to-parity\r\nratio (e.g. a 5-wide RAIDZ2 which has been expanded once to 6-wide, has 4 data to 2 parity). However, the RAIDZ vdev's \"assumed parity ratio\" does not change, so slightly less space than is expected may be reported for newly-written blocks, according to `zfs list`, `df`, `ls -s`, and similar tools.\r\n\r\n#### Manpage changes\r\nzpool-attach.8:\r\n```\r\nNAME\r\n     zpool-attach \u2014 attach new device to existing ZFS vdev\r\n\r\nSYNOPSIS\r\n     zpool attach [-fsw] [-o property=value] pool device new_device\r\n\r\nDESCRIPTION\r\n     Attaches new_device to the existing device.  The behavior differs depend\u2010\r\n     ing on if the existing device is a RAIDZ device, or a mirror/plain\r\n     device.\r\n\r\n     If the existing device is a mirror or plain device ...\r\n\r\n     If the existing device is a RAIDZ device (e.g. specified as \"raidz2-0\"),\r\n     the new device will become part of that RAIDZ group.  A \"raidz expansion\"\r\n     will be initiated, and the new device will contribute additional space to\r\n     the RAIDZ group once the expansion completes.  The expansion entails\r\n     reading all allocated space from existing disks in the RAIDZ group, and\r\n     rewriting it to the new disks in the RAIDZ group (including the newly\r\n     added device).  Its progress can be monitored with zpool status.\r\n\r\n     Data redundancy is maintained during and after the expansion.  If a disk\r\n     fails while the expansion is in progress, the expansion pauses until the\r\n     health of the RAIDZ vdev is restored (e.g. by replacing the failed disk\r\n     and waiting for reconstruction to complete).  Expansion does not change\r\n     the number of failures that can be tolerated without data loss (e.g. a\r\n     RAIDZ2 is still a RAIDZ2 even after expansion).  A RAIDZ vdev can be\r\n     expanded multiple times.\r\n\r\n     After the expansion completes, old blocks remain with their old data-to-\r\n     parity ratio (e.g. 5-wide RAIDZ2, has 3 data to 2 parity), but distrib\u2010\r\n     uted among the larger set of disks.  New blocks will be written with the\r\n     new data-to-parity ratio (e.g. a 5-wide RAIDZ2 which has been expanded\r\n     once to 6-wide, has 4 data to 2 parity).  However, the RAIDZ vdev's\r\n     \"assumed parity ratio\" does not change, so slightly less space than is\r\n     expected may be reported for newly-written blocks, according to zfs list,\r\n     df, ls -s, and similar tools.\r\n```\r\n#### Status\r\nMatt Ahrens' original pull request (#12225) has been rebased here to current master branch and updated to incorporate recent code cleanups in the OpenZFS codebase. This feature is believed to be complete. However, like all PR's, it is subject to change as part of the code review process. Since this PR includes on-disk changes, it shouldn't be used on production systems before it is integrated to the OpenZFS codebase. Tasks that still need to be done before integration:\r\n- [x] Additional code cleanup in `ztest` code\r\n- [x] `zloop` changes to drive coverage of this feature\r\n- [ ] Address test failures in `ztest` runs\r\n- [x] Document the high-level design in a \"big theory statement\" comment\r\n- [x] Remove verbose logging\r\n- [x] Detection of MBR partitions using reserved boot area (FreeBSD BTX boot loader)\r\n- [ ] Address any performance concerns\r\n\r\n### Acknowledgments\r\nThank you to the [FreeBSD Foundation](https://freebsdfoundation.org/) for commissioning this work in 2017 and continuing to sponsor it well past the original time estimates!\r\nThank you to [iXsystems](https://www.ixsystems.com/) for sponsoring the final push to land this feature into OpenZFS.\r\n\r\nThanks also to contributors @FedorUporovVstack, @stuartmaybee, @thorsteneb, and @Fmstrat for portions\r\nof the implementation.\r\n\r\nSponsored-by: The FreeBSD Foundation\r\nSponsored-by: iXsystems, Inc.\r\nSponsored-by: vStack\r\nContributions-by: Stuart Maybee [stuart.maybee@comcast.net](mailto:stuart.maybee@comcast.net)\r\nContributions-by: Fedor Uporov [fuporov.vstack@gmail.com](mailto:fuporov.vstack@gmail.com)\r\nContributions-by: Thorsten Behrens [tbehrens@outlook.com](mailto:tbehrens@outlook.com)\r\nContributions-by: Fmstrat [nospam@nowsci.com](mailto:nospam@nowsci.com)\r\nContributions-by: Don Brady <dev.fs.zfs@gmail.com>\r\n\r\n### How Has This Been Tested?\r\nTests added to the ZFS Test Suite (`functional/raidz`) and `ztest`, in addition to manual testing.\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [x] New feature (non-breaking change which adds functionality)\r\n- [ ] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n- [x] I have updated the documentation accordingly.\r\n- [x] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [x] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [ ] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n\r\n### Pull Request Comments\r\nPlease limit comments here to code review/feedback and testing questions/results.\r\n\r\nFor generic discussions about RAID-Z, or discussions on future enhancements to RAIDZ expansion, please use [RAIDZ Expansion feature discussions](https://github.com/openzfs/zfs/discussions/15232).",
                "created_at": "2023-06-29T15:15:15Z",
                "updated_at": "2023-10-27T00:12:33Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "6fdafbf6e37585581adb097631ff652a5ec35d1d",
                "assignee": {
                    "login": "mmaybee",
                    "id": 44241648,
                    "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/mmaybee",
                    "html_url": "https://github.com/mmaybee",
                    "followers_url": "https://api.github.com/users/mmaybee/followers",
                    "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                    "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                    "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                    "repos_url": "https://api.github.com/users/mmaybee/repos",
                    "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "mmaybee",
                        "id": 44241648,
                        "node_id": "MDQ6VXNlcjQ0MjQxNjQ4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/44241648?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/mmaybee",
                        "html_url": "https://github.com/mmaybee",
                        "followers_url": "https://api.github.com/users/mmaybee/followers",
                        "following_url": "https://api.github.com/users/mmaybee/following{/other_user}",
                        "gists_url": "https://api.github.com/users/mmaybee/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/mmaybee/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/mmaybee/subscriptions",
                        "organizations_url": "https://api.github.com/users/mmaybee/orgs",
                        "repos_url": "https://api.github.com/users/mmaybee/repos",
                        "events_url": "https://api.github.com/users/mmaybee/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/mmaybee/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 40358,
                        "node_id": "MDU6TGFiZWw0MDM1OA==",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Feature",
                        "name": "Type: Feature",
                        "color": "02d7e1",
                        "default": false,
                        "description": "Feature request or new feature"
                    },
                    {
                        "id": 1007099007,
                        "node_id": "MDU6TGFiZWwxMDA3MDk5MDA3",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Status:%20Accepted",
                        "name": "Status: Accepted",
                        "color": "00b33c",
                        "default": false,
                        "description": "Ready to integrate (reviewed, tested)"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits",
                "review_comments_url": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments",
                "review_comment_url": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments",
                "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                "head": {
                    "label": "don-brady:raidz-expansion",
                    "ref": "raidz-expansion",
                    "sha": "1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3",
                    "user": {
                        "login": "don-brady",
                        "id": 12415697,
                        "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                        "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/don-brady",
                        "html_url": "https://github.com/don-brady",
                        "followers_url": "https://api.github.com/users/don-brady/followers",
                        "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                        "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                        "organizations_url": "https://api.github.com/users/don-brady/orgs",
                        "repos_url": "https://api.github.com/users/don-brady/repos",
                        "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/don-brady/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 425096697,
                        "node_id": "R_kgDOGVZ1-Q",
                        "name": "openzfs",
                        "full_name": "don-brady/openzfs",
                        "private": false,
                        "owner": {
                            "login": "don-brady",
                            "id": 12415697,
                            "node_id": "MDQ6VXNlcjEyNDE1Njk3",
                            "avatar_url": "https://avatars.githubusercontent.com/u/12415697?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/don-brady",
                            "html_url": "https://github.com/don-brady",
                            "followers_url": "https://api.github.com/users/don-brady/followers",
                            "following_url": "https://api.github.com/users/don-brady/following{/other_user}",
                            "gists_url": "https://api.github.com/users/don-brady/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/don-brady/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/don-brady/subscriptions",
                            "organizations_url": "https://api.github.com/users/don-brady/orgs",
                            "repos_url": "https://api.github.com/users/don-brady/repos",
                            "events_url": "https://api.github.com/users/don-brady/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/don-brady/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/don-brady/openzfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": true,
                        "url": "https://api.github.com/repos/don-brady/openzfs",
                        "forks_url": "https://api.github.com/repos/don-brady/openzfs/forks",
                        "keys_url": "https://api.github.com/repos/don-brady/openzfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/don-brady/openzfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/don-brady/openzfs/teams",
                        "hooks_url": "https://api.github.com/repos/don-brady/openzfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/don-brady/openzfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/don-brady/openzfs/events",
                        "assignees_url": "https://api.github.com/repos/don-brady/openzfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/don-brady/openzfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/don-brady/openzfs/tags",
                        "blobs_url": "https://api.github.com/repos/don-brady/openzfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/don-brady/openzfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/don-brady/openzfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/don-brady/openzfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/don-brady/openzfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/don-brady/openzfs/languages",
                        "stargazers_url": "https://api.github.com/repos/don-brady/openzfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/don-brady/openzfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/don-brady/openzfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/don-brady/openzfs/subscription",
                        "commits_url": "https://api.github.com/repos/don-brady/openzfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/don-brady/openzfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/don-brady/openzfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/don-brady/openzfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/don-brady/openzfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/don-brady/openzfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/don-brady/openzfs/merges",
                        "archive_url": "https://api.github.com/repos/don-brady/openzfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/don-brady/openzfs/downloads",
                        "issues_url": "https://api.github.com/repos/don-brady/openzfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/don-brady/openzfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/don-brady/openzfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/don-brady/openzfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/don-brady/openzfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/don-brady/openzfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/don-brady/openzfs/deployments",
                        "created_at": "2021-11-05T22:10:31Z",
                        "updated_at": "2023-04-19T17:10:15Z",
                        "pushed_at": "2023-10-26T19:13:59Z",
                        "git_url": "git://github.com/don-brady/openzfs.git",
                        "ssh_url": "git@github.com:don-brady/openzfs.git",
                        "clone_url": "https://github.com/don-brady/openzfs.git",
                        "svn_url": "https://github.com/don-brady/openzfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 120216,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "C",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 5,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 5,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "openzfs:master",
                    "ref": "master",
                    "sha": "9facf2d1ad0c4857de1d47a2a14e882a3fb78b89",
                    "user": {
                        "login": "openzfs",
                        "id": 4510897,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/openzfs",
                        "html_url": "https://github.com/openzfs",
                        "followers_url": "https://api.github.com/users/openzfs/followers",
                        "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                        "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                        "organizations_url": "https://api.github.com/users/openzfs/orgs",
                        "repos_url": "https://api.github.com/users/openzfs/repos",
                        "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/openzfs/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 437011,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0MzcwMTE=",
                        "name": "zfs",
                        "full_name": "openzfs/zfs",
                        "private": false,
                        "owner": {
                            "login": "openzfs",
                            "id": 4510897,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/openzfs",
                            "html_url": "https://github.com/openzfs",
                            "followers_url": "https://api.github.com/users/openzfs/followers",
                            "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                            "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                            "organizations_url": "https://api.github.com/users/openzfs/orgs",
                            "repos_url": "https://api.github.com/users/openzfs/repos",
                            "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/openzfs/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/openzfs/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": false,
                        "url": "https://api.github.com/repos/openzfs/zfs",
                        "forks_url": "https://api.github.com/repos/openzfs/zfs/forks",
                        "keys_url": "https://api.github.com/repos/openzfs/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/openzfs/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/openzfs/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/openzfs/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/openzfs/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/openzfs/zfs/events",
                        "assignees_url": "https://api.github.com/repos/openzfs/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/openzfs/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/openzfs/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/openzfs/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/openzfs/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/openzfs/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/openzfs/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/openzfs/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/openzfs/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/openzfs/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/openzfs/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/openzfs/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/openzfs/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/openzfs/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/openzfs/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/openzfs/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/openzfs/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/openzfs/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/openzfs/zfs/merges",
                        "archive_url": "https://api.github.com/repos/openzfs/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/openzfs/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/openzfs/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/openzfs/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/openzfs/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/openzfs/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/openzfs/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/openzfs/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/openzfs/zfs/deployments",
                        "created_at": "2009-12-14T20:20:34Z",
                        "updated_at": "2023-10-26T23:39:14Z",
                        "pushed_at": "2023-10-26T21:09:37Z",
                        "git_url": "git://github.com/openzfs/zfs.git",
                        "ssh_url": "git@github.com:openzfs/zfs.git",
                        "clone_url": "https://github.com/openzfs/zfs.git",
                        "svn_url": "https://github.com/openzfs/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 124672,
                        "stargazers_count": 9636,
                        "watchers_count": 9636,
                        "language": "C",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": true,
                        "forks_count": 1668,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1194,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": true,
                        "topics": [
                            "file-system",
                            "openzfs",
                            "system-software"
                        ],
                        "visibility": "public",
                        "forks": 1668,
                        "open_issues": 1194,
                        "watchers": 9636,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15022"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15022/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15022/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/openzfs/zfs/statuses/1a8cf6f4ebe2446a00290154c40bbef9ef7cf7f3"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-27T00:12:33Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32884542269",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 782170,
            "login": "markjdb",
            "display_login": "markjdb",
            "gravatar_id": "",
            "url": "https://api.github.com/users/markjdb",
            "avatar_url": "https://avatars.githubusercontent.com/u/782170?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1700805530,
                "node_id": "PRR_kwDOAAarE85lYDua",
                "user": {
                    "login": "markjdb",
                    "id": 782170,
                    "node_id": "MDQ6VXNlcjc4MjE3MA==",
                    "avatar_url": "https://avatars.githubusercontent.com/u/782170?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/markjdb",
                    "html_url": "https://github.com/markjdb",
                    "followers_url": "https://api.github.com/users/markjdb/followers",
                    "following_url": "https://api.github.com/users/markjdb/following{/other_user}",
                    "gists_url": "https://api.github.com/users/markjdb/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/markjdb/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/markjdb/subscriptions",
                    "organizations_url": "https://api.github.com/users/markjdb/orgs",
                    "repos_url": "https://api.github.com/users/markjdb/repos",
                    "events_url": "https://api.github.com/users/markjdb/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/markjdb/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "",
                "commit_id": "3e035dce893306566dd841f83bf29a2c1f257e31",
                "submitted_at": "2023-10-26T23:58:36Z",
                "state": "approved",
                "html_url": "https://github.com/openzfs/zfs/pull/15456#pullrequestreview-1700805530",
                "pull_request_url": "https://api.github.com/repos/openzfs/zfs/pulls/15456",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15456#pullrequestreview-1700805530"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15456"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/openzfs/zfs/pulls/15456",
                "id": 1575393863,
                "node_id": "PR_kwDOAAarE85d5ppH",
                "html_url": "https://github.com/openzfs/zfs/pull/15456",
                "diff_url": "https://github.com/openzfs/zfs/pull/15456.diff",
                "patch_url": "https://github.com/openzfs/zfs/pull/15456.patch",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15456",
                "number": 15456,
                "state": "open",
                "locked": false,
                "title": "Unify arc_prune_async() code",
                "user": {
                    "login": "amotin",
                    "id": 5219480,
                    "node_id": "MDQ6VXNlcjUyMTk0ODA=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/5219480?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/amotin",
                    "html_url": "https://github.com/amotin",
                    "followers_url": "https://api.github.com/users/amotin/followers",
                    "following_url": "https://api.github.com/users/amotin/following{/other_user}",
                    "gists_url": "https://api.github.com/users/amotin/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/amotin/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/amotin/subscriptions",
                    "organizations_url": "https://api.github.com/users/amotin/orgs",
                    "repos_url": "https://api.github.com/users/amotin/repos",
                    "events_url": "https://api.github.com/users/amotin/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/amotin/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "There is no sense to have separate implementations for FreeBSD and Linux.  Make Linux code shared as more functional and just register FreeBSD-specific prune callback with arc_add_prune_callback() API.\r\n\r\nAside of code cleanup this should fix excessive pruning on FreeBSD:\r\nhttps://bugs.freebsd.org/bugzilla/show_bug.cgi?id=274698\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [x] Bug fix (non-breaking change which fixes an issue)\r\n- [ ] New feature (non-breaking change which adds functionality)\r\n- [ ] Performance enhancement (non-breaking change which improves efficiency)\r\n- [x] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [x] My code follows the OpenZFS [code style requirements](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#coding-conventions).\r\n- [ ] I have updated the documentation accordingly.\r\n- [ ] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [ ] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [x] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n",
                "created_at": "2023-10-26T18:45:11Z",
                "updated_at": "2023-10-26T23:58:36Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "f0132b590004fd381be5525deb808e40c4c64cb6",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 1061515916,
                        "node_id": "MDU6TGFiZWwxMDYxNTE1OTE2",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Status:%20Code%20Review%20Needed",
                        "name": "Status: Code Review Needed",
                        "color": "e6e600",
                        "default": false,
                        "description": "Ready for review and testing"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/openzfs/zfs/pulls/15456/commits",
                "review_comments_url": "https://api.github.com/repos/openzfs/zfs/pulls/15456/comments",
                "review_comment_url": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15456/comments",
                "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/3e035dce893306566dd841f83bf29a2c1f257e31",
                "head": {
                    "label": "amotin:prune",
                    "ref": "prune",
                    "sha": "3e035dce893306566dd841f83bf29a2c1f257e31",
                    "user": {
                        "login": "amotin",
                        "id": 5219480,
                        "node_id": "MDQ6VXNlcjUyMTk0ODA=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/5219480?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/amotin",
                        "html_url": "https://github.com/amotin",
                        "followers_url": "https://api.github.com/users/amotin/followers",
                        "following_url": "https://api.github.com/users/amotin/following{/other_user}",
                        "gists_url": "https://api.github.com/users/amotin/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/amotin/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/amotin/subscriptions",
                        "organizations_url": "https://api.github.com/users/amotin/orgs",
                        "repos_url": "https://api.github.com/users/amotin/repos",
                        "events_url": "https://api.github.com/users/amotin/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/amotin/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 175052697,
                        "node_id": "MDEwOlJlcG9zaXRvcnkxNzUwNTI2OTc=",
                        "name": "zfs",
                        "full_name": "amotin/zfs",
                        "private": false,
                        "owner": {
                            "login": "amotin",
                            "id": 5219480,
                            "node_id": "MDQ6VXNlcjUyMTk0ODA=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/5219480?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/amotin",
                            "html_url": "https://github.com/amotin",
                            "followers_url": "https://api.github.com/users/amotin/followers",
                            "following_url": "https://api.github.com/users/amotin/following{/other_user}",
                            "gists_url": "https://api.github.com/users/amotin/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/amotin/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/amotin/subscriptions",
                            "organizations_url": "https://api.github.com/users/amotin/orgs",
                            "repos_url": "https://api.github.com/users/amotin/repos",
                            "events_url": "https://api.github.com/users/amotin/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/amotin/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/amotin/zfs",
                        "description": "ZFS on Linux - the official OpenZFS implementation for Linux.",
                        "fork": true,
                        "url": "https://api.github.com/repos/amotin/zfs",
                        "forks_url": "https://api.github.com/repos/amotin/zfs/forks",
                        "keys_url": "https://api.github.com/repos/amotin/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/amotin/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/amotin/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/amotin/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/amotin/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/amotin/zfs/events",
                        "assignees_url": "https://api.github.com/repos/amotin/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/amotin/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/amotin/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/amotin/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/amotin/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/amotin/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/amotin/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/amotin/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/amotin/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/amotin/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/amotin/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/amotin/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/amotin/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/amotin/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/amotin/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/amotin/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/amotin/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/amotin/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/amotin/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/amotin/zfs/merges",
                        "archive_url": "https://api.github.com/repos/amotin/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/amotin/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/amotin/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/amotin/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/amotin/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/amotin/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/amotin/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/amotin/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/amotin/zfs/deployments",
                        "created_at": "2019-03-11T17:41:39Z",
                        "updated_at": "2023-01-31T17:12:59Z",
                        "pushed_at": "2023-10-26T18:56:52Z",
                        "git_url": "git://github.com/amotin/zfs.git",
                        "ssh_url": "git@github.com:amotin/zfs.git",
                        "clone_url": "https://github.com/amotin/zfs.git",
                        "svn_url": "https://github.com/amotin/zfs",
                        "homepage": "https://zfsonlinux.org/",
                        "size": 120892,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": "C",
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 0,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 0,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "openzfs:master",
                    "ref": "master",
                    "sha": "043c6ee3b6bfb55f8d36e1f048ff13128c279fb8",
                    "user": {
                        "login": "openzfs",
                        "id": 4510897,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                        "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/openzfs",
                        "html_url": "https://github.com/openzfs",
                        "followers_url": "https://api.github.com/users/openzfs/followers",
                        "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                        "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                        "organizations_url": "https://api.github.com/users/openzfs/orgs",
                        "repos_url": "https://api.github.com/users/openzfs/repos",
                        "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/openzfs/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 437011,
                        "node_id": "MDEwOlJlcG9zaXRvcnk0MzcwMTE=",
                        "name": "zfs",
                        "full_name": "openzfs/zfs",
                        "private": false,
                        "owner": {
                            "login": "openzfs",
                            "id": 4510897,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ1MTA4OTc=",
                            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/openzfs",
                            "html_url": "https://github.com/openzfs",
                            "followers_url": "https://api.github.com/users/openzfs/followers",
                            "following_url": "https://api.github.com/users/openzfs/following{/other_user}",
                            "gists_url": "https://api.github.com/users/openzfs/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/openzfs/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/openzfs/subscriptions",
                            "organizations_url": "https://api.github.com/users/openzfs/orgs",
                            "repos_url": "https://api.github.com/users/openzfs/repos",
                            "events_url": "https://api.github.com/users/openzfs/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/openzfs/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/openzfs/zfs",
                        "description": "OpenZFS on Linux and FreeBSD",
                        "fork": false,
                        "url": "https://api.github.com/repos/openzfs/zfs",
                        "forks_url": "https://api.github.com/repos/openzfs/zfs/forks",
                        "keys_url": "https://api.github.com/repos/openzfs/zfs/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/openzfs/zfs/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/openzfs/zfs/teams",
                        "hooks_url": "https://api.github.com/repos/openzfs/zfs/hooks",
                        "issue_events_url": "https://api.github.com/repos/openzfs/zfs/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/openzfs/zfs/events",
                        "assignees_url": "https://api.github.com/repos/openzfs/zfs/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/openzfs/zfs/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/openzfs/zfs/tags",
                        "blobs_url": "https://api.github.com/repos/openzfs/zfs/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/openzfs/zfs/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/openzfs/zfs/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/openzfs/zfs/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/openzfs/zfs/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/openzfs/zfs/languages",
                        "stargazers_url": "https://api.github.com/repos/openzfs/zfs/stargazers",
                        "contributors_url": "https://api.github.com/repos/openzfs/zfs/contributors",
                        "subscribers_url": "https://api.github.com/repos/openzfs/zfs/subscribers",
                        "subscription_url": "https://api.github.com/repos/openzfs/zfs/subscription",
                        "commits_url": "https://api.github.com/repos/openzfs/zfs/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/openzfs/zfs/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/openzfs/zfs/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/openzfs/zfs/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/openzfs/zfs/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/openzfs/zfs/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/openzfs/zfs/merges",
                        "archive_url": "https://api.github.com/repos/openzfs/zfs/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/openzfs/zfs/downloads",
                        "issues_url": "https://api.github.com/repos/openzfs/zfs/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/openzfs/zfs/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/openzfs/zfs/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/openzfs/zfs/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/openzfs/zfs/labels{/name}",
                        "releases_url": "https://api.github.com/repos/openzfs/zfs/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/openzfs/zfs/deployments",
                        "created_at": "2009-12-14T20:20:34Z",
                        "updated_at": "2023-10-26T23:39:14Z",
                        "pushed_at": "2023-10-26T21:09:37Z",
                        "git_url": "git://github.com/openzfs/zfs.git",
                        "ssh_url": "git@github.com:openzfs/zfs.git",
                        "clone_url": "https://github.com/openzfs/zfs.git",
                        "svn_url": "https://github.com/openzfs/zfs",
                        "homepage": "https://openzfs.github.io/openzfs-docs",
                        "size": 124672,
                        "stargazers_count": 9636,
                        "watchers_count": 9636,
                        "language": "C",
                        "has_issues": true,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": true,
                        "has_pages": false,
                        "has_discussions": true,
                        "forks_count": 1668,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 1194,
                        "license": {
                            "key": "other",
                            "name": "Other",
                            "spdx_id": "NOASSERTION",
                            "url": null,
                            "node_id": "MDc6TGljZW5zZTA="
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": true,
                        "topics": [
                            "file-system",
                            "openzfs",
                            "system-software"
                        ],
                        "visibility": "public",
                        "forks": 1668,
                        "open_issues": 1194,
                        "watchers": 9636,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15456"
                    },
                    "html": {
                        "href": "https://github.com/openzfs/zfs/pull/15456"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15456"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/issues/15456/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15456/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/openzfs/zfs/pulls/15456/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/openzfs/zfs/statuses/3e035dce893306566dd841f83bf29a2c1f257e31"
                    }
                },
                "author_association": "MEMBER",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-26T23:58:37Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32884281331",
        "type": "IssuesEvent",
        "actor": {
            "id": 1331084,
            "login": "sempervictus",
            "display_login": "sempervictus",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sempervictus",
            "avatar_url": "https://avatars.githubusercontent.com/u/1331084?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "opened",
            "issue": {
                "url": "https://api.github.com/repos/openzfs/zfs/issues/15458",
                "repository_url": "https://api.github.com/repos/openzfs/zfs",
                "labels_url": "https://api.github.com/repos/openzfs/zfs/issues/15458/labels{/name}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15458/comments",
                "events_url": "https://api.github.com/repos/openzfs/zfs/issues/15458/events",
                "html_url": "https://github.com/openzfs/zfs/issues/15458",
                "id": 1964523464,
                "node_id": "I_kwDOAAarE851GD_I",
                "number": 15458,
                "title": "ZFS Crypto Code Appears Brittle w/ Compiler Instrumentation",
                "user": {
                    "login": "sempervictus",
                    "id": 1331084,
                    "node_id": "MDQ6VXNlcjEzMzEwODQ=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/1331084?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/sempervictus",
                    "html_url": "https://github.com/sempervictus",
                    "followers_url": "https://api.github.com/users/sempervictus/followers",
                    "following_url": "https://api.github.com/users/sempervictus/following{/other_user}",
                    "gists_url": "https://api.github.com/users/sempervictus/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/sempervictus/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/sempervictus/subscriptions",
                    "organizations_url": "https://api.github.com/users/sempervictus/orgs",
                    "repos_url": "https://api.github.com/users/sempervictus/repos",
                    "events_url": "https://api.github.com/users/sempervictus/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/sempervictus/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 1224663571,
                        "node_id": "MDU6TGFiZWwxMjI0NjYzNTcx",
                        "url": "https://api.github.com/repos/openzfs/zfs/labels/Type:%20Defect",
                        "name": "Type: Defect",
                        "color": "f77eb8",
                        "default": false,
                        "description": "Incorrect behavior (e.g. crash, hang)"
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 0,
                "created_at": "2023-10-26T23:36:12Z",
                "updated_at": "2023-10-26T23:36:12Z",
                "closed_at": null,
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "body": "<!-- Please fill out the following template, which will help other contributors address your issue. -->\r\n\r\n<!--\r\nThank you for reporting an issue.\r\n\r\n*IMPORTANT* - Please check our issue tracker before opening a new issue.\r\nAdditional valuable information can be found in the OpenZFS documentation\r\nand mailing list archives.\r\n\r\nPlease fill in as much of the template as possible.\r\n-->\r\n\r\n### System information\r\n<!--  add version after \"|\" character -->\r\nType | Version/Name\r\n --- | ---\r\nDistribution Name\t| Arch\r\nDistribution Version\t| Rolling\r\nKernel Version\t| 5.15, 6.1, 6.4\r\nArchitecture\t| amd64\r\nOpenZFS Version\t| 2.1.3, 2.2\r\n<!--\r\nCommand to find OpenZFS version:\r\nzfs version\r\n\r\nCommands to find kernel version:\r\nuname -r\t\t# Linux\r\nfreebsd-version -r\t# FreeBSD\r\n-->\r\n\r\n### Describe the problem you're observing\r\nDuring compilation of hardened kernels instrumented during compilation by their toolcahins with built-in ZFS, the crypto code gets flagged by compilers such as LLVM17 when building kCFI+LTO:\r\n```\r\nvmlinux.o: warning: objtool: zfs_sha256_transform_x64+0x1d: unsupported stack pointer realignment\r\nvmlinux.o: warning: objtool: zfs_sha256_transform_ssse3+0x1d: unsupported stack pointer realignment\r\nvmlinux.o: warning: objtool: zfs_sha256_transform_avx+0x1d: unsupported stack pointer realignment\r\nvmlinux.o: warning: objtool: zfs_sha256_transform_avx2+0x1c: unsupported stack pointer realignment\r\nvmlinux.o: warning: objtool: zfs_sha512_transform_x64+0x20: unsupported stack pointer realignment\r\nvmlinux.o: warning: objtool: zfs_sha512_transform_avx+0x20: unsupported stack pointer realignment\r\nvmlinux.o: warning: objtool: zfs_sha512_transform_avx2+0x1c: unsupported stack pointer realignment\r\nvmlinux.o: warning: objtool: _aesni_ctr32_ghash_6x+0x579: return with modified stack frame\r\nvmlinux.o: warning: objtool: _aesni_ctr32_ghash_no_movbe_6x+0x599: return with modified stack frame\r\nvmlinux.o: warning: objtool: aesni_gcm_decrypt+0x48: unsupported stack pointer realignment\r\nvmlinux.o: warning: objtool: aesni_gcm_encrypt+0x52: unsupported stack pointer realignment\r\n```\r\nand GCC13 with various grsec plugins (LLVM toolchain throws something similar as well from lld):\r\n```\r\nld: warning: orphan section `.eh_frame' from `fs/zfs/icp/asm-x86_64/sha2/sha256-x86_64.o' being placed in section `.eh_frame'\r\nld: warning: orphan section `.eh_frame' from `fs/zfs/icp/asm-x86_64/sha2/sha512-x86_64.o' being placed in section `.eh_frame'\r\nld: warning: orphan section `.eh_frame' from `fs/zfs/icp/asm-x86_64/modes/aesni-gcm-x86_64.o' being placed in section `.eh_frame'\r\nld: warning: orphan section `.eh_frame' from `fs/zfs/icp/asm-x86_64/modes/ghash-x86_64.o' being placed in section `.eh_frame'\r\n```\r\n\r\nThis isn't the case with Linux' in-tree crypto pieces compiled at the same time, making me think that some annotations are needed to ensure proper alignment/padding.\r\n\r\n### Describe how to reproduce the problem\r\n\r\n1. Copy ZFS into the kernel tree of a 6.1 kernel\r\n2. Compile the kernel with kCFI+LTO using LLVM16+\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/issues/15458/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/openzfs/zfs/issues/15458/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-26T23:36:14Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32882768112",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 5219480,
            "login": "amotin",
            "display_login": "amotin",
            "gravatar_id": "",
            "url": "https://api.github.com/users/amotin",
            "avatar_url": "https://avatars.githubusercontent.com/u/5219480?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/openzfs/zfs/issues/15457",
                "repository_url": "https://api.github.com/repos/openzfs/zfs",
                "labels_url": "https://api.github.com/repos/openzfs/zfs/issues/15457/labels{/name}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15457/comments",
                "events_url": "https://api.github.com/repos/openzfs/zfs/issues/15457/events",
                "html_url": "https://github.com/openzfs/zfs/pull/15457",
                "id": 1964341505,
                "node_id": "PR_kwDOAAarE85d6Ruo",
                "number": 15457,
                "title": "Increase L2ARC write rate and headroom",
                "user": {
                    "login": "shodanshok",
                    "id": 13137622,
                    "node_id": "MDQ6VXNlcjEzMTM3NjIy",
                    "avatar_url": "https://avatars.githubusercontent.com/u/13137622?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/shodanshok",
                    "html_url": "https://github.com/shodanshok",
                    "followers_url": "https://api.github.com/users/shodanshok/followers",
                    "following_url": "https://api.github.com/users/shodanshok/following{/other_user}",
                    "gists_url": "https://api.github.com/users/shodanshok/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/shodanshok/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/shodanshok/subscriptions",
                    "organizations_url": "https://api.github.com/users/shodanshok/orgs",
                    "repos_url": "https://api.github.com/users/shodanshok/repos",
                    "events_url": "https://api.github.com/users/shodanshok/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/shodanshok/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 6,
                "created_at": "2023-10-26T20:43:29Z",
                "updated_at": "2023-10-26T21:53:42Z",
                "closed_at": null,
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "draft": true,
                "pull_request": {
                    "url": "https://api.github.com/repos/openzfs/zfs/pulls/15457",
                    "html_url": "https://github.com/openzfs/zfs/pull/15457",
                    "diff_url": "https://github.com/openzfs/zfs/pull/15457.diff",
                    "patch_url": "https://github.com/openzfs/zfs/pull/15457.patch",
                    "merged_at": null
                },
                "body": "Current L2ARC write rate and headroom parameters are very conservative: l2arc_write_max=8M and l2arc_headroom=2 (ie: a full L2ARC writes at 8 MB/s, scanning 16/32 MB of ARC tail each time; a warming L2ARC operates at 2x these rates).\r\n\r\nThese values were selected 15+ years ago based on then-current SSDs size, performance and endurance. Todays we have multi-TB, fast and cheap SSDs which can sustain much higher read/write rates.\r\n\r\nFor this reason, this patch increases l2arc_write_max to 32 MB and set l2arc_headroom to 0. The former option speed up L2ARC warming and renewal rate, while the latter instruct the L2ARC write thread to search into all ARC (rather than on a short tail) for eligible buffers.\r\n\r\nWith persistent L2ARC, l2arc_headroom=0 is especially valuable as it effectively enable a sort of \"persistent ARC\" - if/when the machine reboots, most of ARC is restored into L2ARC, providing a very tangible performance boost compared to an otherwise \"cold\" ARC/L2ARC.\r\n\r\n<!--- Please fill out the following template, which will help other contributors review your Pull Request. -->\r\n\r\n<!--- Provide a general summary of your changes in the Title above -->\r\n\r\n<!---\r\nDocumentation on ZFS Buildbot options can be found at\r\nhttps://openzfs.github.io/openzfs-docs/Developer%20Resources/Buildbot%20Options.html\r\n-->\r\n\r\n### Motivation and Context\r\n<!--- Why is this change required? What problem does it solve? -->\r\n<!--- If it fixes an open issue, please link to the issue here. -->\r\n\r\n### Description\r\n<!--- Describe your changes in detail -->\r\n\r\n### How Has This Been Tested?\r\n<!--- Please describe in detail how you tested your changes. -->\r\n<!--- Include details of your testing environment, and the tests you ran to -->\r\n<!--- see how your change affects other areas of the code, etc. -->\r\n<!--- If your change is a performance enhancement, please provide benchmarks here. -->\r\n<!--- Please think about using the draft PR feature if appropriate -->\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [ ] New feature (non-breaking change which adds functionality)\r\n- [x] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [x] My code follows the OpenZFS [code style requirements](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#coding-conventions).\r\n- [ ] I have updated the documentation accordingly.\r\n- [ ] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [ ] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [x] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/issues/15457/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/openzfs/zfs/issues/15457/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/openzfs/zfs/issues/comments/1781944264",
                "html_url": "https://github.com/openzfs/zfs/pull/15457#issuecomment-1781944264",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15457",
                "id": 1781944264,
                "node_id": "IC_kwDOAAarE85qNk_I",
                "user": {
                    "login": "amotin",
                    "id": 5219480,
                    "node_id": "MDQ6VXNlcjUyMTk0ODA=",
                    "avatar_url": "https://avatars.githubusercontent.com/u/5219480?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/amotin",
                    "html_url": "https://github.com/amotin",
                    "followers_url": "https://api.github.com/users/amotin/followers",
                    "following_url": "https://api.github.com/users/amotin/following{/other_user}",
                    "gists_url": "https://api.github.com/users/amotin/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/amotin/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/amotin/subscriptions",
                    "organizations_url": "https://api.github.com/users/amotin/orgs",
                    "repos_url": "https://api.github.com/users/amotin/repos",
                    "events_url": "https://api.github.com/users/amotin/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/amotin/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-26T21:53:42Z",
                "updated_at": "2023-10-26T21:53:42Z",
                "author_association": "MEMBER",
                "body": "> > If the first in the row of eviction are data of some other pool or data that are not L2ARC-eligible (IIRC we've discussed that during ARC warmup too much data were not eligible due to ongoing prefetch), then L2ARC does not need to write anything and should not need to look deeper, it should stop. This logic is still valid when ARC is warm.\r\n> \r\n> Is this the current logic? I don't remember the feed thread doing that (stopping after some ineligible buffers are found).\r\n\r\nFeed thread scans up to headroom, but skips ineligible buffers.  If none of scanned buffers are eligible -- nothing will be written.\r\n\r\n> > the fix here would likely be not a blind headroom disable\r\n> \r\n> I agree. At the same time, I remember this very useful comment [#15201 (comment)](https://github.com/openzfs/zfs/issues/15201#issuecomment-1694406008) stating that the ARC sublists only contains eligible buffers, so the feed thread should not really scan the entire ARC.\r\n\r\nThe sublists contain buffers eligible for eviction.  It does not mean they all are eligible for L2ARC -- some may already be in L2ARC, some may belong to a different pool, some are from dataset with disabled secondarycache, some are prefetches.",
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/issues/comments/1781944264/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-26T21:53:42Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    },
    {
        "id": "32882637767",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 13137622,
            "login": "shodanshok",
            "display_login": "shodanshok",
            "gravatar_id": "",
            "url": "https://api.github.com/users/shodanshok",
            "avatar_url": "https://avatars.githubusercontent.com/u/13137622?"
        },
        "repo": {
            "id": 437011,
            "name": "openzfs/zfs",
            "url": "https://api.github.com/repos/openzfs/zfs"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/openzfs/zfs/issues/15457",
                "repository_url": "https://api.github.com/repos/openzfs/zfs",
                "labels_url": "https://api.github.com/repos/openzfs/zfs/issues/15457/labels{/name}",
                "comments_url": "https://api.github.com/repos/openzfs/zfs/issues/15457/comments",
                "events_url": "https://api.github.com/repos/openzfs/zfs/issues/15457/events",
                "html_url": "https://github.com/openzfs/zfs/pull/15457",
                "id": 1964341505,
                "node_id": "PR_kwDOAAarE85d6Ruo",
                "number": 15457,
                "title": "Increase L2ARC write rate and headroom",
                "user": {
                    "login": "shodanshok",
                    "id": 13137622,
                    "node_id": "MDQ6VXNlcjEzMTM3NjIy",
                    "avatar_url": "https://avatars.githubusercontent.com/u/13137622?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/shodanshok",
                    "html_url": "https://github.com/shodanshok",
                    "followers_url": "https://api.github.com/users/shodanshok/followers",
                    "following_url": "https://api.github.com/users/shodanshok/following{/other_user}",
                    "gists_url": "https://api.github.com/users/shodanshok/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/shodanshok/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/shodanshok/subscriptions",
                    "organizations_url": "https://api.github.com/users/shodanshok/orgs",
                    "repos_url": "https://api.github.com/users/shodanshok/repos",
                    "events_url": "https://api.github.com/users/shodanshok/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/shodanshok/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 5,
                "created_at": "2023-10-26T20:43:29Z",
                "updated_at": "2023-10-26T21:45:54Z",
                "closed_at": null,
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "draft": true,
                "pull_request": {
                    "url": "https://api.github.com/repos/openzfs/zfs/pulls/15457",
                    "html_url": "https://github.com/openzfs/zfs/pull/15457",
                    "diff_url": "https://github.com/openzfs/zfs/pull/15457.diff",
                    "patch_url": "https://github.com/openzfs/zfs/pull/15457.patch",
                    "merged_at": null
                },
                "body": "Current L2ARC write rate and headroom parameters are very conservative: l2arc_write_max=8M and l2arc_headroom=2 (ie: a full L2ARC writes at 8 MB/s, scanning 16/32 MB of ARC tail each time; a warming L2ARC operates at 2x these rates).\r\n\r\nThese values were selected 15+ years ago based on then-current SSDs size, performance and endurance. Todays we have multi-TB, fast and cheap SSDs which can sustain much higher read/write rates.\r\n\r\nFor this reason, this patch increases l2arc_write_max to 32 MB and set l2arc_headroom to 0. The former option speed up L2ARC warming and renewal rate, while the latter instruct the L2ARC write thread to search into all ARC (rather than on a short tail) for eligible buffers.\r\n\r\nWith persistent L2ARC, l2arc_headroom=0 is especially valuable as it effectively enable a sort of \"persistent ARC\" - if/when the machine reboots, most of ARC is restored into L2ARC, providing a very tangible performance boost compared to an otherwise \"cold\" ARC/L2ARC.\r\n\r\n<!--- Please fill out the following template, which will help other contributors review your Pull Request. -->\r\n\r\n<!--- Provide a general summary of your changes in the Title above -->\r\n\r\n<!---\r\nDocumentation on ZFS Buildbot options can be found at\r\nhttps://openzfs.github.io/openzfs-docs/Developer%20Resources/Buildbot%20Options.html\r\n-->\r\n\r\n### Motivation and Context\r\n<!--- Why is this change required? What problem does it solve? -->\r\n<!--- If it fixes an open issue, please link to the issue here. -->\r\n\r\n### Description\r\n<!--- Describe your changes in detail -->\r\n\r\n### How Has This Been Tested?\r\n<!--- Please describe in detail how you tested your changes. -->\r\n<!--- Include details of your testing environment, and the tests you ran to -->\r\n<!--- see how your change affects other areas of the code, etc. -->\r\n<!--- If your change is a performance enhancement, please provide benchmarks here. -->\r\n<!--- Please think about using the draft PR feature if appropriate -->\r\n\r\n### Types of changes\r\n<!--- What types of changes does your code introduce? Put an `x` in all the boxes that apply: -->\r\n- [ ] Bug fix (non-breaking change which fixes an issue)\r\n- [ ] New feature (non-breaking change which adds functionality)\r\n- [x] Performance enhancement (non-breaking change which improves efficiency)\r\n- [ ] Code cleanup (non-breaking change which makes code smaller or more readable)\r\n- [ ] Breaking change (fix or feature that would cause existing functionality to change)\r\n- [ ] Library ABI change (libzfs, libzfs\\_core, libnvpair, libuutil and libzfsbootenv)\r\n- [ ] Documentation (a change to man pages or other documentation)\r\n\r\n### Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [x] My code follows the OpenZFS [code style requirements](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#coding-conventions).\r\n- [ ] I have updated the documentation accordingly.\r\n- [ ] I have read the [**contributing** document](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md).\r\n- [ ] I have added [tests](https://github.com/openzfs/zfs/tree/master/tests) to cover my changes.\r\n- [ ] I have run the ZFS Test Suite with this change applied.\r\n- [x] All commit messages are properly formatted and contain [`Signed-off-by`](https://github.com/openzfs/zfs/blob/master/.github/CONTRIBUTING.md#signed-off-by).\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/issues/15457/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/openzfs/zfs/issues/15457/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/openzfs/zfs/issues/comments/1781937469",
                "html_url": "https://github.com/openzfs/zfs/pull/15457#issuecomment-1781937469",
                "issue_url": "https://api.github.com/repos/openzfs/zfs/issues/15457",
                "id": 1781937469,
                "node_id": "IC_kwDOAAarE85qNjU9",
                "user": {
                    "login": "shodanshok",
                    "id": 13137622,
                    "node_id": "MDQ6VXNlcjEzMTM3NjIy",
                    "avatar_url": "https://avatars.githubusercontent.com/u/13137622?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/shodanshok",
                    "html_url": "https://github.com/shodanshok",
                    "followers_url": "https://api.github.com/users/shodanshok/followers",
                    "following_url": "https://api.github.com/users/shodanshok/following{/other_user}",
                    "gists_url": "https://api.github.com/users/shodanshok/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/shodanshok/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/shodanshok/subscriptions",
                    "organizations_url": "https://api.github.com/users/shodanshok/orgs",
                    "repos_url": "https://api.github.com/users/shodanshok/repos",
                    "events_url": "https://api.github.com/users/shodanshok/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/shodanshok/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-26T21:45:54Z",
                "updated_at": "2023-10-26T21:45:54Z",
                "author_association": "CONTRIBUTOR",
                "body": "> I support write size increase, it is definitely overdue.  The question is only how high to set it.  Would be good to recalculate it into TBW value for a typical drive over its life time, considering worst case 24x7 operation.\r\n\r\nI find a plain TBW value to be overly pessimistic, as the cache device is not going to write at full-speed all the time. At the current 8 MB/s, a worst case estimate is 8 * 86400 * 365 = 240 TB/year, while the SSDs of one KVM server (2x 500 GB Samsung 850 EVO) are 6 years old and each has written a total of ~60.5 TB (10 TB/year only). Since last reboot, 9 days ago:\r\n```\r\n                                      capacity     operations     bandwidth \r\npool                                alloc   free   read  write   read  write\r\ncache                                   -      -      -      -      -      -\r\n  pci-0000:01:00.1-ata-3.0-part5     261G   159G      2      2   166K   136K\r\n  pci-0000:01:00.1-ata-4.0-part5     255G   165G      2      2   161K   136K\r\n```\r\nAs a side note, on this server `l2arc_write_max=268435456` (256M) since at least 6 months.\r\n\r\n> Complete disable of headroom though I consider dangerous, we do not want to repeatedly scan a a terabyte of ARC in 4KB blocks where almost nothing is L2ARC-eligible.  There should remain some safety barrier.\r\n\r\nI share that concern, even if on these 64-192 GB servers I did not see anything wrong. Maybe because I am using 128K recordsize? Anyway anything scanning 1-4 GB ARC should be ok as`l2arc_headroom`. \r\n\r\n> I think we've already discussed that before.\r\n\r\nMaybe in https://github.com/openzfs/zfs/issues/15201?\r\n\r\n>  If the first in the row of eviction are data of some other pool or data that are not L2ARC-eligible (IIRC we've discussed that during ARC warmup too much data were not eligible due to ongoing prefetch), then L2ARC does not need to write anything and should not need to look deeper, it should stop. This logic is still valid when ARC is warm.\r\n\r\nIs this the current logic? I don't remember the feed thread doing that (stopping after some ineligible buffers are found).\r\n\r\n> the fix here would likely be not a blind headroom disable\r\n\r\nI agree. At the same time, I remember this very useful comment https://github.com/openzfs/zfs/issues/15201#issuecomment-1694406008 stating that the ARC sublists only contains eligible buffers, so the feed thread should not really scan the entire ARC.\r\n\r\nThanks.",
                "reactions": {
                    "url": "https://api.github.com/repos/openzfs/zfs/issues/comments/1781937469/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-26T21:45:54Z",
        "org": {
            "id": 4510897,
            "login": "openzfs",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/openzfs",
            "avatar_url": "https://avatars.githubusercontent.com/u/4510897?"
        }
    }
]