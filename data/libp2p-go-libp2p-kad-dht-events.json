[
    {
        "id": "32793555516",
        "type": "WatchEvent",
        "actor": {
            "id": 31000394,
            "login": "yzs15",
            "display_login": "yzs15",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yzs15",
            "avatar_url": "https://avatars.githubusercontent.com/u/31000394?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-24T06:38:03Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32623336142",
        "type": "WatchEvent",
        "actor": {
            "id": 72709,
            "login": "zuzmo",
            "display_login": "zuzmo",
            "gravatar_id": "",
            "url": "https://api.github.com/users/zuzmo",
            "avatar_url": "https://avatars.githubusercontent.com/u/72709?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-17T12:31:46Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32568657299",
        "type": "ForkEvent",
        "actor": {
            "id": 88841464,
            "login": "salamanca22",
            "display_login": "salamanca22",
            "gravatar_id": "",
            "url": "https://api.github.com/users/salamanca22",
            "avatar_url": "https://avatars.githubusercontent.com/u/88841464?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "forkee": {
                "id": 705166489,
                "node_id": "R_kgDOKgf8mQ",
                "name": "go-libp2p-kad-dht",
                "full_name": "salamanca22/go-libp2p-kad-dht",
                "private": false,
                "owner": {
                    "login": "salamanca22",
                    "id": 88841464,
                    "node_id": "MDQ6VXNlcjg4ODQxNDY0",
                    "avatar_url": "https://avatars.githubusercontent.com/u/88841464?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/salamanca22",
                    "html_url": "https://github.com/salamanca22",
                    "followers_url": "https://api.github.com/users/salamanca22/followers",
                    "following_url": "https://api.github.com/users/salamanca22/following{/other_user}",
                    "gists_url": "https://api.github.com/users/salamanca22/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/salamanca22/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/salamanca22/subscriptions",
                    "organizations_url": "https://api.github.com/users/salamanca22/orgs",
                    "repos_url": "https://api.github.com/users/salamanca22/repos",
                    "events_url": "https://api.github.com/users/salamanca22/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/salamanca22/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "html_url": "https://github.com/salamanca22/go-libp2p-kad-dht",
                "description": "A Kademlia DHT implementation on go-libp2p",
                "fork": true,
                "url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht",
                "forks_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/forks",
                "keys_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/keys{/key_id}",
                "collaborators_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/collaborators{/collaborator}",
                "teams_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/teams",
                "hooks_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/hooks",
                "issue_events_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/issues/events{/number}",
                "events_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/events",
                "assignees_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/assignees{/user}",
                "branches_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/branches{/branch}",
                "tags_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/tags",
                "blobs_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/git/blobs{/sha}",
                "git_tags_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/git/tags{/sha}",
                "git_refs_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/git/refs{/sha}",
                "trees_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/git/trees{/sha}",
                "statuses_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/statuses/{sha}",
                "languages_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/languages",
                "stargazers_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/stargazers",
                "contributors_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/contributors",
                "subscribers_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/subscribers",
                "subscription_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/subscription",
                "commits_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/commits{/sha}",
                "git_commits_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/git/commits{/sha}",
                "comments_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/comments{/number}",
                "issue_comment_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/issues/comments{/number}",
                "contents_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/contents/{+path}",
                "compare_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/compare/{base}...{head}",
                "merges_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/merges",
                "archive_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/{archive_format}{/ref}",
                "downloads_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/downloads",
                "issues_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/issues{/number}",
                "pulls_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/pulls{/number}",
                "milestones_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/milestones{/number}",
                "notifications_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/notifications{?since,all,participating}",
                "labels_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/labels{/name}",
                "releases_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/releases{/id}",
                "deployments_url": "https://api.github.com/repos/salamanca22/go-libp2p-kad-dht/deployments",
                "created_at": "2023-10-15T08:22:00Z",
                "updated_at": "2023-10-15T08:22:00Z",
                "pushed_at": "2023-10-06T23:01:32Z",
                "git_url": "git://github.com/salamanca22/go-libp2p-kad-dht.git",
                "ssh_url": "git@github.com:salamanca22/go-libp2p-kad-dht.git",
                "clone_url": "https://github.com/salamanca22/go-libp2p-kad-dht.git",
                "svn_url": "https://github.com/salamanca22/go-libp2p-kad-dht",
                "homepage": "https://github.com/libp2p/specs/tree/master/kad-dht",
                "size": 3723,
                "stargazers_count": 0,
                "watchers_count": 0,
                "language": null,
                "has_issues": false,
                "has_projects": true,
                "has_downloads": true,
                "has_wiki": false,
                "has_pages": false,
                "has_discussions": false,
                "forks_count": 0,
                "mirror_url": null,
                "archived": false,
                "disabled": false,
                "open_issues_count": 0,
                "license": null,
                "allow_forking": true,
                "is_template": false,
                "web_commit_signoff_required": false,
                "topics": [],
                "visibility": "public",
                "forks": 0,
                "open_issues": 0,
                "watchers": 0,
                "default_branch": "main",
                "public": true
            }
        },
        "public": true,
        "created_at": "2023-10-15T08:22:01Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32387351423",
        "type": "WatchEvent",
        "actor": {
            "id": 29779275,
            "login": "demoso",
            "display_login": "demoso",
            "gravatar_id": "",
            "url": "https://api.github.com/users/demoso",
            "avatar_url": "https://avatars.githubusercontent.com/u/29779275?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "started"
        },
        "public": true,
        "created_at": "2023-10-07T07:50:16Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32386113849",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 85411,
            "login": "BigLep",
            "display_login": "BigLep",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BigLep",
            "avatar_url": "https://avatars.githubusercontent.com/u/85411?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956",
                "repository_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/labels{/name}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/comments",
                "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/events",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/issues/956",
                "id": 1931023040,
                "node_id": "I_kwDOA_JbCc5zGRLA",
                "number": 956,
                "title": "`goroutine` Leakage due to Unbounded Concurrent Incoming Streams in ProviderManager",
                "user": {
                    "login": "yhassanzadeh13",
                    "id": 19204398,
                    "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yhassanzadeh13",
                    "html_url": "https://github.com/yhassanzadeh13",
                    "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                    "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                    "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                    "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                    "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 7,
                "created_at": "2023-10-06T22:57:41Z",
                "updated_at": "2023-10-07T04:42:58Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "# Problem Definition\r\n\r\n## Observation\r\nOccasionally, a linear increase in `gopark`ed `goroutines` is observed with `go-libp2p-kad-dht`. This creates a scenario resembling `goroutine` leakage, where `goroutines` get initiated but never conclude. Over time, this accumulation can deplete resources and degrade application performance. This isn't always the case but does occur intermittently.\r\n\r\n![image1](https://github.com/libp2p/go-libp2p-kad-dht/assets/19204398/18d95ad2-e163-4376-ac47-50152da70663)\r\n\r\nThe subsequent graph demonstrates a leak of approximately 7 million goroutines, attributable to the DHT.\r\n![image2](https://github.com/libp2p/go-libp2p-kad-dht/assets/19204398/a05ab24b-ba94-4ade-a9fc-84e2147a246f)\r\n\r\n## Probable Underlying Issue\r\nPer the Call Graph, we hypothesize that the leakage is due to an upsurge in concurrent stream activity. Particularly, the Call Graph indicates that in high-activity contexts, all `goroutines` funneled through the [`ProviderManager.AddProvider`](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/cbe39cd7dfc6783002f087bc4ddf9ac1ce43b158/providers/providers_manager.go#L250) get placed into a standby state. This suspension occurs when `goroutines` await the `newprovs` channel, an unbuffered conduit.\r\n\r\n```go\r\n\tselect {\r\n\tcase pm.newprovs <- prov:\r\n\t\treturn nil\r\n\tcase <-ctx.Done():\r\n\t\treturn ctx.Err()\r\n\t}\r\n```\r\n\r\nHere, the `ctx` instance ties back to the [primary DHT context](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/3e31bcdc170dceca2c868687c268aafc5e8943ad/dht_net.go#L37), which only becomes `Done` upon DHT closure. Consequently, any `goroutine` on hold for `newprovs` will resume sequentially as the channel's reading side becomes available.\r\n\r\nThe count of dormant `goroutines`, due to awaiting the `pm.newprovs`, corresponds to the received [`pb.Message_GET_PROVIDERS` messages](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/0c90569a6d1913251402f4f713c4c834b0149f31/handlers.go#L44-L45). Each message initiates an `AddProvider` handler. \r\n\r\nThis situation also carries a security risk. If each `pb.Message_GET_PROVIDERS` message results in a dormant `goroutine`, it opens a window for potential attackers to exploit and mount a resource exhaustion attack.\r\n\r\n# Suggested Solutions\r\n\r\nTo address the `goroutine` leakage issue stemming from the `pb.Message_GET_PROVIDERS` messages, consider the following strategies (the author suggests strategy number 1):\r\n\r\n1. **Buffered Channel and Timeout**: Lower contention by turning the `newprovs` channel into a buffered variant, say with a capacity of 10K, paired with a global provider addition timeout, for instance, `1s`. Adjust the context in `AddProvider` to derive from the primary DHT context using `context.WithTimeout(dht.ctx, dht.addProviderTimeout)`. If the `newprovs` channel has space, it queues up requests, wrapping up the method instantly without stalling. Any held `goroutine` will reactivate and end by the timeout under contention scenarios. This ensures that a certain volume of buffered requests will process, with newer ones timing out if there's contention.\r\n\r\n2. **Worker-Based Queue Implementation**: Another approach involves substituting `newprovs` with a worker-based queuing system. This would promptly queue incoming `prov` in the `AddProvider` method, ensuring no `goroutine` holds up. A potential modification could be:\r\n\r\n    ```go\r\n    func (pm *ProviderManager) AddProvider(ctx context.Context, k []byte, provInfo peer.AddrInfo) error {\r\n\t    ctx, span := internal.StartSpan(ctx, \"ProviderManager.AddProvider\")\r\n\t    defer span.End()\r\n    \r\n\t    if provInfo.ID != pm.self {\r\n\t\t    pm.pstore.AddAddrs(provInfo.ID, provInfo.Addrs, ProviderAddrTTL)\r\n\t    }\r\n\t    prov := &addProv{\r\n\t\t    ctx: ctx,\r\n\t\t    key: k,\r\n\t\t    val: provInfo.ID,\r\n\t    }\r\n\t    \r\n\t    pm.queue.Enqueue(prov)\r\n    }\r\n    ```\r\n    \r\n    And the [`ProviderManager.run`](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/cbe39cd7dfc6783002f087bc4ddf9ac1ce43b158/providers/providers_manager.go#L161) might appear as:\r\n  \r\n    ```go\r\n\t\t\t    select {\r\n\t\t\t    case np := <-pm.queue.dequeue():\r\n\t\t\t\t    err := pm.addProv(np.ctx, np.key, np.val)\r\n\t\t\t\t    // subsequent logic\r\n    ```\r\n  \r\n    Nonetheless, this doesn't present a significant advantage over a buffered `newprovs` channel. An unrestricted queue could simply shift the `goroutine` leakage issue to memory leakage in the queue. Furthermore, such a queue could be vulnerable to memory exhaustion attacks. Once the queue's limit is reached, it must discard new entries or remove existing ones, making it analogous to the buffered channel and timeout strategy.\r\n    \r\n    cc @guillaumemichel",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751598465",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/issues/956#issuecomment-1751598465",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956",
                "id": 1751598465,
                "node_id": "IC_kwDOA_JbCc5oZ0WB",
                "user": {
                    "login": "BigLep",
                    "id": 85411,
                    "node_id": "MDQ6VXNlcjg1NDEx",
                    "avatar_url": "https://avatars.githubusercontent.com/u/85411?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/BigLep",
                    "html_url": "https://github.com/BigLep",
                    "followers_url": "https://api.github.com/users/BigLep/followers",
                    "following_url": "https://api.github.com/users/BigLep/following{/other_user}",
                    "gists_url": "https://api.github.com/users/BigLep/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/BigLep/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/BigLep/subscriptions",
                    "organizations_url": "https://api.github.com/users/BigLep/orgs",
                    "repos_url": "https://api.github.com/users/BigLep/repos",
                    "events_url": "https://api.github.com/users/BigLep/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/BigLep/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-07T04:42:58Z",
                "updated_at": "2023-10-07T04:42:58Z",
                "author_association": "NONE",
                "body": "Drive by here...\r\nI assume @Jorropo will have more/better useful comments, but just passing on that Kubo took multiple iterations with how it configured the resource manager.  The approach that was taken, the why, and the relevant source code are discussed in https://github.com/ipfs/kubo/blob/master/docs/libp2p-resource-management.md",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751598465/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-07T04:42:59Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32384700197",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 19204398,
            "login": "yhassanzadeh13",
            "display_login": "yhassanzadeh13",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yhassanzadeh13",
            "avatar_url": "https://avatars.githubusercontent.com/u/19204398?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956",
                "repository_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/labels{/name}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/comments",
                "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/events",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/issues/956",
                "id": 1931023040,
                "node_id": "I_kwDOA_JbCc5zGRLA",
                "number": 956,
                "title": "`goroutine` Leakage due to Unbounded Concurrent Incoming Streams in ProviderManager",
                "user": {
                    "login": "yhassanzadeh13",
                    "id": 19204398,
                    "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yhassanzadeh13",
                    "html_url": "https://github.com/yhassanzadeh13",
                    "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                    "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                    "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                    "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                    "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 6,
                "created_at": "2023-10-06T22:57:41Z",
                "updated_at": "2023-10-07T01:18:06Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "# Problem Definition\r\n\r\n## Observation\r\nOccasionally, a linear increase in `gopark`ed `goroutines` is observed with `go-libp2p-kad-dht`. This creates a scenario resembling `goroutine` leakage, where `goroutines` get initiated but never conclude. Over time, this accumulation can deplete resources and degrade application performance. This isn't always the case but does occur intermittently.\r\n\r\n![image1](https://github.com/libp2p/go-libp2p-kad-dht/assets/19204398/18d95ad2-e163-4376-ac47-50152da70663)\r\n\r\nThe subsequent graph demonstrates a leak of approximately 7 million goroutines, attributable to the DHT.\r\n![image2](https://github.com/libp2p/go-libp2p-kad-dht/assets/19204398/a05ab24b-ba94-4ade-a9fc-84e2147a246f)\r\n\r\n## Probable Underlying Issue\r\nPer the Call Graph, we hypothesize that the leakage is due to an upsurge in concurrent stream activity. Particularly, the Call Graph indicates that in high-activity contexts, all `goroutines` funneled through the [`ProviderManager.AddProvider`](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/cbe39cd7dfc6783002f087bc4ddf9ac1ce43b158/providers/providers_manager.go#L250) get placed into a standby state. This suspension occurs when `goroutines` await the `newprovs` channel, an unbuffered conduit.\r\n\r\n```go\r\n\tselect {\r\n\tcase pm.newprovs <- prov:\r\n\t\treturn nil\r\n\tcase <-ctx.Done():\r\n\t\treturn ctx.Err()\r\n\t}\r\n```\r\n\r\nHere, the `ctx` instance ties back to the [primary DHT context](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/3e31bcdc170dceca2c868687c268aafc5e8943ad/dht_net.go#L37), which only becomes `Done` upon DHT closure. Consequently, any `goroutine` on hold for `newprovs` will resume sequentially as the channel's reading side becomes available.\r\n\r\nThe count of dormant `goroutines`, due to awaiting the `pm.newprovs`, corresponds to the received [`pb.Message_GET_PROVIDERS` messages](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/0c90569a6d1913251402f4f713c4c834b0149f31/handlers.go#L44-L45). Each message initiates an `AddProvider` handler. \r\n\r\nThis situation also carries a security risk. If each `pb.Message_GET_PROVIDERS` message results in a dormant `goroutine`, it opens a window for potential attackers to exploit and mount a resource exhaustion attack.\r\n\r\n# Suggested Solutions\r\n\r\nTo address the `goroutine` leakage issue stemming from the `pb.Message_GET_PROVIDERS` messages, consider the following strategies (the author suggests strategy number 1):\r\n\r\n1. **Buffered Channel and Timeout**: Lower contention by turning the `newprovs` channel into a buffered variant, say with a capacity of 10K, paired with a global provider addition timeout, for instance, `1s`. Adjust the context in `AddProvider` to derive from the primary DHT context using `context.WithTimeout(dht.ctx, dht.addProviderTimeout)`. If the `newprovs` channel has space, it queues up requests, wrapping up the method instantly without stalling. Any held `goroutine` will reactivate and end by the timeout under contention scenarios. This ensures that a certain volume of buffered requests will process, with newer ones timing out if there's contention.\r\n\r\n2. **Worker-Based Queue Implementation**: Another approach involves substituting `newprovs` with a worker-based queuing system. This would promptly queue incoming `prov` in the `AddProvider` method, ensuring no `goroutine` holds up. A potential modification could be:\r\n\r\n    ```go\r\n    func (pm *ProviderManager) AddProvider(ctx context.Context, k []byte, provInfo peer.AddrInfo) error {\r\n\t    ctx, span := internal.StartSpan(ctx, \"ProviderManager.AddProvider\")\r\n\t    defer span.End()\r\n    \r\n\t    if provInfo.ID != pm.self {\r\n\t\t    pm.pstore.AddAddrs(provInfo.ID, provInfo.Addrs, ProviderAddrTTL)\r\n\t    }\r\n\t    prov := &addProv{\r\n\t\t    ctx: ctx,\r\n\t\t    key: k,\r\n\t\t    val: provInfo.ID,\r\n\t    }\r\n\t    \r\n\t    pm.queue.Enqueue(prov)\r\n    }\r\n    ```\r\n    \r\n    And the [`ProviderManager.run`](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/cbe39cd7dfc6783002f087bc4ddf9ac1ce43b158/providers/providers_manager.go#L161) might appear as:\r\n  \r\n    ```go\r\n\t\t\t    select {\r\n\t\t\t    case np := <-pm.queue.dequeue():\r\n\t\t\t\t    err := pm.addProv(np.ctx, np.key, np.val)\r\n\t\t\t\t    // subsequent logic\r\n    ```\r\n  \r\n    Nonetheless, this doesn't present a significant advantage over a buffered `newprovs` channel. An unrestricted queue could simply shift the `goroutine` leakage issue to memory leakage in the queue. Furthermore, such a queue could be vulnerable to memory exhaustion attacks. Once the queue's limit is reached, it must discard new entries or remove existing ones, making it analogous to the buffered channel and timeout strategy.\r\n    \r\n    cc @guillaumemichel",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751543442",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/issues/956#issuecomment-1751543442",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956",
                "id": 1751543442,
                "node_id": "IC_kwDOA_JbCc5oZm6S",
                "user": {
                    "login": "yhassanzadeh13",
                    "id": 19204398,
                    "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yhassanzadeh13",
                    "html_url": "https://github.com/yhassanzadeh13",
                    "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                    "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                    "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                    "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                    "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-07T01:18:06Z",
                "updated_at": "2023-10-07T01:18:06Z",
                "author_association": "NONE",
                "body": "```json\r\n{\r\n  \"system\": {\r\n    \"Streams\": 34816,\r\n    \"StreamsInbound\": 17408,\r\n    \"StreamsOutbound\": 34816,\r\n    \"Conns\": 2176,\r\n    \"ConnsInbound\": 1088,\r\n    \"ConnsOutbound\": 2176,\r\n    \"FD\": 24576,\r\n    \"Memory\": 17314086912\r\n  },\r\n  \"transient\": {\r\n    \"Streams\": 4352,\r\n    \"StreamsInbound\": 2176,\r\n    \"StreamsOutbound\": 4352,\r\n    \"Conns\": 576,\r\n    \"ConnsInbound\": 288,\r\n    \"ConnsOutbound\": 576,\r\n    \"FD\": 6144,\r\n    \"Memory\": 2181038080\r\n  },\r\n  \"allowlistedSystem\": {\r\n    \"Streams\": 34816,\r\n    \"StreamsInbound\": 17408,\r\n    \"StreamsOutbound\": 34816,\r\n    \"Conns\": 2176,\r\n    \"ConnsInbound\": 1088,\r\n    \"ConnsOutbound\": 2176,\r\n    \"FD\": 24576,\r\n    \"Memory\": 17314086912\r\n  },\r\n  \"allowlistedTransient\": {\r\n    \"Streams\": 4352,\r\n    \"StreamsInbound\": 2176,\r\n    \"StreamsOutbound\": 4352,\r\n    \"Conns\": 576,\r\n    \"ConnsInbound\": 288,\r\n    \"ConnsOutbound\": 576,\r\n    \"FD\": 6144,\r\n    \"Memory\": 2181038080\r\n  },\r\n  \"serviceDefault\": {\r\n    \"Streams\": 36864,\r\n    \"StreamsInbound\": 9216,\r\n    \"StreamsOutbound\": 36864,\r\n    \"Conns\": 0,\r\n    \"ConnsInbound\": 0,\r\n    \"ConnsOutbound\": 0,\r\n    \"FD\": 0,\r\n    \"Memory\": 2214592512\r\n  },\r\n  \"service\": {\r\n    \"libp2p.autonat\": {\r\n      \"Streams\": 128,\r\n      \"StreamsInbound\": 128,\r\n      \"StreamsOutbound\": 128,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 37748736\r\n    },\r\n    \"libp2p.holepunch\": {\r\n      \"Streams\": 320,\r\n      \"StreamsInbound\": 160,\r\n      \"StreamsOutbound\": 160,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 71303168\r\n    },\r\n    \"libp2p.identify\": {\r\n      \"Streams\": 2176,\r\n      \"StreamsInbound\": 1088,\r\n      \"StreamsOutbound\": 1088,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 71303168\r\n    },\r\n    \"libp2p.ping\": {\r\n      \"Streams\": 1088,\r\n      \"StreamsInbound\": 1088,\r\n      \"StreamsOutbound\": 1088,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 71303168\r\n    },\r\n    \"libp2p.relay/v2\": {\r\n      \"Streams\": 4352,\r\n      \"StreamsInbound\": 4352,\r\n      \"StreamsOutbound\": 4352,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 285212672\r\n    }\r\n  },\r\n  \"servicePeerDefault\": {\r\n    \"Streams\": 384,\r\n    \"StreamsInbound\": 192,\r\n    \"StreamsOutbound\": 384,\r\n    \"Conns\": 0,\r\n    \"ConnsInbound\": 0,\r\n    \"ConnsOutbound\": 0,\r\n    \"FD\": 0,\r\n    \"Memory\": 83886080\r\n  },\r\n  \"servicePeer\": {\r\n    \"libp2p.autonat\": {\r\n      \"Streams\": 2,\r\n      \"StreamsInbound\": 2,\r\n      \"StreamsOutbound\": 2,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 1048576\r\n    },\r\n    \"libp2p.holepunch\": {\r\n      \"Streams\": 2,\r\n      \"StreamsInbound\": 2,\r\n      \"StreamsOutbound\": 2,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 1048576\r\n    },\r\n    \"libp2p.identify\": {\r\n      \"Streams\": 32,\r\n      \"StreamsInbound\": 16,\r\n      \"StreamsOutbound\": 16,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 1048576\r\n    },\r\n    \"libp2p.ping\": {\r\n      \"Streams\": 4,\r\n      \"StreamsInbound\": 2,\r\n      \"StreamsOutbound\": 3,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 8590458880\r\n    },\r\n    \"libp2p.relay/v2\": {\r\n      \"Streams\": 64,\r\n      \"StreamsInbound\": 64,\r\n      \"StreamsOutbound\": 64,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 1048576\r\n    }\r\n  },\r\n  \"protocolDefault\": {\r\n    \"Streams\": 10240,\r\n    \"StreamsInbound\": 4608,\r\n    \"StreamsOutbound\": 10240,\r\n    \"Conns\": 0,\r\n    \"ConnsInbound\": 0,\r\n    \"ConnsOutbound\": 0,\r\n    \"FD\": 0,\r\n    \"Memory\": 2818572288\r\n  },\r\n  \"protocol\": {\r\n    \"/ipfs/id/1.0.0\": {\r\n      \"Streams\": 2176,\r\n      \"StreamsInbound\": 1088,\r\n      \"StreamsOutbound\": 1088,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 71303168\r\n    },\r\n    \"/ipfs/id/push/1.0.0\": {\r\n      \"Streams\": 2176,\r\n      \"StreamsInbound\": 1088,\r\n      \"StreamsOutbound\": 1088,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 71303168\r\n    },\r\n    \"/ipfs/ping/1.0.0\": {\r\n      \"Streams\": 1088,\r\n      \"StreamsInbound\": 1088,\r\n      \"StreamsOutbound\": 1088,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 71303168\r\n    },\r\n    \"/libp2p/autonat/1.0.0\": {\r\n      \"Streams\": 128,\r\n      \"StreamsInbound\": 128,\r\n      \"StreamsOutbound\": 128,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 37748736\r\n    },\r\n    \"/libp2p/circuit/relay/0.2.0/hop\": {\r\n      \"Streams\": 10880,\r\n      \"StreamsInbound\": 10880,\r\n      \"StreamsOutbound\": 10880,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 285212672\r\n    },\r\n    \"/libp2p/circuit/relay/0.2.0/stop\": {\r\n      \"Streams\": 10880,\r\n      \"StreamsInbound\": 10880,\r\n      \"StreamsOutbound\": 10880,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 285212672\r\n    },\r\n    \"/libp2p/dcutr\": {\r\n      \"Streams\": 320,\r\n      \"StreamsInbound\": 160,\r\n      \"StreamsOutbound\": 160,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 71303168\r\n    }\r\n  },\r\n  \"protocolPeerDefault\": {\r\n    \"Streams\": 512,\r\n    \"StreamsInbound\": 128,\r\n    \"StreamsOutbound\": 256,\r\n    \"Conns\": 0,\r\n    \"ConnsInbound\": 0,\r\n    \"ConnsOutbound\": 0,\r\n    \"FD\": 0,\r\n    \"Memory\": 16777280\r\n  },\r\n  \"protocolPeer\": {\r\n    \"/ipfs/id/1.0.0\": {\r\n      \"Streams\": 32,\r\n      \"StreamsInbound\": 16,\r\n      \"StreamsOutbound\": 16,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 8590458880\r\n    },\r\n    \"/ipfs/id/push/1.0.0\": {\r\n      \"Streams\": 32,\r\n      \"StreamsInbound\": 16,\r\n      \"StreamsOutbound\": 16,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 8590458880\r\n    },\r\n    \"/ipfs/ping/1.0.0\": {\r\n      \"Streams\": 4,\r\n      \"StreamsInbound\": 2,\r\n      \"StreamsOutbound\": 3,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 8590458880\r\n    },\r\n    \"/libp2p/autonat/1.0.0\": {\r\n      \"Streams\": 2,\r\n      \"StreamsInbound\": 2,\r\n      \"StreamsOutbound\": 2,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 1048576\r\n    },\r\n    \"/libp2p/circuit/relay/0.2.0/hop\": {\r\n      \"Streams\": 128,\r\n      \"StreamsInbound\": 128,\r\n      \"StreamsOutbound\": 128,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 33554432\r\n    },\r\n    \"/libp2p/circuit/relay/0.2.0/stop\": {\r\n      \"Streams\": 128,\r\n      \"StreamsInbound\": 128,\r\n      \"StreamsOutbound\": 128,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 33554432\r\n    },\r\n    \"/libp2p/dcutr\": {\r\n      \"Streams\": 2,\r\n      \"StreamsInbound\": 2,\r\n      \"StreamsOutbound\": 2,\r\n      \"Conns\": 0,\r\n      \"ConnsInbound\": 0,\r\n      \"ConnsOutbound\": 0,\r\n      \"FD\": 0,\r\n      \"Memory\": 1048576\r\n    }\r\n  },\r\n  \"peerDefault\": {\r\n    \"Streams\": 4608,\r\n    \"StreamsInbound\": 2304,\r\n    \"StreamsOutbound\": 4608,\r\n    \"Conns\": 8,\r\n    \"ConnsInbound\": 1,\r\n    \"ConnsOutbound\": 8,\r\n    \"FD\": 384,\r\n    \"Memory\": 2214592512\r\n  },\r\n  \"peer\": {},\r\n  \"conn\": {\r\n    \"Streams\": 0,\r\n    \"StreamsInbound\": 0,\r\n    \"StreamsOutbound\": 0,\r\n    \"Conns\": 1,\r\n    \"ConnsInbound\": 1,\r\n    \"ConnsOutbound\": 1,\r\n    \"FD\": 1,\r\n    \"Memory\": 33554432\r\n  },\r\n  \"stream\": {\r\n    \"Streams\": 1,\r\n    \"StreamsInbound\": 1,\r\n    \"StreamsOutbound\": 1,\r\n    \"Conns\": 0,\r\n    \"ConnsInbound\": 0,\r\n    \"ConnsOutbound\": 0,\r\n    \"FD\": 0,\r\n    \"Memory\": 16777216\r\n  }\r\n}\r\n```",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751543442/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-07T01:18:07Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32384647828",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 24391983,
            "login": "Jorropo",
            "display_login": "Jorropo",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Jorropo",
            "avatar_url": "https://avatars.githubusercontent.com/u/24391983?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956",
                "repository_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/labels{/name}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/comments",
                "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/events",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/issues/956",
                "id": 1931023040,
                "node_id": "I_kwDOA_JbCc5zGRLA",
                "number": 956,
                "title": "`goroutine` Leakage due to Unbounded Concurrent Incoming Streams in ProviderManager",
                "user": {
                    "login": "yhassanzadeh13",
                    "id": 19204398,
                    "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yhassanzadeh13",
                    "html_url": "https://github.com/yhassanzadeh13",
                    "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                    "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                    "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                    "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                    "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 5,
                "created_at": "2023-10-06T22:57:41Z",
                "updated_at": "2023-10-07T01:11:11Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "# Problem Definition\r\n\r\n## Observation\r\nOccasionally, a linear increase in `gopark`ed `goroutines` is observed with `go-libp2p-kad-dht`. This creates a scenario resembling `goroutine` leakage, where `goroutines` get initiated but never conclude. Over time, this accumulation can deplete resources and degrade application performance. This isn't always the case but does occur intermittently.\r\n\r\n![image1](https://github.com/libp2p/go-libp2p-kad-dht/assets/19204398/18d95ad2-e163-4376-ac47-50152da70663)\r\n\r\nThe subsequent graph demonstrates a leak of approximately 7 million goroutines, attributable to the DHT.\r\n![image2](https://github.com/libp2p/go-libp2p-kad-dht/assets/19204398/a05ab24b-ba94-4ade-a9fc-84e2147a246f)\r\n\r\n## Probable Underlying Issue\r\nPer the Call Graph, we hypothesize that the leakage is due to an upsurge in concurrent stream activity. Particularly, the Call Graph indicates that in high-activity contexts, all `goroutines` funneled through the [`ProviderManager.AddProvider`](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/cbe39cd7dfc6783002f087bc4ddf9ac1ce43b158/providers/providers_manager.go#L250) get placed into a standby state. This suspension occurs when `goroutines` await the `newprovs` channel, an unbuffered conduit.\r\n\r\n```go\r\n\tselect {\r\n\tcase pm.newprovs <- prov:\r\n\t\treturn nil\r\n\tcase <-ctx.Done():\r\n\t\treturn ctx.Err()\r\n\t}\r\n```\r\n\r\nHere, the `ctx` instance ties back to the [primary DHT context](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/3e31bcdc170dceca2c868687c268aafc5e8943ad/dht_net.go#L37), which only becomes `Done` upon DHT closure. Consequently, any `goroutine` on hold for `newprovs` will resume sequentially as the channel's reading side becomes available.\r\n\r\nThe count of dormant `goroutines`, due to awaiting the `pm.newprovs`, corresponds to the received [`pb.Message_GET_PROVIDERS` messages](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/0c90569a6d1913251402f4f713c4c834b0149f31/handlers.go#L44-L45). Each message initiates an `AddProvider` handler. \r\n\r\nThis situation also carries a security risk. If each `pb.Message_GET_PROVIDERS` message results in a dormant `goroutine`, it opens a window for potential attackers to exploit and mount a resource exhaustion attack.\r\n\r\n# Suggested Solutions\r\n\r\nTo address the `goroutine` leakage issue stemming from the `pb.Message_GET_PROVIDERS` messages, consider the following strategies (the author suggests strategy number 1):\r\n\r\n1. **Buffered Channel and Timeout**: Lower contention by turning the `newprovs` channel into a buffered variant, say with a capacity of 10K, paired with a global provider addition timeout, for instance, `1s`. Adjust the context in `AddProvider` to derive from the primary DHT context using `context.WithTimeout(dht.ctx, dht.addProviderTimeout)`. If the `newprovs` channel has space, it queues up requests, wrapping up the method instantly without stalling. Any held `goroutine` will reactivate and end by the timeout under contention scenarios. This ensures that a certain volume of buffered requests will process, with newer ones timing out if there's contention.\r\n\r\n2. **Worker-Based Queue Implementation**: Another approach involves substituting `newprovs` with a worker-based queuing system. This would promptly queue incoming `prov` in the `AddProvider` method, ensuring no `goroutine` holds up. A potential modification could be:\r\n\r\n    ```go\r\n    func (pm *ProviderManager) AddProvider(ctx context.Context, k []byte, provInfo peer.AddrInfo) error {\r\n\t    ctx, span := internal.StartSpan(ctx, \"ProviderManager.AddProvider\")\r\n\t    defer span.End()\r\n    \r\n\t    if provInfo.ID != pm.self {\r\n\t\t    pm.pstore.AddAddrs(provInfo.ID, provInfo.Addrs, ProviderAddrTTL)\r\n\t    }\r\n\t    prov := &addProv{\r\n\t\t    ctx: ctx,\r\n\t\t    key: k,\r\n\t\t    val: provInfo.ID,\r\n\t    }\r\n\t    \r\n\t    pm.queue.Enqueue(prov)\r\n    }\r\n    ```\r\n    \r\n    And the [`ProviderManager.run`](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/cbe39cd7dfc6783002f087bc4ddf9ac1ce43b158/providers/providers_manager.go#L161) might appear as:\r\n  \r\n    ```go\r\n\t\t\t    select {\r\n\t\t\t    case np := <-pm.queue.dequeue():\r\n\t\t\t\t    err := pm.addProv(np.ctx, np.key, np.val)\r\n\t\t\t\t    // subsequent logic\r\n    ```\r\n  \r\n    Nonetheless, this doesn't present a significant advantage over a buffered `newprovs` channel. An unrestricted queue could simply shift the `goroutine` leakage issue to memory leakage in the queue. Furthermore, such a queue could be vulnerable to memory exhaustion attacks. Once the queue's limit is reached, it must discard new entries or remove existing ones, making it analogous to the buffered channel and timeout strategy.\r\n    \r\n    cc @guillaumemichel",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751541336",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/issues/956#issuecomment-1751541336",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956",
                "id": 1751541336,
                "node_id": "IC_kwDOA_JbCc5oZmZY",
                "user": {
                    "login": "Jorropo",
                    "id": 24391983,
                    "node_id": "MDQ6VXNlcjI0MzkxOTgz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/24391983?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Jorropo",
                    "html_url": "https://github.com/Jorropo",
                    "followers_url": "https://api.github.com/users/Jorropo/followers",
                    "following_url": "https://api.github.com/users/Jorropo/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Jorropo/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Jorropo/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Jorropo/subscriptions",
                    "organizations_url": "https://api.github.com/users/Jorropo/orgs",
                    "repos_url": "https://api.github.com/users/Jorropo/repos",
                    "events_url": "https://api.github.com/users/Jorropo/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Jorropo/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-07T01:11:11Z",
                "updated_at": "2023-10-07T01:11:11Z",
                "author_association": "CONTRIBUTOR",
                "body": "@yhassanzadeh13 could you print the resources after running the scaling ?",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751541336/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-07T01:11:12Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32383901389",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 19204398,
            "login": "yhassanzadeh13",
            "display_login": "yhassanzadeh13",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yhassanzadeh13",
            "avatar_url": "https://avatars.githubusercontent.com/u/19204398?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956",
                "repository_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/labels{/name}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/comments",
                "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/events",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/issues/956",
                "id": 1931023040,
                "node_id": "I_kwDOA_JbCc5zGRLA",
                "number": 956,
                "title": "`goroutine` Leakage due to Unbounded Concurrent Incoming Streams in ProviderManager",
                "user": {
                    "login": "yhassanzadeh13",
                    "id": 19204398,
                    "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yhassanzadeh13",
                    "html_url": "https://github.com/yhassanzadeh13",
                    "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                    "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                    "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                    "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                    "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 4,
                "created_at": "2023-10-06T22:57:41Z",
                "updated_at": "2023-10-06T23:45:33Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "# Problem Definition\r\n\r\n## Observation\r\nOccasionally, a linear increase in `gopark`ed `goroutines` is observed with `go-libp2p-kad-dht`. This creates a scenario resembling `goroutine` leakage, where `goroutines` get initiated but never conclude. Over time, this accumulation can deplete resources and degrade application performance. This isn't always the case but does occur intermittently.\r\n\r\n![image1](https://github.com/libp2p/go-libp2p-kad-dht/assets/19204398/18d95ad2-e163-4376-ac47-50152da70663)\r\n\r\nThe subsequent graph demonstrates a leak of approximately 7 million goroutines, attributable to the DHT.\r\n![image2](https://github.com/libp2p/go-libp2p-kad-dht/assets/19204398/a05ab24b-ba94-4ade-a9fc-84e2147a246f)\r\n\r\n## Probable Underlying Issue\r\nPer the Call Graph, we hypothesize that the leakage is due to an upsurge in concurrent stream activity. Particularly, the Call Graph indicates that in high-activity contexts, all `goroutines` funneled through the [`ProviderManager.AddProvider`](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/cbe39cd7dfc6783002f087bc4ddf9ac1ce43b158/providers/providers_manager.go#L250) get placed into a standby state. This suspension occurs when `goroutines` await the `newprovs` channel, an unbuffered conduit.\r\n\r\n```go\r\n\tselect {\r\n\tcase pm.newprovs <- prov:\r\n\t\treturn nil\r\n\tcase <-ctx.Done():\r\n\t\treturn ctx.Err()\r\n\t}\r\n```\r\n\r\nHere, the `ctx` instance ties back to the [primary DHT context](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/3e31bcdc170dceca2c868687c268aafc5e8943ad/dht_net.go#L37), which only becomes `Done` upon DHT closure. Consequently, any `goroutine` on hold for `newprovs` will resume sequentially as the channel's reading side becomes available.\r\n\r\nThe count of dormant `goroutines`, due to awaiting the `pm.newprovs`, corresponds to the received [`pb.Message_GET_PROVIDERS` messages](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/0c90569a6d1913251402f4f713c4c834b0149f31/handlers.go#L44-L45). Each message initiates an `AddProvider` handler. \r\n\r\nThis situation also carries a security risk. If each `pb.Message_GET_PROVIDERS` message results in a dormant `goroutine`, it opens a window for potential attackers to exploit and mount a resource exhaustion attack.\r\n\r\n# Suggested Solutions\r\n\r\nTo address the `goroutine` leakage issue stemming from the `pb.Message_GET_PROVIDERS` messages, consider the following strategies (the author suggests strategy number 1):\r\n\r\n1. **Buffered Channel and Timeout**: Lower contention by turning the `newprovs` channel into a buffered variant, say with a capacity of 10K, paired with a global provider addition timeout, for instance, `1s`. Adjust the context in `AddProvider` to derive from the primary DHT context using `context.WithTimeout(dht.ctx, dht.addProviderTimeout)`. If the `newprovs` channel has space, it queues up requests, wrapping up the method instantly without stalling. Any held `goroutine` will reactivate and end by the timeout under contention scenarios. This ensures that a certain volume of buffered requests will process, with newer ones timing out if there's contention.\r\n\r\n2. **Worker-Based Queue Implementation**: Another approach involves substituting `newprovs` with a worker-based queuing system. This would promptly queue incoming `prov` in the `AddProvider` method, ensuring no `goroutine` holds up. A potential modification could be:\r\n\r\n    ```go\r\n    func (pm *ProviderManager) AddProvider(ctx context.Context, k []byte, provInfo peer.AddrInfo) error {\r\n\t    ctx, span := internal.StartSpan(ctx, \"ProviderManager.AddProvider\")\r\n\t    defer span.End()\r\n    \r\n\t    if provInfo.ID != pm.self {\r\n\t\t    pm.pstore.AddAddrs(provInfo.ID, provInfo.Addrs, ProviderAddrTTL)\r\n\t    }\r\n\t    prov := &addProv{\r\n\t\t    ctx: ctx,\r\n\t\t    key: k,\r\n\t\t    val: provInfo.ID,\r\n\t    }\r\n\t    \r\n\t    pm.queue.Enqueue(prov)\r\n    }\r\n    ```\r\n    \r\n    And the [`ProviderManager.run`](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/cbe39cd7dfc6783002f087bc4ddf9ac1ce43b158/providers/providers_manager.go#L161) might appear as:\r\n  \r\n    ```go\r\n\t\t\t    select {\r\n\t\t\t    case np := <-pm.queue.dequeue():\r\n\t\t\t\t    err := pm.addProv(np.ctx, np.key, np.val)\r\n\t\t\t\t    // subsequent logic\r\n    ```\r\n  \r\n    Nonetheless, this doesn't present a significant advantage over a buffered `newprovs` channel. An unrestricted queue could simply shift the `goroutine` leakage issue to memory leakage in the queue. Furthermore, such a queue could be vulnerable to memory exhaustion attacks. Once the queue's limit is reached, it must discard new entries or remove existing ones, making it analogous to the buffered channel and timeout strategy.\r\n    \r\n    cc @guillaumemichel",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751506126",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/issues/956#issuecomment-1751506126",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956",
                "id": 1751506126,
                "node_id": "IC_kwDOA_JbCc5oZdzO",
                "user": {
                    "login": "yhassanzadeh13",
                    "id": 19204398,
                    "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yhassanzadeh13",
                    "html_url": "https://github.com/yhassanzadeh13",
                    "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                    "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                    "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                    "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                    "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-06T23:45:33Z",
                "updated_at": "2023-10-06T23:45:33Z",
                "author_association": "NONE",
                "body": "We use the default config and [override a few fields](https://github.com/onflow/flow-go/blob/master/network/p2p/p2pbuilder/libp2pNodeBuilder.go#L235-L252).",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751506126/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-06T23:45:34Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32383869155",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 24391983,
            "login": "Jorropo",
            "display_login": "Jorropo",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Jorropo",
            "avatar_url": "https://avatars.githubusercontent.com/u/24391983?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956",
                "repository_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/labels{/name}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/comments",
                "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/events",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/issues/956",
                "id": 1931023040,
                "node_id": "I_kwDOA_JbCc5zGRLA",
                "number": 956,
                "title": "`goroutine` Leakage due to Unbounded Concurrent Incoming Streams in ProviderManager",
                "user": {
                    "login": "yhassanzadeh13",
                    "id": 19204398,
                    "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yhassanzadeh13",
                    "html_url": "https://github.com/yhassanzadeh13",
                    "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                    "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                    "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                    "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                    "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 3,
                "created_at": "2023-10-06T22:57:41Z",
                "updated_at": "2023-10-06T23:41:47Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "# Problem Definition\r\n\r\n## Observation\r\nOccasionally, a linear increase in `gopark`ed `goroutines` is observed with `go-libp2p-kad-dht`. This creates a scenario resembling `goroutine` leakage, where `goroutines` get initiated but never conclude. Over time, this accumulation can deplete resources and degrade application performance. This isn't always the case but does occur intermittently.\r\n\r\n![image1](https://github.com/libp2p/go-libp2p-kad-dht/assets/19204398/18d95ad2-e163-4376-ac47-50152da70663)\r\n\r\nThe subsequent graph demonstrates a leak of approximately 7 million goroutines, attributable to the DHT.\r\n![image2](https://github.com/libp2p/go-libp2p-kad-dht/assets/19204398/a05ab24b-ba94-4ade-a9fc-84e2147a246f)\r\n\r\n## Probable Underlying Issue\r\nPer the Call Graph, we hypothesize that the leakage is due to an upsurge in concurrent stream activity. Particularly, the Call Graph indicates that in high-activity contexts, all `goroutines` funneled through the [`ProviderManager.AddProvider`](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/cbe39cd7dfc6783002f087bc4ddf9ac1ce43b158/providers/providers_manager.go#L250) get placed into a standby state. This suspension occurs when `goroutines` await the `newprovs` channel, an unbuffered conduit.\r\n\r\n```go\r\n\tselect {\r\n\tcase pm.newprovs <- prov:\r\n\t\treturn nil\r\n\tcase <-ctx.Done():\r\n\t\treturn ctx.Err()\r\n\t}\r\n```\r\n\r\nHere, the `ctx` instance ties back to the [primary DHT context](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/3e31bcdc170dceca2c868687c268aafc5e8943ad/dht_net.go#L37), which only becomes `Done` upon DHT closure. Consequently, any `goroutine` on hold for `newprovs` will resume sequentially as the channel's reading side becomes available.\r\n\r\nThe count of dormant `goroutines`, due to awaiting the `pm.newprovs`, corresponds to the received [`pb.Message_GET_PROVIDERS` messages](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/0c90569a6d1913251402f4f713c4c834b0149f31/handlers.go#L44-L45). Each message initiates an `AddProvider` handler. \r\n\r\nThis situation also carries a security risk. If each `pb.Message_GET_PROVIDERS` message results in a dormant `goroutine`, it opens a window for potential attackers to exploit and mount a resource exhaustion attack.\r\n\r\n# Suggested Solutions\r\n\r\nTo address the `goroutine` leakage issue stemming from the `pb.Message_GET_PROVIDERS` messages, consider the following strategies (the author suggests strategy number 1):\r\n\r\n1. **Buffered Channel and Timeout**: Lower contention by turning the `newprovs` channel into a buffered variant, say with a capacity of 10K, paired with a global provider addition timeout, for instance, `1s`. Adjust the context in `AddProvider` to derive from the primary DHT context using `context.WithTimeout(dht.ctx, dht.addProviderTimeout)`. If the `newprovs` channel has space, it queues up requests, wrapping up the method instantly without stalling. Any held `goroutine` will reactivate and end by the timeout under contention scenarios. This ensures that a certain volume of buffered requests will process, with newer ones timing out if there's contention.\r\n\r\n2. **Worker-Based Queue Implementation**: Another approach involves substituting `newprovs` with a worker-based queuing system. This would promptly queue incoming `prov` in the `AddProvider` method, ensuring no `goroutine` holds up. A potential modification could be:\r\n\r\n    ```go\r\n    func (pm *ProviderManager) AddProvider(ctx context.Context, k []byte, provInfo peer.AddrInfo) error {\r\n\t    ctx, span := internal.StartSpan(ctx, \"ProviderManager.AddProvider\")\r\n\t    defer span.End()\r\n    \r\n\t    if provInfo.ID != pm.self {\r\n\t\t    pm.pstore.AddAddrs(provInfo.ID, provInfo.Addrs, ProviderAddrTTL)\r\n\t    }\r\n\t    prov := &addProv{\r\n\t\t    ctx: ctx,\r\n\t\t    key: k,\r\n\t\t    val: provInfo.ID,\r\n\t    }\r\n\t    \r\n\t    pm.queue.Enqueue(prov)\r\n    }\r\n    ```\r\n    \r\n    And the [`ProviderManager.run`](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/cbe39cd7dfc6783002f087bc4ddf9ac1ce43b158/providers/providers_manager.go#L161) might appear as:\r\n  \r\n    ```go\r\n\t\t\t    select {\r\n\t\t\t    case np := <-pm.queue.dequeue():\r\n\t\t\t\t    err := pm.addProv(np.ctx, np.key, np.val)\r\n\t\t\t\t    // subsequent logic\r\n    ```\r\n  \r\n    Nonetheless, this doesn't present a significant advantage over a buffered `newprovs` channel. An unrestricted queue could simply shift the `goroutine` leakage issue to memory leakage in the queue. Furthermore, such a queue could be vulnerable to memory exhaustion attacks. Once the queue's limit is reached, it must discard new entries or remove existing ones, making it analogous to the buffered channel and timeout strategy.\r\n    \r\n    cc @guillaumemichel",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751504403",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/issues/956#issuecomment-1751504403",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956",
                "id": 1751504403,
                "node_id": "IC_kwDOA_JbCc5oZdYT",
                "user": {
                    "login": "Jorropo",
                    "id": 24391983,
                    "node_id": "MDQ6VXNlcjI0MzkxOTgz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/24391983?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Jorropo",
                    "html_url": "https://github.com/Jorropo",
                    "followers_url": "https://api.github.com/users/Jorropo/followers",
                    "following_url": "https://api.github.com/users/Jorropo/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Jorropo/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Jorropo/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Jorropo/subscriptions",
                    "organizations_url": "https://api.github.com/users/Jorropo/orgs",
                    "repos_url": "https://api.github.com/users/Jorropo/repos",
                    "events_url": "https://api.github.com/users/Jorropo/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Jorropo/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-06T23:41:47Z",
                "updated_at": "2023-10-06T23:41:47Z",
                "author_association": "CONTRIBUTOR",
                "body": "@yhassanzadeh13 can you share your config ?\r\nEven without per protocol limits you need:\r\n- A total connection limit\r\n- A per peer stream limit OR a total stream limit (boths blind to the protocol)",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751504403/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-06T23:41:48Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32383858312",
        "type": "PullRequestEvent",
        "actor": {
            "id": 19204398,
            "login": "yhassanzadeh13",
            "display_login": "yhassanzadeh13",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yhassanzadeh13",
            "avatar_url": "https://avatars.githubusercontent.com/u/19204398?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "closed",
            "number": 957,
            "pull_request": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/957",
                "id": 1546092979,
                "node_id": "PR_kwDOA_JbCc5cJ4Gz",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957",
                "diff_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957.diff",
                "patch_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957.patch",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957",
                "number": 957,
                "state": "closed",
                "locked": false,
                "title": "Fixes `goroutine` leakage in `AddProvider`",
                "user": {
                    "login": "yhassanzadeh13",
                    "id": 19204398,
                    "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yhassanzadeh13",
                    "html_url": "https://github.com/yhassanzadeh13",
                    "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                    "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                    "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                    "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                    "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Addresses: https://github.com/libp2p/go-libp2p-kad-dht/issues/956",
                "created_at": "2023-10-06T23:01:07Z",
                "updated_at": "2023-10-06T23:40:30Z",
                "closed_at": "2023-10-06T23:40:30Z",
                "merged_at": null,
                "merge_commit_sha": "7f5ffda5a0ee2c2b31a17decc2d233acf43080b6",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [
                    {
                        "login": "guillaumemichel",
                        "id": 15075495,
                        "node_id": "MDQ6VXNlcjE1MDc1NDk1",
                        "avatar_url": "https://avatars.githubusercontent.com/u/15075495?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/guillaumemichel",
                        "html_url": "https://github.com/guillaumemichel",
                        "followers_url": "https://api.github.com/users/guillaumemichel/followers",
                        "following_url": "https://api.github.com/users/guillaumemichel/following{/other_user}",
                        "gists_url": "https://api.github.com/users/guillaumemichel/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/guillaumemichel/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/guillaumemichel/subscriptions",
                        "organizations_url": "https://api.github.com/users/guillaumemichel/orgs",
                        "repos_url": "https://api.github.com/users/guillaumemichel/repos",
                        "events_url": "https://api.github.com/users/guillaumemichel/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/guillaumemichel/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_teams": [
                    {
                        "name": "kubo maintainers",
                        "id": 7610265,
                        "node_id": "T_kwDOAOJp3s4AdB-Z",
                        "slug": "kubo-maintainers",
                        "description": "Kubo Maintainers",
                        "privacy": "closed",
                        "notification_setting": "notifications_enabled",
                        "url": "https://api.github.com/organizations/14838238/team/7610265",
                        "html_url": "https://github.com/orgs/libp2p/teams/kubo-maintainers",
                        "members_url": "https://api.github.com/organizations/14838238/team/7610265/members{/member}",
                        "repositories_url": "https://api.github.com/organizations/14838238/team/7610265/repos",
                        "permission": "pull",
                        "parent": null
                    }
                ],
                "labels": [],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/957/commits",
                "review_comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/957/comments",
                "review_comment_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/comments",
                "statuses_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/statuses/14294b4e08f57c3ca0ba06b931ea4db9f1f0a40e",
                "head": {
                    "label": "yhassanzadeh13:yahya/fix-goroutine-leak",
                    "ref": "yahya/fix-goroutine-leak",
                    "sha": "14294b4e08f57c3ca0ba06b931ea4db9f1f0a40e",
                    "user": {
                        "login": "yhassanzadeh13",
                        "id": 19204398,
                        "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/yhassanzadeh13",
                        "html_url": "https://github.com/yhassanzadeh13",
                        "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                        "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                        "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                        "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                        "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                        "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 701044384,
                        "node_id": "R_kgDOKckWoA",
                        "name": "go-libp2p-kad-dht",
                        "full_name": "yhassanzadeh13/go-libp2p-kad-dht",
                        "private": false,
                        "owner": {
                            "login": "yhassanzadeh13",
                            "id": 19204398,
                            "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                            "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/yhassanzadeh13",
                            "html_url": "https://github.com/yhassanzadeh13",
                            "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                            "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                            "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                            "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                            "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                            "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/yhassanzadeh13/go-libp2p-kad-dht",
                        "description": "A Kademlia DHT implementation on go-libp2p",
                        "fork": true,
                        "url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht",
                        "forks_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/forks",
                        "keys_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/teams",
                        "hooks_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/hooks",
                        "issue_events_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/events",
                        "assignees_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/tags",
                        "blobs_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/languages",
                        "stargazers_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/stargazers",
                        "contributors_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/contributors",
                        "subscribers_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/subscribers",
                        "subscription_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/subscription",
                        "commits_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/merges",
                        "archive_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/downloads",
                        "issues_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/labels{/name}",
                        "releases_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/deployments",
                        "created_at": "2023-10-05T19:49:17Z",
                        "updated_at": "2023-10-05T19:49:17Z",
                        "pushed_at": "2023-10-06T23:01:30Z",
                        "git_url": "git://github.com/yhassanzadeh13/go-libp2p-kad-dht.git",
                        "ssh_url": "git@github.com:yhassanzadeh13/go-libp2p-kad-dht.git",
                        "clone_url": "https://github.com/yhassanzadeh13/go-libp2p-kad-dht.git",
                        "svn_url": "https://github.com/yhassanzadeh13/go-libp2p-kad-dht",
                        "homepage": "https://github.com/libp2p/specs/tree/master/kad-dht",
                        "size": 2335,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": null,
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 0,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 0,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "libp2p:master",
                    "ref": "master",
                    "sha": "b63ad6096833d36b365f1361edab871f6cdc283c",
                    "user": {
                        "login": "libp2p",
                        "id": 14838238,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0ODM4MjM4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/14838238?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/libp2p",
                        "html_url": "https://github.com/libp2p",
                        "followers_url": "https://api.github.com/users/libp2p/followers",
                        "following_url": "https://api.github.com/users/libp2p/following{/other_user}",
                        "gists_url": "https://api.github.com/users/libp2p/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/libp2p/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/libp2p/subscriptions",
                        "organizations_url": "https://api.github.com/users/libp2p/orgs",
                        "repos_url": "https://api.github.com/users/libp2p/repos",
                        "events_url": "https://api.github.com/users/libp2p/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/libp2p/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 66214665,
                        "node_id": "MDEwOlJlcG9zaXRvcnk2NjIxNDY2NQ==",
                        "name": "go-libp2p-kad-dht",
                        "full_name": "libp2p/go-libp2p-kad-dht",
                        "private": false,
                        "owner": {
                            "login": "libp2p",
                            "id": 14838238,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0ODM4MjM4",
                            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/libp2p",
                            "html_url": "https://github.com/libp2p",
                            "followers_url": "https://api.github.com/users/libp2p/followers",
                            "following_url": "https://api.github.com/users/libp2p/following{/other_user}",
                            "gists_url": "https://api.github.com/users/libp2p/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/libp2p/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/libp2p/subscriptions",
                            "organizations_url": "https://api.github.com/users/libp2p/orgs",
                            "repos_url": "https://api.github.com/users/libp2p/repos",
                            "events_url": "https://api.github.com/users/libp2p/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/libp2p/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/libp2p/go-libp2p-kad-dht",
                        "description": "A Kademlia DHT implementation on go-libp2p",
                        "fork": false,
                        "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                        "forks_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/forks",
                        "keys_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/teams",
                        "hooks_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/hooks",
                        "issue_events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/events",
                        "assignees_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/tags",
                        "blobs_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/languages",
                        "stargazers_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/stargazers",
                        "contributors_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/contributors",
                        "subscribers_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/subscribers",
                        "subscription_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/subscription",
                        "commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/merges",
                        "archive_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/downloads",
                        "issues_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/labels{/name}",
                        "releases_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/deployments",
                        "created_at": "2016-08-21T18:40:35Z",
                        "updated_at": "2023-10-02T15:30:28Z",
                        "pushed_at": "2023-10-06T23:01:32Z",
                        "git_url": "git://github.com/libp2p/go-libp2p-kad-dht.git",
                        "ssh_url": "git@github.com:libp2p/go-libp2p-kad-dht.git",
                        "clone_url": "https://github.com/libp2p/go-libp2p-kad-dht.git",
                        "svn_url": "https://github.com/libp2p/go-libp2p-kad-dht",
                        "homepage": "https://github.com/libp2p/specs/tree/master/kad-dht",
                        "size": 3723,
                        "stargazers_count": 488,
                        "watchers_count": 488,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": false,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 212,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 98,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "dht",
                            "ipfs",
                            "kad-dht",
                            "libp2p"
                        ],
                        "visibility": "public",
                        "forks": 212,
                        "open_issues": 98,
                        "watchers": 488,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/957"
                    },
                    "html": {
                        "href": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/957/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/957/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/statuses/14294b4e08f57c3ca0ba06b931ea4db9f1f0a40e"
                    }
                },
                "author_association": "NONE",
                "auto_merge": null,
                "active_lock_reason": null,
                "merged": false,
                "mergeable": true,
                "rebaseable": false,
                "mergeable_state": "unstable",
                "merged_by": null,
                "comments": 5,
                "review_comments": 0,
                "maintainer_can_modify": false,
                "commits": 3,
                "additions": 11,
                "deletions": 3,
                "changed_files": 1
            }
        },
        "public": true,
        "created_at": "2023-10-06T23:40:31Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32383856465",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 19204398,
            "login": "yhassanzadeh13",
            "display_login": "yhassanzadeh13",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yhassanzadeh13",
            "avatar_url": "https://avatars.githubusercontent.com/u/19204398?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956",
                "repository_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/labels{/name}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/comments",
                "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/events",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/issues/956",
                "id": 1931023040,
                "node_id": "I_kwDOA_JbCc5zGRLA",
                "number": 956,
                "title": "`goroutine` Leakage due to Unbounded Concurrent Incoming Streams in ProviderManager",
                "user": {
                    "login": "yhassanzadeh13",
                    "id": 19204398,
                    "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yhassanzadeh13",
                    "html_url": "https://github.com/yhassanzadeh13",
                    "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                    "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                    "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                    "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                    "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 2,
                "created_at": "2023-10-06T22:57:41Z",
                "updated_at": "2023-10-06T23:40:17Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "# Problem Definition\r\n\r\n## Observation\r\nOccasionally, a linear increase in `gopark`ed `goroutines` is observed with `go-libp2p-kad-dht`. This creates a scenario resembling `goroutine` leakage, where `goroutines` get initiated but never conclude. Over time, this accumulation can deplete resources and degrade application performance. This isn't always the case but does occur intermittently.\r\n\r\n![image1](https://github.com/libp2p/go-libp2p-kad-dht/assets/19204398/18d95ad2-e163-4376-ac47-50152da70663)\r\n\r\nThe subsequent graph demonstrates a leak of approximately 7 million goroutines, attributable to the DHT.\r\n![image2](https://github.com/libp2p/go-libp2p-kad-dht/assets/19204398/a05ab24b-ba94-4ade-a9fc-84e2147a246f)\r\n\r\n## Probable Underlying Issue\r\nPer the Call Graph, we hypothesize that the leakage is due to an upsurge in concurrent stream activity. Particularly, the Call Graph indicates that in high-activity contexts, all `goroutines` funneled through the [`ProviderManager.AddProvider`](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/cbe39cd7dfc6783002f087bc4ddf9ac1ce43b158/providers/providers_manager.go#L250) get placed into a standby state. This suspension occurs when `goroutines` await the `newprovs` channel, an unbuffered conduit.\r\n\r\n```go\r\n\tselect {\r\n\tcase pm.newprovs <- prov:\r\n\t\treturn nil\r\n\tcase <-ctx.Done():\r\n\t\treturn ctx.Err()\r\n\t}\r\n```\r\n\r\nHere, the `ctx` instance ties back to the [primary DHT context](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/3e31bcdc170dceca2c868687c268aafc5e8943ad/dht_net.go#L37), which only becomes `Done` upon DHT closure. Consequently, any `goroutine` on hold for `newprovs` will resume sequentially as the channel's reading side becomes available.\r\n\r\nThe count of dormant `goroutines`, due to awaiting the `pm.newprovs`, corresponds to the received [`pb.Message_GET_PROVIDERS` messages](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/0c90569a6d1913251402f4f713c4c834b0149f31/handlers.go#L44-L45). Each message initiates an `AddProvider` handler. \r\n\r\nThis situation also carries a security risk. If each `pb.Message_GET_PROVIDERS` message results in a dormant `goroutine`, it opens a window for potential attackers to exploit and mount a resource exhaustion attack.\r\n\r\n# Suggested Solutions\r\n\r\nTo address the `goroutine` leakage issue stemming from the `pb.Message_GET_PROVIDERS` messages, consider the following strategies (the author suggests strategy number 1):\r\n\r\n1. **Buffered Channel and Timeout**: Lower contention by turning the `newprovs` channel into a buffered variant, say with a capacity of 10K, paired with a global provider addition timeout, for instance, `1s`. Adjust the context in `AddProvider` to derive from the primary DHT context using `context.WithTimeout(dht.ctx, dht.addProviderTimeout)`. If the `newprovs` channel has space, it queues up requests, wrapping up the method instantly without stalling. Any held `goroutine` will reactivate and end by the timeout under contention scenarios. This ensures that a certain volume of buffered requests will process, with newer ones timing out if there's contention.\r\n\r\n2. **Worker-Based Queue Implementation**: Another approach involves substituting `newprovs` with a worker-based queuing system. This would promptly queue incoming `prov` in the `AddProvider` method, ensuring no `goroutine` holds up. A potential modification could be:\r\n\r\n    ```go\r\n    func (pm *ProviderManager) AddProvider(ctx context.Context, k []byte, provInfo peer.AddrInfo) error {\r\n\t    ctx, span := internal.StartSpan(ctx, \"ProviderManager.AddProvider\")\r\n\t    defer span.End()\r\n    \r\n\t    if provInfo.ID != pm.self {\r\n\t\t    pm.pstore.AddAddrs(provInfo.ID, provInfo.Addrs, ProviderAddrTTL)\r\n\t    }\r\n\t    prov := &addProv{\r\n\t\t    ctx: ctx,\r\n\t\t    key: k,\r\n\t\t    val: provInfo.ID,\r\n\t    }\r\n\t    \r\n\t    pm.queue.Enqueue(prov)\r\n    }\r\n    ```\r\n    \r\n    And the [`ProviderManager.run`](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/cbe39cd7dfc6783002f087bc4ddf9ac1ce43b158/providers/providers_manager.go#L161) might appear as:\r\n  \r\n    ```go\r\n\t\t\t    select {\r\n\t\t\t    case np := <-pm.queue.dequeue():\r\n\t\t\t\t    err := pm.addProv(np.ctx, np.key, np.val)\r\n\t\t\t\t    // subsequent logic\r\n    ```\r\n  \r\n    Nonetheless, this doesn't present a significant advantage over a buffered `newprovs` channel. An unrestricted queue could simply shift the `goroutine` leakage issue to memory leakage in the queue. Furthermore, such a queue could be vulnerable to memory exhaustion attacks. Once the queue's limit is reached, it must discard new entries or remove existing ones, making it analogous to the buffered channel and timeout strategy.\r\n    \r\n    cc @guillaumemichel",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751503680",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/issues/956#issuecomment-1751503680",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956",
                "id": 1751503680,
                "node_id": "IC_kwDOA_JbCc5oZdNA",
                "user": {
                    "login": "yhassanzadeh13",
                    "id": 19204398,
                    "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yhassanzadeh13",
                    "html_url": "https://github.com/yhassanzadeh13",
                    "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                    "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                    "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                    "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                    "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-06T23:40:17Z",
                "updated_at": "2023-10-06T23:40:17Z",
                "author_association": "NONE",
                "body": "> To paraphrase what I said in #957. There is a difference in the DHT server being slower than it could be and having 7m concurrent goroutines running. A slow server is not a valid reason for resources to get out of control because we want to apply back-pressure, so in the situation of a slow server things will be slow but inbound clients are not allowed to consume infinitely many resources. This has been a problem in the past but now should be handled by the resource manager, see: [GHSA-j7qp-mfxf-8xjw](https://github.com/libp2p/go-libp2p/security/advisories/GHSA-j7qp-mfxf-8xjw) So, are you running with the resource manager ?\r\n\r\nWe are running a resource manager, but upon checking we don't explicitly set resources for the DHT protocol. Based on the shared doc, we most likely need to explicitly set resource limits for our DHT protocol.",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751503680/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-06T23:40:17Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32383725208",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 24391983,
            "login": "Jorropo",
            "display_login": "Jorropo",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Jorropo",
            "avatar_url": "https://avatars.githubusercontent.com/u/24391983?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956",
                "repository_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/labels{/name}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/comments",
                "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/events",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/issues/956",
                "id": 1931023040,
                "node_id": "I_kwDOA_JbCc5zGRLA",
                "number": 956,
                "title": "`goroutine` Leakage due to Unbounded Concurrent Incoming Streams in ProviderManager",
                "user": {
                    "login": "yhassanzadeh13",
                    "id": 19204398,
                    "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yhassanzadeh13",
                    "html_url": "https://github.com/yhassanzadeh13",
                    "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                    "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                    "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                    "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                    "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 1,
                "created_at": "2023-10-06T22:57:41Z",
                "updated_at": "2023-10-06T23:25:48Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "# Problem Definition\r\n\r\n## Observation\r\nOccasionally, a linear increase in `gopark`ed `goroutines` is observed with `go-libp2p-kad-dht`. This creates a scenario resembling `goroutine` leakage, where `goroutines` get initiated but never conclude. Over time, this accumulation can deplete resources and degrade application performance. This isn't always the case but does occur intermittently.\r\n\r\n![image1](https://github.com/libp2p/go-libp2p-kad-dht/assets/19204398/18d95ad2-e163-4376-ac47-50152da70663)\r\n\r\nThe subsequent graph demonstrates a leak of approximately 7 million goroutines, attributable to the DHT.\r\n![image2](https://github.com/libp2p/go-libp2p-kad-dht/assets/19204398/a05ab24b-ba94-4ade-a9fc-84e2147a246f)\r\n\r\n## Probable Underlying Issue\r\nPer the Call Graph, we hypothesize that the leakage is due to an upsurge in concurrent stream activity. Particularly, the Call Graph indicates that in high-activity contexts, all `goroutines` funneled through the [`ProviderManager.AddProvider`](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/cbe39cd7dfc6783002f087bc4ddf9ac1ce43b158/providers/providers_manager.go#L250) get placed into a standby state. This suspension occurs when `goroutines` await the `newprovs` channel, an unbuffered conduit.\r\n\r\n```go\r\n\tselect {\r\n\tcase pm.newprovs <- prov:\r\n\t\treturn nil\r\n\tcase <-ctx.Done():\r\n\t\treturn ctx.Err()\r\n\t}\r\n```\r\n\r\nHere, the `ctx` instance ties back to the [primary DHT context](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/3e31bcdc170dceca2c868687c268aafc5e8943ad/dht_net.go#L37), which only becomes `Done` upon DHT closure. Consequently, any `goroutine` on hold for `newprovs` will resume sequentially as the channel's reading side becomes available.\r\n\r\nThe count of dormant `goroutines`, due to awaiting the `pm.newprovs`, corresponds to the received [`pb.Message_GET_PROVIDERS` messages](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/0c90569a6d1913251402f4f713c4c834b0149f31/handlers.go#L44-L45). Each message initiates an `AddProvider` handler. \r\n\r\nThis situation also carries a security risk. If each `pb.Message_GET_PROVIDERS` message results in a dormant `goroutine`, it opens a window for potential attackers to exploit and mount a resource exhaustion attack.\r\n\r\n# Suggested Solutions\r\n\r\nTo address the `goroutine` leakage issue stemming from the `pb.Message_GET_PROVIDERS` messages, consider the following strategies (the author suggests strategy number 1):\r\n\r\n1. **Buffered Channel and Timeout**: Lower contention by turning the `newprovs` channel into a buffered variant, say with a capacity of 10K, paired with a global provider addition timeout, for instance, `1s`. Adjust the context in `AddProvider` to derive from the primary DHT context using `context.WithTimeout(dht.ctx, dht.addProviderTimeout)`. If the `newprovs` channel has space, it queues up requests, wrapping up the method instantly without stalling. Any held `goroutine` will reactivate and end by the timeout under contention scenarios. This ensures that a certain volume of buffered requests will process, with newer ones timing out if there's contention.\r\n\r\n2. **Worker-Based Queue Implementation**: Another approach involves substituting `newprovs` with a worker-based queuing system. This would promptly queue incoming `prov` in the `AddProvider` method, ensuring no `goroutine` holds up. A potential modification could be:\r\n\r\n    ```go\r\n    func (pm *ProviderManager) AddProvider(ctx context.Context, k []byte, provInfo peer.AddrInfo) error {\r\n\t    ctx, span := internal.StartSpan(ctx, \"ProviderManager.AddProvider\")\r\n\t    defer span.End()\r\n    \r\n\t    if provInfo.ID != pm.self {\r\n\t\t    pm.pstore.AddAddrs(provInfo.ID, provInfo.Addrs, ProviderAddrTTL)\r\n\t    }\r\n\t    prov := &addProv{\r\n\t\t    ctx: ctx,\r\n\t\t    key: k,\r\n\t\t    val: provInfo.ID,\r\n\t    }\r\n\t    \r\n\t    pm.queue.Enqueue(prov)\r\n    }\r\n    ```\r\n    \r\n    And the [`ProviderManager.run`](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/cbe39cd7dfc6783002f087bc4ddf9ac1ce43b158/providers/providers_manager.go#L161) might appear as:\r\n  \r\n    ```go\r\n\t\t\t    select {\r\n\t\t\t    case np := <-pm.queue.dequeue():\r\n\t\t\t\t    err := pm.addProv(np.ctx, np.key, np.val)\r\n\t\t\t\t    // subsequent logic\r\n    ```\r\n  \r\n    Nonetheless, this doesn't present a significant advantage over a buffered `newprovs` channel. An unrestricted queue could simply shift the `goroutine` leakage issue to memory leakage in the queue. Furthermore, such a queue could be vulnerable to memory exhaustion attacks. Once the queue's limit is reached, it must discard new entries or remove existing ones, making it analogous to the buffered channel and timeout strategy.\r\n    \r\n    cc @guillaumemichel",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751497088",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/issues/956#issuecomment-1751497088",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956",
                "id": 1751497088,
                "node_id": "IC_kwDOA_JbCc5oZbmA",
                "user": {
                    "login": "Jorropo",
                    "id": 24391983,
                    "node_id": "MDQ6VXNlcjI0MzkxOTgz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/24391983?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Jorropo",
                    "html_url": "https://github.com/Jorropo",
                    "followers_url": "https://api.github.com/users/Jorropo/followers",
                    "following_url": "https://api.github.com/users/Jorropo/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Jorropo/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Jorropo/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Jorropo/subscriptions",
                    "organizations_url": "https://api.github.com/users/Jorropo/orgs",
                    "repos_url": "https://api.github.com/users/Jorropo/repos",
                    "events_url": "https://api.github.com/users/Jorropo/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Jorropo/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-06T23:25:47Z",
                "updated_at": "2023-10-06T23:25:47Z",
                "author_association": "CONTRIBUTOR",
                "body": "To paraphrase what I said in #957. There is a difference in the DHT server being slower than it could be and having 7m concurrent goroutines running.\r\nA slow server is not a valid reason for resources to get out of control because we want to apply back-pressure, so in the situation of a slow server things will get slower but inbound clients are not allowed to consume infinitely many resources.\r\nThis has been a problem in the past but now should be handled by the resource manager, see: https://github.com/libp2p/go-libp2p/security/advisories/GHSA-j7qp-mfxf-8xjw",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751497088/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-06T23:25:48Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32383696719",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 24391983,
            "login": "Jorropo",
            "display_login": "Jorropo",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Jorropo",
            "avatar_url": "https://avatars.githubusercontent.com/u/24391983?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957",
                "repository_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/labels{/name}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/comments",
                "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/events",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957",
                "id": 1931025126,
                "node_id": "PR_kwDOA_JbCc5cJ4Gz",
                "number": 957,
                "title": "Fixes `goroutine` leakage in `AddProvider`",
                "user": {
                    "login": "yhassanzadeh13",
                    "id": 19204398,
                    "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yhassanzadeh13",
                    "html_url": "https://github.com/yhassanzadeh13",
                    "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                    "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                    "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                    "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                    "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 5,
                "created_at": "2023-10-06T23:01:07Z",
                "updated_at": "2023-10-06T23:23:01Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/957",
                    "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957",
                    "diff_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957.diff",
                    "patch_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957.patch",
                    "merged_at": null
                },
                "body": "Addresses: https://github.com/libp2p/go-libp2p-kad-dht/issues/956",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751495738",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957#issuecomment-1751495738",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957",
                "id": 1751495738,
                "node_id": "IC_kwDOA_JbCc5oZbQ6",
                "user": {
                    "login": "Jorropo",
                    "id": 24391983,
                    "node_id": "MDQ6VXNlcjI0MzkxOTgz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/24391983?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Jorropo",
                    "html_url": "https://github.com/Jorropo",
                    "followers_url": "https://api.github.com/users/Jorropo/followers",
                    "following_url": "https://api.github.com/users/Jorropo/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Jorropo/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Jorropo/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Jorropo/subscriptions",
                    "organizations_url": "https://api.github.com/users/Jorropo/orgs",
                    "repos_url": "https://api.github.com/users/Jorropo/repos",
                    "events_url": "https://api.github.com/users/Jorropo/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Jorropo/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-06T23:23:01Z",
                "updated_at": "2023-10-06T23:23:01Z",
                "author_association": "CONTRIBUTOR",
                "body": "Just realised #956 has been submitted too, should have red that before asking. mb sry",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751495738/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-06T23:23:02Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32383664441",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 24391983,
            "login": "Jorropo",
            "display_login": "Jorropo",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Jorropo",
            "avatar_url": "https://avatars.githubusercontent.com/u/24391983?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957",
                "repository_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/labels{/name}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/comments",
                "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/events",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957",
                "id": 1931025126,
                "node_id": "PR_kwDOA_JbCc5cJ4Gz",
                "number": 957,
                "title": "Fixes `goroutine` leakage in `AddProvider`",
                "user": {
                    "login": "yhassanzadeh13",
                    "id": 19204398,
                    "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yhassanzadeh13",
                    "html_url": "https://github.com/yhassanzadeh13",
                    "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                    "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                    "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                    "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                    "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 4,
                "created_at": "2023-10-06T23:01:07Z",
                "updated_at": "2023-10-06T23:19:51Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/957",
                    "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957",
                    "diff_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957.diff",
                    "patch_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957.patch",
                    "merged_at": null
                },
                "body": "Addresses: https://github.com/libp2p/go-libp2p-kad-dht/issues/956",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751494198",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957#issuecomment-1751494198",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957",
                "id": 1751494198,
                "node_id": "IC_kwDOA_JbCc5oZa42",
                "user": {
                    "login": "Jorropo",
                    "id": 24391983,
                    "node_id": "MDQ6VXNlcjI0MzkxOTgz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/24391983?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Jorropo",
                    "html_url": "https://github.com/Jorropo",
                    "followers_url": "https://api.github.com/users/Jorropo/followers",
                    "following_url": "https://api.github.com/users/Jorropo/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Jorropo/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Jorropo/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Jorropo/subscriptions",
                    "organizations_url": "https://api.github.com/users/Jorropo/orgs",
                    "repos_url": "https://api.github.com/users/Jorropo/repos",
                    "events_url": "https://api.github.com/users/Jorropo/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Jorropo/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-06T23:19:51Z",
                "updated_at": "2023-10-06T23:19:51Z",
                "author_association": "CONTRIBUTOR",
                "body": "After a very quick read of the code, I'm 90% confident we correctly apply backpressure, there is effectively a 1 big buffer (since we don't do back-pressure for the working set of `ProviderManager.run` but that is fine).\r\nWe could optimize this code to be multithreaded but I'm not sure how much of a bottleneck this is.",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751494198/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-06T23:19:51Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32383587227",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 24391983,
            "login": "Jorropo",
            "display_login": "Jorropo",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Jorropo",
            "avatar_url": "https://avatars.githubusercontent.com/u/24391983?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957",
                "repository_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/labels{/name}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/comments",
                "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/events",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957",
                "id": 1931025126,
                "node_id": "PR_kwDOA_JbCc5cJ4Gz",
                "number": 957,
                "title": "Fixes `goroutine` leakage in `AddProvider`",
                "user": {
                    "login": "yhassanzadeh13",
                    "id": 19204398,
                    "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yhassanzadeh13",
                    "html_url": "https://github.com/yhassanzadeh13",
                    "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                    "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                    "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                    "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                    "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 3,
                "created_at": "2023-10-06T23:01:07Z",
                "updated_at": "2023-10-06T23:12:23Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/957",
                    "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957",
                    "diff_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957.diff",
                    "patch_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957.patch",
                    "merged_at": null
                },
                "body": "Addresses: https://github.com/libp2p/go-libp2p-kad-dht/issues/956",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751490077",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957#issuecomment-1751490077",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957",
                "id": 1751490077,
                "node_id": "IC_kwDOA_JbCc5oZZ4d",
                "user": {
                    "login": "Jorropo",
                    "id": 24391983,
                    "node_id": "MDQ6VXNlcjI0MzkxOTgz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/24391983?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Jorropo",
                    "html_url": "https://github.com/Jorropo",
                    "followers_url": "https://api.github.com/users/Jorropo/followers",
                    "following_url": "https://api.github.com/users/Jorropo/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Jorropo/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Jorropo/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Jorropo/subscriptions",
                    "organizations_url": "https://api.github.com/users/Jorropo/orgs",
                    "repos_url": "https://api.github.com/users/Jorropo/repos",
                    "events_url": "https://api.github.com/users/Jorropo/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Jorropo/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-06T23:12:22Z",
                "updated_at": "2023-10-06T23:12:22Z",
                "author_association": "CONTRIBUTOR",
                "body": "@yhassanzadeh13 are you running with resource limiter ?\r\nThis screenshot suggest you have 6m+ streams opens which it should disallow.\r\nSee this more generally https://github.com/libp2p/go-libp2p/security/advisories/GHSA-j7qp-mfxf-8xjw",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751490077/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-06T23:12:23Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32383563281",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 19204398,
            "login": "yhassanzadeh13",
            "display_login": "yhassanzadeh13",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yhassanzadeh13",
            "avatar_url": "https://avatars.githubusercontent.com/u/19204398?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957",
                "repository_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/labels{/name}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/comments",
                "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/events",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957",
                "id": 1931025126,
                "node_id": "PR_kwDOA_JbCc5cJ4Gz",
                "number": 957,
                "title": "Fixes `goroutine` leakage in `AddProvider`",
                "user": {
                    "login": "yhassanzadeh13",
                    "id": 19204398,
                    "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yhassanzadeh13",
                    "html_url": "https://github.com/yhassanzadeh13",
                    "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                    "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                    "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                    "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                    "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 2,
                "created_at": "2023-10-06T23:01:07Z",
                "updated_at": "2023-10-06T23:10:04Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/957",
                    "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957",
                    "diff_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957.diff",
                    "patch_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957.patch",
                    "merged_at": null
                },
                "body": "Addresses: https://github.com/libp2p/go-libp2p-kad-dht/issues/956",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751488908",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957#issuecomment-1751488908",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957",
                "id": 1751488908,
                "node_id": "IC_kwDOA_JbCc5oZZmM",
                "user": {
                    "login": "yhassanzadeh13",
                    "id": 19204398,
                    "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yhassanzadeh13",
                    "html_url": "https://github.com/yhassanzadeh13",
                    "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                    "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                    "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                    "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                    "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-06T23:10:04Z",
                "updated_at": "2023-10-06T23:10:04Z",
                "author_association": "NONE",
                "body": "> Could you show what pieces of code are calling this too much ? Theses\r\n\r\nThis is the Call Graph we are observing when the `goroutine` leakage happens:\r\n![image](https://github.com/libp2p/go-libp2p-kad-dht/assets/19204398/5e0251f3-73c7-44f5-bed2-1c0fdd37e827)\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751488908/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-06T23:10:05Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32383520987",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 24391983,
            "login": "Jorropo",
            "display_login": "Jorropo",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Jorropo",
            "avatar_url": "https://avatars.githubusercontent.com/u/24391983?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957",
                "repository_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/labels{/name}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/comments",
                "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/events",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957",
                "id": 1931025126,
                "node_id": "PR_kwDOA_JbCc5cJ4Gz",
                "number": 957,
                "title": "Fixes `goroutine` leakage in `AddProvider`",
                "user": {
                    "login": "yhassanzadeh13",
                    "id": 19204398,
                    "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yhassanzadeh13",
                    "html_url": "https://github.com/yhassanzadeh13",
                    "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                    "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                    "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                    "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                    "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 1,
                "created_at": "2023-10-06T23:01:07Z",
                "updated_at": "2023-10-06T23:06:01Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/957",
                    "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957",
                    "diff_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957.diff",
                    "patch_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957.patch",
                    "merged_at": null
                },
                "body": "Addresses: https://github.com/libp2p/go-libp2p-kad-dht/issues/956",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751486847",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957#issuecomment-1751486847",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957",
                "id": 1751486847,
                "node_id": "IC_kwDOA_JbCc5oZZF_",
                "user": {
                    "login": "Jorropo",
                    "id": 24391983,
                    "node_id": "MDQ6VXNlcjI0MzkxOTgz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/24391983?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/Jorropo",
                    "html_url": "https://github.com/Jorropo",
                    "followers_url": "https://api.github.com/users/Jorropo/followers",
                    "following_url": "https://api.github.com/users/Jorropo/following{/other_user}",
                    "gists_url": "https://api.github.com/users/Jorropo/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/Jorropo/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/Jorropo/subscriptions",
                    "organizations_url": "https://api.github.com/users/Jorropo/orgs",
                    "repos_url": "https://api.github.com/users/Jorropo/repos",
                    "events_url": "https://api.github.com/users/Jorropo/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/Jorropo/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-06T23:06:00Z",
                "updated_at": "2023-10-06T23:06:00Z",
                "author_association": "CONTRIBUTOR",
                "body": "I don't like this solution it is bandaging over an other problem by just making things not work.\r\nOn an extreme sides of things, we could as well remove the provide code completely and just have it `return nil`, it would be extremely fast.\r\n\r\nCould you show what pieces of code are calling this too much ? Theses needs be investigated.",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1751486847/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-06T23:06:01Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32383469217",
        "type": "PullRequestEvent",
        "actor": {
            "id": 19204398,
            "login": "yhassanzadeh13",
            "display_login": "yhassanzadeh13",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yhassanzadeh13",
            "avatar_url": "https://avatars.githubusercontent.com/u/19204398?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "opened",
            "number": 957,
            "pull_request": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/957",
                "id": 1546092979,
                "node_id": "PR_kwDOA_JbCc5cJ4Gz",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957",
                "diff_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957.diff",
                "patch_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957.patch",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957",
                "number": 957,
                "state": "open",
                "locked": false,
                "title": "Fixes `goroutine` leakage in `AddProvider`",
                "user": {
                    "login": "yhassanzadeh13",
                    "id": 19204398,
                    "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yhassanzadeh13",
                    "html_url": "https://github.com/yhassanzadeh13",
                    "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                    "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                    "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                    "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                    "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "created_at": "2023-10-06T23:01:07Z",
                "updated_at": "2023-10-06T23:01:07Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": null,
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/957/commits",
                "review_comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/957/comments",
                "review_comment_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/comments",
                "statuses_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/statuses/c55cb3eef468abdd58886f2b4c8deb81235554d1",
                "head": {
                    "label": "yhassanzadeh13:yahya/fix-goroutine-leak",
                    "ref": "yahya/fix-goroutine-leak",
                    "sha": "c55cb3eef468abdd58886f2b4c8deb81235554d1",
                    "user": {
                        "login": "yhassanzadeh13",
                        "id": 19204398,
                        "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/yhassanzadeh13",
                        "html_url": "https://github.com/yhassanzadeh13",
                        "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                        "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                        "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                        "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                        "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                        "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                        "type": "User",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 701044384,
                        "node_id": "R_kgDOKckWoA",
                        "name": "go-libp2p-kad-dht",
                        "full_name": "yhassanzadeh13/go-libp2p-kad-dht",
                        "private": false,
                        "owner": {
                            "login": "yhassanzadeh13",
                            "id": 19204398,
                            "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                            "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/yhassanzadeh13",
                            "html_url": "https://github.com/yhassanzadeh13",
                            "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                            "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                            "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                            "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                            "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                            "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                            "type": "User",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/yhassanzadeh13/go-libp2p-kad-dht",
                        "description": "A Kademlia DHT implementation on go-libp2p",
                        "fork": true,
                        "url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht",
                        "forks_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/forks",
                        "keys_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/teams",
                        "hooks_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/hooks",
                        "issue_events_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/events",
                        "assignees_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/tags",
                        "blobs_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/languages",
                        "stargazers_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/stargazers",
                        "contributors_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/contributors",
                        "subscribers_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/subscribers",
                        "subscription_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/subscription",
                        "commits_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/merges",
                        "archive_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/downloads",
                        "issues_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/labels{/name}",
                        "releases_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/deployments",
                        "created_at": "2023-10-05T19:49:17Z",
                        "updated_at": "2023-10-05T19:49:17Z",
                        "pushed_at": "2023-10-06T22:50:26Z",
                        "git_url": "git://github.com/yhassanzadeh13/go-libp2p-kad-dht.git",
                        "ssh_url": "git@github.com:yhassanzadeh13/go-libp2p-kad-dht.git",
                        "clone_url": "https://github.com/yhassanzadeh13/go-libp2p-kad-dht.git",
                        "svn_url": "https://github.com/yhassanzadeh13/go-libp2p-kad-dht",
                        "homepage": "https://github.com/libp2p/specs/tree/master/kad-dht",
                        "size": 2335,
                        "stargazers_count": 0,
                        "watchers_count": 0,
                        "language": null,
                        "has_issues": false,
                        "has_projects": true,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 0,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 0,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [],
                        "visibility": "public",
                        "forks": 0,
                        "open_issues": 0,
                        "watchers": 0,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "libp2p:master",
                    "ref": "master",
                    "sha": "b63ad6096833d36b365f1361edab871f6cdc283c",
                    "user": {
                        "login": "libp2p",
                        "id": 14838238,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0ODM4MjM4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/14838238?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/libp2p",
                        "html_url": "https://github.com/libp2p",
                        "followers_url": "https://api.github.com/users/libp2p/followers",
                        "following_url": "https://api.github.com/users/libp2p/following{/other_user}",
                        "gists_url": "https://api.github.com/users/libp2p/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/libp2p/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/libp2p/subscriptions",
                        "organizations_url": "https://api.github.com/users/libp2p/orgs",
                        "repos_url": "https://api.github.com/users/libp2p/repos",
                        "events_url": "https://api.github.com/users/libp2p/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/libp2p/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 66214665,
                        "node_id": "MDEwOlJlcG9zaXRvcnk2NjIxNDY2NQ==",
                        "name": "go-libp2p-kad-dht",
                        "full_name": "libp2p/go-libp2p-kad-dht",
                        "private": false,
                        "owner": {
                            "login": "libp2p",
                            "id": 14838238,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0ODM4MjM4",
                            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/libp2p",
                            "html_url": "https://github.com/libp2p",
                            "followers_url": "https://api.github.com/users/libp2p/followers",
                            "following_url": "https://api.github.com/users/libp2p/following{/other_user}",
                            "gists_url": "https://api.github.com/users/libp2p/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/libp2p/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/libp2p/subscriptions",
                            "organizations_url": "https://api.github.com/users/libp2p/orgs",
                            "repos_url": "https://api.github.com/users/libp2p/repos",
                            "events_url": "https://api.github.com/users/libp2p/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/libp2p/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/libp2p/go-libp2p-kad-dht",
                        "description": "A Kademlia DHT implementation on go-libp2p",
                        "fork": false,
                        "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                        "forks_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/forks",
                        "keys_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/teams",
                        "hooks_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/hooks",
                        "issue_events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/events",
                        "assignees_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/tags",
                        "blobs_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/languages",
                        "stargazers_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/stargazers",
                        "contributors_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/contributors",
                        "subscribers_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/subscribers",
                        "subscription_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/subscription",
                        "commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/merges",
                        "archive_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/downloads",
                        "issues_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/labels{/name}",
                        "releases_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/deployments",
                        "created_at": "2016-08-21T18:40:35Z",
                        "updated_at": "2023-10-02T15:30:28Z",
                        "pushed_at": "2023-10-06T23:01:08Z",
                        "git_url": "git://github.com/libp2p/go-libp2p-kad-dht.git",
                        "ssh_url": "git@github.com:libp2p/go-libp2p-kad-dht.git",
                        "clone_url": "https://github.com/libp2p/go-libp2p-kad-dht.git",
                        "svn_url": "https://github.com/libp2p/go-libp2p-kad-dht",
                        "homepage": "https://github.com/libp2p/specs/tree/master/kad-dht",
                        "size": 3723,
                        "stargazers_count": 488,
                        "watchers_count": 488,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": false,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 212,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 99,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "dht",
                            "ipfs",
                            "kad-dht",
                            "libp2p"
                        ],
                        "visibility": "public",
                        "forks": 212,
                        "open_issues": 99,
                        "watchers": 488,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/957"
                    },
                    "html": {
                        "href": "https://github.com/libp2p/go-libp2p-kad-dht/pull/957"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/957/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/957/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/957/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/statuses/c55cb3eef468abdd58886f2b4c8deb81235554d1"
                    }
                },
                "author_association": "NONE",
                "auto_merge": null,
                "active_lock_reason": null,
                "merged": false,
                "mergeable": null,
                "rebaseable": null,
                "mergeable_state": "unknown",
                "merged_by": null,
                "comments": 0,
                "review_comments": 0,
                "maintainer_can_modify": true,
                "commits": 2,
                "additions": 23,
                "deletions": 3,
                "changed_files": 4
            }
        },
        "public": true,
        "created_at": "2023-10-06T23:01:08Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32383432131",
        "type": "IssuesEvent",
        "actor": {
            "id": 19204398,
            "login": "yhassanzadeh13",
            "display_login": "yhassanzadeh13",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yhassanzadeh13",
            "avatar_url": "https://avatars.githubusercontent.com/u/19204398?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "opened",
            "issue": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956",
                "repository_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/labels{/name}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/comments",
                "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/events",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/issues/956",
                "id": 1931023040,
                "node_id": "I_kwDOA_JbCc5zGRLA",
                "number": 956,
                "title": "`goroutine` Leakage due to Unbounded Concurrent Incoming Streams in ProviderManager",
                "user": {
                    "login": "yhassanzadeh13",
                    "id": 19204398,
                    "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yhassanzadeh13",
                    "html_url": "https://github.com/yhassanzadeh13",
                    "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                    "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                    "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                    "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                    "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 0,
                "created_at": "2023-10-06T22:57:41Z",
                "updated_at": "2023-10-06T22:57:41Z",
                "closed_at": null,
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "# Problem Definition\r\n\r\n## Observation\r\nOccasionally, a linear increase in `gopark`ed `goroutines` is observed with `go-libp2p-kad-dht`. This creates a scenario resembling `goroutine` leakage, where `goroutines` get initiated but never conclude. Over time, this accumulation can deplete resources and degrade application performance. This isn't always the case but does occur intermittently.\r\n\r\n![image1](https://github.com/libp2p/go-libp2p-kad-dht/assets/19204398/18d95ad2-e163-4376-ac47-50152da70663)\r\n\r\nThe subsequent graph demonstrates a leak of approximately 7 million goroutines, attributable to the DHT.\r\n![image2](https://github.com/libp2p/go-libp2p-kad-dht/assets/19204398/a05ab24b-ba94-4ade-a9fc-84e2147a246f)\r\n\r\n## Probable Underlying Issue\r\nPer the Call Graph, we hypothesize that the leakage is due to an upsurge in concurrent stream activity. Particularly, the Call Graph indicates that in high-activity contexts, all `goroutines` funneled through the [`ProviderManager.AddProvider`](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/cbe39cd7dfc6783002f087bc4ddf9ac1ce43b158/providers/providers_manager.go#L250) get placed into a standby state. This suspension occurs when `goroutines` await the `newprovs` channel, an unbuffered conduit.\r\n\r\n```go\r\n\tselect {\r\n\tcase pm.newprovs <- prov:\r\n\t\treturn nil\r\n\tcase <-ctx.Done():\r\n\t\treturn ctx.Err()\r\n\t}\r\n```\r\n\r\nHere, the `ctx` instance ties back to the [primary DHT context](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/3e31bcdc170dceca2c868687c268aafc5e8943ad/dht_net.go#L37), which only becomes `Done` upon DHT closure. Consequently, any `goroutine` on hold for `newprovs` will resume sequentially as the channel's reading side becomes available.\r\n\r\nThe count of dormant `goroutines`, due to awaiting the `pm.newprovs`, corresponds to the received [`pb.Message_GET_PROVIDERS` messages](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/0c90569a6d1913251402f4f713c4c834b0149f31/handlers.go#L44-L45). Each message initiates an `AddProvider` handler. \r\n\r\nThis situation also carries a security risk. If each `pb.Message_GET_PROVIDERS` message results in a dormant `goroutine`, it opens a window for potential attackers to exploit and mount a resource exhaustion attack.\r\n\r\n# Suggested Remedies\r\n\r\nTo address the `goroutine` leakage issue stemming from the `pb.Message_GET_PROVIDERS` messages, consider the following strategies (the author suggests strategy number 1):\r\n\r\n1. **Buffered Channel and Timeout**: Lower contention by turning the `newprovs` channel into a buffered variant, say with a capacity of 10K, paired with a global provider addition timeout, for instance, `1s`. Adjust the context in `AddProvider` to derive from the primary DHT context using `context.WithTimeout(dht.ctx, dht.addProviderTimeout)`. If the `newprovs` channel has space, it queues up requests, wrapping up the method instantly without stalling. Any held `goroutine` will reactivate and end by the timeout under contention scenarios. This ensures that a certain volume of buffered requests will process, with newer ones timing out if there's contention.\r\n\r\n2. **Worker-Based Queue Implementation**: Another approach involves substituting `newprovs` with a worker-based queuing system. This would promptly queue incoming `prov` in the `AddProvider` method, ensuring no `goroutine` holds up. A potential modification could be:\r\n\r\n    ```go\r\n    func (pm *ProviderManager) AddProvider(ctx context.Context, k []byte, provInfo peer.AddrInfo) error {\r\n\t    ctx, span := internal.StartSpan(ctx, \"ProviderManager.AddProvider\")\r\n\t    defer span.End()\r\n    \r\n\t    if provInfo.ID != pm.self {\r\n\t\t    pm.pstore.AddAddrs(provInfo.ID, provInfo.Addrs, ProviderAddrTTL)\r\n\t    }\r\n\t    prov := &addProv{\r\n\t\t    ctx: ctx,\r\n\t\t    key: k,\r\n\t\t    val: provInfo.ID,\r\n\t    }\r\n\t    \r\n\t    pm.queue.Enqueue(prov)\r\n    }\r\n    ```\r\n    \r\n    And the [`ProviderManager.run`](https://github.com/yhassanzadeh13/go-libp2p-kad-dht/blob/cbe39cd7dfc6783002f087bc4ddf9ac1ce43b158/providers/providers_manager.go#L161) might appear as:\r\n  \r\n    ```go\r\n\t\t\t    select {\r\n\t\t\t    case np := <-pm.queue.dequeue():\r\n\t\t\t\t    err := pm.addProv(np.ctx, np.key, np.val)\r\n\t\t\t\t    // subsequent logic\r\n    ```\r\n  \r\n    Nonetheless, this doesn't present a significant advantage over a buffered `newprovs` channel. An unrestricted queue could simply shift the `goroutine` leakage issue to memory leakage in the queue. Furthermore, such a queue could be vulnerable to memory exhaustion attacks. Once the queue's limit is reached, it must discard new entries or remove existing ones, making it analogous to the buffered channel and timeout strategy.",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/956/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-06T22:57:42Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32352116366",
        "type": "ForkEvent",
        "actor": {
            "id": 19204398,
            "login": "yhassanzadeh13",
            "display_login": "yhassanzadeh13",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yhassanzadeh13",
            "avatar_url": "https://avatars.githubusercontent.com/u/19204398?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "forkee": {
                "id": 701044384,
                "node_id": "R_kgDOKckWoA",
                "name": "go-libp2p-kad-dht",
                "full_name": "yhassanzadeh13/go-libp2p-kad-dht",
                "private": false,
                "owner": {
                    "login": "yhassanzadeh13",
                    "id": 19204398,
                    "node_id": "MDQ6VXNlcjE5MjA0Mzk4",
                    "avatar_url": "https://avatars.githubusercontent.com/u/19204398?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/yhassanzadeh13",
                    "html_url": "https://github.com/yhassanzadeh13",
                    "followers_url": "https://api.github.com/users/yhassanzadeh13/followers",
                    "following_url": "https://api.github.com/users/yhassanzadeh13/following{/other_user}",
                    "gists_url": "https://api.github.com/users/yhassanzadeh13/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/yhassanzadeh13/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/yhassanzadeh13/subscriptions",
                    "organizations_url": "https://api.github.com/users/yhassanzadeh13/orgs",
                    "repos_url": "https://api.github.com/users/yhassanzadeh13/repos",
                    "events_url": "https://api.github.com/users/yhassanzadeh13/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/yhassanzadeh13/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "html_url": "https://github.com/yhassanzadeh13/go-libp2p-kad-dht",
                "description": "A Kademlia DHT implementation on go-libp2p",
                "fork": true,
                "url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht",
                "forks_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/forks",
                "keys_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/keys{/key_id}",
                "collaborators_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/collaborators{/collaborator}",
                "teams_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/teams",
                "hooks_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/hooks",
                "issue_events_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/issues/events{/number}",
                "events_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/events",
                "assignees_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/assignees{/user}",
                "branches_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/branches{/branch}",
                "tags_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/tags",
                "blobs_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/git/blobs{/sha}",
                "git_tags_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/git/tags{/sha}",
                "git_refs_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/git/refs{/sha}",
                "trees_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/git/trees{/sha}",
                "statuses_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/statuses/{sha}",
                "languages_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/languages",
                "stargazers_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/stargazers",
                "contributors_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/contributors",
                "subscribers_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/subscribers",
                "subscription_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/subscription",
                "commits_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/commits{/sha}",
                "git_commits_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/git/commits{/sha}",
                "comments_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/comments{/number}",
                "issue_comment_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/issues/comments{/number}",
                "contents_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/contents/{+path}",
                "compare_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/compare/{base}...{head}",
                "merges_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/merges",
                "archive_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/{archive_format}{/ref}",
                "downloads_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/downloads",
                "issues_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/issues{/number}",
                "pulls_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/pulls{/number}",
                "milestones_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/milestones{/number}",
                "notifications_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/notifications{?since,all,participating}",
                "labels_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/labels{/name}",
                "releases_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/releases{/id}",
                "deployments_url": "https://api.github.com/repos/yhassanzadeh13/go-libp2p-kad-dht/deployments",
                "created_at": "2023-10-05T19:49:17Z",
                "updated_at": "2023-10-05T19:49:17Z",
                "pushed_at": "2023-10-03T14:53:56Z",
                "git_url": "git://github.com/yhassanzadeh13/go-libp2p-kad-dht.git",
                "ssh_url": "git@github.com:yhassanzadeh13/go-libp2p-kad-dht.git",
                "clone_url": "https://github.com/yhassanzadeh13/go-libp2p-kad-dht.git",
                "svn_url": "https://github.com/yhassanzadeh13/go-libp2p-kad-dht",
                "homepage": "https://github.com/libp2p/specs/tree/master/kad-dht",
                "size": 3723,
                "stargazers_count": 0,
                "watchers_count": 0,
                "language": null,
                "has_issues": false,
                "has_projects": true,
                "has_downloads": true,
                "has_wiki": false,
                "has_pages": false,
                "has_discussions": false,
                "forks_count": 0,
                "mirror_url": null,
                "archived": false,
                "disabled": false,
                "open_issues_count": 0,
                "license": null,
                "allow_forking": true,
                "is_template": false,
                "web_commit_signoff_required": false,
                "topics": [],
                "visibility": "public",
                "forks": 0,
                "open_issues": 0,
                "watchers": 0,
                "default_branch": "main",
                "public": true
            }
        },
        "public": true,
        "created_at": "2023-10-05T19:49:18Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32315922377",
        "type": "PullRequestReviewCommentEvent",
        "actor": {
            "id": 11836793,
            "login": "dennis-tra",
            "display_login": "dennis-tra",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dennis-tra",
            "avatar_url": "https://avatars.githubusercontent.com/u/11836793?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "created",
            "comment": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/comments/1346141527",
                "pull_request_review_id": 1658023520,
                "id": 1346141527,
                "node_id": "PRRC_kwDOA_JbCc5QPH1X",
                "diff_hunk": "@@ -61,7 +61,7 @@ func TestDHT_FindPeer_happy_path(t *testing.T) {\n \td4 := top.AddServer(nil)\n \ttop.ConnectChain(ctx, d1, d2, d3, d4)\n \n-\taddrInfo, err := d1.FindPeer(ctx, d4.host.ID())\n+\taddrInfo, err := NewRouting(d1).FindPeer(ctx, d4.host.ID())",
                "path": "v2/routing_test.go",
                "commit_id": "b2def188150292065b5bfb5ed221bed4e13ae0a8",
                "original_commit_id": "b2def188150292065b5bfb5ed221bed4e13ae0a8",
                "user": {
                    "login": "dennis-tra",
                    "id": 11836793,
                    "node_id": "MDQ6VXNlcjExODM2Nzkz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/11836793?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/dennis-tra",
                    "html_url": "https://github.com/dennis-tra",
                    "followers_url": "https://api.github.com/users/dennis-tra/followers",
                    "following_url": "https://api.github.com/users/dennis-tra/following{/other_user}",
                    "gists_url": "https://api.github.com/users/dennis-tra/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/dennis-tra/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/dennis-tra/subscriptions",
                    "organizations_url": "https://api.github.com/users/dennis-tra/orgs",
                    "repos_url": "https://api.github.com/users/dennis-tra/repos",
                    "events_url": "https://api.github.com/users/dennis-tra/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/dennis-tra/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Would you let the topology operate on Routing DHTs?",
                "created_at": "2023-10-04T16:15:33Z",
                "updated_at": "2023-10-04T16:15:33Z",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/947#discussion_r1346141527",
                "pull_request_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/947",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/comments/1346141527"
                    },
                    "html": {
                        "href": "https://github.com/libp2p/go-libp2p-kad-dht/pull/947#discussion_r1346141527"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/947"
                    }
                },
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/comments/1346141527/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "start_line": null,
                "original_start_line": null,
                "start_side": null,
                "line": 64,
                "original_line": 64,
                "side": "RIGHT",
                "in_reply_to_id": 1340132980,
                "original_position": 5,
                "position": 5,
                "subject_type": "line"
            },
            "pull_request": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/947",
                "id": 1534107837,
                "node_id": "PR_kwDOA_JbCc5bcKC9",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/947",
                "diff_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/947.diff",
                "patch_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/947.patch",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/947",
                "number": 947,
                "state": "open",
                "locked": false,
                "title": "Add RoutingDHT that implements the routing.Routing interface",
                "user": {
                    "login": "dennis-tra",
                    "id": 11836793,
                    "node_id": "MDQ6VXNlcjExODM2Nzkz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/11836793?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/dennis-tra",
                    "html_url": "https://github.com/dennis-tra",
                    "followers_url": "https://api.github.com/users/dennis-tra/followers",
                    "following_url": "https://api.github.com/users/dennis-tra/following{/other_user}",
                    "gists_url": "https://api.github.com/users/dennis-tra/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/dennis-tra/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/dennis-tra/subscriptions",
                    "organizations_url": "https://api.github.com/users/dennis-tra/orgs",
                    "repos_url": "https://api.github.com/users/dennis-tra/repos",
                    "events_url": "https://api.github.com/users/dennis-tra/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/dennis-tra/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Not sure I like that. It would also be good to point to the concerns that people have with the routing.Routing interface. This makes the tests look a little less nice unless we let the topology solely operate on `RoutingDHT`'s.\r\n\r\nfixes #929",
                "created_at": "2023-09-28T12:30:10Z",
                "updated_at": "2023-10-04T16:15:33Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "bbc32debd7f3c5bf87f4185de87df6207e6218da",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 5935480943,
                        "node_id": "LA_kwDOA_JbCc8AAAABYchAbw",
                        "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/labels/v2",
                        "name": "v2",
                        "color": "F803C9",
                        "default": false,
                        "description": "All issues related to the v2 rewrite"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/947/commits",
                "review_comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/947/comments",
                "review_comment_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/947/comments",
                "statuses_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/statuses/b2def188150292065b5bfb5ed221bed4e13ae0a8",
                "head": {
                    "label": "libp2p:v2-issue-929-routing-dht",
                    "ref": "v2-issue-929-routing-dht",
                    "sha": "b2def188150292065b5bfb5ed221bed4e13ae0a8",
                    "user": {
                        "login": "libp2p",
                        "id": 14838238,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0ODM4MjM4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/14838238?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/libp2p",
                        "html_url": "https://github.com/libp2p",
                        "followers_url": "https://api.github.com/users/libp2p/followers",
                        "following_url": "https://api.github.com/users/libp2p/following{/other_user}",
                        "gists_url": "https://api.github.com/users/libp2p/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/libp2p/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/libp2p/subscriptions",
                        "organizations_url": "https://api.github.com/users/libp2p/orgs",
                        "repos_url": "https://api.github.com/users/libp2p/repos",
                        "events_url": "https://api.github.com/users/libp2p/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/libp2p/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 66214665,
                        "node_id": "MDEwOlJlcG9zaXRvcnk2NjIxNDY2NQ==",
                        "name": "go-libp2p-kad-dht",
                        "full_name": "libp2p/go-libp2p-kad-dht",
                        "private": false,
                        "owner": {
                            "login": "libp2p",
                            "id": 14838238,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0ODM4MjM4",
                            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/libp2p",
                            "html_url": "https://github.com/libp2p",
                            "followers_url": "https://api.github.com/users/libp2p/followers",
                            "following_url": "https://api.github.com/users/libp2p/following{/other_user}",
                            "gists_url": "https://api.github.com/users/libp2p/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/libp2p/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/libp2p/subscriptions",
                            "organizations_url": "https://api.github.com/users/libp2p/orgs",
                            "repos_url": "https://api.github.com/users/libp2p/repos",
                            "events_url": "https://api.github.com/users/libp2p/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/libp2p/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/libp2p/go-libp2p-kad-dht",
                        "description": "A Kademlia DHT implementation on go-libp2p",
                        "fork": false,
                        "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                        "forks_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/forks",
                        "keys_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/teams",
                        "hooks_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/hooks",
                        "issue_events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/events",
                        "assignees_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/tags",
                        "blobs_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/languages",
                        "stargazers_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/stargazers",
                        "contributors_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/contributors",
                        "subscribers_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/subscribers",
                        "subscription_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/subscription",
                        "commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/merges",
                        "archive_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/downloads",
                        "issues_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/labels{/name}",
                        "releases_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/deployments",
                        "created_at": "2016-08-21T18:40:35Z",
                        "updated_at": "2023-10-02T15:30:28Z",
                        "pushed_at": "2023-10-03T14:53:56Z",
                        "git_url": "git://github.com/libp2p/go-libp2p-kad-dht.git",
                        "ssh_url": "git@github.com:libp2p/go-libp2p-kad-dht.git",
                        "clone_url": "https://github.com/libp2p/go-libp2p-kad-dht.git",
                        "svn_url": "https://github.com/libp2p/go-libp2p-kad-dht",
                        "homepage": "https://github.com/libp2p/specs/tree/master/kad-dht",
                        "size": 3723,
                        "stargazers_count": 488,
                        "watchers_count": 488,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": false,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 211,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 97,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "dht",
                            "ipfs",
                            "kad-dht",
                            "libp2p"
                        ],
                        "visibility": "public",
                        "forks": 211,
                        "open_issues": 97,
                        "watchers": 488,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "libp2p:v2-develop",
                    "ref": "v2-develop",
                    "sha": "03adce677e4ecf1eb1cfdb386efa7ac50e8c762c",
                    "user": {
                        "login": "libp2p",
                        "id": 14838238,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0ODM4MjM4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/14838238?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/libp2p",
                        "html_url": "https://github.com/libp2p",
                        "followers_url": "https://api.github.com/users/libp2p/followers",
                        "following_url": "https://api.github.com/users/libp2p/following{/other_user}",
                        "gists_url": "https://api.github.com/users/libp2p/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/libp2p/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/libp2p/subscriptions",
                        "organizations_url": "https://api.github.com/users/libp2p/orgs",
                        "repos_url": "https://api.github.com/users/libp2p/repos",
                        "events_url": "https://api.github.com/users/libp2p/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/libp2p/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 66214665,
                        "node_id": "MDEwOlJlcG9zaXRvcnk2NjIxNDY2NQ==",
                        "name": "go-libp2p-kad-dht",
                        "full_name": "libp2p/go-libp2p-kad-dht",
                        "private": false,
                        "owner": {
                            "login": "libp2p",
                            "id": 14838238,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0ODM4MjM4",
                            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/libp2p",
                            "html_url": "https://github.com/libp2p",
                            "followers_url": "https://api.github.com/users/libp2p/followers",
                            "following_url": "https://api.github.com/users/libp2p/following{/other_user}",
                            "gists_url": "https://api.github.com/users/libp2p/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/libp2p/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/libp2p/subscriptions",
                            "organizations_url": "https://api.github.com/users/libp2p/orgs",
                            "repos_url": "https://api.github.com/users/libp2p/repos",
                            "events_url": "https://api.github.com/users/libp2p/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/libp2p/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/libp2p/go-libp2p-kad-dht",
                        "description": "A Kademlia DHT implementation on go-libp2p",
                        "fork": false,
                        "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                        "forks_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/forks",
                        "keys_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/teams",
                        "hooks_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/hooks",
                        "issue_events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/events",
                        "assignees_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/tags",
                        "blobs_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/languages",
                        "stargazers_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/stargazers",
                        "contributors_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/contributors",
                        "subscribers_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/subscribers",
                        "subscription_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/subscription",
                        "commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/merges",
                        "archive_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/downloads",
                        "issues_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/labels{/name}",
                        "releases_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/deployments",
                        "created_at": "2016-08-21T18:40:35Z",
                        "updated_at": "2023-10-02T15:30:28Z",
                        "pushed_at": "2023-10-03T14:53:56Z",
                        "git_url": "git://github.com/libp2p/go-libp2p-kad-dht.git",
                        "ssh_url": "git@github.com:libp2p/go-libp2p-kad-dht.git",
                        "clone_url": "https://github.com/libp2p/go-libp2p-kad-dht.git",
                        "svn_url": "https://github.com/libp2p/go-libp2p-kad-dht",
                        "homepage": "https://github.com/libp2p/specs/tree/master/kad-dht",
                        "size": 3723,
                        "stargazers_count": 488,
                        "watchers_count": 488,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": false,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 211,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 97,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "dht",
                            "ipfs",
                            "kad-dht",
                            "libp2p"
                        ],
                        "visibility": "public",
                        "forks": 211,
                        "open_issues": 97,
                        "watchers": 488,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/947"
                    },
                    "html": {
                        "href": "https://github.com/libp2p/go-libp2p-kad-dht/pull/947"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/947"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/947/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/947/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/947/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/statuses/b2def188150292065b5bfb5ed221bed4e13ae0a8"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-04T16:15:33Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32315922297",
        "type": "PullRequestReviewEvent",
        "actor": {
            "id": 11836793,
            "login": "dennis-tra",
            "display_login": "dennis-tra",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dennis-tra",
            "avatar_url": "https://avatars.githubusercontent.com/u/11836793?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "created",
            "review": {
                "id": 1658023520,
                "node_id": "PRR_kwDOA_JbCc5i025g",
                "user": {
                    "login": "dennis-tra",
                    "id": 11836793,
                    "node_id": "MDQ6VXNlcjExODM2Nzkz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/11836793?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/dennis-tra",
                    "html_url": "https://github.com/dennis-tra",
                    "followers_url": "https://api.github.com/users/dennis-tra/followers",
                    "following_url": "https://api.github.com/users/dennis-tra/following{/other_user}",
                    "gists_url": "https://api.github.com/users/dennis-tra/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/dennis-tra/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/dennis-tra/subscriptions",
                    "organizations_url": "https://api.github.com/users/dennis-tra/orgs",
                    "repos_url": "https://api.github.com/users/dennis-tra/repos",
                    "events_url": "https://api.github.com/users/dennis-tra/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/dennis-tra/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": null,
                "commit_id": "b2def188150292065b5bfb5ed221bed4e13ae0a8",
                "submitted_at": "2023-10-04T16:15:33Z",
                "state": "commented",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/947#pullrequestreview-1658023520",
                "pull_request_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/947",
                "author_association": "CONTRIBUTOR",
                "_links": {
                    "html": {
                        "href": "https://github.com/libp2p/go-libp2p-kad-dht/pull/947#pullrequestreview-1658023520"
                    },
                    "pull_request": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/947"
                    }
                }
            },
            "pull_request": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/947",
                "id": 1534107837,
                "node_id": "PR_kwDOA_JbCc5bcKC9",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/947",
                "diff_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/947.diff",
                "patch_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/947.patch",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/947",
                "number": 947,
                "state": "open",
                "locked": false,
                "title": "Add RoutingDHT that implements the routing.Routing interface",
                "user": {
                    "login": "dennis-tra",
                    "id": 11836793,
                    "node_id": "MDQ6VXNlcjExODM2Nzkz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/11836793?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/dennis-tra",
                    "html_url": "https://github.com/dennis-tra",
                    "followers_url": "https://api.github.com/users/dennis-tra/followers",
                    "following_url": "https://api.github.com/users/dennis-tra/following{/other_user}",
                    "gists_url": "https://api.github.com/users/dennis-tra/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/dennis-tra/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/dennis-tra/subscriptions",
                    "organizations_url": "https://api.github.com/users/dennis-tra/orgs",
                    "repos_url": "https://api.github.com/users/dennis-tra/repos",
                    "events_url": "https://api.github.com/users/dennis-tra/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/dennis-tra/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "Not sure I like that. It would also be good to point to the concerns that people have with the routing.Routing interface. This makes the tests look a little less nice unless we let the topology solely operate on `RoutingDHT`'s.\r\n\r\nfixes #929",
                "created_at": "2023-09-28T12:30:10Z",
                "updated_at": "2023-10-04T16:15:33Z",
                "closed_at": null,
                "merged_at": null,
                "merge_commit_sha": "bbc32debd7f3c5bf87f4185de87df6207e6218da",
                "assignee": null,
                "assignees": [],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 5935480943,
                        "node_id": "LA_kwDOA_JbCc8AAAABYchAbw",
                        "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/labels/v2",
                        "name": "v2",
                        "color": "F803C9",
                        "default": false,
                        "description": "All issues related to the v2 rewrite"
                    }
                ],
                "milestone": null,
                "draft": false,
                "commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/947/commits",
                "review_comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/947/comments",
                "review_comment_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/947/comments",
                "statuses_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/statuses/b2def188150292065b5bfb5ed221bed4e13ae0a8",
                "head": {
                    "label": "libp2p:v2-issue-929-routing-dht",
                    "ref": "v2-issue-929-routing-dht",
                    "sha": "b2def188150292065b5bfb5ed221bed4e13ae0a8",
                    "user": {
                        "login": "libp2p",
                        "id": 14838238,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0ODM4MjM4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/14838238?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/libp2p",
                        "html_url": "https://github.com/libp2p",
                        "followers_url": "https://api.github.com/users/libp2p/followers",
                        "following_url": "https://api.github.com/users/libp2p/following{/other_user}",
                        "gists_url": "https://api.github.com/users/libp2p/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/libp2p/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/libp2p/subscriptions",
                        "organizations_url": "https://api.github.com/users/libp2p/orgs",
                        "repos_url": "https://api.github.com/users/libp2p/repos",
                        "events_url": "https://api.github.com/users/libp2p/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/libp2p/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 66214665,
                        "node_id": "MDEwOlJlcG9zaXRvcnk2NjIxNDY2NQ==",
                        "name": "go-libp2p-kad-dht",
                        "full_name": "libp2p/go-libp2p-kad-dht",
                        "private": false,
                        "owner": {
                            "login": "libp2p",
                            "id": 14838238,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0ODM4MjM4",
                            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/libp2p",
                            "html_url": "https://github.com/libp2p",
                            "followers_url": "https://api.github.com/users/libp2p/followers",
                            "following_url": "https://api.github.com/users/libp2p/following{/other_user}",
                            "gists_url": "https://api.github.com/users/libp2p/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/libp2p/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/libp2p/subscriptions",
                            "organizations_url": "https://api.github.com/users/libp2p/orgs",
                            "repos_url": "https://api.github.com/users/libp2p/repos",
                            "events_url": "https://api.github.com/users/libp2p/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/libp2p/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/libp2p/go-libp2p-kad-dht",
                        "description": "A Kademlia DHT implementation on go-libp2p",
                        "fork": false,
                        "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                        "forks_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/forks",
                        "keys_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/teams",
                        "hooks_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/hooks",
                        "issue_events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/events",
                        "assignees_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/tags",
                        "blobs_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/languages",
                        "stargazers_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/stargazers",
                        "contributors_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/contributors",
                        "subscribers_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/subscribers",
                        "subscription_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/subscription",
                        "commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/merges",
                        "archive_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/downloads",
                        "issues_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/labels{/name}",
                        "releases_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/deployments",
                        "created_at": "2016-08-21T18:40:35Z",
                        "updated_at": "2023-10-02T15:30:28Z",
                        "pushed_at": "2023-10-03T14:53:56Z",
                        "git_url": "git://github.com/libp2p/go-libp2p-kad-dht.git",
                        "ssh_url": "git@github.com:libp2p/go-libp2p-kad-dht.git",
                        "clone_url": "https://github.com/libp2p/go-libp2p-kad-dht.git",
                        "svn_url": "https://github.com/libp2p/go-libp2p-kad-dht",
                        "homepage": "https://github.com/libp2p/specs/tree/master/kad-dht",
                        "size": 3723,
                        "stargazers_count": 488,
                        "watchers_count": 488,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": false,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 211,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 97,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "dht",
                            "ipfs",
                            "kad-dht",
                            "libp2p"
                        ],
                        "visibility": "public",
                        "forks": 211,
                        "open_issues": 97,
                        "watchers": 488,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "libp2p:v2-develop",
                    "ref": "v2-develop",
                    "sha": "03adce677e4ecf1eb1cfdb386efa7ac50e8c762c",
                    "user": {
                        "login": "libp2p",
                        "id": 14838238,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0ODM4MjM4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/14838238?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/libp2p",
                        "html_url": "https://github.com/libp2p",
                        "followers_url": "https://api.github.com/users/libp2p/followers",
                        "following_url": "https://api.github.com/users/libp2p/following{/other_user}",
                        "gists_url": "https://api.github.com/users/libp2p/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/libp2p/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/libp2p/subscriptions",
                        "organizations_url": "https://api.github.com/users/libp2p/orgs",
                        "repos_url": "https://api.github.com/users/libp2p/repos",
                        "events_url": "https://api.github.com/users/libp2p/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/libp2p/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 66214665,
                        "node_id": "MDEwOlJlcG9zaXRvcnk2NjIxNDY2NQ==",
                        "name": "go-libp2p-kad-dht",
                        "full_name": "libp2p/go-libp2p-kad-dht",
                        "private": false,
                        "owner": {
                            "login": "libp2p",
                            "id": 14838238,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0ODM4MjM4",
                            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/libp2p",
                            "html_url": "https://github.com/libp2p",
                            "followers_url": "https://api.github.com/users/libp2p/followers",
                            "following_url": "https://api.github.com/users/libp2p/following{/other_user}",
                            "gists_url": "https://api.github.com/users/libp2p/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/libp2p/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/libp2p/subscriptions",
                            "organizations_url": "https://api.github.com/users/libp2p/orgs",
                            "repos_url": "https://api.github.com/users/libp2p/repos",
                            "events_url": "https://api.github.com/users/libp2p/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/libp2p/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/libp2p/go-libp2p-kad-dht",
                        "description": "A Kademlia DHT implementation on go-libp2p",
                        "fork": false,
                        "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                        "forks_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/forks",
                        "keys_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/teams",
                        "hooks_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/hooks",
                        "issue_events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/events",
                        "assignees_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/tags",
                        "blobs_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/languages",
                        "stargazers_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/stargazers",
                        "contributors_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/contributors",
                        "subscribers_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/subscribers",
                        "subscription_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/subscription",
                        "commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/merges",
                        "archive_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/downloads",
                        "issues_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/labels{/name}",
                        "releases_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/deployments",
                        "created_at": "2016-08-21T18:40:35Z",
                        "updated_at": "2023-10-02T15:30:28Z",
                        "pushed_at": "2023-10-03T14:53:56Z",
                        "git_url": "git://github.com/libp2p/go-libp2p-kad-dht.git",
                        "ssh_url": "git@github.com:libp2p/go-libp2p-kad-dht.git",
                        "clone_url": "https://github.com/libp2p/go-libp2p-kad-dht.git",
                        "svn_url": "https://github.com/libp2p/go-libp2p-kad-dht",
                        "homepage": "https://github.com/libp2p/specs/tree/master/kad-dht",
                        "size": 3723,
                        "stargazers_count": 488,
                        "watchers_count": 488,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": false,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 211,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 97,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "dht",
                            "ipfs",
                            "kad-dht",
                            "libp2p"
                        ],
                        "visibility": "public",
                        "forks": 211,
                        "open_issues": 97,
                        "watchers": 488,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/947"
                    },
                    "html": {
                        "href": "https://github.com/libp2p/go-libp2p-kad-dht/pull/947"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/947"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/947/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/947/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/947/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/statuses/b2def188150292065b5bfb5ed221bed4e13ae0a8"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null
            }
        },
        "public": true,
        "created_at": "2023-10-04T16:15:34Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32281690608",
        "type": "DeleteEvent",
        "actor": {
            "id": 11836793,
            "login": "dennis-tra",
            "display_login": "dennis-tra",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dennis-tra",
            "avatar_url": "https://avatars.githubusercontent.com/u/11836793?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "ref": "v2-issue-916-accelerated-dht",
            "ref_type": "branch",
            "pusher_type": "user"
        },
        "public": true,
        "created_at": "2023-10-03T14:53:58Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32281688372",
        "type": "PullRequestEvent",
        "actor": {
            "id": 11836793,
            "login": "dennis-tra",
            "display_login": "dennis-tra",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dennis-tra",
            "avatar_url": "https://avatars.githubusercontent.com/u/11836793?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "closed",
            "number": 951,
            "pull_request": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/951",
                "id": 1534428045,
                "node_id": "PR_kwDOA_JbCc5bdYON",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/951",
                "diff_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/951.diff",
                "patch_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/951.patch",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/951",
                "number": 951,
                "state": "closed",
                "locked": false,
                "title": "WIP: Accelerated DHT (crawling functionality)",
                "user": {
                    "login": "dennis-tra",
                    "id": 11836793,
                    "node_id": "MDQ6VXNlcjExODM2Nzkz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/11836793?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/dennis-tra",
                    "html_url": "https://github.com/dennis-tra",
                    "followers_url": "https://api.github.com/users/dennis-tra/followers",
                    "following_url": "https://api.github.com/users/dennis-tra/following{/other_user}",
                    "gists_url": "https://api.github.com/users/dennis-tra/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/dennis-tra/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/dennis-tra/subscriptions",
                    "organizations_url": "https://api.github.com/users/dennis-tra/orgs",
                    "repos_url": "https://api.github.com/users/dennis-tra/repos",
                    "events_url": "https://api.github.com/users/dennis-tra/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/dennis-tra/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "body": "fixes #916 ",
                "created_at": "2023-09-28T15:31:00Z",
                "updated_at": "2023-10-03T14:53:53Z",
                "closed_at": "2023-10-03T14:53:52Z",
                "merged_at": null,
                "merge_commit_sha": "ad448ae2d0dd38241b3e36ed67668d31f9506e6c",
                "assignee": {
                    "login": "dennis-tra",
                    "id": 11836793,
                    "node_id": "MDQ6VXNlcjExODM2Nzkz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/11836793?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/dennis-tra",
                    "html_url": "https://github.com/dennis-tra",
                    "followers_url": "https://api.github.com/users/dennis-tra/followers",
                    "following_url": "https://api.github.com/users/dennis-tra/following{/other_user}",
                    "gists_url": "https://api.github.com/users/dennis-tra/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/dennis-tra/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/dennis-tra/subscriptions",
                    "organizations_url": "https://api.github.com/users/dennis-tra/orgs",
                    "repos_url": "https://api.github.com/users/dennis-tra/repos",
                    "events_url": "https://api.github.com/users/dennis-tra/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/dennis-tra/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "dennis-tra",
                        "id": 11836793,
                        "node_id": "MDQ6VXNlcjExODM2Nzkz",
                        "avatar_url": "https://avatars.githubusercontent.com/u/11836793?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/dennis-tra",
                        "html_url": "https://github.com/dennis-tra",
                        "followers_url": "https://api.github.com/users/dennis-tra/followers",
                        "following_url": "https://api.github.com/users/dennis-tra/following{/other_user}",
                        "gists_url": "https://api.github.com/users/dennis-tra/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/dennis-tra/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/dennis-tra/subscriptions",
                        "organizations_url": "https://api.github.com/users/dennis-tra/orgs",
                        "repos_url": "https://api.github.com/users/dennis-tra/repos",
                        "events_url": "https://api.github.com/users/dennis-tra/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/dennis-tra/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "requested_reviewers": [],
                "requested_teams": [],
                "labels": [
                    {
                        "id": 5935480943,
                        "node_id": "LA_kwDOA_JbCc8AAAABYchAbw",
                        "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/labels/v2",
                        "name": "v2",
                        "color": "F803C9",
                        "default": false,
                        "description": "All issues related to the v2 rewrite"
                    }
                ],
                "milestone": null,
                "draft": true,
                "commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/951/commits",
                "review_comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/951/comments",
                "review_comment_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/comments{/number}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/951/comments",
                "statuses_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/statuses/360488a78f90cce87b9cea1870190f6bb0f41b37",
                "head": {
                    "label": "libp2p:v2-issue-916-accelerated-dht",
                    "ref": "v2-issue-916-accelerated-dht",
                    "sha": "360488a78f90cce87b9cea1870190f6bb0f41b37",
                    "user": {
                        "login": "libp2p",
                        "id": 14838238,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0ODM4MjM4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/14838238?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/libp2p",
                        "html_url": "https://github.com/libp2p",
                        "followers_url": "https://api.github.com/users/libp2p/followers",
                        "following_url": "https://api.github.com/users/libp2p/following{/other_user}",
                        "gists_url": "https://api.github.com/users/libp2p/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/libp2p/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/libp2p/subscriptions",
                        "organizations_url": "https://api.github.com/users/libp2p/orgs",
                        "repos_url": "https://api.github.com/users/libp2p/repos",
                        "events_url": "https://api.github.com/users/libp2p/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/libp2p/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 66214665,
                        "node_id": "MDEwOlJlcG9zaXRvcnk2NjIxNDY2NQ==",
                        "name": "go-libp2p-kad-dht",
                        "full_name": "libp2p/go-libp2p-kad-dht",
                        "private": false,
                        "owner": {
                            "login": "libp2p",
                            "id": 14838238,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0ODM4MjM4",
                            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/libp2p",
                            "html_url": "https://github.com/libp2p",
                            "followers_url": "https://api.github.com/users/libp2p/followers",
                            "following_url": "https://api.github.com/users/libp2p/following{/other_user}",
                            "gists_url": "https://api.github.com/users/libp2p/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/libp2p/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/libp2p/subscriptions",
                            "organizations_url": "https://api.github.com/users/libp2p/orgs",
                            "repos_url": "https://api.github.com/users/libp2p/repos",
                            "events_url": "https://api.github.com/users/libp2p/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/libp2p/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/libp2p/go-libp2p-kad-dht",
                        "description": "A Kademlia DHT implementation on go-libp2p",
                        "fork": false,
                        "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                        "forks_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/forks",
                        "keys_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/teams",
                        "hooks_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/hooks",
                        "issue_events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/events",
                        "assignees_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/tags",
                        "blobs_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/languages",
                        "stargazers_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/stargazers",
                        "contributors_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/contributors",
                        "subscribers_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/subscribers",
                        "subscription_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/subscription",
                        "commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/merges",
                        "archive_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/downloads",
                        "issues_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/labels{/name}",
                        "releases_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/deployments",
                        "created_at": "2016-08-21T18:40:35Z",
                        "updated_at": "2023-10-02T15:30:28Z",
                        "pushed_at": "2023-10-02T13:05:14Z",
                        "git_url": "git://github.com/libp2p/go-libp2p-kad-dht.git",
                        "ssh_url": "git@github.com:libp2p/go-libp2p-kad-dht.git",
                        "clone_url": "https://github.com/libp2p/go-libp2p-kad-dht.git",
                        "svn_url": "https://github.com/libp2p/go-libp2p-kad-dht",
                        "homepage": "https://github.com/libp2p/specs/tree/master/kad-dht",
                        "size": 3728,
                        "stargazers_count": 488,
                        "watchers_count": 488,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": false,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 211,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 97,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "dht",
                            "ipfs",
                            "kad-dht",
                            "libp2p"
                        ],
                        "visibility": "public",
                        "forks": 211,
                        "open_issues": 97,
                        "watchers": 488,
                        "default_branch": "master"
                    }
                },
                "base": {
                    "label": "libp2p:v2-develop",
                    "ref": "v2-develop",
                    "sha": "0e628c067a0da58514a08e96a279346cb61be7e8",
                    "user": {
                        "login": "libp2p",
                        "id": 14838238,
                        "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0ODM4MjM4",
                        "avatar_url": "https://avatars.githubusercontent.com/u/14838238?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/libp2p",
                        "html_url": "https://github.com/libp2p",
                        "followers_url": "https://api.github.com/users/libp2p/followers",
                        "following_url": "https://api.github.com/users/libp2p/following{/other_user}",
                        "gists_url": "https://api.github.com/users/libp2p/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/libp2p/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/libp2p/subscriptions",
                        "organizations_url": "https://api.github.com/users/libp2p/orgs",
                        "repos_url": "https://api.github.com/users/libp2p/repos",
                        "events_url": "https://api.github.com/users/libp2p/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/libp2p/received_events",
                        "type": "Organization",
                        "site_admin": false
                    },
                    "repo": {
                        "id": 66214665,
                        "node_id": "MDEwOlJlcG9zaXRvcnk2NjIxNDY2NQ==",
                        "name": "go-libp2p-kad-dht",
                        "full_name": "libp2p/go-libp2p-kad-dht",
                        "private": false,
                        "owner": {
                            "login": "libp2p",
                            "id": 14838238,
                            "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0ODM4MjM4",
                            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?v=4",
                            "gravatar_id": "",
                            "url": "https://api.github.com/users/libp2p",
                            "html_url": "https://github.com/libp2p",
                            "followers_url": "https://api.github.com/users/libp2p/followers",
                            "following_url": "https://api.github.com/users/libp2p/following{/other_user}",
                            "gists_url": "https://api.github.com/users/libp2p/gists{/gist_id}",
                            "starred_url": "https://api.github.com/users/libp2p/starred{/owner}{/repo}",
                            "subscriptions_url": "https://api.github.com/users/libp2p/subscriptions",
                            "organizations_url": "https://api.github.com/users/libp2p/orgs",
                            "repos_url": "https://api.github.com/users/libp2p/repos",
                            "events_url": "https://api.github.com/users/libp2p/events{/privacy}",
                            "received_events_url": "https://api.github.com/users/libp2p/received_events",
                            "type": "Organization",
                            "site_admin": false
                        },
                        "html_url": "https://github.com/libp2p/go-libp2p-kad-dht",
                        "description": "A Kademlia DHT implementation on go-libp2p",
                        "fork": false,
                        "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                        "forks_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/forks",
                        "keys_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/keys{/key_id}",
                        "collaborators_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/collaborators{/collaborator}",
                        "teams_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/teams",
                        "hooks_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/hooks",
                        "issue_events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/events{/number}",
                        "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/events",
                        "assignees_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/assignees{/user}",
                        "branches_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/branches{/branch}",
                        "tags_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/tags",
                        "blobs_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/blobs{/sha}",
                        "git_tags_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/tags{/sha}",
                        "git_refs_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/refs{/sha}",
                        "trees_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/trees{/sha}",
                        "statuses_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/statuses/{sha}",
                        "languages_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/languages",
                        "stargazers_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/stargazers",
                        "contributors_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/contributors",
                        "subscribers_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/subscribers",
                        "subscription_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/subscription",
                        "commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/commits{/sha}",
                        "git_commits_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/git/commits{/sha}",
                        "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/comments{/number}",
                        "issue_comment_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments{/number}",
                        "contents_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/contents/{+path}",
                        "compare_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/compare/{base}...{head}",
                        "merges_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/merges",
                        "archive_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/{archive_format}{/ref}",
                        "downloads_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/downloads",
                        "issues_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues{/number}",
                        "pulls_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls{/number}",
                        "milestones_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/milestones{/number}",
                        "notifications_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/notifications{?since,all,participating}",
                        "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/labels{/name}",
                        "releases_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/releases{/id}",
                        "deployments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/deployments",
                        "created_at": "2016-08-21T18:40:35Z",
                        "updated_at": "2023-10-02T15:30:28Z",
                        "pushed_at": "2023-10-02T13:05:14Z",
                        "git_url": "git://github.com/libp2p/go-libp2p-kad-dht.git",
                        "ssh_url": "git@github.com:libp2p/go-libp2p-kad-dht.git",
                        "clone_url": "https://github.com/libp2p/go-libp2p-kad-dht.git",
                        "svn_url": "https://github.com/libp2p/go-libp2p-kad-dht",
                        "homepage": "https://github.com/libp2p/specs/tree/master/kad-dht",
                        "size": 3728,
                        "stargazers_count": 488,
                        "watchers_count": 488,
                        "language": "Go",
                        "has_issues": true,
                        "has_projects": false,
                        "has_downloads": true,
                        "has_wiki": false,
                        "has_pages": false,
                        "has_discussions": false,
                        "forks_count": 211,
                        "mirror_url": null,
                        "archived": false,
                        "disabled": false,
                        "open_issues_count": 97,
                        "license": {
                            "key": "mit",
                            "name": "MIT License",
                            "spdx_id": "MIT",
                            "url": "https://api.github.com/licenses/mit",
                            "node_id": "MDc6TGljZW5zZTEz"
                        },
                        "allow_forking": true,
                        "is_template": false,
                        "web_commit_signoff_required": false,
                        "topics": [
                            "dht",
                            "ipfs",
                            "kad-dht",
                            "libp2p"
                        ],
                        "visibility": "public",
                        "forks": 211,
                        "open_issues": 97,
                        "watchers": 488,
                        "default_branch": "master"
                    }
                },
                "_links": {
                    "self": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/951"
                    },
                    "html": {
                        "href": "https://github.com/libp2p/go-libp2p-kad-dht/pull/951"
                    },
                    "issue": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/951"
                    },
                    "comments": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/951/comments"
                    },
                    "review_comments": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/951/comments"
                    },
                    "review_comment": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/comments{/number}"
                    },
                    "commits": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/951/commits"
                    },
                    "statuses": {
                        "href": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/statuses/360488a78f90cce87b9cea1870190f6bb0f41b37"
                    }
                },
                "author_association": "CONTRIBUTOR",
                "auto_merge": null,
                "active_lock_reason": null,
                "merged": false,
                "mergeable": true,
                "rebaseable": true,
                "mergeable_state": "unstable",
                "merged_by": null,
                "comments": 2,
                "review_comments": 0,
                "maintainer_can_modify": false,
                "commits": 1,
                "additions": 372,
                "deletions": 11,
                "changed_files": 9
            }
        },
        "public": true,
        "created_at": "2023-10-03T14:53:54Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32281688110",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 11836793,
            "login": "dennis-tra",
            "display_login": "dennis-tra",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dennis-tra",
            "avatar_url": "https://avatars.githubusercontent.com/u/11836793?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/951",
                "repository_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/951/labels{/name}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/951/comments",
                "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/951/events",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/951",
                "id": 1917792056,
                "node_id": "PR_kwDOA_JbCc5bdYON",
                "number": 951,
                "title": "WIP: Accelerated DHT (crawling functionality)",
                "user": {
                    "login": "dennis-tra",
                    "id": 11836793,
                    "node_id": "MDQ6VXNlcjExODM2Nzkz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/11836793?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/dennis-tra",
                    "html_url": "https://github.com/dennis-tra",
                    "followers_url": "https://api.github.com/users/dennis-tra/followers",
                    "following_url": "https://api.github.com/users/dennis-tra/following{/other_user}",
                    "gists_url": "https://api.github.com/users/dennis-tra/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/dennis-tra/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/dennis-tra/subscriptions",
                    "organizations_url": "https://api.github.com/users/dennis-tra/orgs",
                    "repos_url": "https://api.github.com/users/dennis-tra/repos",
                    "events_url": "https://api.github.com/users/dennis-tra/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/dennis-tra/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 5935480943,
                        "node_id": "LA_kwDOA_JbCc8AAAABYchAbw",
                        "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/labels/v2",
                        "name": "v2",
                        "color": "F803C9",
                        "default": false,
                        "description": "All issues related to the v2 rewrite"
                    }
                ],
                "state": "closed",
                "locked": false,
                "assignee": {
                    "login": "dennis-tra",
                    "id": 11836793,
                    "node_id": "MDQ6VXNlcjExODM2Nzkz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/11836793?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/dennis-tra",
                    "html_url": "https://github.com/dennis-tra",
                    "followers_url": "https://api.github.com/users/dennis-tra/followers",
                    "following_url": "https://api.github.com/users/dennis-tra/following{/other_user}",
                    "gists_url": "https://api.github.com/users/dennis-tra/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/dennis-tra/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/dennis-tra/subscriptions",
                    "organizations_url": "https://api.github.com/users/dennis-tra/orgs",
                    "repos_url": "https://api.github.com/users/dennis-tra/repos",
                    "events_url": "https://api.github.com/users/dennis-tra/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/dennis-tra/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "dennis-tra",
                        "id": 11836793,
                        "node_id": "MDQ6VXNlcjExODM2Nzkz",
                        "avatar_url": "https://avatars.githubusercontent.com/u/11836793?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/dennis-tra",
                        "html_url": "https://github.com/dennis-tra",
                        "followers_url": "https://api.github.com/users/dennis-tra/followers",
                        "following_url": "https://api.github.com/users/dennis-tra/following{/other_user}",
                        "gists_url": "https://api.github.com/users/dennis-tra/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/dennis-tra/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/dennis-tra/subscriptions",
                        "organizations_url": "https://api.github.com/users/dennis-tra/orgs",
                        "repos_url": "https://api.github.com/users/dennis-tra/repos",
                        "events_url": "https://api.github.com/users/dennis-tra/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/dennis-tra/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "milestone": null,
                "comments": 2,
                "created_at": "2023-09-28T15:31:00Z",
                "updated_at": "2023-10-03T14:53:53Z",
                "closed_at": "2023-10-03T14:53:52Z",
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "draft": true,
                "pull_request": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/951",
                    "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/951",
                    "diff_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/951.diff",
                    "patch_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/951.patch",
                    "merged_at": null
                },
                "body": "fixes #916 ",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/951/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/951/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1745147920",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/951#issuecomment-1745147920",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/951",
                "id": 1745147920,
                "node_id": "IC_kwDOA_JbCc5oBNgQ",
                "user": {
                    "login": "dennis-tra",
                    "id": 11836793,
                    "node_id": "MDQ6VXNlcjExODM2Nzkz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/11836793?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/dennis-tra",
                    "html_url": "https://github.com/dennis-tra",
                    "followers_url": "https://api.github.com/users/dennis-tra/followers",
                    "following_url": "https://api.github.com/users/dennis-tra/following{/other_user}",
                    "gists_url": "https://api.github.com/users/dennis-tra/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/dennis-tra/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/dennis-tra/subscriptions",
                    "organizations_url": "https://api.github.com/users/dennis-tra/orgs",
                    "repos_url": "https://api.github.com/users/dennis-tra/repos",
                    "events_url": "https://api.github.com/users/dennis-tra/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/dennis-tra/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-03T14:53:52Z",
                "updated_at": "2023-10-03T14:53:52Z",
                "author_association": "CONTRIBUTOR",
                "body": "Replaced by: https://github.com/plprobelab/zikade/pull/45",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1745147920/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-03T14:53:53Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32257018929",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 18375,
            "login": "iand",
            "display_login": "iand",
            "gravatar_id": "",
            "url": "https://api.github.com/users/iand",
            "avatar_url": "https://avatars.githubusercontent.com/u/18375?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/864",
                "repository_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/864/labels{/name}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/864/comments",
                "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/864/events",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/864",
                "id": 1849896522,
                "node_id": "PR_kwDOA_JbCc5X45Q3",
                "number": 864,
                "title": "go-libp2p-kad-dht version 2",
                "user": {
                    "login": "dennis-tra",
                    "id": 11836793,
                    "node_id": "MDQ6VXNlcjExODM2Nzkz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/11836793?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/dennis-tra",
                    "html_url": "https://github.com/dennis-tra",
                    "followers_url": "https://api.github.com/users/dennis-tra/followers",
                    "following_url": "https://api.github.com/users/dennis-tra/following{/other_user}",
                    "gists_url": "https://api.github.com/users/dennis-tra/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/dennis-tra/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/dennis-tra/subscriptions",
                    "organizations_url": "https://api.github.com/users/dennis-tra/orgs",
                    "repos_url": "https://api.github.com/users/dennis-tra/repos",
                    "events_url": "https://api.github.com/users/dennis-tra/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/dennis-tra/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 5935480943,
                        "node_id": "LA_kwDOA_JbCc8AAAABYchAbw",
                        "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/labels/v2",
                        "name": "v2",
                        "color": "F803C9",
                        "default": false,
                        "description": "All issues related to the v2 rewrite"
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 5,
                "created_at": "2023-08-14T14:26:25Z",
                "updated_at": "2023-10-02T19:04:24Z",
                "closed_at": null,
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "draft": true,
                "pull_request": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/864",
                    "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/864",
                    "diff_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/864.diff",
                    "patch_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/864.patch",
                    "merged_at": null
                },
                "body": "This is a draft pull request that shows the changes of version 2 to the go-libp2p-kad-dht repository.",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/864/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/864/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1743598814",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/864#issuecomment-1743598814",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/864",
                "id": 1743598814,
                "node_id": "IC_kwDOA_JbCc5n7TTe",
                "user": {
                    "login": "iand",
                    "id": 18375,
                    "node_id": "MDQ6VXNlcjE4Mzc1",
                    "avatar_url": "https://avatars.githubusercontent.com/u/18375?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/iand",
                    "html_url": "https://github.com/iand",
                    "followers_url": "https://api.github.com/users/iand/followers",
                    "following_url": "https://api.github.com/users/iand/following{/other_user}",
                    "gists_url": "https://api.github.com/users/iand/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/iand/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/iand/subscriptions",
                    "organizations_url": "https://api.github.com/users/iand/orgs",
                    "repos_url": "https://api.github.com/users/iand/repos",
                    "events_url": "https://api.github.com/users/iand/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/iand/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-02T19:04:24Z",
                "updated_at": "2023-10-02T19:04:24Z",
                "author_association": "NONE",
                "body": "Once https://github.com/libp2p/go-libp2p-kad-dht/issues/954 is complete this PR will be closed and the v2-develop branch deleted.",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1743598814/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-02T19:04:25Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32257004812",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 18375,
            "login": "iand",
            "display_login": "iand",
            "gravatar_id": "",
            "url": "https://api.github.com/users/iand",
            "avatar_url": "https://avatars.githubusercontent.com/u/18375?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/947",
                "repository_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/947/labels{/name}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/947/comments",
                "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/947/events",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/947",
                "id": 1917437003,
                "node_id": "PR_kwDOA_JbCc5bcKC9",
                "number": 947,
                "title": "Add RoutingDHT that implements the routing.Routing interface",
                "user": {
                    "login": "dennis-tra",
                    "id": 11836793,
                    "node_id": "MDQ6VXNlcjExODM2Nzkz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/11836793?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/dennis-tra",
                    "html_url": "https://github.com/dennis-tra",
                    "followers_url": "https://api.github.com/users/dennis-tra/followers",
                    "following_url": "https://api.github.com/users/dennis-tra/following{/other_user}",
                    "gists_url": "https://api.github.com/users/dennis-tra/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/dennis-tra/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/dennis-tra/subscriptions",
                    "organizations_url": "https://api.github.com/users/dennis-tra/orgs",
                    "repos_url": "https://api.github.com/users/dennis-tra/repos",
                    "events_url": "https://api.github.com/users/dennis-tra/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/dennis-tra/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 5935480943,
                        "node_id": "LA_kwDOA_JbCc8AAAABYchAbw",
                        "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/labels/v2",
                        "name": "v2",
                        "color": "F803C9",
                        "default": false,
                        "description": "All issues related to the v2 rewrite"
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 3,
                "created_at": "2023-09-28T12:30:10Z",
                "updated_at": "2023-10-02T19:03:46Z",
                "closed_at": null,
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "draft": false,
                "pull_request": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/947",
                    "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/947",
                    "diff_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/947.diff",
                    "patch_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/947.patch",
                    "merged_at": null
                },
                "body": "Not sure I like that. It would also be good to point to the concerns that people have with the routing.Routing interface. This makes the tests look a little less nice unless we let the topology solely operate on `RoutingDHT`'s.\r\n\r\nfixes #929",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/947/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/947/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1743598006",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/947#issuecomment-1743598006",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/947",
                "id": 1743598006,
                "node_id": "IC_kwDOA_JbCc5n7TG2",
                "user": {
                    "login": "iand",
                    "id": 18375,
                    "node_id": "MDQ6VXNlcjE4Mzc1",
                    "avatar_url": "https://avatars.githubusercontent.com/u/18375?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/iand",
                    "html_url": "https://github.com/iand",
                    "followers_url": "https://api.github.com/users/iand/followers",
                    "following_url": "https://api.github.com/users/iand/following{/other_user}",
                    "gists_url": "https://api.github.com/users/iand/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/iand/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/iand/subscriptions",
                    "organizations_url": "https://api.github.com/users/iand/orgs",
                    "repos_url": "https://api.github.com/users/iand/repos",
                    "events_url": "https://api.github.com/users/iand/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/iand/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-02T19:03:46Z",
                "updated_at": "2023-10-02T19:03:46Z",
                "author_association": "NONE",
                "body": "As per https://github.com/libp2p/go-libp2p-kad-dht/issues/954 this needs to be applied to zikade",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1743598006/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-02T19:03:47Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32257001203",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 18375,
            "login": "iand",
            "display_login": "iand",
            "gravatar_id": "",
            "url": "https://api.github.com/users/iand",
            "avatar_url": "https://avatars.githubusercontent.com/u/18375?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/951",
                "repository_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/951/labels{/name}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/951/comments",
                "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/951/events",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/951",
                "id": 1917792056,
                "node_id": "PR_kwDOA_JbCc5bdYON",
                "number": 951,
                "title": "WIP: Accelerated DHT (crawling functionality)",
                "user": {
                    "login": "dennis-tra",
                    "id": 11836793,
                    "node_id": "MDQ6VXNlcjExODM2Nzkz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/11836793?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/dennis-tra",
                    "html_url": "https://github.com/dennis-tra",
                    "followers_url": "https://api.github.com/users/dennis-tra/followers",
                    "following_url": "https://api.github.com/users/dennis-tra/following{/other_user}",
                    "gists_url": "https://api.github.com/users/dennis-tra/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/dennis-tra/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/dennis-tra/subscriptions",
                    "organizations_url": "https://api.github.com/users/dennis-tra/orgs",
                    "repos_url": "https://api.github.com/users/dennis-tra/repos",
                    "events_url": "https://api.github.com/users/dennis-tra/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/dennis-tra/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 5935480943,
                        "node_id": "LA_kwDOA_JbCc8AAAABYchAbw",
                        "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/labels/v2",
                        "name": "v2",
                        "color": "F803C9",
                        "default": false,
                        "description": "All issues related to the v2 rewrite"
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": {
                    "login": "dennis-tra",
                    "id": 11836793,
                    "node_id": "MDQ6VXNlcjExODM2Nzkz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/11836793?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/dennis-tra",
                    "html_url": "https://github.com/dennis-tra",
                    "followers_url": "https://api.github.com/users/dennis-tra/followers",
                    "following_url": "https://api.github.com/users/dennis-tra/following{/other_user}",
                    "gists_url": "https://api.github.com/users/dennis-tra/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/dennis-tra/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/dennis-tra/subscriptions",
                    "organizations_url": "https://api.github.com/users/dennis-tra/orgs",
                    "repos_url": "https://api.github.com/users/dennis-tra/repos",
                    "events_url": "https://api.github.com/users/dennis-tra/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/dennis-tra/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "assignees": [
                    {
                        "login": "dennis-tra",
                        "id": 11836793,
                        "node_id": "MDQ6VXNlcjExODM2Nzkz",
                        "avatar_url": "https://avatars.githubusercontent.com/u/11836793?v=4",
                        "gravatar_id": "",
                        "url": "https://api.github.com/users/dennis-tra",
                        "html_url": "https://github.com/dennis-tra",
                        "followers_url": "https://api.github.com/users/dennis-tra/followers",
                        "following_url": "https://api.github.com/users/dennis-tra/following{/other_user}",
                        "gists_url": "https://api.github.com/users/dennis-tra/gists{/gist_id}",
                        "starred_url": "https://api.github.com/users/dennis-tra/starred{/owner}{/repo}",
                        "subscriptions_url": "https://api.github.com/users/dennis-tra/subscriptions",
                        "organizations_url": "https://api.github.com/users/dennis-tra/orgs",
                        "repos_url": "https://api.github.com/users/dennis-tra/repos",
                        "events_url": "https://api.github.com/users/dennis-tra/events{/privacy}",
                        "received_events_url": "https://api.github.com/users/dennis-tra/received_events",
                        "type": "User",
                        "site_admin": false
                    }
                ],
                "milestone": null,
                "comments": 1,
                "created_at": "2023-09-28T15:31:00Z",
                "updated_at": "2023-10-02T19:03:37Z",
                "closed_at": null,
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "draft": true,
                "pull_request": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/951",
                    "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/951",
                    "diff_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/951.diff",
                    "patch_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/951.patch",
                    "merged_at": null
                },
                "body": "fixes #916 ",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/951/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/951/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1743597819",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/951#issuecomment-1743597819",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/951",
                "id": 1743597819,
                "node_id": "IC_kwDOA_JbCc5n7TD7",
                "user": {
                    "login": "iand",
                    "id": 18375,
                    "node_id": "MDQ6VXNlcjE4Mzc1",
                    "avatar_url": "https://avatars.githubusercontent.com/u/18375?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/iand",
                    "html_url": "https://github.com/iand",
                    "followers_url": "https://api.github.com/users/iand/followers",
                    "following_url": "https://api.github.com/users/iand/following{/other_user}",
                    "gists_url": "https://api.github.com/users/iand/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/iand/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/iand/subscriptions",
                    "organizations_url": "https://api.github.com/users/iand/orgs",
                    "repos_url": "https://api.github.com/users/iand/repos",
                    "events_url": "https://api.github.com/users/iand/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/iand/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-02T19:03:37Z",
                "updated_at": "2023-10-02T19:03:37Z",
                "author_association": "NONE",
                "body": "As per https://github.com/libp2p/go-libp2p-kad-dht/issues/954 this needs to be applied to zikade",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1743597819/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-02T19:03:38Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32256997789",
        "type": "IssueCommentEvent",
        "actor": {
            "id": 18375,
            "login": "iand",
            "display_login": "iand",
            "gravatar_id": "",
            "url": "https://api.github.com/users/iand",
            "avatar_url": "https://avatars.githubusercontent.com/u/18375?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "created",
            "issue": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/955",
                "repository_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/955/labels{/name}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/955/comments",
                "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/955/events",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/955",
                "id": 1919540625,
                "node_id": "PR_kwDOA_JbCc5bjUQY",
                "number": 955,
                "title": "fix: flaky test by skipping connectivity checks",
                "user": {
                    "login": "dennis-tra",
                    "id": 11836793,
                    "node_id": "MDQ6VXNlcjExODM2Nzkz",
                    "avatar_url": "https://avatars.githubusercontent.com/u/11836793?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/dennis-tra",
                    "html_url": "https://github.com/dennis-tra",
                    "followers_url": "https://api.github.com/users/dennis-tra/followers",
                    "following_url": "https://api.github.com/users/dennis-tra/following{/other_user}",
                    "gists_url": "https://api.github.com/users/dennis-tra/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/dennis-tra/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/dennis-tra/subscriptions",
                    "organizations_url": "https://api.github.com/users/dennis-tra/orgs",
                    "repos_url": "https://api.github.com/users/dennis-tra/repos",
                    "events_url": "https://api.github.com/users/dennis-tra/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/dennis-tra/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 5935480943,
                        "node_id": "LA_kwDOA_JbCc8AAAABYchAbw",
                        "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/labels/v2",
                        "name": "v2",
                        "color": "F803C9",
                        "default": false,
                        "description": "All issues related to the v2 rewrite"
                    }
                ],
                "state": "open",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 2,
                "created_at": "2023-09-29T15:58:17Z",
                "updated_at": "2023-10-02T19:03:28Z",
                "closed_at": null,
                "author_association": "CONTRIBUTOR",
                "active_lock_reason": null,
                "draft": true,
                "pull_request": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/pulls/955",
                    "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/955",
                    "diff_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/955.diff",
                    "patch_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/955.patch",
                    "merged_at": null
                },
                "body": "By skipping connectivity checks we reduce the chances of simultaneously opening a stream that will block connection establishment.\r\n\r\nContext: https://github.com/libp2p/go-libp2p/issues/2589",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/955/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/955/timeline",
                "performed_via_github_app": null,
                "state_reason": null
            },
            "comment": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1743597634",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/pull/955#issuecomment-1743597634",
                "issue_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/955",
                "id": 1743597634,
                "node_id": "IC_kwDOA_JbCc5n7TBC",
                "user": {
                    "login": "iand",
                    "id": 18375,
                    "node_id": "MDQ6VXNlcjE4Mzc1",
                    "avatar_url": "https://avatars.githubusercontent.com/u/18375?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/iand",
                    "html_url": "https://github.com/iand",
                    "followers_url": "https://api.github.com/users/iand/followers",
                    "following_url": "https://api.github.com/users/iand/following{/other_user}",
                    "gists_url": "https://api.github.com/users/iand/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/iand/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/iand/subscriptions",
                    "organizations_url": "https://api.github.com/users/iand/orgs",
                    "repos_url": "https://api.github.com/users/iand/repos",
                    "events_url": "https://api.github.com/users/iand/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/iand/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "created_at": "2023-10-02T19:03:28Z",
                "updated_at": "2023-10-02T19:03:28Z",
                "author_association": "NONE",
                "body": "As per https://github.com/libp2p/go-libp2p-kad-dht/issues/954 this needs to be applied to zikade",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/comments/1743597634/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "performed_via_github_app": null
            }
        },
        "public": true,
        "created_at": "2023-10-02T19:03:29Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    },
    {
        "id": "32252277749",
        "type": "IssuesEvent",
        "actor": {
            "id": 18375,
            "login": "iand",
            "display_login": "iand",
            "gravatar_id": "",
            "url": "https://api.github.com/users/iand",
            "avatar_url": "https://avatars.githubusercontent.com/u/18375?"
        },
        "repo": {
            "id": 66214665,
            "name": "libp2p/go-libp2p-kad-dht",
            "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht"
        },
        "payload": {
            "action": "closed",
            "issue": {
                "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/892",
                "repository_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht",
                "labels_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/892/labels{/name}",
                "comments_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/892/comments",
                "events_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/892/events",
                "html_url": "https://github.com/libp2p/go-libp2p-kad-dht/issues/892",
                "id": 1892153040,
                "node_id": "I_kwDOA_JbCc5wx_bQ",
                "number": 892,
                "title": "V2: Review usage of mockable clock in DHT",
                "user": {
                    "login": "iand",
                    "id": 18375,
                    "node_id": "MDQ6VXNlcjE4Mzc1",
                    "avatar_url": "https://avatars.githubusercontent.com/u/18375?v=4",
                    "gravatar_id": "",
                    "url": "https://api.github.com/users/iand",
                    "html_url": "https://github.com/iand",
                    "followers_url": "https://api.github.com/users/iand/followers",
                    "following_url": "https://api.github.com/users/iand/following{/other_user}",
                    "gists_url": "https://api.github.com/users/iand/gists{/gist_id}",
                    "starred_url": "https://api.github.com/users/iand/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/iand/subscriptions",
                    "organizations_url": "https://api.github.com/users/iand/orgs",
                    "repos_url": "https://api.github.com/users/iand/repos",
                    "events_url": "https://api.github.com/users/iand/events{/privacy}",
                    "received_events_url": "https://api.github.com/users/iand/received_events",
                    "type": "User",
                    "site_admin": false
                },
                "labels": [
                    {
                        "id": 5935480943,
                        "node_id": "LA_kwDOA_JbCc8AAAABYchAbw",
                        "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/labels/v2",
                        "name": "v2",
                        "color": "F803C9",
                        "default": false,
                        "description": "All issues related to the v2 rewrite"
                    }
                ],
                "state": "closed",
                "locked": false,
                "assignee": null,
                "assignees": [],
                "milestone": null,
                "comments": 2,
                "created_at": "2023-09-12T10:07:41Z",
                "updated_at": "2023-10-02T15:45:24Z",
                "closed_at": "2023-10-02T15:45:23Z",
                "author_association": "NONE",
                "active_lock_reason": null,
                "body": "The DHT allows a mock clock to be specified in configuration which can be used to create tests that control the passage of time. This causes problems when interacting with lower level libp2p components that are not aware of the fake clock. For example, setting deadlines using the clock results in times that are far in the past causing the stream to be immediately reset.\r\n\r\nExample: \r\nhttps://github.com/libp2p/go-libp2p-kad-dht/blob/v2-develop/v2/stream.go#L86-L88\r\n",
                "reactions": {
                    "url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/892/reactions",
                    "total_count": 0,
                    "+1": 0,
                    "-1": 0,
                    "laugh": 0,
                    "hooray": 0,
                    "confused": 0,
                    "heart": 0,
                    "rocket": 0,
                    "eyes": 0
                },
                "timeline_url": "https://api.github.com/repos/libp2p/go-libp2p-kad-dht/issues/892/timeline",
                "performed_via_github_app": null,
                "state_reason": "completed"
            }
        },
        "public": true,
        "created_at": "2023-10-02T15:45:24Z",
        "org": {
            "id": 14838238,
            "login": "libp2p",
            "gravatar_id": "",
            "url": "https://api.github.com/orgs/libp2p",
            "avatar_url": "https://avatars.githubusercontent.com/u/14838238?"
        }
    }
]